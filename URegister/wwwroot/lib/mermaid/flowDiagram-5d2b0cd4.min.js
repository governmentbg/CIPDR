import{p as St,f as $}from"./flowDb-1d600296.js";import{h as S,u as Lt,r as Et,p as _t,l as Tt,d as M,f as tt,G as Nt}from"./layout-df07420e.js";import{j as x,o as P,p as z,q as et,c as J,f as rt,l as R,r as V,t as At}from"./mermaid-d733041c.js";import{a as N,b as at,i as nt,c as _,e as st,d as it,s as Ct,f as It,g as Bt}from"./styles-472dd00e.js";import{l as Mt}from"./line-b0ce4b23.js";import"./index-c449e2c7.js";import"./edges-6be02a86.js";import"./createText-98e4790d.js";import"./svgDraw-8c7d5329.js";import"./array-2ff2c7a6.js";import"./constant-2fe7eae5.js";function Dt(t){if(t.ok)return t.text();throw new Error(t.status+" "+t.statusText)}function Rt(t,e){return fetch(t,e).then(Dt)}function Gt(r){return(t,e)=>Rt(t,e).then(t=>(new DOMParser).parseFromString(t,r))}var Pt=Gt("image/svg+xml"),Y={normal:Wt,vee:$t,undirected:Vt};function Ut(t){Y=t}function Wt(t,e,r,a){t=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");N(t,r[a+"Style"]),r[a+"Class"]&&t.attr("class",r[a+"Class"])}function $t(t,e,r,a){t=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");N(t,r[a+"Style"]),r[a+"Class"]&&t.attr("class",r[a+"Class"])}function Vt(t,e,r,a){t=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");N(t,r[a+"Style"]),r[a+"Class"]&&t.attr("class",r[a+"Class"])}function zt(t,e){return t.node().appendChild(e.label),N(t,e.labelStyle),t}function Yt(t,e){for(var r=t.append("text"),a=Ht(e.label).split(`
`),n=0;n<a.length;n++)r.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(a[n]);return N(r,e.labelStyle),r}function Ht(t){for(var e,r="",a=!1,n=0;n<t.length;++n)e=t[n],a?(r+="n"===e?`
`:e,a=!1):"\\"===e?a=!0:r+=e;return r}function K(t,e,r){var a,n=e.label,t=t.append("g"),i=(("svg"===e.labelType?zt:"string"!=typeof n||"html"===e.labelType?at:Yt)(t,e),t.node().getBBox());switch(r){case"top":a=-e.height/2;break;case"bottom":a=e.height/2-i.height;break;default:a=-i.height/2}return t.attr("transform","translate("+-i.width/2+","+a+")"),t}var H=function(t,r){var e=r.nodes().filter(function(t){return nt(r,t)}),t=t.selectAll("g.cluster").data(e,function(t){return t}),e=(_(t.exit(),r).style("opacity",0).remove(),t.enter().append("g").attr("class","cluster").attr("id",function(t){return r.node(t).id}).style("opacity",0).each(function(t){var t=r.node(t),e=x(this);x(this).append("rect"),K(e.append("g").attr("class","label"),t,t.clusterLabelPos)})),t=t.merge(e);return(t=_(t,r).style("opacity",1)).selectAll("rect").each(function(t){var t=r.node(t),e=x(this);N(e,t.style)}),t};function Xt(t){H=t}let X=function(t,a){var e=t.selectAll("g.edgeLabel").data(a.edges(),function(t){return st(t)}).classed("update",!0);return e.exit().remove(),e.enter().append("g").classed("edgeLabel",!0).style("opacity",0),(e=t.selectAll("g.edgeLabel")).each(function(t){var e=x(this),r=(e.select(".label").remove(),a.edge(t)),e=K(e,a.edge(t),0).classed("label",!0),t=e.node().getBBox();r.labelId&&e.attr("id",r.labelId),S(r,"width")||(r.width=t.width),S(r,"height")||(r.height=t.height)}),t=e.exit?e.exit():e.selectAll(null),_(t,a).style("opacity",0).remove(),e};function Ft(t){X=t}function O(t,e){return t.intersect(e)}var F=function(t,r,e){var t=t.selectAll("g.edgePath").data(r.edges(),function(t){return st(t)}).classed("update",!0),a=Zt(t,r),a=(Ot(t,r),void 0!==t.merge?t.merge(a):t);return _(a,r).style("opacity",1),a.each(function(t){var e=x(this),t=r.edge(t);t.elem=this,t.id&&e.attr("id",t.id),it(e,t.class,(e.classed("update")?"update ":"")+"edgePath")}),a.selectAll("path.path").each(function(t){var e=r.edge(t),t=(e.arrowheadId=Lt("arrowhead"),x(this).attr("marker-end",function(){return"url("+Qt(location.href,e.arrowheadId)+")"}).style("fill","none"));_(t,r).attr("d",function(t){return Jt(r,t)}),N(t,e.style)}),a.selectAll("defs *").remove(),a.selectAll("defs").each(function(t){t=r.edge(t);(0,e[t.arrowhead])(x(this),t.arrowheadId,t,"arrowhead")}),a};function qt(t){F=t}function Qt(t,e){return t.split("#")[0]+"#"+e}function Jt(t,e){var r=t.edge(e),a=t.node(e.v),t=t.node(e.w),e=r.points.slice(1,r.points.length-1);return e.unshift(O(a,e[0])),e.push(O(t,e[e.length-1])),ot(r,e)}function ot(t,e){var r=(Mt||Pt.line)().x(function(t){return t.x}).y(function(t){return t.y});return(r.curve||r.interpolate)(t.curve),r(e)}function Kt(t){var e=t.getBBox(),t=t.ownerSVGElement.getScreenCTM().inverse().multiply(t.getScreenCTM()).translate(e.width/2,e.height/2);return{x:t.e,y:t.f}}function Zt(t,a){t=t.enter().append("g").attr("class","edgePath").style("opacity",0);return t.append("path").attr("class","path").attr("d",function(t){var e=a.edge(t),r=a.node(t.v).elem;return ot(e,Et(e.points.length).map(function(){return Kt(r)}))}),t.append("defs"),t}function Ot(t,e){t=t.exit();_(t,e).style("opacity",0).remove()}var q=function(t,i,s){var e=i.nodes().filter(function(t){return!nt(i,t)}),e=t.selectAll("g.node").data(e,function(t){return t}).classed("update",!0);return e.exit().remove(),e.enter().append("g").attr("class","node").style("opacity",0),(e=t.selectAll("g.node")).each(function(t){var t=i.node(t),e=x(this),r=(it(e,t.class,(e.classed("update")?"update ":"")+"node"),e.select("g.label").remove(),e.append("g").attr("class","label")),a=K(r,t),n=s[t.shape],a=_t(a.node().getBBox(),"width","height"),e=(t.elem=this,t.id&&e.attr("id",t.id),t.labelId&&r.attr("id",t.labelId),S(t,"width")&&(a.width=t.width),S(t,"height")&&(a.height=t.height),a.width+=t.paddingLeft+t.paddingRight,a.height+=t.paddingTop+t.paddingBottom,r.attr("transform","translate("+(t.paddingLeft-t.paddingRight)/2+","+(t.paddingTop-t.paddingBottom)/2+")"),x(this)),r=(e.select(".label-container").remove(),n(e,a,t).classed("label-container",!0)),n=(N(r,t.style),r.node().getBBox());t.width=n.width,t.height=n.height}),t=e.exit?e.exit():e.selectAll(null),_(t,i).style("opacity",0).remove(),e};function jt(t){q=t}function te(t,e){var r=t.filter(function(){return!x(this).classed("update")});function a(t){t=e.node(t);return"translate("+t.x+","+t.y+")"}r.attr("transform",a),_(t,e).style("opacity",1).attr("transform",a),_(r.selectAll("rect"),e).attr("width",function(t){return e.node(t).width}).attr("height",function(t){return e.node(t).height}).attr("x",function(t){return-e.node(t).width/2}).attr("y",function(t){return-e.node(t).height/2})}function ee(t,e){function r(t){t=e.edge(t);return S(t,"x")?"translate("+t.x+","+t.y+")":""}t.filter(function(){return!x(this).classed("update")}).attr("transform",r),_(t,e).style("opacity",1).attr("transform",r)}function re(t,e){function r(t){t=e.node(t);return"translate("+t.x+","+t.y+")"}t.filter(function(){return!x(this).classed("update")}).attr("transform",r),_(t,e).style("opacity",1).attr("transform",r)}function lt(t,e,r,a){var n=t.x,t=t.y,i=n-a.x,s=t-a.y,o=Math.sqrt(e*e*s*s+r*r*i*i),i=Math.abs(e*r*i/o),e=(a.x<n&&(i=-i),Math.abs(e*r*s/o));return{x:n+i,y:t+(e=a.y<t?-e:e)}}function ae(t,e,r){return lt(t,e,e,r)}function ne(t,e,r,a){var n,i,s,o,l=e.y-t.y,d=t.x-e.x,c=e.x*t.y-t.x*e.y,h=l*r.x+d*r.y+c,u=l*a.x+d*a.y+c;if(!(0!=h&&0!=u&&j(h,u)||(n=a.y-r.y,i=r.x-a.x,s=a.x*r.y-r.x*a.y,h=n*t.x+i*t.y+s,u=n*e.x+i*e.y+s,0!==h&&0!==u&&j(h,u)||0===(o=l*i-n*d))))return r=Math.abs(o/2),{x:(a=d*s-i*c)<0?(a-r)/o:(a+r)/o,y:(a=n*c-l*s)<0?(a-r)/o:(a+r)/o}}function j(t,e){return 0<t*e}function T(t,e,a){var r=t.x,n=t.y,i=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;e.forEach(function(t){s=Math.min(s,t.x),o=Math.min(o,t.y)});for(var l=r-t.width/2-s,d=n-t.height/2-o,c=0;c<e.length;c++){var h=e[c],u=e[c<e.length-1?c+1:0],h=ne(t,a,{x:l+h.x,y:d+h.y},{x:l+u.x,y:d+u.y});h&&i.push(h)}return i.length?(1<i.length&&i.sort(function(t,e){var r=t.x-a.x,t=t.y-a.y,r=Math.sqrt(r*r+t*t),t=e.x-a.x,e=e.y-a.y,t=Math.sqrt(t*t+e*e);return r<t?-1:r===t?0:1}),i[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",t),t)}function Z(t,e){var r,a=t.x,n=t.y,i=e.x-a,e=e.y-n,s=t.width/2,t=t.height/2,t=Math.abs(e)*s>Math.abs(i)*t?(e<0&&(t=-t),r=0==e?0:t*i/e,t):(r=s=i<0?-s:s,0==i?0:s*e/i);return{x:a+r,y:n+t}}var Q={rect:ie,ellipse:oe,circle:le,diamond:ce};function se(t){Q=t}function ie(t,e,r){t=t.insert("rect",":first-child").attr("rx",r.rx).attr("ry",r.ry).attr("x",-e.width/2).attr("y",-e.height/2).attr("width",e.width).attr("height",e.height);return r.intersect=function(t){return Z(r,t)},t}function oe(t,e,r){var a=e.width/2,n=e.height/2,t=t.insert("ellipse",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("rx",a).attr("ry",n);return r.intersect=function(t){return lt(r,a,n,t)},t}function le(t,e,r){var a=Math.max(e.width,e.height)/2,t=t.insert("circle",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("r",a);return r.intersect=function(t){return ae(r,a,t)},t}function ce(t,e,r){var a=e.width*Math.SQRT2/2,e=e.height*Math.SQRT2/2,n=[{x:0,y:-e},{x:-a,y:0},{x:0,y:e},{x:a,y:0}],e=t.insert("polygon",":first-child").attr("points",n.map(function(t){return t.x+","+t.y}).join(" "));return r.intersect=function(t){return T(r,n,t)},e}function de(){function e(t,e){fe(e);var t=D(t,"output"),r=D(t,"clusters"),a=D(t,"edgePaths"),n=X(D(t,"edgeLabels"),e),t=q(D(t,"nodes"),e,Q);Tt(e),re(t,e),ee(n,e),F(a,e,Y),te(H(r,e),e),pe(e)}return e.createNodes=function(t){return arguments.length?(jt(t),e):q},e.createClusters=function(t){return arguments.length?(Xt(t),e):H},e.createEdgeLabels=function(t){return arguments.length?(Ft(t),e):X},e.createEdgePaths=function(t){return arguments.length?(qt(t),e):F},e.shapes=function(t){return arguments.length?(se(t),e):Q},e.arrows=function(t){return arguments.length?(Ut(t),e):Y},e}var he={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},ue={arrowhead:"normal",curve:P};function fe(r){r.nodes().forEach(function(t){var e=r.node(t);S(e,"label")||r.children(t).length||(e.label=t),S(e,"paddingX")&&M(e,{paddingLeft:e.paddingX,paddingRight:e.paddingX}),S(e,"paddingY")&&M(e,{paddingTop:e.paddingY,paddingBottom:e.paddingY}),S(e,"padding")&&M(e,{paddingLeft:e.padding,paddingRight:e.padding,paddingTop:e.padding,paddingBottom:e.padding}),M(e,he),tt(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(t){e[t]=Number(e[t])}),S(e,"width")&&(e._prevWidth=e.width),S(e,"height")&&(e._prevHeight=e.height)}),r.edges().forEach(function(t){t=r.edge(t);S(t,"label")||(t.label=""),M(t,ue)})}function pe(e){tt(e.nodes(),function(t){t=e.node(t);S(t,"_prevWidth")?t.width=t._prevWidth:delete t.width,S(t,"_prevHeight")?t.height=t._prevHeight:delete t.height,delete t._prevWidth,delete t._prevHeight})}function D(t,e){var r=t.select("g."+e);return r=r.empty()?t.append("g").attr("class",e):r}function ct(t,e,r){const a=e.width,n=e.height,i=.9*(a+n),s=[{x:i/2,y:0},{x:i,y:-i/2},{x:i/2,y:-i},{x:0,y:-i/2}],o=A(t,i,i,s);return r.intersect=function(t){return T(r,s,t)},o}function dt(t,e,r){const a=e.height,n=a/4,i=e.width+2*n,s=[{x:n,y:0},{x:i-n,y:0},{x:i,y:-a/2},{x:i-n,y:-a},{x:n,y:-a},{x:0,y:-a/2}],o=A(t,i,a,s);return r.intersect=function(t){return T(r,s,t)},o}function ht(t,e,r){const a=e.width,n=e.height,i=[{x:-n/2,y:0},{x:a,y:0},{x:a,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}],s=A(t,a,n,i);return r.intersect=function(t){return T(r,i,t)},s}function ut(t,e,r){const a=e.width,n=e.height,i=[{x:-2*n/6,y:0},{x:a-n/6,y:0},{x:a+2*n/6,y:-n},{x:n/6,y:-n}],s=A(t,a,n,i);return r.intersect=function(t){return T(r,i,t)},s}function ft(t,e,r){const a=e.width,n=e.height,i=[{x:2*n/6,y:0},{x:a+n/6,y:0},{x:a-2*n/6,y:-n},{x:-n/6,y:-n}],s=A(t,a,n,i);return r.intersect=function(t){return T(r,i,t)},s}function pt(t,e,r){const a=e.width,n=e.height,i=[{x:-2*n/6,y:0},{x:a+2*n/6,y:0},{x:a-n/6,y:-n},{x:n/6,y:-n}],s=A(t,a,n,i);return r.intersect=function(t){return T(r,i,t)},s}function vt(t,e,r){const a=e.width,n=e.height,i=[{x:n/6,y:0},{x:a-n/6,y:0},{x:a+2*n/6,y:-n},{x:-2*n/6,y:-n}],s=A(t,a,n,i);return r.intersect=function(t){return T(r,i,t)},s}function yt(t,e,r){const a=e.width,n=e.height,i=[{x:0,y:0},{x:a+n/2,y:0},{x:a,y:-n/2},{x:a+n/2,y:-n},{x:0,y:-n}],s=A(t,a,n,i);return r.intersect=function(t){return T(r,i,t)},s}function gt(t,e,r){var a=e.height,e=e.width+a/4,t=t.insert("rect",":first-child").attr("rx",a/2).attr("ry",a/2).attr("x",-e/2).attr("y",-a/2).attr("width",e).attr("height",a);return r.intersect=function(t){return Z(r,t)},t}function wt(t,e,r){const a=e.width,n=e.height,i=[{x:0,y:0},{x:a,y:0},{x:a,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],s=A(t,a,n,i);return r.intersect=function(t){return T(r,i,t)},s}function mt(t,e,n){const r=e.width,i=r/2,s=i/(2.5+r/50),a=e.height+s,o="M 0,"+s+" a "+i+","+s+" 0,0,0 "+r+" 0 a "+i+","+s+" 0,0,0 "+-r+" 0 l 0,"+a+" a "+i+","+s+" 0,0,0 "+r+" 0 l 0,"+-a,l=t.attr("label-offset-y",s).insert("path",":first-child").attr("d",o).attr("transform","translate("+-r/2+","+-(a/2+s)+")");return n.intersect=function(e){const r=Z(n,e),a=r.x-n.x;if(0!=i&&(Math.abs(a)<n.width/2||Math.abs(a)==n.width/2&&Math.abs(r.y-n.y)>n.height/2-s)){let t=s*s*(1-a*a/(i*i));0!=t&&(t=Math.sqrt(t)),t=s-t,0<e.y-n.y&&(t=-t),r.y+=t}return r},l}function ve(t){t.shapes().question=ct,t.shapes().hexagon=dt,t.shapes().stadium=gt,t.shapes().subroutine=wt,t.shapes().cylinder=mt,t.shapes().rect_left_inv_arrow=ht,t.shapes().lean_right=ut,t.shapes().lean_left=ft,t.shapes().trapezoid=pt,t.shapes().inv_trapezoid=vt,t.shapes().rect_right_inv_arrow=yt}function ye(t){t({question:ct}),t({hexagon:dt}),t({stadium:gt}),t({subroutine:wt}),t({cylinder:mt}),t({rect_left_inv_arrow:ht}),t({lean_right:ut}),t({lean_left:ft}),t({trapezoid:pt}),t({inv_trapezoid:vt}),t({rect_right_inv_arrow:yt})}function A(t,e,r,a){return t.insert("polygon",":first-child").attr("points",a.map(function(t){return t.x+","+t.y}).join(" ")).attr("transform","translate("+-e/2+","+r/2+")")}const ge={addToRender:ve,addToRenderV2:ye},xt={},we=function(t){for(const e of Object.keys(t))xt[e]=t[e]},bt=function(h,u,t,e,r,f){const p=e?e.select(`[id="${t}"]`):x(`[id="${t}"]`),g=r||document;Object.keys(h).forEach(function(t){const e=h[t];let r="default";0<e.classes.length&&(r=e.classes.join(" "));const a=z(e.styles);let n=void 0!==e.text?e.text:e.id,i;if(et(J().flowchart.htmlLabels)){t={label:n.replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)};(i=at(p,t).node()).parentNode.removeChild(i)}else{const l=g.createElementNS("http://www.w3.org/2000/svg","text");l.setAttribute("style",a.labelStyle.replace("color:","fill:"));for(const d of n.split(rt.lineBreakRegex)){const c=g.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),c.setAttribute("dy","1em"),c.setAttribute("x","1"),c.textContent=d,l.appendChild(c)}i=l}let s=0,o="";switch(e.type){case"round":s=5,o="rect";break;case"square":o="rect";break;case"diamond":o="question";break;case"hexagon":o="hexagon";break;case"odd":o="rect_left_inv_arrow";break;case"lean_right":o="lean_right";break;case"lean_left":o="lean_left";break;case"trapezoid":o="trapezoid";break;case"inv_trapezoid":o="inv_trapezoid";break;case"odd_right":o="rect_left_inv_arrow";break;case"circle":o="circle";break;case"ellipse":o="ellipse";break;case"stadium":o="stadium";break;case"subroutine":o="subroutine";break;case"cylinder":o="cylinder";break;default:o="rect"}R.warn("Adding node",e.id,e.domId),u.setNode(f.db.lookUpDomId(e.id),{labelType:"svg",labelStyle:a.labelStyle,shape:o,label:i,rx:s,ry:s,class:r,style:a.style,id:f.db.lookUpDomId(e.id)})})},kt=function(l,d,c){let h=0,u,f;var t;void 0!==l.defaultStyle&&(t=z(l.defaultStyle),u=t.style,f=t.labelStyle),l.forEach(function(t){h++;const e="L-"+t.start+"-"+t.end,r="LS-"+t.start,a="LE-"+t.end,n={};"arrow_open"===t.type?n.arrowhead="none":n.arrowhead="normal";let i="",s="";if(void 0!==t.style){var o=z(t.style);i=o.style,s=o.labelStyle}else switch(t.stroke){case"normal":i="fill:none",void 0!==u&&(i=u),void 0!==f&&(s=f);break;case"dotted":i="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":i=" stroke-width: 3.5px;fill:none"}n.style=i,n.labelStyle=s,void 0!==t.interpolate?n.curve=V(t.interpolate,P):void 0!==l.defaultInterpolate?n.curve=V(l.defaultInterpolate,P):n.curve=V(xt.curve,P),void 0===t.text?void 0!==t.style&&(n.arrowheadStyle="fill: #333"):(n.arrowheadStyle="fill: #333",n.labelpos="c",et(J().flowchart.htmlLabels)?(n.labelType="html",n.label=`<span id="L-${e}" class="edgeLabel L-${r}' L-${a}" style="${n.labelStyle}">${t.text.replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)}</span>`):(n.labelType="text",n.label=t.text.replace(rt.lineBreakRegex,`
`),void 0===t.style&&(n.style=n.style||"stroke: #333; stroke-width: 1.5px;fill:none"),n.labelStyle=n.labelStyle.replace("color:","fill:"))),n.id=e,n.class=r+" "+a,n.minlen=t.length||1,d.setEdge(c.db.lookUpDomId(t.start),c.db.lookUpDomId(t.end),n,h)})},me=function(t,e){return R.info("Extracting classes"),e.db.getClasses()},xe=function(t,o,e,l){R.info("Drawing flowchart");const{securityLevel:d,flowchart:r}=J();let a;"sandbox"===d&&(a=x("#i"+o));const c="sandbox"===d?x(a.nodes()[0].contentDocument.body):x("body"),h="sandbox"===d?a.nodes()[0].contentDocument:document;let n=l.db.getDirection();void 0===n&&(n="TD");const i=r.nodeSpacing||50,s=r.rankSpacing||50,u=new Nt({multigraph:!0,compound:!0}).setGraph({rankdir:n,nodesep:i,ranksep:s,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let f;var p=l.db.getSubGraphs();for(let t=p.length-1;0<=t;t--)f=p[t],l.db.addVertex(f.id,f.title,"group",void 0,f.classes);const g=l.db.getVertices();R.warn("Get vertices",g);var y=l.db.getEdges();let w=0;for(w=p.length-1;0<=w;w--){f=p[w],Ct("cluster").append("text");for(let t=0;t<f.nodes.length;t++)R.warn("Setting subgraph",f.nodes[t],l.db.lookUpDomId(f.nodes[t]),l.db.lookUpDomId(f.id)),u.setParent(l.db.lookUpDomId(f.nodes[t]),l.db.lookUpDomId(f.id))}bt(g,u,o,c,h,l),kt(y,u,l);const b=new de,m=(ge.addToRender(b),b.arrows().none=function(t,e,r,a){t=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");N(t,r[a+"Style"])},b.arrows().normal=function(t,e){t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")},c.select(`[id="${o}"]`)),v=c.select("#"+o+" g");for(b(v,u),v.selectAll("g.node").attr("title",function(){return l.db.getTooltip(this.id)}),l.db.indexNodes("subGraph"+w),w=0;w<p.length;w++)if("undefined"!==(f=p[w]).title){const k=h.querySelectorAll("#"+o+' [id="'+l.db.lookUpDomId(f.id)+'"] rect'),S=h.querySelectorAll("#"+o+' [id="'+l.db.lookUpDomId(f.id)+'"]'),_=k[0].x.baseVal.value,T=k[0].y.baseVal.value,A=k[0].width.baseVal.value,M=x(S[0]).select(".label");M.attr("transform",`translate(${_+A/2}, ${T+14})`),M.attr("id",o+"Text");for(let t=0;t<f.classes.length;t++)S[0].classList.add(f.classes[t])}if(!r.htmlLabels)for(const L of h.querySelectorAll('[id="'+o+'"] .edgeLabel .label')){const I=L.getBBox(),D=h.createElementNS("http://www.w3.org/2000/svg","rect");D.setAttribute("rx",0),D.setAttribute("ry",0),D.setAttribute("width",I.width),D.setAttribute("height",I.height),L.insertBefore(D,L.firstChild)}At(u,m,r.diagramPadding,r.useMaxWidth),Object.keys(g).forEach(function(t){const e=g[t];if(e.link){const r=c.select("#"+o+' [id="'+l.db.lookUpDomId(t)+'"]');if(r){const a=h.createElementNS("http://www.w3.org/2000/svg","a"),n=(a.setAttributeNS("http://www.w3.org/2000/svg","class",e.classes.join(" ")),a.setAttributeNS("http://www.w3.org/2000/svg","href",e.link),a.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===d?a.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):e.linkTarget&&a.setAttributeNS("http://www.w3.org/2000/svg","target",e.linkTarget),r.insert(function(){return a},":first-child")),i=r.select(".label-container"),s=(i&&n.append(function(){return i.node()}),r.select(".label"));s&&n.append(function(){return s.node()})}}})},be={setConf:we,addVertices:bt,addEdges:kt,getClasses:me,draw:xe},Me={parser:St,db:$,renderer:It,styles:Bt,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,be.setConf(t.flowchart),$.clear(),$.setGen("gen-1")}};export{Me as diagram};