import{a2 as constant,a3 as interpolateNumber,a4 as color,a5 as interpolateRgb,a6 as interpolateString}from"./mermaid-f185fde2.js";import{i as initRange}from"./init-cc95ec8e.js";function ascending(t,n){return null==t||null==n?NaN:t<n?-1:n<t?1:n<=t?0:NaN}function descending(t,n){return null==t||null==n?NaN:n<t?-1:t<n?1:t<=n?0:NaN}function bisector(r){let a,o,i;function c(t,n,r=0,e=t.length){if(r<e){if(0!==a(n,n))return e;do{var i=r+e>>>1;o(t[i],n)<0?r=1+i:e=i}while(r<e)}return r}return i=2!==r.length?(a=ascending,o=(t,n)=>ascending(r(t),n),(t,n)=>r(t)-n):(a=r===ascending||r===descending?r:zero,o=r),{left:c,center:function(t,n,r=0,e=t.length){return e=c(t,n,r,e-1),r<e&&i(t[e-1],n)>-i(t[e],n)?e-1:e},right:function(t,n,r=0,e=t.length){if(r<e){if(0!==a(n,n))return e;do{var i=r+e>>>1;o(t[i],n)<=0?r=1+i:e=i}while(r<e)}return r}}}function zero(){return 0}function number$1(t){return null===t?NaN:+t}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right,bisect=(bisector(number$1).center,bisectRight);var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function ticks(r,e,t){var n,i,a,o,c=-1;if(t=+t,(r=+r)===(e=+e)&&0<t)return[r];if((n=e<r)&&(i=r,r=e,e=i),0===(o=tickIncrement(r,e,t))||!isFinite(o))return[];if(0<o){let t=Math.round(r/o),n=Math.round(e/o);for(t*o<r&&++t,n*o>e&&--n,a=new Array(i=n-t+1);++c<i;)a[c]=(t+c)*o}else{o=-o;let t=Math.round(r*o),n=Math.round(e*o);for(t/o<r&&++t,n/o>e&&--n,a=new Array(i=n-t+1);++c<i;)a[c]=(t+c)/o}return n&&a.reverse(),a}function tickIncrement(t,n,r){n=(n-t)/Math.max(0,r),t=Math.floor(Math.log(n)/Math.LN10),r=n/Math.pow(10,t);return 0<=t?(e10<=r?10:e5<=r?5:e2<=r?2:1)*Math.pow(10,t):-Math.pow(10,-t)/(e10<=r?10:e5<=r?5:e2<=r?2:1)}function tickStep(t,n,r){var r=Math.abs(n-t)/Math.max(0,r),e=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),r=r/e;return e10<=r?e*=10:e5<=r?e*=5:e2<=r&&(e*=2),n<t?-e:e}function numberArray(n,r){r=r||[];var e,i=n?Math.min(r.length,n.length):0,a=r.slice();return function(t){for(e=0;e<i;++e)a[e]=n[e]*(1-t)+r[e]*t;return a}}function isNumberArray(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function genericArray(t,n){for(var r=n?n.length:0,e=t?Math.min(r,t.length):0,i=new Array(e),a=new Array(r),o=0;o<e;++o)i[o]=interpolate(t[o],n[o]);for(;o<r;++o)a[o]=n[o];return function(t){for(o=0;o<e;++o)a[o]=i[o](t);return a}}function date(n,r){var e=new Date;return n=+n,r=+r,function(t){return e.setTime(n*(1-t)+r*t),e}}function object(t,n){var r,e={},i={};for(r in null!==t&&"object"==typeof t||(t={}),n=null!==n&&"object"==typeof n?n:{})r in t?e[r]=interpolate(t[r],n[r]):i[r]=n[r];return function(t){for(r in e)i[r]=e[r](t);return i}}function interpolate(t,n){var r=typeof n;return null==n||"boolean"==r?constant(n):("number"==r?interpolateNumber:"string"==r?(r=color(n))?(n=r,interpolateRgb):interpolateString:n instanceof color?interpolateRgb:n instanceof Date?date:isNumberArray(n)?numberArray:Array.isArray(n)?genericArray:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?object:interpolateNumber)(t,n)}function interpolateRound(n,r){return n=+n,r=+r,function(t){return Math.round(n*(1-t)+r*t)}}function formatDecimal(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function formatDecimalParts(t,n){if((n=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var r=t.slice(0,n);return[1<r.length?r[0]+r.slice(2):r,+t.slice(n+1)]}function exponent(t){return(t=formatDecimalParts(Math.abs(t)))?t[1]:NaN}function formatGroup(c,u){return function(t,n){for(var r=t.length,e=[],i=0,a=c[0],o=0;0<r&&0<a&&(n<o+a+1&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=c[i=(i+1)%c.length];return e.reverse().join(u)}}function formatNumerals(n){return function(t){return t.replace(/[0-9]/g,function(t){return n[+t]})}}var prefixExponent,re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(t){if(n=re.exec(t))return new FormatSpecifier({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]});var n;throw new Error("invalid format: "+t)}function FormatSpecifier(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function formatTrim(t){t:for(var n,r=t.length,e=1,i=-1;e<r;++e)switch(t[e]){case".":i=n=e;break;case"0":0===i&&(i=e),n=e;break;default:if(!+t[e])break t;0<i&&(i=0)}return 0<i?t.slice(0,i)+t.slice(n+1):t}function formatPrefixAuto(t,n){var r=formatDecimalParts(t,n);if(!r)return t+"";var e=r[0],r=r[1],r=r-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,i=e.length;return r===i?e:i<r?e+new Array(r-i+1).join("0"):0<r?e.slice(0,r)+"."+e.slice(r):"0."+new Array(1-r).join("0")+formatDecimalParts(t,Math.max(0,n+r-1))[0]}function formatRounded(t,n){n=formatDecimalParts(t,n);if(!n)return t+"";t=n[0],n=n[1];return n<0?"0."+new Array(-n).join("0")+t:t.length>n+1?t.slice(0,n+1)+"."+t.slice(n+1):t+new Array(n-t.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const formatTypes={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:formatDecimal,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>formatRounded(100*t,n),r:formatRounded,s:formatPrefixAuto,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function identity$1(t){return t}var locale,format,formatPrefix,map=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(t){var N=void 0===t.grouping||void 0===t.thousands?identity$1:formatGroup(map.call(t.grouping,Number),t.thousands+""),e=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",w=void 0===t.decimal?".":t.decimal+"",A=void 0===t.numerals?identity$1:formatNumerals(map.call(t.numerals,String)),a=void 0===t.percent?"%":t.percent+"",k=void 0===t.minus?"−":t.minus+"",S=void 0===t.nan?"NaN":t.nan+"";function o(t){var f=(t=formatSpecifier(t)).fill,l=t.align,s=t.sign,n=t.symbol,m=t.zero,h=t.width,p=t.comma,d=t.precision,g=t.trim,y=t.type,M=("n"===y?(p=!0,y="g"):formatTypes[y]||(void 0===d&&(d=12),g=!0,y="g"),(m||"0"===f&&"="===l)&&(m=!0,f="0",l="="),"$"===n?e:"#"===n&&/[boxX]/.test(y)?"0"+y.toLowerCase():""),v="$"===n?i:/[%p]/.test(y)?a:"",b=formatTypes[y],x=/[defgprs%]/.test(y);function r(t){var n,r,e,i=M,a=v;if("c"===y)a=b(t)+a,t="";else{var o=(t=+t)<0||1/t<0;if(t=isNaN(t)?S:b(Math.abs(t),d),g&&(t=formatTrim(t)),i=((o=o&&0==+t&&"+"!==s?!1:o)?"("===s?s:k:"-"===s||"("===s?"":s)+i,a=("s"===y?prefixes[8+prefixExponent/3]:"")+a+(o&&"("===s?")":""),x)for(n=-1,r=t.length;++n<r;)if((e=t.charCodeAt(n))<48||57<e){a=(46===e?w+t.slice(n+1):t.slice(n))+a,t=t.slice(0,n);break}}p&&!m&&(t=N(t,1/0));var c=i.length+t.length+a.length,u=c<h?new Array(h-c+1).join(f):"";switch(p&&m&&(t=N(u+t,u.length?h-a.length:1/0),u=""),l){case"<":t=i+t+a+u;break;case"=":t=i+u+t+a;break;case"^":t=u.slice(0,c=u.length>>1)+i+t+a+u.slice(c);break;default:t=u+i+t+a}return A(t)}return d=void 0===d?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),r.toString=function(){return t+""},r}return{format:o,formatPrefix:function(t,n){var r=o(((t=formatSpecifier(t)).type="f",t)),t=3*Math.max(-8,Math.min(8,Math.floor(exponent(n)/3))),e=Math.pow(10,-t),i=prefixes[8+t/3];return function(t){return r(e*t)+i}}}}function defaultLocale(t){return locale=formatLocale(t),format=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(t){return Math.max(0,-exponent(Math.abs(t)))}function precisionPrefix(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(n)/3)))-exponent(Math.abs(t)))}function precisionRound(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,exponent(n)-exponent(t))+1}function constants(t){return function(){return t}}function number(t){return+t}defaultLocale({thousands:",",grouping:[3],currency:["$",""]});var unit=[0,1];function identity(t){return t}function normalize(n,r){return(r-=n=+n)?function(t){return(t-n)/r}:constants(isNaN(r)?NaN:.5)}function clamper(n,r){var t;return r<n&&(t=n,n=r,r=t),function(t){return Math.max(n,Math.min(r,t))}}function bimap(t,n,r){var e=t[0],t=t[1],i=n[0],n=n[1],i=t<e?(e=normalize(t,e),r(n,i)):(e=normalize(e,t),r(i,n));return function(t){return i(e(t))}}function polymap(r,t,n){var e=Math.min(r.length,t.length)-1,i=new Array(e),a=new Array(e),o=-1;for(r[e]<r[0]&&(r=r.slice().reverse(),t=t.slice().reverse());++o<e;)i[o]=normalize(r[o],r[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=bisect(r,t,1,e)-1;return a[n](i[n](t))}}function copy(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function transformer(){var r,e,n,i,a,o,c=unit,u=unit,f=interpolate,l=identity;function s(){var t=Math.min(c.length,u.length);return l!==identity&&(l=clamper(c[0],c[t-1])),i=2<t?polymap:bimap,a=o=null,m}function m(t){return null==t||isNaN(t=+t)?n:(a=a||i(c.map(r),u,f))(r(l(t)))}return m.invert=function(t){return l(e((o=o||i(u,c.map(r),interpolateNumber))(t)))},m.domain=function(t){return arguments.length?(c=Array.from(t,number),s()):c.slice()},m.range=function(t){return arguments.length?(u=Array.from(t),s()):u.slice()},m.rangeRound=function(t){return u=Array.from(t),f=interpolateRound,s()},m.clamp=function(t){return arguments.length?(l=!!t||identity,s()):l!==identity},m.interpolate=function(t){return arguments.length?(f=t,s()):f},m.unknown=function(t){return arguments.length?(n=t,m):n},function(t,n){return r=t,e=n,s()}}function continuous(){return transformer()(identity,identity)}function tickFormat(t,n,r,e){var i,a=tickStep(t,n,r);switch((e=formatSpecifier(null==e?",f":e)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(n));return null!=e.precision||isNaN(i=precisionPrefix(a,o))||(e.precision=i),formatPrefix(e,o);case"":case"e":case"g":case"p":case"r":null!=e.precision||isNaN(i=precisionRound(a,Math.max(Math.abs(t),Math.abs(n))))||(e.precision=i-("e"===e.type));break;case"f":case"%":null!=e.precision||isNaN(i=precisionFixed(a))||(e.precision=i-2*("%"===e.type))}return format(e)}function linearish(f){var l=f.domain;return f.ticks=function(t){var n=l();return ticks(n[0],n[n.length-1],null==t?10:t)},f.tickFormat=function(t,n){var r=l();return tickFormat(r[0],r[r.length-1],null==t?10:t,n)},f.nice=function(t){null==t&&(t=10);var n,r,e=l(),i=0,a=e.length-1,o=e[i],c=e[a],u=10;for(c<o&&(r=o,o=c,c=r,r=i,i=a,a=r);0<u--;){if((r=tickIncrement(o,c,t))===n)return e[i]=o,e[a]=c,l(e);if(0<r)o=Math.floor(o/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;o=Math.ceil(o*r)/r,c=Math.floor(c*r)/r}n=r}return f},f}function linear(){var t=continuous();return t.copy=function(){return copy(t,linear())},initRange.apply(t,arguments),linearish(t)}export{copy as a,bisector as b,continuous as c,linear as l,tickStep as t};