import{G as V}from"./layout-df07420e.js";import{S as D,v as M,x as R,_ as F,C as j,y as U,z as H,p as A,l as y,q as W,c as C,f as z,r as $,o as E,j as _,A as X,t as J,B as K}from"./mermaid-d733041c.js";import{r as Q}from"./index-c449e2c7.js";function Y(e){return"string"==typeof e?new D([document.querySelectorAll(e)],[document.documentElement]):new D([R(e)],M)}const Z=(e,t)=>F.lang.round(j.parse(e)[t]),O=Z;function pe(e,t){return!!e.children(t).length}function be(e){return L(e.v)+":"+L(e.w)+":"+L(e.name)}var ee=/:/g;function L(e){return e?String(e).replace(ee,"\\:"):""}function te(e,t){t&&e.attr("style",t)}function ue(e,t,r){t&&e.attr("class",t).attr("class",r+" "+e.attr("class"))}function we(e,t){t=t.graph();if(U(t)){t=t.transition;if(H(t))return t(e)}return e}function re(e,t){var e=e.append("foreignObject").attr("width","100000"),r=e.append("xhtml:div"),l=(r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.label);switch(typeof l){case"function":r.insert(l);break;case"object":r.insert(function(){return l});break;default:r.html(l)}te(r,t.labelStyle),r.style("display","inline-block"),r.style("white-space","nowrap");t=r.node().getBoundingClientRect();return e.attr("width",t.width).attr("height",t.height),e}const G={},le=function(e){for(const t of Object.keys(e))G[t]=e[t]},q=function(p,b,e,t,u,w){const f=t.select(`[id="${e}"]`);Object.keys(p).forEach(function(e){const t=p[e];let r="default";0<t.classes.length&&(r=t.classes.join(" ")),r+=" flowchart-label";const l=A(t.styles);let a=void 0!==t.text?t.text:t.id,o;if(y.info("vertex",t,t.labelType),"markdown"===t.labelType)y.info("vertex",t,t.labelType);else if(W(C().flowchart.htmlLabels)){e={label:a.replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`)};(o=re(f,e).node()).parentNode.removeChild(o)}else{const i=u.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("style",l.labelStyle.replace("color:","fill:"));for(const c of a.split(z.lineBreakRegex)){const d=u.createElementNS("http://www.w3.org/2000/svg","tspan");d.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),d.setAttribute("dy","1em"),d.setAttribute("x","1"),d.textContent=c,i.appendChild(d)}o=i}let n=0,s="";switch(t.type){case"round":n=5,s="rect";break;case"square":s="rect";break;case"diamond":s="question";break;case"hexagon":s="hexagon";break;case"odd":s="rect_left_inv_arrow";break;case"lean_right":s="lean_right";break;case"lean_left":s="lean_left";break;case"trapezoid":s="trapezoid";break;case"inv_trapezoid":s="inv_trapezoid";break;case"odd_right":s="rect_left_inv_arrow";break;case"circle":s="circle";break;case"ellipse":s="ellipse";break;case"stadium":s="stadium";break;case"subroutine":s="subroutine";break;case"cylinder":s="cylinder";break;case"group":s="rect";break;case"doublecircle":s="doublecircle";break;default:s="rect"}b.setNode(t.id,{labelStyle:l.labelStyle,shape:s,labelText:a,labelType:t.labelType,rx:n,ry:n,class:r,style:l.style,id:t.id,link:t.link,linkTarget:t.linkTarget,tooltip:w.db.getTooltip(t.id)||"",domId:w.db.lookUpDomId(t.id),haveCallback:t.haveCallback,width:"group"===t.type?500:void 0,dir:t.dir,type:t.type,props:t.props,padding:C().flowchart.padding}),y.info("setNode",{labelStyle:l.labelStyle,labelType:t.labelType,shape:s,labelText:a,rx:n,ry:n,class:r,style:l.style,id:t.id,domId:w.db.lookUpDomId(t.id),width:"group"===t.type?500:void 0,type:t.type,dir:t.dir,props:t.props,padding:C().flowchart.padding})})},P=function(i,c,e){y.info("abc78 edges = ",i);let d=0,p={},b,u;var t;void 0!==i.defaultStyle&&(t=A(i.defaultStyle),b=t.style,u=t.labelStyle),i.forEach(function(e){d++;var t="L-"+e.start+"-"+e.end,r=(void 0===p[t]?p[t]=0:p[t]++,y.info("abc78 new entry",t,p[t]),t+"-"+p[t]);y.info("abc78 new link id to be used is",t,r,p[t]);const l="LS-"+e.start,a="LE-"+e.end,o={style:"",labelStyle:""};switch(o.minlen=e.length||1,"arrow_open"===e.type?o.arrowhead="none":o.arrowhead="normal",o.arrowTypeStart="arrow_open",o.arrowTypeEnd="arrow_open",e.type){case"double_arrow_cross":o.arrowTypeStart="arrow_cross";case"arrow_cross":o.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":o.arrowTypeStart="arrow_point";case"arrow_point":o.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":o.arrowTypeStart="arrow_circle";case"arrow_circle":o.arrowTypeEnd="arrow_circle"}let n="",s="";switch(e.stroke){case"normal":n="fill:none;",void 0!==b&&(n=b),void 0!==u&&(s=u),o.thickness="normal",o.pattern="solid";break;case"dotted":o.thickness="normal",o.pattern="dotted",o.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":o.thickness="thick",o.pattern="solid",o.style="stroke-width: 3.5px;fill:none;";break;case"invisible":o.thickness="invisible",o.pattern="solid",o.style="stroke-width: 0;fill:none;"}void 0!==e.style&&(t=A(e.style),n=t.style,s=t.labelStyle),o.style=o.style+=n,o.labelStyle=o.labelStyle+=s,void 0!==e.interpolate?o.curve=$(e.interpolate,E):void 0!==i.defaultInterpolate?o.curve=$(i.defaultInterpolate,E):o.curve=$(G.curve,E),void 0===e.text?void 0!==e.style&&(o.arrowheadStyle="fill: #333"):(o.arrowheadStyle="fill: #333",o.labelpos="c"),o.labelType=e.labelType,o.label=e.text.replace(z.lineBreakRegex,`
`),void 0===e.style&&(o.style=o.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),o.labelStyle=o.labelStyle.replace("color:","fill:"),o.id=r,o.classes="flowchart-link "+l+" "+a,c.setEdge(e.start,e.end,o,d)})},ae=function(e,t){return t.db.getClasses()},ne=async function(e,s,t,r){y.info("Drawing flowchart");let l=r.db.getDirection();void 0===l&&(l="TD");const{securityLevel:i,flowchart:a}=C(),o=a.nodeSpacing||50,n=a.rankSpacing||50;let c;"sandbox"===i&&(c=_("#i"+s));const d="sandbox"===i?_(c.nodes()[0].contentDocument.body):_("body"),p="sandbox"===i?c.nodes()[0].contentDocument:document,b=new V({multigraph:!0,compound:!0}).setGraph({rankdir:l,nodesep:o,ranksep:n,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let u;var w=r.db.getSubGraphs();y.info("Subgraphs - ",w);for(let e=w.length-1;0<=e;e--)u=w[e],y.info("Subgraph - ",u),r.db.addVertex(u.id,{text:u.title,type:u.labelType},"group",void 0,u.classes,u.dir);const f=r.db.getVertices(),g=r.db.getEdges();y.info("Edges",g);let h=0;for(h=w.length-1;0<=h;h--){u=w[h],Y("cluster").append("text");for(let e=0;e<u.nodes.length;e++)y.info("Setting up subgraphs",u.nodes[e],u.id),b.setParent(u.nodes[e],u.id)}q(f,b,s,d,p,r),P(g,b);var k=d.select(`[id="${s}"]`),x=d.select("#"+s+" g");if(await Q(x,b,["point","circle","cross"],"flowchart",s),X.insertTitle(k,"flowchartTitleText",a.titleTopMargin,r.db.getDiagramTitle()),J(b,k,a.diagramPadding,a.useMaxWidth),r.db.indexNodes("subGraph"+h),!a.htmlLabels)for(const m of p.querySelectorAll('[id="'+s+'"] .edgeLabel .label')){const v=m.getBBox(),S=p.createElementNS("http://www.w3.org/2000/svg","rect");S.setAttribute("rx",0),S.setAttribute("ry",0),S.setAttribute("width",v.width),S.setAttribute("height",v.height),m.insertBefore(S,m.firstChild)}Object.keys(f).forEach(function(e){const t=f[e];if(t.link){const r=_("#"+s+' [id="'+e+'"]');if(r){const l=p.createElementNS("http://www.w3.org/2000/svg","a"),a=(l.setAttributeNS("http://www.w3.org/2000/svg","class",t.classes.join(" ")),l.setAttributeNS("http://www.w3.org/2000/svg","href",t.link),l.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===i?l.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):t.linkTarget&&l.setAttributeNS("http://www.w3.org/2000/svg","target",t.linkTarget),r.insert(function(){return l},":first-child")),o=r.select(".label-container"),n=(o&&a.append(function(){return o.node()}),r.select(".label"));n&&a.append(function(){return n.node()})}}})},he={setConf:le,addVertices:q,addEdges:P,getClasses:ae,draw:ne},oe=(e,t)=>{const r=O,l=r(e,"r"),a=r(e,"g"),o=r(e,"b");return K(l,a,o,t)},se=e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span,p {
    color: ${e.titleColor};
  }

  .label text,span,p {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${oe(e.edgeLabelBackground,.5)};
    // background-color: 
  }

  .cluster rect {
    fill: ${e.clusterBkg};
    stroke: ${e.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span,p {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`,ye=se;export{te as a,re as b,we as c,ue as d,be as e,he as f,ye as g,pe as i,Y as s};