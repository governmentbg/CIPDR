import{aa as q,ab as fr,ac as O,ad as x,ae as F,af as fn,ag as dr,ah as cr,ai as hr,aj as Te,ak as lr,al as vr,am as dn,an as X,ao as gr,ap as Le,aq as pr,ar as H,as as an,at as Cn,au as br,av as Ln,aw as wr,ax as mr,ay as U,az as In,aA as _r,aB as Ae,aC as Kn,aD as Er,aE as yr,aF as Ne,aG as V,aH as Oe,aI as xr,aJ as Pn,aK as on,aL as Tr,aM as bn,aN as Lr,aO as B,z as Xn,aP as Vn,aQ as An}from"./mermaid-d733041c.js";var Ar="[object Symbol]";function $(n){return"symbol"==typeof n||q(n)&&fr(n)==Ar}function R(n,e){for(var t=-1,r=null==n?0:n.length,o=Array(r);++t<r;)o[t]=e(n[t],t,n);return o}var Nr=1/0,Zn=O?O.prototype:void 0,Jn=Zn?Zn.toString:void 0;function Ce(n){if("string"==typeof n)return n;if(x(n))return R(n,Ce)+"";if($(n))return Jn?Jn.call(n):"";var e=n+"";return"0"==e&&1/n==-Nr?"-0":e}var Or=/\s/;function Cr(n){for(var e=n.length;e--&&Or.test(n.charAt(e)););return e}var Ir=/^\s+/;function Pr(n){return n&&n.slice(0,Cr(n)+1).replace(Ir,"")}var Qn=NaN,$r=/^[-+]0x[0-9a-f]+$/i,Sr=/^0b[01]+$/i,Mr=/^0o[0-7]+$/i,Rr=parseInt;function Fr(n){if("number"==typeof n)return n;if($(n))return Qn;if(F(n)&&(e="function"==typeof n.valueOf?n.valueOf():n,n=F(e)?e+"":e),"string"!=typeof n)return 0===n?n:+n;n=Pr(n);var e=Sr.test(n);return e||Mr.test(n)?Rr(n.slice(2),e?2:8):$r.test(n)?Qn:+n}var zn=1/0,Dr=17976931348623157e292;function rn(n){return n?(n=Fr(n))===zn||n===-zn?(n<0?-1:1)*Dr:n==n?n:0:0===n?n:0}function kr(n){var n=rn(n),e=n%1;return n==n?e?n-e:n:0}function Gr(){}function Ie(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););return n}function Pe(n,e,t,r){for(var o=n.length,i=t+(r?1:-1);r?i--:++i<o;)if(e(n[i],i,n))return i;return-1}function Br(n){return n!=n}function Yr(n,e,t){for(var r=t-1,o=n.length;++r<o;)if(n[r]===e)return r;return-1}function Ur(n,e,t){return e==e?Yr(n,e,t):Pe(n,Br,t)}function qr(n,e){return!!(null==n?0:n.length)&&-1<Ur(n,e,0)}function T(n){return(fn(n)?dr:cr)(n)}var Hr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jr=/^\w*$/;function $n(n,e){if(x(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!$(n))||(jr.test(n)||!Hr.test(n)||null!=e&&n in Object(e))}var Wr=500;function Kr(n){var n=hr(n,function(n){return e.size===Wr&&e.clear(),n}),e=n.cache;return n}var Xr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vr=/\\(\\)?/g,Zr=Kr(function(n){var o=[];return 46===n.charCodeAt(0)&&o.push(""),n.replace(Xr,function(n,e,t,r){o.push(t?r.replace(Vr,"$1"):e||n)}),o});const Jr=Zr;function $e(n){return null==n?"":Ce(n)}function cn(n,e){return x(n)?n:$n(n,e)?[n]:Jr($e(n))}var Qr=1/0;function Z(n){if("string"==typeof n||$(n))return n;var e=n+"";return"0"==e&&1/n==-Qr?"-0":e}function hn(n,e){for(var t=0,r=(e=cn(e,n)).length;null!=n&&t<r;)n=n[Z(e[t++])];return t&&t==r?n:void 0}function zr(n,e,t){n=null==n?void 0:hn(n,e);return void 0===n?t:n}function Sn(n,e){for(var t=-1,r=e.length,o=n.length;++t<r;)n[o+t]=e[t];return n}var ne=O?O.isConcatSpreadable:void 0;function nt(n){return x(n)||Te(n)||!!(ne&&n&&n[ne])}function ln(n,e,t,r,o){var i=-1,u=n.length;for(t=t||nt,o=o||[];++i<u;){var a=n[i];0<e&&t(a)?1<e?ln(a,e-1,t,r,o):Sn(o,a):r||(o[o.length]=a)}return o}function k(n){return(null==n?0:n.length)?ln(n,1):[]}function et(n){return lr(vr(n,void 0,k),n+"")}function rt(n,e,t,r){var o=-1,i=null==n?0:n.length;for(r&&i&&(t=n[++o]);++o<i;)t=e(t,n[o],o,n);return t}function tt(n,e){return n&&dn(e,T(e),n)}function it(n,e){return n&&dn(e,X(e),n)}function Se(n,e){for(var t=-1,r=null==n?0:n.length,o=0,i=[];++t<r;){var u=n[t];e(u,t,n)&&(i[o++]=u)}return i}function Me(){return[]}var at=Object.prototype,ot=at.propertyIsEnumerable,ee=Object.getOwnPropertySymbols,st=ee?function(e){return null==e?[]:(e=Object(e),Se(ee(e),function(n){return ot.call(e,n)}))}:Me;const Mn=st;function ut(n,e){return dn(n,Mn(n),e)}var ft=Object.getOwnPropertySymbols,dt=ft?function(n){for(var e=[];n;)Sn(e,Mn(n)),n=gr(n);return e}:Me;const Re=dt;function ct(n,e){return dn(n,Re(n),e)}function Fe(n,e,t){e=e(n);return x(n)?e:Sn(e,t(n))}function Nn(n){return Fe(n,T,Mn)}function ht(n){return Fe(n,X,Re)}var lt=Object.prototype,vt=lt.hasOwnProperty;function gt(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&vt.call(n,"index")&&(t.index=n.index,t.input=n.input),t}function pt(n,e){e=e?Le(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}var bt=/\w*$/;function wt(n){var e=new n.constructor(n.source,bt.exec(n));return e.lastIndex=n.lastIndex,e}var re=O?O.prototype:void 0,te=re?re.valueOf:void 0;function mt(n){return te?Object(te.call(n)):{}}var _t="[object Boolean]",Et="[object Date]",yt="[object Map]",xt="[object Number]",Tt="[object RegExp]",Lt="[object Set]",At="[object String]",Nt="[object Symbol]",Ot="[object ArrayBuffer]",Ct="[object DataView]",It="[object Float32Array]",Pt="[object Float64Array]",$t="[object Int8Array]",St="[object Int16Array]",Mt="[object Int32Array]",Rt="[object Uint8Array]",Ft="[object Uint8ClampedArray]",Dt="[object Uint16Array]",kt="[object Uint32Array]";function Gt(n,e,t){var r=n.constructor;switch(e){case Ot:return Le(n);case _t:case Et:return new r(+n);case Ct:return pt(n,t);case It:case Pt:case $t:case St:case Mt:case Rt:case Ft:case Dt:case kt:return pr(n,t);case yt:return new r;case xt:case At:return new r(n);case Tt:return wt(n);case Lt:return new r;case Nt:return mt(n)}}var Bt="[object Map]";function Yt(n){return q(n)&&H(n)==Bt}var ie=an&&an.isMap,Ut=ie?Cn(ie):Yt;const qt=Ut;var Ht="[object Set]";function jt(n){return q(n)&&H(n)==Ht}var ae=an&&an.isSet,Wt=ae?Cn(ae):jt;const Kt=Wt;var Xt=1,Vt=2,Zt=4,De="[object Arguments]",Jt="[object Array]",Qt="[object Boolean]",zt="[object Date]",ni="[object Error]",ke="[object Function]",ei="[object GeneratorFunction]",ri="[object Map]",ti="[object Number]",Ge="[object Object]",ii="[object RegExp]",ai="[object Set]",oi="[object String]",si="[object Symbol]",ui="[object WeakMap]",fi="[object ArrayBuffer]",di="[object DataView]",ci="[object Float32Array]",hi="[object Float64Array]",li="[object Int8Array]",vi="[object Int16Array]",gi="[object Int32Array]",pi="[object Uint8Array]",bi="[object Uint8ClampedArray]",wi="[object Uint16Array]",mi="[object Uint32Array]",w={};function tn(t,r,o,n,e,i){var u,a=r&Xt,c=r&Vt,s=r&Zt;if(void 0!==(u=o?e?o(t,n,e,i):o(t):u))return u;if(!F(t))return t;n=x(t);if(n){if(u=gt(t),!a)return br(t,u)}else{var f=H(t),d=f==ke||f==ei;if(Ln(t))return wr(t,a);if(f==Ge||f==De||d&&!e){if(u=c||d?{}:mr(t),!a)return c?ct(t,it(u,t)):ut(t,tt(u,t))}else{if(!w[f])return e?t:{};u=Gt(t,f,a)}}d=(i=i||new U).get(t);if(d)return d;i.set(t,u),Kt(t)?t.forEach(function(n){u.add(tn(n,r,o,n,t,i))}):qt(t)&&t.forEach(function(n,e){u.set(e,tn(n,r,o,e,t,i))});var h=n?void 0:(s?c?ht:Nn:c?X:T)(t);return Ie(h||t,function(n,e){h&&(n=t[e=n]),In(u,e,tn(n,r,o,e,t,i))}),u}w[De]=w[Jt]=w[fi]=w[di]=w[Qt]=w[zt]=w[ci]=w[hi]=w[li]=w[vi]=w[gi]=w[ri]=w[ti]=w[Ge]=w[ii]=w[ai]=w[oi]=w[si]=w[pi]=w[bi]=w[wi]=w[mi]=!0,w[ni]=w[ke]=w[ui]=!1;var _i=1,Ei=4;function yi(n){return tn(n,_i|Ei)}var xi="__lodash_hash_undefined__";function Ti(n){return this.__data__.set(n,xi),this}function Li(n){return this.__data__.has(n)}function j(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new _r;++e<t;)this.add(n[e])}function Ai(n,e){for(var t=-1,r=null==n?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function Be(n,e){return n.has(e)}j.prototype.add=j.prototype.push=Ti,j.prototype.has=Li;var Ni=1,Oi=2;function Ye(n,e,t,r,o,i){var u=t&Ni,a=n.length,c=e.length;if(a!=c&&!(u&&a<c))return!1;var c=i.get(n),s=i.get(e);if(c&&s)return c==e&&s==n;var f=-1,d=!0,h=t&Oi?new j:void 0;for(i.set(n,e),i.set(e,n);++f<a;){var l,g=n[f],v=e[f];if(void 0!==(l=r?u?r(v,g,f,e,n,i):r(g,v,f,n,e,i):l)){if(l)continue;d=!1;break}if(h){if(!Ai(e,function(n,e){if(!Be(h,e)&&(g===n||o(g,n,t,r,i)))return h.push(e)})){d=!1;break}}else if(g!==v&&!o(g,v,t,r,i)){d=!1;break}}return i.delete(n),i.delete(e),d}function Ci(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function Rn(n){var e=-1,t=Array(n.size);return n.forEach(function(n){t[++e]=n}),t}var Ii=1,Pi=2,$i="[object Boolean]",Si="[object Date]",Mi="[object Error]",Ri="[object Map]",Fi="[object Number]",Di="[object RegExp]",ki="[object Set]",Gi="[object String]",Bi="[object Symbol]",Yi="[object ArrayBuffer]",Ui="[object DataView]",oe=O?O.prototype:void 0,wn=oe?oe.valueOf:void 0;function qi(n,e,t,r,o,i,u){switch(t){case Ui:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case Yi:return!(n.byteLength!=e.byteLength||!i(new Kn(n),new Kn(e)));case $i:case Si:case Fi:return Ae(+n,+e);case Mi:return n.name==e.name&&n.message==e.message;case Di:case Gi:return n==e+"";case Ri:var a=Ci;case ki:a=a||Rn;if(n.size!=e.size&&!(r&Ii))return!1;var c=u.get(n);if(c)return c==e;r|=Pi,u.set(n,e);c=Ye(a(n),a(e),r,o,i,u);return u.delete(n),c;case Bi:if(wn)return wn.call(n)==wn.call(e)}return!1}var Hi=1,ji=Object.prototype,Wi=ji.hasOwnProperty;function Ki(n,e,t,r,o,i){var u=t&Hi,a=Nn(n),c=a.length;if(c!=Nn(e).length&&!u)return!1;for(var s=c;s--;){var f=a[s];if(!(u?f in e:Wi.call(e,f)))return!1}var d=i.get(n),h=i.get(e);if(d&&h)return d==e&&h==n;var l=!0;i.set(n,e),i.set(e,n);for(var g=u;++s<c;){var v,b=n[f=a[s]],p=e[f];if(!(void 0===(v=r?u?r(p,b,f,e,n,i):r(b,p,f,n,e,i):v)?b===p||o(b,p,t,r,i):v)){l=!1;break}g=g||"constructor"==f}return l&&!g&&(d=n.constructor)!=(h=e.constructor)&&"constructor"in n&&"constructor"in e&&!("function"==typeof d&&d instanceof d&&"function"==typeof h&&h instanceof h)&&(l=!1),i.delete(n),i.delete(e),l}var Xi=1,se="[object Arguments]",ue="[object Array]",en="[object Object]",Vi=Object.prototype,fe=Vi.hasOwnProperty;function Zi(n,e,t,r,o,i){var u=x(n),a=x(e),c=u?ue:H(n),a=a?ue:H(e),s=(c=c==se?en:c)==en,f=(a=a==se?en:a)==en,a=c==a;if(a&&Ln(n)){if(!Ln(e))return!1;s=!(u=!0)}if(a&&!s)return i=i||new U,u||Er(n)?Ye(n,e,t,r,o,i):qi(n,e,c,t,r,o,i);if(!(t&Xi)){u=s&&fe.call(n,"__wrapped__"),c=f&&fe.call(e,"__wrapped__");if(u||c)return o(u?n.value():n,c?e.value():e,t,r,i=i||new U)}return a&&Ki(n,e,t,r,o,i=i||new U)}function Fn(n,e,t,r,o){return n===e||(null==n||null==e||!q(n)&&!q(e)?n!=n&&e!=e:Zi(n,e,t,r,Fn,o))}var Ji=1,Qi=2;function zi(n,e,t,r){var o=t.length,i=o,u=!r;if(null==n)return!i;for(n=Object(n);o--;){var a=t[o];if(u&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++o<i;){var c=(a=t[o])[0],s=n[c],f=a[1];if(u&&a[2]){if(void 0===s&&!(c in n))return!1}else{var d,h=new U;if(!(void 0===(d=r?r(s,f,c,n,e,h):d)?Fn(f,s,Ji|Qi,r,h):d))return!1}}return!0}function Ue(n){return n==n&&!F(n)}function na(n){for(var e=T(n),t=e.length;t--;){var r=e[t],o=n[r];e[t]=[r,o,Ue(o)]}return e}function qe(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function ea(e){var t=na(e);return 1==t.length&&t[0][2]?qe(t[0][0],t[0][1]):function(n){return n===e||zi(n,e,t)}}function ra(n,e){return null!=n&&e in Object(n)}function He(n,e,t){for(var r=-1,o=(e=cn(e,n)).length,i=!1;++r<o;){var u=Z(e[r]);if(!(i=null!=n&&t(n,u)))break;n=n[u]}return i||++r!=o?i:!!(o=null==n?0:n.length)&&yr(o)&&Ne(u,o)&&(x(n)||Te(n))}function je(n,e){return null!=n&&He(n,e,ra)}var ta=1,ia=2;function aa(t,r){return $n(t)&&Ue(r)?qe(Z(t),r):function(n){var e=zr(n,t);return void 0===e&&e===r?je(n,t):Fn(r,e,ta|ia)}}function oa(e){return function(n){return null==n?void 0:n[e]}}function sa(e){return function(n){return hn(n,e)}}function ua(n){return $n(n)?oa(Z(n)):sa(n)}function C(n){return"function"==typeof n?n:null==n?V:"object"==typeof n?x(n)?aa(n[0],n[1]):ea(n):ua(n)}function Dn(n,e){return n&&Oe(n,e,T)}function fa(i,u){return function(n,e){if(null==n)return n;if(!fn(n))return i(n,e);for(var t=n.length,r=u?t:-1,o=Object(n);(u?r--:++r<t)&&!1!==e(o[r],r,o););return n}}var da=fa(Dn);const vn=da;var ca=function(){return xr.Date.now()};const de=ca;var We=Object.prototype,ha=We.hasOwnProperty,la=Pn(function(n,e){n=Object(n);var t=-1,r=e.length,o=2<r?e[2]:void 0;for(o&&on(e[0],e[1],o)&&(r=1);++t<r;)for(var i=e[t],u=X(i),a=-1,c=u.length;++a<c;){var s=u[a],f=n[s];(void 0===f||Ae(f,We[s])&&!ha.call(n,s))&&(n[s]=i[s])}return n});const va=la;function ga(n,e,t){for(var r=-1,o=null==n?0:n.length;++r<o;)if(t(e,n[r]))return!0;return!1}function sn(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}function kn(n){return"function"==typeof n?n:V}function c(n,e){return(x(n)?Ie:vn)(n,kn(e))}function pa(n,r){var o=[];return vn(n,function(n,e,t){r(n,e,t)&&o.push(n)}),o}function A(n,e){return(x(n)?Se:pa)(n,C(e))}function ba(i){return function(n,e,t){var r,o=Object(n),e=(fn(n)||(r=C(e),n=T(n),e=function(n){return r(o[n],n,o)}),i(n,e,t));return-1<e?o[r?n[e]:e]:void 0}}var wa=Math.max;function ma(n,e,t){var r=null==n?0:n.length;if(!r)return-1;t=null==t?0:kr(t);return t<0&&(t=wa(r+t,0)),Pe(n,C(e),t)}var _a=ba(ma);const Gn=_a;function Ke(n,r){var o=-1,i=fn(n)?Array(n.length):[];return vn(n,function(n,e,t){i[++o]=r(n,e,t)}),i}function E(n,e){return(x(n)?R:Ke)(n,C(e))}function Ea(n,e){return null==n?n:Oe(n,kn(e),X)}function ya(n,e){return n&&Dn(n,kn(e))}function xa(n,e){return e<n}var Ta=Object.prototype,La=Ta.hasOwnProperty;function Aa(n,e){return null!=n&&La.call(n,e)}function b(n,e){return null!=n&&He(n,e,Aa)}function Na(e,n){return R(n,function(n){return e[n]})}function N(n){return null==n?[]:Na(n,T(n))}function y(n){return void 0===n}function Xe(n,e){return n<e}function gn(n,r){var o={};return r=C(r),Dn(n,function(n,e,t){Tr(o,e,r(n,e,t))}),o}function Bn(n,e,t){for(var r=-1,o=n.length;++r<o;){var i,u,a=n[r],c=e(a);null!=c&&(void 0===i?c==c&&!$(c):t(c,i))&&(i=c,u=a)}return u}function S(n){return n&&n.length?Bn(n,V,xa):void 0}function W(n){return n&&n.length?Bn(n,V,Xe):void 0}function Yn(n,e){return n&&n.length?Bn(n,C(e),Xe):void 0}function Oa(n,e,t,r){if(!F(n))return n;for(var o=-1,i=(e=cn(e,n)).length,u=i-1,a=n;null!=a&&++o<i;){var c,s=Z(e[o]),f=t;if("__proto__"===s||"constructor"===s||"prototype"===s)return n;o!=u&&(c=a[s],void 0===(f=r?r(c,s,a):void 0)&&(f=F(c)?c:Ne(e[o+1])?[]:{})),In(a,s,f),a=a[s]}return n}function Ca(n,e,t){for(var r=-1,o=e.length,i={};++r<o;){var u=e[r],a=hn(n,u);t(a,u)&&Oa(i,cn(u,n),a)}return i}function Ia(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}function Pa(n,e){if(n!==e){var t=void 0!==n,r=null===n,o=n==n,i=$(n),u=void 0!==e,a=null===e,c=e==e,s=$(e);if(!a&&!s&&!i&&e<n||i&&u&&c&&!a&&!s||r&&u&&c||!t&&c||!o)return 1;if(!r&&!i&&!s&&n<e||s&&t&&o&&!r&&!i||a&&t&&o||!u&&o||!c)return-1}return 0}function $a(n,e,t){for(var r=-1,o=n.criteria,i=e.criteria,u=o.length,a=t.length;++r<u;){var c=Pa(o[r],i[r]);if(c)return a<=r?c:c*("desc"==t[r]?-1:1)}return n.index-e.index}function Sa(n,r,t){r=r.length?R(r,function(e){return x(e)?function(n){return hn(n,1===e.length?e[0]:e)}:e}):[V];var o=-1;return r=R(r,Cn(C)),Ia(Ke(n,function(e,n,t){return{criteria:R(r,function(n){return n(e)}),index:++o,value:e}}),function(n,e){return $a(n,e,t)})}function Ma(t,n){return Ca(t,n,function(n,e){return je(t,e)})}var Ra=et(function(n,e){return null==n?{}:Ma(n,e)});const un=Ra;var Fa=Math.ceil,Da=Math.max;function ka(n,e,t,r){for(var o=-1,i=Da(Fa((e-n)/(t||1)),0),u=Array(i);i--;)u[r?i:++o]=n,n+=t;return u}function Ga(r){return function(n,e,t){return t&&"number"!=typeof t&&on(n,e,t)&&(e=t=void 0),n=rn(n),void 0===e?(e=n,n=0):e=rn(e),ka(n,e,t=void 0===t?n<e?1:-1:rn(t),r)}}var Ba=Ga();const D=Ba;function Ya(n,r,o,i,e){return e(n,function(n,e,t){o=i?(i=!1,n):r(o,n,e,t)}),o}function J(n,e,t){var r=x(n)?rt:Ya,o=arguments.length<3;return r(n,C(e),t,o,vn)}var Ua=Pn(function(n,e){if(null==n)return[];var t=e.length;return 1<t&&on(n,e[0],e[1])?e=[]:2<t&&on(e[0],e[1],e[2])&&(e=[e[0]]),Sa(n,ln(e,1),[])});const Q=Ua;var qa=1/0,Ha=bn&&1/Rn(new bn([,-0]))[1]==qa?function(n){return new bn(n)}:Gr;const ja=Ha;var Wa=200;function Ka(n,e,t){var r=-1,o=qr,i=n.length,u=!0,a=[],c=a;if(t)u=!1,o=ga;else if(Wa<=i){var s=e?null:ja(n);if(s)return Rn(s);u=!1,o=Be,c=new j}else c=e?[]:a;n:for(;++r<i;){var f=n[r],d=e?e(f):f,f=t||0!==f?f:0;if(u&&d==d){for(var h=c.length;h--;)if(c[h]===d)continue n;e&&c.push(d),a.push(f)}else o(c,d,t)||(c!==a&&c.push(d),a.push(f))}return a}var Xa=Pn(function(n){return Ka(ln(n,1,Lr,!0))});const Va=Xa;var Za=0;function Un(n){var e=++Za;return $e(n)+e}function Ja(n,e,t){for(var r=-1,o=n.length,i=e.length,u={};++r<o;){var a=r<i?e[r]:void 0;t(u,n[r],a)}return u}function Qa(n,e){return Ja(n||[],e||[],In)}var za="\0",P="\0",ce="";class L{constructor(n={}){this._isDirected=!b(n,"directed")||n.directed,this._isMultigraph=!!b(n,"multigraph")&&n.multigraph,this._isCompound=!!b(n,"compound")&&n.compound,this._label=void 0,this._defaultNodeLabelFn=B(void 0),this._defaultEdgeLabelFn=B(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[P]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(n){return this._label=n,this}graph(){return this._label}setDefaultNodeLabel(n){return Xn(n)||(n=B(n)),this._defaultNodeLabelFn=n,this}nodeCount(){return this._nodeCount}nodes(){return T(this._nodes)}sources(){var e=this;return A(this.nodes(),function(n){return Vn(e._in[n])})}sinks(){var e=this;return A(this.nodes(),function(n){return Vn(e._out[n])})}setNodes(n,e){var t=arguments,r=this;return c(n,function(n){1<t.length?r.setNode(n,e):r.setNode(n)}),this}setNode(n,e){return b(this._nodes,n)?1<arguments.length&&(this._nodes[n]=e):(this._nodes[n]=1<arguments.length?e:this._defaultNodeLabelFn(n),this._isCompound&&(this._parent[n]=P,this._children[n]={},this._children[P][n]=!0),this._in[n]={},this._preds[n]={},this._out[n]={},this._sucs[n]={},++this._nodeCount),this}node(n){return this._nodes[n]}hasNode(n){return b(this._nodes,n)}removeNode(n){var e,t=this;return b(this._nodes,n)&&(e=function(n){t.removeEdge(t._edgeObjs[n])},delete this._nodes[n],this._isCompound&&(this._removeFromParentsChildList(n),delete this._parent[n],c(this.children(n),function(n){t.setParent(n)}),delete this._children[n]),c(T(this._in[n]),e),delete this._in[n],delete this._preds[n],c(T(this._out[n]),e),delete this._out[n],delete this._sucs[n],--this._nodeCount),this}setParent(n,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(y(e))e=P;else{for(var t=e+="";!y(t);t=this.parent(t))if(t===n)throw new Error("Setting "+e+" as parent of "+n+" would create a cycle");this.setNode(e)}return this.setNode(n),this._removeFromParentsChildList(n),this._parent[n]=e,this._children[e][n]=!0,this}_removeFromParentsChildList(n){delete this._children[this._parent[n]][n]}parent(n){if(this._isCompound){n=this._parent[n];if(n!==P)return n}}children(n){if(y(n)&&(n=P),!this._isCompound)return n===P?this.nodes():this.hasNode(n)?[]:void 0;n=this._children[n];return n?T(n):void 0}predecessors(n){n=this._preds[n];if(n)return T(n)}successors(n){n=this._sucs[n];if(n)return T(n)}neighbors(n){var e=this.predecessors(n);if(e)return Va(e,this.successors(n))}isLeaf(n){n=this.isDirected()?this.successors(n):this.neighbors(n);return 0===n.length}filterNodes(t){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound}),o=(r.setGraph(this.graph()),this),i=(c(this._nodes,function(n,e){t(e)&&r.setNode(e,n)}),c(this._edgeObjs,function(n){r.hasNode(n.v)&&r.hasNode(n.w)&&r.setEdge(n,o.edge(n))}),{});return this._isCompound&&c(r.nodes(),function(n){r.setParent(n,function n(e){var t=o.parent(e);return void 0===t||r.hasNode(t)?i[e]=t:t in i?i[t]:n(t)}(n))}),r}setDefaultEdgeLabel(n){return Xn(n)||(n=B(n)),this._defaultEdgeLabelFn=n,this}edgeCount(){return this._edgeCount}edges(){return N(this._edgeObjs)}setPath(n,t){var r=this,o=arguments;return J(n,function(n,e){return 1<o.length?r.setEdge(n,e,t):r.setEdge(n,e),e}),this}setEdge(){var n,e,t=!1,r=arguments[0],r=("object"==typeof r&&null!==r&&"v"in r?(o=r.v,i=r.w,n=r.name,2===arguments.length&&(e=arguments[1],t=!0)):(o=r,i=arguments[1],n=arguments[3],2<arguments.length&&(e=arguments[2],t=!0)),o=""+o,i=""+i,y(n)||(n=""+n),Y(this._isDirected,o,i,n));if(b(this._edgeLabels,r))return t&&(this._edgeLabels[r]=e),this;if(!y(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(o),this.setNode(i),this._edgeLabels[r]=t?e:this._defaultEdgeLabelFn(o,i,n);var t=no(this._isDirected,o,i,n),o=t.v,i=t.w;return Object.freeze(t),this._edgeObjs[r]=t,he(this._preds[i],o),he(this._sucs[o],i),this._in[i][r]=t,this._out[o][r]=t,this._edgeCount++,this}edge(n,e,t){var r=1===arguments.length?mn(this._isDirected,n):Y(this._isDirected,n,e,t);return this._edgeLabels[r]}hasEdge(n,e,t){var r=1===arguments.length?mn(this._isDirected,n):Y(this._isDirected,n,e,t);return b(this._edgeLabels,r)}removeEdge(n,e,t){var r=1===arguments.length?mn(this._isDirected,arguments[0]):Y(this._isDirected,n,e,t),o=this._edgeObjs[r];return o&&(n=o.v,e=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],le(this._preds[e],n),le(this._sucs[n],e),delete this._in[e][r],delete this._out[n][r],this._edgeCount--),this}inEdges(n,e){var n=this._in[n];if(n)return n=N(n),e?A(n,function(n){return n.v===e}):n}outEdges(n,e){var n=this._out[n];if(n)return n=N(n),e?A(n,function(n){return n.w===e}):n}nodeEdges(n,e){var t=this.inEdges(n,e);if(t)return t.concat(this.outEdges(n,e))}}function he(n,e){n[e]?n[e]++:n[e]=1}function le(n,e){--n[e]||delete n[e]}function Y(n,e,t,r){e=""+e,t=""+t;return!n&&t<e&&(n=e,e=t,t=n),e+ce+t+ce+(y(r)?za:r)}function no(n,e,t,r){e=""+e,t=""+t,!n&&t<e&&(n=e,e=t,t=n),n={v:e,w:t};return r&&(n.name=r),n}function mn(n,e){return Y(n,e.v,e.w,e.name)}L.prototype._nodeCount=0,L.prototype._edgeCount=0;class eo{constructor(){var n={};n._next=n._prev=n,this._sentinel=n}dequeue(){var n=this._sentinel,e=n._prev;if(e!==n)return ve(e),e}enqueue(n){var e=this._sentinel;n._prev&&n._next&&ve(n),n._next=e._next,e._next._prev=n,(e._next=n)._prev=e}toString(){for(var n=[],e=this._sentinel,t=e._prev;t!==e;)n.push(JSON.stringify(t,ro)),t=t._prev;return"["+n.join(", ")+"]"}}function ve(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function ro(n,e){if("_next"!==n&&"_prev"!==n)return e}var to=B(1);function io(e,n){if(e.nodeCount()<=1)return[];n=oo(e,n||to);return k(E(ao(n.graph,n.buckets,n.zeroIdx),function(n){return e.outEdges(n.v,n.w)}))}function ao(n,e,t){for(var r,o=[],i=e[e.length-1],u=e[0];n.nodeCount();){for(;r=u.dequeue();)_n(n,e,t,r);for(;r=i.dequeue();)_n(n,e,t,r);if(n.nodeCount())for(var a=e.length-2;0<a;--a)if(r=e[a].dequeue()){o=o.concat(_n(n,e,t,r,!0));break}}return o}function _n(r,o,i,n,u){var a=u?[]:void 0;return c(r.inEdges(n.v),function(n){var e=r.edge(n),t=r.node(n.v);u&&a.push({v:n.v,w:n.w}),t.out-=e,On(o,i,t)}),c(r.outEdges(n.v),function(n){var e=r.edge(n),n=n.w,n=r.node(n);n.in-=e,On(o,i,n)}),r.removeNode(n.v),a}function oo(n,r){var o=new L,i=0,u=0,e=(c(n.nodes(),function(n){o.setNode(n,{v:n,in:0,out:0})}),c(n.edges(),function(n){var e=o.edge(n.v,n.w)||0,t=r(n);o.setEdge(n.v,n.w,e+t),u=Math.max(u,o.node(n.v).out+=t),i=Math.max(i,o.node(n.w).in+=t)}),D(u+i+3).map(function(){return new eo})),t=i+1;return c(o.nodes(),function(n){On(e,t,o.node(n))}),{graph:o,buckets:e,zeroIdx:t}}function On(n,e,t){(t.out?t.in?n[t.out-t.in+e]:n[n.length-1]:n[0]).enqueue(t)}function so(t){var e;c("greedy"===t.graph().acyclicer?io(t,(e=t,function(n){return e.edge(n).weight})):uo(t),function(n){var e=t.edge(n);t.removeEdge(n),e.forwardName=n.name,e.reversed=!0,t.setEdge(n.w,n.v,e,Un("rev"))})}function uo(t){var r=[],o={},i={};return c(t.nodes(),function e(n){b(i,n)||(i[n]=!0,o[n]=!0,c(t.outEdges(n),function(n){b(o,n.w)?r.push(n):e(n.w)}),delete o[n])}),r}function fo(r){c(r.edges(),function(n){var e,t=r.edge(n);t.reversed&&(r.removeEdge(n),e=t.forwardName,delete t.reversed,delete t.forwardName,r.setEdge(n.w,n.v,t,e))})}function G(n,e,t,r){for(var o;o=Un(r),n.hasNode(o););return t.dummy=e,n.setNode(o,t),o}function co(r){var o=(new L).setGraph(r.graph());return c(r.nodes(),function(n){o.setNode(n,r.node(n))}),c(r.edges(),function(n){var e=o.edge(n.v,n.w)||{weight:0,minlen:1},t=r.edge(n);o.setEdge(n.v,n.w,{weight:e.weight+t.weight,minlen:Math.max(e.minlen,t.minlen)})}),o}function Ve(e){var t=new L({multigraph:e.isMultigraph()}).setGraph(e.graph());return c(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),c(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function ge(n,e){var t,r=n.x,o=n.y,i=e.x-r,e=e.y-o,u=n.width/2,n=n.height/2;if(i||e)return n=Math.abs(e)*u>Math.abs(i)*n?(t=(n=e<0?-n:n)*i/e,n):(t=u=i<0?-u:u)*e/i,{x:r+t,y:o+n};throw new Error("Not possible to find intersection inside of the rectangle")}function pn(r){var o=E(D(Ze(r)+1),function(){return[]});return c(r.nodes(),function(n){var e=r.node(n),t=e.rank;y(t)||(o[t][e.order]=n)}),o}function ho(e){var t=W(E(e.nodes(),function(n){return e.node(n).rank}));c(e.nodes(),function(n){n=e.node(n);b(n,"rank")&&(n.rank-=t)})}function lo(t){var r=W(E(t.nodes(),function(n){return t.node(n).rank})),o=[],i=(c(t.nodes(),function(n){var e=t.node(n).rank-r;o[e]||(o[e]=[]),o[e].push(n)}),0),u=t.graph().nodeRankFactor;c(o,function(n,e){y(n)&&e%u!=0?--i:i&&c(n,function(n){t.node(n).rank+=i})})}function pe(n,e,t,r){var o={width:0,height:0};return 4<=arguments.length&&(o.rank=t,o.order=r),G(n,"border",o,e)}function Ze(e){return S(E(e.nodes(),function(n){n=e.node(n).rank;if(!y(n))return n}))}function vo(n,e){var t={lhs:[],rhs:[]};return c(n,function(n){(e(n)?t.lhs:t.rhs).push(n)}),t}function go(n,e){var t=de();try{return e()}finally{console.log(n+" time: "+(de()-t)+"ms")}}function po(n,e){return e()}function bo(u){c(u.children(),function n(e){var t=u.children(e),r=u.node(e);if(t.length&&c(t,n),b(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(var o=r.minRank,i=r.maxRank+1;o<i;++o)be(u,"borderLeft","_bl",e,r,o),be(u,"borderRight","_br",e,r,o)}})}function be(n,e,t,r,o,i){var u=o[e][i-1],t=G(n,"border",{width:0,height:0,rank:i,borderType:e},t);o[e][i]=t,n.setParent(t,r),u&&n.setEdge(u,t,{weight:1})}function wo(n){var e=n.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||Je(n)}function mo(n){var e=n.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||_o(n),"lr"!==e&&"rl"!==e||(Eo(n),Je(n))}function Je(e){c(e.nodes(),function(n){we(e.node(n))}),c(e.edges(),function(n){we(e.edge(n))})}function we(n){var e=n.width;n.width=n.height,n.height=e}function _o(e){c(e.nodes(),function(n){En(e.node(n))}),c(e.edges(),function(n){n=e.edge(n);c(n.points,En),b(n,"y")&&En(n)})}function En(n){n.y=-n.y}function Eo(e){c(e.nodes(),function(n){yn(e.node(n))}),c(e.edges(),function(n){n=e.edge(n);c(n.points,yn),b(n,"x")&&yn(n)})}function yn(n){var e=n.x;n.x=n.y,n.y=e}function yo(e){e.graph().dummyChains=[],c(e.edges(),function(n){xo(e,n)})}function xo(n,e){var t,r,o,i=e.v,u=n.node(i).rank,a=e.w,c=n.node(a).rank,s=e.name,f=n.edge(e),d=f.labelRank;if(c!==u+1){for(n.removeEdge(e),o=0,++u;u<c;++o,++u)f.points=[],t=G(n,"edge",r={width:0,height:0,edgeLabel:f,edgeObj:e,rank:u},"_d"),u===d&&(r.width=f.width,r.height=f.height,r.dummy="edge-label",r.labelpos=f.labelpos),n.setEdge(i,t,{weight:f.weight},s),0===o&&n.graph().dummyChains.push(t),i=t;n.setEdge(i,a,{weight:f.weight},s)}}function To(o){c(o.graph().dummyChains,function(n){var e,t=o.node(n),r=t.edgeLabel;for(o.setEdge(t.edgeObj,r);t.dummy;)e=o.successors(n)[0],o.removeNode(n),r.points.push({x:t.x,y:t.y}),"edge-label"===t.dummy&&(r.x=t.x,r.y=t.y,r.width=t.width,r.height=t.height),t=o.node(n=e)})}function qn(r){var o={};c(r.sources(),function e(n){var t=r.node(n);if(b(o,n))return t.rank;o[n]=!0;n=W(E(r.outEdges(n),function(n){return e(n.w)-r.edge(n).minlen}));return n!==Number.POSITIVE_INFINITY&&null!=n||(n=0),t.rank=n})}function K(n,e){return n.node(e.w).rank-n.node(e.v).rank-n.edge(e).minlen}function Qe(n){var e,t=new L({directed:!1}),r=n.nodes()[0],o=n.nodeCount();for(t.setNode(r,{});Lo(t,n)<o;)e=Ao(t,n),e=t.hasNode(e.v)?K(n,e):-K(n,e),No(t,n,e);return t}function Lo(o,i){return c(o.nodes(),function t(r){c(i.nodeEdges(r),function(n){var e=n.v,e=r===e?n.w:e;o.hasNode(e)||K(i,n)||(o.setNode(e,{}),o.setEdge(r,e,{}),t(e))})}),o.nodeCount()}function Ao(e,t){return Yn(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return K(t,n)})}function No(n,e,t){c(n.nodes(),function(n){e.node(n).rank+=t})}function Oo(){}function ze(e,n,t){x(n)||(n=[n]);var r=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],i={};return c(n,function(n){if(!e.hasNode(n))throw new Error("Graph does not have node: "+n);nr(e,n,"post"===t,i,r,o)}),o}function nr(e,n,t,r,o,i){b(r,n)||(r[n]=!0,t||i.push(n),c(o(n),function(n){nr(e,n,t,r,o,i)}),t&&i.push(n))}function Co(n,e){return ze(n,e,"post")}function Io(n,e){return ze(n,e,"pre")}function M(n){qn(n=co(n));var e,t=Qe(n);for(jn(t),Hn(t,n);e=tr(t);)ar(t,n,e,ir(t,n,e))}function Hn(e,t){var n=Co(e,e.nodes());c(n=n.slice(0,n.length-1),function(n){Po(e,t,n)})}function Po(n,e,t){var r=n.node(t).parent;n.edge(t,r).cutvalue=er(n,e,t)}function er(r,o,i){var u=r.node(i).parent,a=!0,n=o.edge(i,u),s=0;return n||(a=!1,n=o.edge(u,i)),s=n.weight,c(o.nodeEdges(i),function(n){var e=n.v===i,t=e?n.w:n.v;t!==u&&(e=e===a,n=o.edge(n).weight,s+=e?n:-n,So(r,i,t)&&(n=r.edge(i,t).cutvalue,s+=e?-n:n))}),s}function jn(n,e){arguments.length<2&&(e=n.nodes()[0]),rr(n,{},1,e)}function rr(e,t,r,o,n){var i=r,u=e.node(o);return t[o]=!0,c(e.neighbors(o),function(n){b(t,n)||(r=rr(e,t,r,n,o))}),u.low=i,u.lim=r++,n?u.parent=n:delete u.parent,r}function tr(e){return Gn(e.edges(),function(n){return e.edge(n).cutvalue<0})}function ir(e,t,n){var r=n.v,o=n.w,n=(t.hasEdge(r,o)||(r=n.w,o=n.v),e.node(r)),r=e.node(o),i=n,u=!1;return n.lim>r.lim&&(i=r,u=!0),Yn(A(t.edges(),function(n){return u===me(e,e.node(n.v),i)&&u!==me(e,e.node(n.w),i)}),function(n){return K(t,n)})}function ar(n,e,t,r){var o=t.v,t=t.w;n.removeEdge(o,t),n.setEdge(r.v,r.w,{}),jn(n),Hn(n,e),$o(n,e)}function $o(o,i){var n=Gn(o.nodes(),function(n){return!i.node(n).parent});c(Io(o,n).slice(1),function(n){var e=o.node(n).parent,t=i.edge(n,e),r=!1;t||(t=i.edge(e,n),r=!0),i.node(n).rank=i.node(e).rank+(r?t.minlen:-t.minlen)})}function So(n,e,t){return n.hasEdge(e,t)}function me(n,e,t){return t.low<=e.lim&&e.lim<=t.lim}function Mo(n){switch(n.graph().ranker){case"network-simplex":_e(n);break;case"tight-tree":Fo(n);break;case"longest-path":Ro(n);break;default:_e(n)}}Oo.prototype=new Error,M.initLowLimValues=jn,M.initCutValues=Hn,M.calcCutValue=er,M.leaveEdge=tr,M.enterEdge=ir,M.exchangeEdges=ar;var Ro=qn;function Fo(n){qn(n),Qe(n)}function _e(n){M(n)}function Do(e){var t=G(e,"root",{},"_root"),r=ko(e),o=S(N(r))-1,i=2*o+1,u=(e.graph().nestingRoot=t,c(e.edges(),function(n){e.edge(n).minlen*=i}),Go(e)+1);c(e.children(),function(n){or(e,t,i,u,o,r,n)}),e.graph().nodeRankFactor=i}function or(o,i,u,a,s,f,d){var h,l,n,e=o.children(d);e.length?(h=pe(o,"_bt"),l=pe(o,"_bb"),n=o.node(d),o.setParent(h,d),n.borderTop=h,o.setParent(l,d),n.borderBottom=l,c(e,function(n){or(o,i,u,a,s,f,n);var e=o.node(n),t=e.borderTop||n,n=e.borderBottom||n,e=e.borderTop?a:2*a,r=t!==n?1:s-f[d]+1;o.setEdge(h,t,{weight:e,minlen:r,nestingEdge:!0}),o.setEdge(n,l,{weight:e,minlen:r,nestingEdge:!0})}),o.parent(d)||o.setEdge(i,h,{weight:0,minlen:s+f[d]})):d!==i&&o.setEdge(i,d,{weight:0,minlen:u})}function ko(o){var i={};return c(o.children(),function(n){!function e(n,t){var r=o.children(n);r&&r.length&&c(r,function(n){e(n,t+1)}),i[n]=t}(n,1)}),i}function Go(t){return J(t.edges(),function(n,e){return n+t.edge(e).weight},0)}function Bo(e){var n=e.graph();e.removeNode(n.nestingRoot),delete n.nestingRoot,c(e.edges(),function(n){e.edge(n).nestingEdge&&e.removeEdge(n)})}function Yo(o,i,n){var u,a={};c(n,function(n){for(var e,t,r=o.parent(n);r;){if((e=o.parent(r))?(t=a[e],a[e]=r):(t=u,u=r),t&&t!==r)return void i.setEdge(t,r);r=e}})}function Uo(o,t,i){var u=qo(o),a=new L({compound:!0}).setGraph({root:u}).setDefaultNodeLabel(function(n){return o.node(n)});return c(o.nodes(),function(r){var n=o.node(r),e=o.parent(r);(n.rank===t||n.minRank<=t&&t<=n.maxRank)&&(a.setNode(r),a.setParent(r,e||u),c(o[i](r),function(n){var e=n.v===r?n.w:n.v,t=a.edge(e,r),t=y(t)?0:t.weight;a.setEdge(e,r,{weight:o.edge(n).weight+t})}),b(n,"minRank")&&a.setNode(r,{borderLeft:n.borderLeft[t],borderRight:n.borderRight[t]}))}),a}function qo(n){for(var e;n.hasNode(e=Un("_root")););return e}function Ho(n,e){for(var t=0,r=1;r<e.length;++r)t+=jo(n,e[r-1],e[r]);return t}function jo(e,n,t){for(var r=Qa(t,E(t,function(n,e){return e})),n=k(E(n,function(n){return Q(E(e.outEdges(n),function(n){return{pos:r[n.w],weight:e.edge(n).weight}}),"pos")})),o=1;o<t.length;)o<<=1;var i=2*o-1,u=(--o,E(new Array(i),function(){return 0})),a=0;return c(n.forEach(function(n){var e=n.pos+o;u[e]+=n.weight;for(var t=0;0<e;)e%2&&(t+=u[e+1]),u[e=e-1>>1]+=n.weight;a+=n.weight*t})),a}function Wo(r){var o={},n=A(r.nodes(),function(n){return!r.children(n).length}),e=S(E(n,function(n){return r.node(n).rank})),i=E(D(e+1),function(){return[]});return c(Q(n,function(n){return r.node(n).rank}),function n(e){var t;b(o,e)||(o[e]=!0,t=r.node(e),i[t.rank].push(e),c(r.successors(e),n))}),i}function Ko(r,n){return E(n,function(n){var e=r.inEdges(n);return e.length?{v:n,barycenter:(e=J(e,function(n,e){var t=r.edge(e),e=r.node(e.v);return{sum:n.sum+t.weight*e.order,weight:n.weight+t.weight}},{sum:0,weight:0})).sum/e.weight,weight:e.weight}:{v:n}})}function Xo(n,e){var r={};return c(n,function(n,e){e=r[n.v]={indegree:0,in:[],out:[],vs:[n.v],i:e};y(n.barycenter)||(e.barycenter=n.barycenter,e.weight=n.weight)}),c(e.edges(),function(n){var e=r[n.v],t=r[n.w];y(e)||y(t)||(t.indegree++,e.out.push(r[n.w]))}),Vo(A(r,function(n){return!n.indegree}))}function Vo(t){var n=[];for(;t.length;){var e=t.pop();n.push(e),c(e.in.reverse(),function(e){return function(n){n.merged||(y(n.barycenter)||y(e.barycenter)||n.barycenter>=e.barycenter)&&Zo(e,n)}}(e)),c(e.out,function(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}(e))}return E(A(n,function(n){return!n.merged}),function(n){return un(n,["vs","i","barycenter","weight"])})}function Zo(n,e){var t=0,r=0;n.weight&&(t+=n.barycenter*n.weight,r+=n.weight),e.weight&&(t+=e.barycenter*e.weight,r+=e.weight),n.vs=e.vs.concat(n.vs),n.barycenter=t/r,n.weight=r,n.i=Math.min(e.i,n.i),e.merged=!0}function Jo(n,e){var n=vo(n,function(n){return b(n,"barycenter")}),t=n.lhs,r=Q(n.rhs,function(n){return-n.i}),o=[],i=0,u=0,a=0,n=(t.sort(Qo(!!e)),a=Ee(o,r,a),c(t,function(n){a+=n.vs.length,o.push(n.vs),i+=n.barycenter*n.weight,u+=n.weight,a=Ee(o,r,a)}),{vs:k(o)});return u&&(n.barycenter=i/u,n.weight=u),n}function Ee(n,e,t){for(var r;e.length&&(r=sn(e)).i<=t;)e.pop(),n.push(r.vs),t++;return t}function Qo(t){return function(n,e){return n.barycenter<e.barycenter?-1:n.barycenter>e.barycenter?1:t?e.i-n.i:n.i-e.i}}function sr(t,n,r,o){var e,i=t.children(n),n=t.node(n),u=n?n.borderLeft:void 0,a=n?n.borderRight:void 0,s={},n=(u&&(i=A(i,function(n){return n!==u&&n!==a})),Ko(t,i)),i=(c(n,function(n){var e;t.children(n.v).length&&(e=sr(t,n.v,r,o),b(s[n.v]=e,"barycenter")&&ns(n,e))}),Xo(n,r)),n=(zo(i,s),Jo(i,o));return u&&(n.vs=k([u,n.vs,a]),t.predecessors(u).length)&&(i=t.node(t.predecessors(u)[0]),e=t.node(t.predecessors(a)[0]),b(n,"barycenter")||(n.barycenter=0,n.weight=0),n.barycenter=(n.barycenter*n.weight+i.order+e.order)/(n.weight+2),n.weight+=2),n}function zo(n,e){c(n,function(n){n.vs=k(n.vs.map(function(n){return e[n]?e[n].vs:n}))})}function ns(n,e){y(n.barycenter)?(n.barycenter=e.barycenter,n.weight=e.weight):(n.barycenter=(n.barycenter*n.weight+e.barycenter*e.weight)/(n.weight+e.weight),n.weight+=e.weight)}function es(n){var e=Ze(n),t=ye(n,D(1,e+1),"inEdges"),r=ye(n,D(e-1,-1,-1),"outEdges");xe(n,Wo(n));for(var o,i=Number.POSITIVE_INFINITY,u=0,a=0;a<4;++u,++a){rs(u%2?t:r,2<=u%4);var c,s=Ho(n,c=pn(n));s<i&&(a=0,o=yi(c),i=s)}xe(n,o)}function ye(e,n,t){return E(n,function(n){return Uo(e,n,t)})}function rs(n,e){var r=new L;c(n,function(t){var n=t.graph().root,n=sr(t,n,r,e);c(n.vs,function(n,e){t.node(n).order=e}),Yo(t,r,n.vs)})}function xe(t,n){c(n,function(n){c(n,function(n,e){t.node(n).order=e})})}function ts(s){var f=as(s);c(s.graph().dummyChains,function(n){for(var e,t=s.node(n).edgeObj,r=is(s,f,t.v,t.w),o=r.path,i=r.lca,u=0,a=o[u],c=!0;n!==t.w;){if(e=s.node(n),c){for(;(a=o[u])!==i&&s.node(a).maxRank<e.rank;)u++;a===i&&(c=!1)}if(!c){for(;u<o.length-1&&s.node(a=o[u+1]).minRank<=e.rank;)u++;a=o[u]}s.setParent(n,a),n=s.successors(n)[0]}})}function is(n,e,t,r){for(var o,i=[],u=[],a=Math.min(e[t].low,e[r].low),c=Math.max(e[t].lim,e[r].lim),s=t;s=n.parent(s),i.push(s),s&&(e[s].low>a||c>e[s].lim););for(o=s,s=r;(s=n.parent(s))!==o;)u.push(s);return{path:i.concat(u.reverse()),lca:o}}function as(r){var o={},i=0;return c(r.children(),function n(e){var t=i;c(r.children(e),n),o[e]={low:t,lim:i++}}),o}function os(f,n){var d={};return J(n,function(n,r){var i=0,u=0,a=n.length,s=sn(r);return c(r,function(n,e){var t=us(f,n),o=t?f.node(t).order:a;!t&&n!==s||(c(r.slice(u,e+1),function(r){c(f.predecessors(r),function(n){var e=f.node(n),t=e.order;!(t<i||o<t)||e.dummy&&f.node(r).dummy||ur(d,n,r)})}),u=e+1,i=o)}),r}),d}function ss(a,n){var u={};function s(e,n,t,r,o){var i;c(D(n,t),function(n){i=e[n],a.node(i).dummy&&c(a.predecessors(i),function(n){var e=a.node(n);e.dummy&&(e.order<r||e.order>o)&&ur(u,n,i)})})}return J(n,function(t,r){var o,i=-1,u=0;return c(r,function(n,e){"border"===a.node(n).dummy&&(n=a.predecessors(n)).length&&(o=a.node(n[0]).order,s(r,u,e,i,o),u=e,i=o),s(r,u,r.length,o,t.length)}),r}),u}function us(e,n){if(e.node(n).dummy)return Gn(e.predecessors(n),function(n){return e.node(n).dummy})}function ur(n,e,t){t<e&&(r=e,e=t,t=r);var r=n[e];r||(n[e]=r={}),r[t]=!0}function fs(n,e,t){var r;return t<e&&(r=e,e=t,t=r),b(n[e],t)}function ds(n,e,a,s){var f={},d={},h={};return c(e,function(n){c(n,function(n,e){f[n]=n,d[n]=n,h[n]=e})}),c(e,function(n){var u=-1;c(n,function(n){var e=s(n);if(e.length)for(var t=((e=Q(e,function(n){return h[n]})).length-1)/2,r=Math.floor(t),o=Math.ceil(t);r<=o;++r){var i=e[r];d[n]===n&&u<h[i]&&!fs(a,n,i)&&(d[i]=n,d[n]=f[n]=f[i],u=h[i])}})}),{root:f,align:d}}function cs(r,n,e,t,o){var i={},u=hs(r,n,e,o),a=o?"borderLeft":"borderRight";function s(n,e){for(var t=u.nodes(),r=t.pop(),o={};r;)o[r]?n(r):(o[r]=!0,t.push(r),t=t.concat(e(r))),r=t.pop()}return s(function(n){i[n]=u.inEdges(n).reduce(function(n,e){return Math.max(n,i[e.v]+u.edge(e))},0)},u.predecessors.bind(u)),s(function(n){var e=u.outEdges(n).reduce(function(n,e){return Math.min(n,i[e.w]-u.edge(e))},Number.POSITIVE_INFINITY),t=r.node(n);e!==Number.POSITIVE_INFINITY&&t.borderType!==a&&(i[n]=Math.max(i[n],e))},u.successors.bind(u)),c(t,function(n){i[n]=i[e[n]]}),i}function hs(i,n,u,e){var a=new L,t=i.graph(),s=bs(t.nodesep,t.edgesep,e);return c(n,function(n){var o;c(n,function(n){var e,t,r=u[n];a.setNode(r),o&&(e=u[o],t=a.edge(e,r),a.setEdge(e,r,Math.max(s(i,n,o),t||0))),o=n})}),a}function ls(o,n){return Yn(N(n),function(n){var t=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return Ea(n,function(n,e){e=ws(o,e)/2;t=Math.max(n+e,t),r=Math.min(n-e,r)}),t-r})}function vs(u,a){var n=N(a),s=W(n),f=S(n);c(["u","d"],function(i){c(["l","r"],function(n){var e,t,r=i+n,o=u[r];o!==a&&(e=N(o),(t="l"===n?s-W(e):f-S(e))&&(u[r]=gn(o,function(n){return n+t})))})})}function gs(t,r){return gn(t.ul,function(n,e){if(r)return t[r.toLowerCase()][e];e=Q(E(t,e));return(e[1]+e[2])/2})}function ps(r){var o,n=pn(r),i=An(os(r,n),ss(r,n)),u={},e=(c(["u","d"],function(t){o="u"===t?n:N(n).reverse(),c(["l","r"],function(n){"r"===n&&(o=E(o,function(n){return N(n).reverse()}));var e=("u"===t?r.predecessors:r.successors).bind(r),e=ds(r,o,i,e),e=cs(r,o,e.root,e.align,"r"===n);"r"===n&&(e=gn(e,function(n){return-n})),u[t+n]=e})}),ls(r,u));return vs(u,e),gs(u,r.graph().align)}function bs(u,a,c){return function(n,e,t){var r,o=n.node(e),i=n.node(t),e=0;if(e+=o.width/2,b(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":r=-o.width/2;break;case"r":r=o.width/2}if(r&&(e+=c?r:-r),r=0,e=(e=(e+=(o.dummy?a:u)/2)+(i.dummy?a:u)/2)+i.width/2,b(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":r=i.width/2;break;case"r":r=-i.width/2}return r&&(e+=c?r:-r),r=0,e}}function ws(n,e){return n.node(e).width}function ms(t){_s(t=Ve(t)),ya(ps(t),function(n,e){t.node(e).x=n})}function _s(t){var n=pn(t),r=t.graph().ranksep,o=0;c(n,function(n){var e=S(E(n,function(n){return t.node(n).height}));c(n,function(n){t.node(n).y=o+e/2}),o+=e+r})}function js(e,n){var t=n&&n.debugTiming?go:po;t("layout",function(){var n=t("  buildLayoutGraph",function(){return Ps(e)});t("  runLayout",function(){Es(n,t)}),t("  updateInputGraph",function(){ys(e,n)})})}function Es(n,e){e("    makeSpaceForEdgeLabels",function(){$s(n)}),e("    removeSelfEdges",function(){Ys(n)}),e("    acyclic",function(){so(n)}),e("    nestingGraph.run",function(){Do(n)}),e("    rank",function(){Mo(Ve(n))}),e("    injectEdgeLabelProxies",function(){Ss(n)}),e("    removeEmptyRanks",function(){lo(n)}),e("    nestingGraph.cleanup",function(){Bo(n)}),e("    normalizeRanks",function(){ho(n)}),e("    assignRankMinMax",function(){Ms(n)}),e("    removeEdgeLabelProxies",function(){Rs(n)}),e("    normalize.run",function(){yo(n)}),e("    parentDummyChains",function(){ts(n)}),e("    addBorderSegments",function(){bo(n)}),e("    order",function(){es(n)}),e("    insertSelfEdges",function(){Us(n)}),e("    adjustCoordinateSystem",function(){wo(n)}),e("    position",function(){ms(n)}),e("    positionSelfEdges",function(){qs(n)}),e("    removeBorderNodes",function(){Bs(n)}),e("    normalize.undo",function(){To(n)}),e("    fixupEdgeLabelCoords",function(){ks(n)}),e("    undoCoordinateSystem",function(){mo(n)}),e("    translateGraph",function(){Fs(n)}),e("    assignNodeIntersects",function(){Ds(n)}),e("    reversePoints",function(){Gs(n)}),e("    acyclic.undo",function(){fo(n)})}function ys(r,o){c(r.nodes(),function(n){var e=r.node(n),t=o.node(n);e&&(e.x=t.x,e.y=t.y,o.children(n).length&&(e.width=t.width,e.height=t.height))}),c(r.edges(),function(n){var e=r.edge(n),n=o.edge(n);e.points=n.points,b(n,"x")&&(e.x=n.x,e.y=n.y)}),r.graph().width=o.graph().width,r.graph().height=o.graph().height}var xs=["nodesep","edgesep","ranksep","marginx","marginy"],Ts={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Ls=["acyclicer","ranker","rankdir","align"],As=["width","height"],Ns={width:0,height:0},Os=["minlen","weight","width","height","labeloffset"],Cs={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Is=["labelpos"];function Ps(t){var r=new L({multigraph:!0,compound:!0}),n=Tn(t.graph());return r.setGraph(An({},Ts,xn(n,xs),un(n,Ls))),c(t.nodes(),function(n){var e=Tn(t.node(n));r.setNode(n,va(xn(e,As),Ns)),r.setParent(n,t.parent(n))}),c(t.edges(),function(n){var e=Tn(t.edge(n));r.setEdge(n,An({},Cs,xn(e,Os),un(e,Is)))}),r}function $s(e){var t=e.graph();t.ranksep/=2,c(e.edges(),function(n){n=e.edge(n);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function Ss(t){c(t.edges(),function(n){var e=t.edge(n);e.width&&e.height&&(e=t.node(n.v),e={rank:(t.node(n.w).rank-e.rank)/2+e.rank,e:n},G(t,"edge-proxy",e,"_ep"))})}function Ms(e){var t=0;c(e.nodes(),function(n){n=e.node(n);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=S(t,n.maxRank))}),e.graph().maxRank=t}function Rs(t){c(t.nodes(),function(n){var e=t.node(n);"edge-proxy"===e.dummy&&(t.edge(e.e).labelRank=e.rank,t.removeNode(n))})}function Fs(e){var o=Number.POSITIVE_INFINITY,i=0,u=Number.POSITIVE_INFINITY,a=0,n=e.graph(),t=n.marginx||0,r=n.marginy||0;function s(n){var e=n.x,t=n.y,r=n.width,n=n.height;o=Math.min(o,e-r/2),i=Math.max(i,e+r/2),u=Math.min(u,t-n/2),a=Math.max(a,t+n/2)}c(e.nodes(),function(n){s(e.node(n))}),c(e.edges(),function(n){n=e.edge(n);b(n,"x")&&s(n)}),o-=t,u-=r,c(e.nodes(),function(n){n=e.node(n);n.x-=o,n.y-=u}),c(e.edges(),function(n){n=e.edge(n);c(n.points,function(n){n.x-=o,n.y-=u}),b(n,"x")&&(n.x-=o),b(n,"y")&&(n.y-=u)}),n.width=i-o+t,n.height=a-u+r}function Ds(i){c(i.edges(),function(n){var e,t=i.edge(n),r=i.node(n.v),n=i.node(n.w),o=t.points?(e=t.points[0],t.points[t.points.length-1]):(t.points=[],e=n,r);t.points.unshift(ge(r,e)),t.points.push(ge(n,o))})}function ks(t){c(t.edges(),function(n){var e=t.edge(n);if(b(e,"x"))switch("l"!==e.labelpos&&"r"!==e.labelpos||(e.width-=e.labeloffset),e.labelpos){case"l":e.x-=e.width/2+e.labeloffset;break;case"r":e.x+=e.width/2+e.labeloffset}})}function Gs(e){c(e.edges(),function(n){n=e.edge(n);n.reversed&&n.points.reverse()})}function Bs(i){c(i.nodes(),function(n){var e,t,r,o;i.children(n).length&&(n=i.node(n),e=i.node(n.borderTop),t=i.node(n.borderBottom),r=i.node(sn(n.borderLeft)),o=i.node(sn(n.borderRight)),n.width=Math.abs(o.x-r.x),n.height=Math.abs(t.y-e.y),n.x=r.x+n.width/2,n.y=e.y+n.height/2)}),c(i.nodes(),function(n){"border"===i.node(n).dummy&&i.removeNode(n)})}function Ys(t){c(t.edges(),function(n){var e;n.v===n.w&&((e=t.node(n.v)).selfEdges||(e.selfEdges=[]),e.selfEdges.push({e:n,label:t.edge(n)}),t.removeEdge(n))})}function Us(o){c(pn(o),function(n){var r=0;c(n,function(n,e){var t=o.node(n);t.order=e+r,c(t.selfEdges,function(n){G(o,"selfedge",{width:n.label.width,height:n.label.height,rank:t.rank,order:e+ ++r,e:n.e,label:n.label},"_se")}),delete t.selfEdges})})}function qs(u){c(u.nodes(),function(n){var e,t,r,o,i=u.node(n);"selfedge"===i.dummy&&(e=(o=u.node(i.e.v)).x+o.width/2,t=o.y,r=i.x-e,o=o.height/2,u.setEdge(i.e,i.label),u.removeNode(n),i.label.points=[{x:e+2*r/3,y:t-o},{x:e+5*r/6,y:t-o},{x:e+r,y:t},{x:e+5*r/6,y:t+o},{x:e+2*r/3,y:t+o}],i.label.x=i.x,i.label.y=i.y)})}function xn(n,e){return gn(un(n,e),Number)}function Tn(n){var t={};return c(n,function(n,e){t[e.toLowerCase()]=n}),t}export{L as G,tn as b,va as d,c as f,b as h,y as i,js as l,E as m,un as p,D as r,Un as u};