import{c as constant,p as path}from"./constant-b644328d.js";import{aY as pi,aZ as cos,a_ as sin,a$ as halfPi,b0 as epsilon,X as tau,b1 as sqrt,b2 as min,b3 as abs,b4 as atan2,b5 as asin,b6 as acos,b7 as max}from"./mermaid-f185fde2.js";function arcInnerRadius(n){return n.innerRadius}function arcOuterRadius(n){return n.outerRadius}function arcStartAngle(n){return n.startAngle}function arcEndAngle(n){return n.endAngle}function arcPadAngle(n){return n&&n.padAngle}function intersect(n,a,t,s,c,r,e,i){var t=t-n,s=s-a,e=e-c,i=i-r,o=i*t-e*s;if(!(o*o<epsilon))return[n+(o=(e*(a-r)-i*(n-c))/o)*t,a+o*s]}function cornerTangents(n,a,t,s,c,r,e){var i=n-t,o=a-s,e=(e?r:-r)/sqrt(i*i+o*o),o=e*o,e=-e*i,i=n+o,n=a+e,a=t+o,t=s+e,s=(i+a)/2,l=(n+t)/2,u=a-i,p=t-n,y=u*u+p*p,r=c-r,i=i*t-a*n,t=(p<0?-1:1)*sqrt(max(0,r*r*y-i*i)),a=(i*p-u*t)/y,n=(-i*u-p*t)/y,f=(i*p+u*t)/y,i=(-i*u+p*t)/y,u=a-s,p=n-l,t=f-s,y=i-l;return t*t+y*y<u*u+p*p&&(a=f,n=i),{cx:a,cy:n,x01:-o,y01:-e,x11:a*(c/r-1),y11:n*(c/r-1)}}function d3arc(){var I=arcInnerRadius,O=arcOuterRadius,S=constant(0),X=null,Y=arcStartAngle,Z=arcEndAngle,$=arcPadAngle,_=null;function a(){var n,a,t,s,c,r,e,i,o,l,u,p,y,f,x,d,g,h,m,T,b,A,v=+I.apply(this,arguments),R=+O.apply(this,arguments),q=Y.apply(this,arguments)-halfPi,P=Z.apply(this,arguments)-halfPi,j=abs(P-q),E=q<P;if(_=_||(n=path()),R<v&&(a=R,R=v,v=a),epsilon<R?tau-epsilon<j?(_.moveTo(R*cos(q),R*sin(q)),_.arc(0,0,R,q,P,!E),epsilon<v&&(_.moveTo(v*cos(P),v*sin(P)),_.arc(0,0,v,P,q,E))):(s=a=q,c=t=P,e=r=j,u=$.apply(this,arguments)/2,y=epsilon<u&&(X?+X.apply(this,arguments):sqrt(v*v+R*R)),A=b=i=min(abs(R-v)/2,+S.apply(this,arguments)),epsilon<y&&(p=asin(y/v*sin(u)),y=asin(y/R*sin(u)),(r-=2*p)>epsilon?(s+=p*=E?1:-1,c-=p):(r=0,s=c=(q+P)/2),(e-=2*y)>epsilon?(a+=y*=E?1:-1,t-=y):(e=0,a=t=(q+P)/2)),u=R*cos(a),p=R*sin(a),y=v*cos(c),q=v*sin(c),epsilon<i&&(f=R*cos(t),x=R*sin(t),d=v*cos(s),g=v*sin(s),j<pi&&(P=intersect(u,p,d,g,f,x,y,q))&&(j=u-P[0],T=p-P[1],h=f-P[0],m=x-P[1],j=1/sin(acos((j*h+T*m)/(sqrt(j*j+T*T)*sqrt(h*h+m*m)))/2),T=sqrt(P[0]*P[0]+P[1]*P[1]),b=min(i,(v-T)/(j-1)),A=min(i,(R-T)/(1+j)))),epsilon<e?epsilon<A?(o=cornerTangents(d,g,u,p,R,A,E),l=cornerTangents(f,x,y,q,R,A,E),_.moveTo(o.cx+o.x01,o.cy+o.y01),A<i?_.arc(o.cx,o.cy,A,atan2(o.y01,o.x01),atan2(l.y01,l.x01),!E):(_.arc(o.cx,o.cy,A,atan2(o.y01,o.x01),atan2(o.y11,o.x11),!E),_.arc(0,0,R,atan2(o.cy+o.y11,o.cx+o.x11),atan2(l.cy+l.y11,l.cx+l.x11),!E),_.arc(l.cx,l.cy,A,atan2(l.y11,l.x11),atan2(l.y01,l.x01),!E))):(_.moveTo(u,p),_.arc(0,0,R,a,t,!E)):_.moveTo(u,p),epsilon<v&&epsilon<r?epsilon<b?(o=cornerTangents(y,q,f,x,v,-b,E),l=cornerTangents(u,p,d,g,v,-b,E),_.lineTo(o.cx+o.x01,o.cy+o.y01),b<i?_.arc(o.cx,o.cy,b,atan2(o.y01,o.x01),atan2(l.y01,l.x01),!E):(_.arc(o.cx,o.cy,b,atan2(o.y01,o.x01),atan2(o.y11,o.x11),!E),_.arc(0,0,v,atan2(o.cy+o.y11,o.cx+o.x11),atan2(l.cy+l.y11,l.cx+l.x11),E),_.arc(l.cx,l.cy,b,atan2(l.y11,l.x11),atan2(l.y01,l.x01),!E))):_.arc(0,0,v,c,s,E):_.lineTo(y,q)):_.moveTo(0,0),_.closePath(),n)return _=null,n+""||null}return a.centroid=function(){var n=(+I.apply(this,arguments)+ +O.apply(this,arguments))/2,a=(+Y.apply(this,arguments)+ +Z.apply(this,arguments))/2-pi/2;return[cos(a)*n,sin(a)*n]},a.innerRadius=function(n){return arguments.length?(I="function"==typeof n?n:constant(+n),a):I},a.outerRadius=function(n){return arguments.length?(O="function"==typeof n?n:constant(+n),a):O},a.cornerRadius=function(n){return arguments.length?(S="function"==typeof n?n:constant(+n),a):S},a.padRadius=function(n){return arguments.length?(X=null==n?null:"function"==typeof n?n:constant(+n),a):X},a.startAngle=function(n){return arguments.length?(Y="function"==typeof n?n:constant(+n),a):Y},a.endAngle=function(n){return arguments.length?(Z="function"==typeof n?n:constant(+n),a):Z},a.padAngle=function(n){return arguments.length?($="function"==typeof n?n:constant(+n),a):$},a.context=function(n){return arguments.length?(_=null==n?null:n,a):_},a}export{d3arc as d};