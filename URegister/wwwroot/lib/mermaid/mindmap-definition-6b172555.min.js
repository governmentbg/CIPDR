import{d as sanitizeText$1,c as getConfig,l as log,T as commonjsGlobal,U as getDefaultExportFromCjs,j as d3select,t as setupGraphViewbox,aV as isDark,aW as lighten,aX as darken}from"./mermaid-f185fde2.js";import{c as createText}from"./createText-6836bc4a.js";var parser=function(){function e(e,t,r,n){for(r=r||{},n=e.length;n--;r[e[n]]=t);return r}var t=[1,4],r=[1,13],n=[1,12],a=[1,15],i=[1,16],o=[1,20],s=[1,19],l=[6,7,8],u=[1,26],c=[1,24],h=[1,25],v=[6,7,11],f=[1,6,13,15,16,19,22],d=[1,33],p=[1,34],g=[1,6,7,11,13,15,16,19,22],t={trace:function(){},yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:function(e,t,r,n,a,i,o){var s=i.length-1;switch(a){case 6:case 7:return n;case 8:n.getLogger().trace("Stop NL ");break;case 9:n.getLogger().trace("Stop EOF ");break;case 11:n.getLogger().trace("Stop NL2 ");break;case 12:n.getLogger().trace("Stop EOF2 ");break;case 15:n.getLogger().info("Node: ",i[s].id),n.addNode(i[s-1].length,i[s].id,i[s].descr,i[s].type);break;case 16:n.getLogger().trace("Icon: ",i[s]),n.decorateNode({icon:i[s]});break;case 17:case 21:n.decorateNode({class:i[s]});break;case 18:n.getLogger().trace("SPACELIST");break;case 19:n.getLogger().trace("Node: ",i[s].id),n.addNode(0,i[s].id,i[s].descr,i[s].type);break;case 20:n.decorateNode({icon:i[s]});break;case 25:n.getLogger().trace("node found ..",i[s-2]),this.$={id:i[s-1],descr:i[s-1],type:n.getType(i[s-2],i[s])};break;case 26:this.$={id:i[s],descr:i[s],type:n.nodeType.DEFAULT};break;case 27:n.getLogger().trace("node found ..",i[s-3]),this.$={id:i[s-3],descr:i[s-1],type:n.getType(i[s-2],i[s])}}},table:[{3:1,4:2,5:3,6:[1,5],8:t},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:t},{6:r,7:[1,10],9:9,12:11,13:n,14:14,15:a,16:i,17:17,18:18,19:o,22:s},e(l,[2,3]),{1:[2,2]},e(l,[2,4]),e(l,[2,5]),{1:[2,6],6:r,12:21,13:n,14:14,15:a,16:i,17:17,18:18,19:o,22:s},{6:r,9:22,12:11,13:n,14:14,15:a,16:i,17:17,18:18,19:o,22:s},{6:u,7:c,10:23,11:h},e(v,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:o,22:s}),e(v,[2,18]),e(v,[2,19]),e(v,[2,20]),e(v,[2,21]),e(v,[2,23]),e(v,[2,24]),e(v,[2,26],{19:[1,30]}),{20:[1,31]},{6:u,7:c,10:32,11:h},{1:[2,7],6:r,12:21,13:n,14:14,15:a,16:i,17:17,18:18,19:o,22:s},e(f,[2,14],{7:d,11:p}),e(g,[2,8]),e(g,[2,9]),e(g,[2,10]),e(v,[2,15]),e(v,[2,16]),e(v,[2,17]),{20:[1,35]},{21:[1,36]},e(f,[2,13],{7:d,11:p}),e(g,[2,11]),e(g,[2,12]),{21:[1,37]},e(v,[2,25]),e(v,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:function(e,t){var r;if(!t.recoverable)throw(r=new Error(e)).hash=t,r;this.trace(e)},parse:function(e){var t,r=this,n=[0],a=[],i=[null],o=[],s=this.table,l="",u=0,c=0,h=1,v=o.slice.call(arguments,1),f=Object.create(this.lexer),d={yy:{}};for(t in this.yy)Object.prototype.hasOwnProperty.call(this.yy,t)&&(d.yy[t]=this.yy[t]);f.setInput(e,d.yy),d.yy.lexer=f,d.yy.parser=this,void 0===f.yylloc&&(f.yylloc={});var p=f.yylloc,g=(o.push(p),f.options&&f.options.ranges);"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,m,b,x,w,E,T={};;){if(m=n[n.length-1],void 0===(b=this.defaultActions[m]||(null==y&&(_=void 0,"number"!=typeof(_=a.pop()||f.lex()||h)&&(_ instanceof Array&&(_=(a=_).pop()),_=r.symbols_[_]||_),y=_),s[m]&&s[m][y]))||!b.length||!b[0]){var _="",D=[];for(x in s[m])this.terminals_[x]&&2<x&&D.push("'"+this.terminals_[x]+"'");_=f.showPosition?"Parse error on line "+(u+1)+":\n"+f.showPosition()+"\nExpecting "+D.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(u+1)+": Unexpected "+(y==h?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(_,{text:f.match,token:this.terminals_[y]||y,line:f.yylineno,loc:p,expected:D})}if(b[0]instanceof Array&&1<b.length)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+y);switch(b[0]){case 1:n.push(y),i.push(f.yytext),o.push(f.yylloc),n.push(b[1]),y=null,c=f.yyleng,l=f.yytext,u=f.yylineno,p=f.yylloc;break;case 2:if(w=this.productions_[b[1]][1],T.$=i[i.length-w],T._$={first_line:o[o.length-(w||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(w||1)].first_column,last_column:o[o.length-1].last_column},g&&(T._$.range=[o[o.length-(w||1)].range[0],o[o.length-1].range[1]]),void 0!==(E=this.performAction.apply(T,[l,c,u,d.yy,b[1],i,o].concat(v))))return E;w&&(n=n.slice(0,-1*w*2),i=i.slice(0,-1*w),o=o.slice(0,-1*w)),n.push(this.productions_[b[1]][0]),i.push(T.$),o.push(T._$),E=s[n[n.length-2]][n[n.length-1]],n.push(E);break;case 3:return!0}}return!0}};function y(){this.yy={}}return t.lexer={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g),e=(this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===e.length?this.yylloc.first_column:0)+e[e.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(r=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,r,n,a=this._currentRules(),i=0;i<a.length;i++)if((r=this._input.match(this.rules[a[i]]))&&(!t||r[0].length>t[0].length))if(t=r,n=i,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,a[i])))return e;if(!this._backtrack)return!1;t=!1}else if(!this.options.flex)break;return t?!1!==(e=this.test_match(t,a[n]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(e){return 0<=(e=this.conditionStack.length-1-Math.abs(e||0))?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(e,t,r,n){switch(r){case 0:return e.getLogger().trace("Found comment",t.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:this.popState();break;case 5:e.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return e.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:e.getLogger().trace("end icon"),this.popState();break;case 10:return e.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return e.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return e.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return e.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:case 15:case 16:case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 23:this.popState();break;case 24:e.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return e.getLogger().trace("description:",t.yytext),"NODE_DESCR";case 26:this.popState();break;case 27:return this.popState(),e.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),e.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),e.getLogger().trace("node end ...",t.yytext),"NODE_DEND";case 30:return this.popState(),e.getLogger().trace("node end (("),"NODE_DEND";case 31:case 32:return this.popState(),e.getLogger().trace("node end (-"),"NODE_DEND";case 33:case 34:return this.popState(),e.getLogger().trace("node end (("),"NODE_DEND";case 35:case 36:return e.getLogger().trace("Long description:",t.yytext),20}},rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}},new((y.prototype=t).Parser=y)}();const mindmapParser=parser.parser=parser,sanitizeText=e=>sanitizeText$1(e,getConfig());let nodes=[],cnt=0,elements={};const clear=()=>{nodes=[],cnt=0,elements={}},getParent=function(t){for(let e=nodes.length-1;0<=e;e--)if(nodes[e].level<t)return nodes[e];return null},getMindmap=()=>0<nodes.length?nodes[0]:null,addNode=(e,t,r,n)=>{log.info("addNode",e,t,r,n);var a=getConfig();const i={id:cnt++,nodeId:sanitizeText(t),level:e,descr:sanitizeText(r),type:n,children:[],width:getConfig().mindmap.maxNodeWidth};switch(i.type){case nodeType.ROUNDED_RECT:case nodeType.RECT:case nodeType.HEXAGON:i.padding=2*a.mindmap.padding;break;default:i.padding=a.mindmap.padding}const o=getParent(e);if(o)o.children.push(i),nodes.push(i);else{if(0!==nodes.length){let e=new Error('There can be only one root. No parent could be found for ("'+i.descr+'")');throw e.hash={text:"branch "+name,token:"branch "+name,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+name+'"']},e}nodes.push(i)}},nodeType={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},getType=(e,t)=>{switch(log.debug("In get type",e,t),e){case"[":return nodeType.RECT;case"(":return")"===t?nodeType.ROUNDED_RECT:nodeType.CLOUD;case"((":return nodeType.CIRCLE;case")":return nodeType.CLOUD;case"))":return nodeType.BANG;case"{{":return nodeType.HEXAGON;default:return nodeType.DEFAULT}},setElementForId=(e,t)=>{elements[e]=t},decorateNode=e=>{const t=nodes[nodes.length-1];e&&e.icon&&(t.icon=sanitizeText(e.icon)),e&&e.class&&(t.class=sanitizeText(e.class))},type2Str=e=>{switch(e){case nodeType.DEFAULT:return"no-border";case nodeType.RECT:return"rect";case nodeType.ROUNDED_RECT:return"rounded-rect";case nodeType.CIRCLE:return"circle";case nodeType.CLOUD:return"cloud";case nodeType.BANG:return"bang";case nodeType.HEXAGON:return"hexgon";default:return"no-border"}};let parseError;const setErrorHandler=e=>{parseError=e},getLogger=()=>log,getNodeById=e=>nodes[e],getElementById=e=>elements[e],mindmapDb=Object.freeze(Object.defineProperty({__proto__:null,addNode:addNode,clear:clear,decorateNode:decorateNode,getElementById:getElementById,getLogger:getLogger,getMindmap:getMindmap,getNodeById:getNodeById,getType:getType,nodeType:nodeType,get parseError(){return parseError},sanitizeText:sanitizeText,setElementForId:setElementForId,setErrorHandler:setErrorHandler,type2Str:type2Str},Symbol.toStringTag,{value:"Module"})),MAX_SECTIONS=12,defaultBkg=function(e,t,r){e.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+type2Str(t.type)).attr("d",`M0 ${t.height-5} v${10-t.height} q0,-5 5,-5 h${t.width-10} q5,0 5,5 v${t.height-5} H0 Z`),e.append("line").attr("class","node-line-"+r).attr("x1",0).attr("y1",t.height).attr("x2",t.width).attr("y2",t.height)},rectBkg=function(e,t){e.append("rect").attr("id","node-"+t.id).attr("class","node-bkg node-"+type2Str(t.type)).attr("height",t.height).attr("width",t.width)},cloudBkg=function(e,t){var r=t.width,n=t.height,a=.15*r,i=.25*r,o=.35*r,s=.2*r;e.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+type2Str(t.type)).attr("d",`M0 0 a${a},${a} 0 0,1 ${.25*r},${-1*r*.1}
      a${o},${o} 1 0,1 ${.4*r},${-1*r*.1}
      a${i},${i} 1 0,1 ${.35*r},${.2*+r}

      a${a},${a} 1 0,1 ${.15*r},${.35*+n}
      a${s},${s} 1 0,1 ${-1*r*.15},${.65*+n}

      a${i},${a} 1 0,1 ${-1*r*.25},${.15*r}
      a${o},${o} 1 0,1 ${-1*r*.5},0
      a${a},${a} 1 0,1 ${-1*r*.25},${-1*r*.15}

      a${a},${a} 1 0,1 ${-1*r*.1},${-1*n*.35}
      a${s},${s} 1 0,1 ${.1*r},${-1*n*.65}

    H0 V0 Z`)},bangBkg=function(e,t){var r=t.width,n=t.height,a=.15*r;e.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+type2Str(t.type)).attr("d",`M0 0 a${a},${a} 1 0,0 ${.25*r},${-1*n*.1}
      a${a},${a} 1 0,0 ${.25*r},0
      a${a},${a} 1 0,0 ${.25*r},0
      a${a},${a} 1 0,0 ${.25*r},${.1*+n}

      a${a},${a} 1 0,0 ${.15*r},${.33*+n}
      a${.8*a},${.8*a} 1 0,0 0,${.34*+n}
      a${a},${a} 1 0,0 ${-1*r*.15},${.33*+n}

      a${a},${a} 1 0,0 ${-1*r*.25},${.15*n}
      a${a},${a} 1 0,0 ${-1*r*.25},0
      a${a},${a} 1 0,0 ${-1*r*.25},0
      a${a},${a} 1 0,0 ${-1*r*.25},${-1*n*.15}

      a${a},${a} 1 0,0 ${-1*r*.1},${-1*n*.33}
      a${.8*a},${.8*a} 1 0,0 0,${-1*n*.34}
      a${a},${a} 1 0,0 ${.1*r},${-1*n*.33}

    H0 V0 Z`)},circleBkg=function(e,t){e.append("circle").attr("id","node-"+t.id).attr("class","node-bkg node-"+type2Str(t.type)).attr("r",t.width/2)};function insertPolygonShape(e,t,r,n,a){return e.insert("polygon",":first-child").attr("points",n.map(function(e){return e.x+","+e.y}).join(" ")).attr("transform","translate("+(a.width-t)/2+", "+r+")")}const hexagonBkg=function(e,t){var r=t.height,n=r/4,a=t.width-t.padding+2*n;insertPolygonShape(e,a,r,[{x:n,y:0},{x:a-n,y:0},{x:a,y:-r/2},{x:a-n,y:-r},{x:n,y:-r},{x:0,y:-r/2}],t)},roundedRectBkg=function(e,t){e.append("rect").attr("id","node-"+t.id).attr("class","node-bkg node-"+type2Str(t.type)).attr("height",t.height).attr("rx",t.padding).attr("ry",t.padding).attr("width",t.width)},drawNode=function(e,t,r,n){var a=n.htmlLabels,i=r%(MAX_SECTIONS-1);const o=e.append("g");let s="section-"+(t.section=i);i<0&&(s+=" section-root"),o.attr("class",(t.class?t.class+" ":"")+"mindmap-node "+s);const l=o.append("g"),u=o.append("g");var r=t.descr.replace(/(<br\/*>)/g,"\n"),e=(createText(u,r,{useHtmlLabels:a,width:t.width,classes:"mindmap-node-label"}),a||u.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),u.node().getBBox()),r=n.fontSize.replace?n.fontSize.replace("px",""):n.fontSize;if(t.height=e.height+1.1*r*.5+t.padding,t.width=e.width+2*t.padding,t.icon)if(t.type===nodeType.CIRCLE){t.height+=50,t.width+=50;const c=o.append("foreignObject").attr("height","50px").attr("width",t.width).attr("style","text-align: center;");c.append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+i+" "+t.icon),u.attr("transform","translate("+t.width/2+", "+(t.height/2-1.5*t.padding)+")")}else{t.width+=50;var n=t.height,r=(t.height=Math.max(n,60),Math.abs(t.height-n));const h=o.append("foreignObject").attr("width","60px").attr("height",t.height).attr("style","text-align: center;margin-top:"+r/2+"px;");h.append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+i+" "+t.icon),u.attr("transform","translate("+(25+t.width/2)+", "+(r/2+t.padding/2)+")")}else a?(n=(t.width-e.width)/2,r=(t.height-e.height)/2,u.attr("transform","translate("+n+", "+r+")")):(a=t.width/2,e=t.padding/2,u.attr("transform","translate("+a+", "+e+")"));switch(t.type){case nodeType.DEFAULT:defaultBkg(l,t,i);break;case nodeType.ROUNDED_RECT:roundedRectBkg(l,t);break;case nodeType.RECT:rectBkg(l,t);break;case nodeType.CIRCLE:l.attr("transform","translate("+t.width/2+", "+ +t.height/2+")"),circleBkg(l,t);break;case nodeType.CLOUD:cloudBkg(l,t);break;case nodeType.BANG:bangBkg(l,t);break;case nodeType.HEXAGON:hexagonBkg(l,t)}return setElementForId(t.id,o),t.height},drawEdge=function(e,t,r,n,a){var a=a%(MAX_SECTIONS-1),i=r.x+r.width/2,o=r.y+r.height/2,s=t.x+t.width/2,t=t.y+t.height/2,l=i<s?i+Math.abs(i-s)/2:i-Math.abs(i-s)/2,u=o<t?o+Math.abs(o-t)/2:o-Math.abs(o-t)/2,c=i<s?Math.abs(i-l)/2+i:-Math.abs(i-l)/2+i,h=o<t?Math.abs(o-u)/2+o:-Math.abs(o-u)/2+o;e.append("path").attr("d","TB"===r.direction||"BT"===r.direction?`M${i},${o} Q${i},${h} ${l},${u} T${s},`+t:`M${i},${o} Q${c},${o} ${l},${u} T${s},`+t).attr("class","edge section-edge-"+a+" edge-depth-"+n)},positionNode=function(e){const t=getElementById(e.id);var r=e.x||0,e=e.y||0;t.attr("transform","translate("+r+","+e+")")},svgDraw={drawNode:drawNode,positionNode:positionNode,drawEdge:drawEdge};var cytoscape_umd={exports:{}},cytoscape_umdExports=(cytoscape_umd.exports=function(){function x(e){"@babel/helpers - typeof";return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function N(e,t,r){if(t)C(e.prototype,t);if(r)C(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function A(e,t,r){if(t in e)Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true});else e[t]=r;return e}function L(e,t){return S(e)||O(e,t)||M(e,t)||R()}function S(e){if(Array.isArray(e))return e}function O(e,t){var r=e==null?null:typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r==null)return;var n=[];var a=true;var i=false;var o,s;try{for(r=r.call(e);!(a=(o=r.next()).done);a=true){n.push(o.value);if(t&&n.length===t)break}}catch(e){i=true;s=e}finally{try{if(!a&&r["return"]!=null)r["return"]()}finally{if(i)throw s}}return n}function M(e,t){if(!e)return;if(typeof e==="string")return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}function P(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var g=typeof window==="undefined"?null:window,B=g?g.navigator:null,F=(g?g.document:null,x("")),Y=x({}),V=x(function(){}),q=typeof HTMLElement==="undefined"?"undefined":x(HTMLElement),H=function e(t){return t&&t.instanceString&&U(t.instanceString)?t.instanceString():null},J=function e(t){return t!=null&&x(t)==F},U=function e(t){return t!=null&&x(t)===V},K=function e(t){return!Q(t)&&(Array.isArray?Array.isArray(t):t!=null&&t instanceof Array)},I=function e(t){return t!=null&&x(t)===Y&&!K(t)&&t.constructor===Object},W=function e(t){return t!=null&&x(t)===Y},me=function e(t){return t!=null&&x(t)===x(1)&&!isNaN(t)},$=function e(t){return me(t)&&Math.floor(t)===t},Z=function e(t){if("undefined"===q)return void 0;else return null!=t&&t instanceof HTMLElement},Q=function e(t){return te(t)||re(t)},te=function e(t){return H(t)==="collection"&&t._private.single},re=function e(t){return H(t)==="collection"&&!t._private.single},ne=function e(t){return H(t)==="core"},ae=function e(t){return H(t)==="stylesheet"},ie=function e(t){return H(t)==="event"},oe=function e(t){if(t===void 0||t===null)return true;else if(t===""||t.match(/^\s+$/))return true;return false},se=function e(t){if(typeof HTMLElement==="undefined")return false;else return t instanceof HTMLElement},le=function e(t){return I(t)&&me(t.x1)&&me(t.x2)&&me(t.y1)&&me(t.y2)},ue=function e(t){return W(t)&&U(t.then)},ce=function e(){return B&&B.userAgent.match(/msie|trident|edge/i)},he=function e(o,s){if(!s)s=function e(){if(arguments.length===1)return arguments[0];else if(arguments.length===0)return"undefined";var t=[];for(var r=0;r<arguments.length;r++)t.push(arguments[r]);return t.join("$")};var t=function e(){var t=this;var r=arguments;var n;var a=s.apply(t,r);var i=e.cache;if(!(n=i[a]))n=i[a]=o.apply(t,r);return n};t.cache={};return t},ve=he(function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),fe=he(function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),de=he(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),pe=function e(t){if(oe(t))return t;return t.charAt(0).toUpperCase()+t.substring(1)},j="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",ge="rgb[a]?\\(("+j+"[%]?)\\s*,\\s*("+j+"[%]?)\\s*,\\s*("+j+"[%]?)(?:\\s*,\\s*("+j+"))?\\)",ye="rgb[a]?\\((?:"+j+"[%]?)\\s*,\\s*(?:"+j+"[%]?)\\s*,\\s*(?:"+j+"[%]?)(?:\\s*,\\s*(?:"+j+"))?\\)",be="hsl[a]?\\(("+j+")\\s*,\\s*("+j+"[%])\\s*,\\s*("+j+"[%])(?:\\s*,\\s*("+j+"))?\\)",xe="hsl[a]?\\((?:"+j+")\\s*,\\s*(?:"+j+"[%])\\s*,\\s*(?:"+j+"[%])(?:\\s*,\\s*(?:"+j+"))?\\)",we="\\#[0-9a-fA-F]{3}",Ee="\\#[0-9a-fA-F]{6}",Te=function e(t,r){if(t<r)return-1;else if(t>r)return 1;else return 0},_e=function e(t,r){return-1*Te(t,r)},T=Object.assign!=null?Object.assign.bind(Object):function(e){var t=arguments;for(var r=1;r<t.length;r++){var n=t[r];if(n==null)continue;var a=Object.keys(n);for(var i=0;i<a.length;i++){var o=a[i];e[o]=n[o]}}return e},De=function e(t){if(!(t.length===4||t.length===7)||t[0]!=="#")return;var r=t.length===4;var n,a,i;var o=16;if(r){n=parseInt(t[1]+t[1],o);a=parseInt(t[2]+t[2],o);i=parseInt(t[3]+t[3],o)}else{n=parseInt(t[1]+t[2],o);a=parseInt(t[3]+t[4],o);i=parseInt(t[5]+t[6],o)}return[n,a,i]},Ce=function e(t){var r;var n,a,i,o,s,l,u;function c(e,t,r){if(r<0)r+=1;if(r>1)r-=1;if(r<1/6)return e+(t-e)*6*r;if(r<1/2)return t;if(r<2/3)return e+(t-e)*(2/3-r)*6;return e}var h=new RegExp("^"+be+"$").exec(t);if(h){n=parseInt(h[1]);if(n<0)n=(360- -1*n%360)%360;else if(n>360)n=n%360;n/=360;a=parseFloat(h[2]);if(a<0||a>100)return;a=a/100;i=parseFloat(h[3]);if(i<0||i>100)return;i=i/100;o=h[4];if(o!==void 0){o=parseFloat(o);if(o<0||o>1)return}if(a===0)s=l=u=Math.round(i*255);else{var v=i<.5?i*(1+a):i+a-i*a;var f=2*i-v;s=Math.round(255*c(f,v,n+1/3));l=Math.round(255*c(f,v,n));u=Math.round(255*c(f,v,n-1/3))}r=[s,l,u,o]}return r},Ne=function e(t){var r;var n=new RegExp("^"+ge+"$").exec(t);if(n){r=[];var a=[];for(var i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%")a[i]=true;o=parseFloat(o);if(a[i])o=o/100*255;if(o<0||o>255)return;r.push(Math.floor(o))}var s=a[1]||a[2]||a[3];var l=a[1]&&a[2]&&a[3];if(s&&!l)return;var u=n[4];if(u!==void 0){u=parseFloat(u);if(u<0||u>1)return;r.push(u)}}return r},Ae=function e(t){return Se[t.toLowerCase()]},Le=function e(t){return(K(t)?t:null)||Ae(t)||De(t)||Ne(t)||Ce(t)},Se={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ie=function e(t){var r=t.map;var n=t.keys;var a=n.length;for(var i=0;i<a;i++){var o=n[i];if(I(o))throw Error("Tried to set map with object key");if(i<n.length-1){if(r[o]==null)r[o]={};r=r[o]}else r[o]=t.value}},ke=function e(t){var r=t.map;var n=t.keys;var a=n.length;for(var i=0;i<a;i++){var o=n[i];if(I(o))throw Error("Tried to get map with object key");r=r[o];if(r==null)return r}return r};function Oe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Me=Oe,Pe=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof commonjsGlobal!=="undefined"?commonjsGlobal:typeof self!=="undefined"?self:{};function Re(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Be=typeof Pe=="object"&&Pe&&Pe.Object===Object&&Pe,Fe,ze=typeof self=="object"&&self&&self.Object===Object&&self,Ge,Ye=Be||ze||Function("return this")(),Xe,Ve=function(){return Ye.Date.now()},Ue=/\s/;function je(e){var t=e.length;while(t--&&Ue.test(e.charAt(t)));return t}var qe=je,He=/^\s+/;function We(e){return e?e.slice(0,qe(e)+1).replace(He,""):e}var $e=We,Ke,Ze=Ye.Symbol,Qe=Object.prototype,Je=Qe.hasOwnProperty,et=Qe.toString,tt=Ze?Ze.toStringTag:void 0;function rt(e){var t=Je.call(e,tt),r=e[tt];try{e[tt]=void 0;var n=true}catch(e){}var a=et.call(e);if(n)if(t)e[tt]=r;else delete e[tt];return a}var nt=rt,at,it=Object.prototype.toString;function ot(e){return it.call(e)}var st=ot,lt="[object Null]",ut="[object Undefined]",ct=Ze?Ze.toStringTag:void 0;function ht(e){if(e==null)return e===void 0?ut:lt;return ct&&ct in Object(e)?nt(e):st(e)}var vt=ht;function ft(e){return e!=null&&typeof e=="object"}var dt=ft,pt="[object Symbol]";function gt(e){return typeof e=="symbol"||dt(e)&&vt(e)==pt}var yt=gt,mt=0/0,bt=/^[-+]0x[0-9a-f]+$/i,xt=/^0b[01]+$/i,wt=/^0o[0-7]+$/i,Et=parseInt;function Tt(e){if(typeof e=="number")return e;if(yt(e))return mt;if(Me(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Me(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=$e(e);var r=xt.test(e);return r||wt.test(e)?Et(e.slice(2),r?2:8):bt.test(e)?mt:+e}var _t=Tt,Dt="Expected a function",Ct=Math.max,Nt=Math.min;function At(n,a,e){var i,o,s,l,r,u,c=0,t=false,h=false,v=true;if(typeof n!="function")throw new TypeError(Dt);a=_t(a)||0;if(Me(e)){t=!!e.leading;h="maxWait"in e;s=h?Ct(_t(e.maxWait)||0,a):s;v="trailing"in e?!!e.trailing:v}function f(e){var t=i,r=o;i=o=void 0;c=e;l=n.apply(r,t);return l}function d(e){c=e;r=setTimeout(y,a);return t?f(e):l}function p(e){var t=e-u,r=e-c,n=a-t;return h?Nt(n,s-r):n}function g(e){var t=e-u,r=e-c;return u===void 0||t>=a||t<0||h&&r>=s}function y(){var e=Ve();if(g(e))return m(e);r=setTimeout(y,p(e))}function m(e){r=void 0;if(v&&i)return f(e);i=o=void 0;return l}function b(){if(r!==void 0)clearTimeout(r);c=0;i=u=o=r=void 0}function x(){return r===void 0?l:m(Ve())}function w(){var e=Ve(),t=g(e);i=arguments;o=this;u=e;if(t){if(r===void 0)return d(u);if(h){clearTimeout(r);r=setTimeout(y,a);return f(u)}}if(r===void 0)r=setTimeout(y,a);return l}w.cancel=b;w.flush=x;return w}var Lt=At,St=g?g.performance:null,It=St&&St.now?function(){return St.now()}:function(){return Date.now()},kt=function(){if(g)if(g.requestAnimationFrame)return function(e){g.requestAnimationFrame(e)};else if(g.mozRequestAnimationFrame)return function(e){g.mozRequestAnimationFrame(e)};else if(g.webkitRequestAnimationFrame)return function(e){g.webkitRequestAnimationFrame(e)};else if(g.msRequestAnimationFrame)return function(e){g.msRequestAnimationFrame(e)};return function(e){if(e)setTimeout(function(){e(It())},1e3/60)}}(),Ot=function e(t){return kt(t)},Mt=It,Pt=9261,Rt=65599,Bt=5381,Ft=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pt;var n=r;var a;for(;;){a=t.next();if(a.done)break;n=n*Rt+a.value|0}return n},zt=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pt;return r*Rt+t|0},Gt=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bt;return(r<<5)+r+t|0},Yt=function e(t,r){return t*2097152+r},Xt=function e(t){return t[0]*2097152+t[1]},Vt=function e(t,r){return[zt(t[0],r[0]),Gt(t[1],r[1])]},Ut=function e(t,r){var n={value:0,done:false};var a=0;var i=t.length;var o={next:function e(){if(a<i)n.value=t[a++];else n.done=true;return n}};return Ft(o,r)},jt=function e(t,r){var n={value:0,done:false};var a=0;var i=t.length;var o={next:function e(){if(a<i)n.value=t.charCodeAt(a++);else n.done=true;return n}};return Ft(o,r)},qt=function e(){return Ht(arguments)},Ht=function e(t){var r;for(var n=0;n<t.length;n++){var a=t[n];if(n===0)r=jt(a);else r=jt(a,r)}return r},Wt=true,$t=console.warn!=null,Kt=console.trace!=null,Zt=Number.MAX_SAFE_INTEGER||9007199254740991,Qt=function e(){return true},Jt=function e(){return false},er=function e(){return 0},tr=function e(){},z=function e(t){throw new Error(t)},rr=function e(t){if(t!==void 0)Wt=!!t;else return Wt},ee=function e(t){if(!rr())return;if($t)console.warn(t);else{console.log(t);if(Kt)console.trace()}},nr=function e(t){return T({},t)},ar=function e(t){if(t==null)return t;if(K(t))return t.slice();else if(I(t))return nr(t);else return t},ir=function e(t){return t.slice()},or=function e(t,r){for(r=t="";t++<36;r+=t*51&52?(t^15?8^Math.random()*(t^20?16:4):4).toString(16):"-");return r},sr={},lr=function e(){return sr},e=function e(i){var o=Object.keys(i);return function(e){var t={};for(var r=0;r<o.length;r++){var n=o[r];var a=e==null?void 0:e[n];t[n]=a===void 0?i[n]:a}return t}},ur=function e(t,r,n){for(var a=t.length-1;a>=0;a--)if(t[a]===r){t.splice(a,1);if(n)break}},cr=function e(t){t.splice(0,t.length)},hr=function e(t,r){for(var n=0;n<r.length;n++){var a=r[n];t.push(a)}},vr=function e(t,r,n){if(n)r=de(n,r);return t[r]},fr=function e(t,r,n,a){if(n)r=de(n,r);t[r]=a},dr,pr=typeof Map!=="undefined"?Map:function(){function e(){D(this,e);this._obj={}}N(e,[{key:"set",value:function e(t,r){this._obj[t]=r;return this}},{key:"delete",value:function e(t){this._obj[t]=void 0;return this}},{key:"clear",value:function e(){this._obj={}}},{key:"has",value:function e(t){return this._obj[t]!==void 0}},{key:"get",value:function e(t){return this._obj[t]}}]);return e}(),gr="undefined",yr=function(){function n(e){D(this,n);this._obj=Object.create(null);this.size=0;if(e!=null){var t;if(e.instanceString!=null&&e.instanceString()===this.instanceString())t=e.toArray();else t=e;for(var r=0;r<t.length;r++)this.add(t[r])}}N(n,[{key:"instanceString",value:function e(){return"set"}},{key:"add",value:function e(t){var r=this._obj;if(r[t]!==1){r[t]=1;this.size++}}},{key:"delete",value:function e(t){var r=this._obj;if(r[t]===1){r[t]=0;this.size--}}},{key:"clear",value:function e(){this._obj=Object.create(null)}},{key:"has",value:function e(t){return this._obj[t]===1}},{key:"toArray",value:function e(){var t=this;return Object.keys(this._obj).filter(function(e){return t.has(e)})}},{key:"forEach",value:function e(t,r){return this.toArray().forEach(t,r)}}]);return n}(),mr=(typeof Set==="undefined"?"undefined":x(Set))!==gr?Set:yr,br=function e(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:true;if(t===void 0||r===void 0||!ne(t)){z("An element must have a core reference and parameters set");return}var a=r.group;if(a==null)if(r.data&&r.data.source!=null&&r.data.target!=null)a="edges";else a="nodes";if(a!=="nodes"&&a!=="edges"){z("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1;this[0]=this;var i=this._private={cy:t,single:true,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:false,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:true,selected:r.selected?true:false,selectable:r.selectable===void 0?true:r.selectable?true:false,locked:r.locked?true:false,grabbed:false,grabbable:r.grabbable===void 0?true:r.grabbable?true:false,pannable:r.pannable===void 0?a==="edges"?true:false:r.pannable?true:false,active:false,classes:new mr,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:false,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null)i.position.x=0;if(i.position.y==null)i.position.y=0;if(r.renderedPosition){var o=r.renderedPosition;var s=t.pan();var l=t.zoom();i.position={x:(o.x-s.x)/l,y:(o.y-s.y)/l}}var u=[];if(K(r.classes))u=r.classes;else if(J(r.classes))u=r.classes.split(/\s+/);for(var c=0,h=u.length;c<h;c++){var v=u[c];if(!v||v==="")continue;i.classes.add(v)}this.createEmitter();var f=r.style||r.css;if(f){ee("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead.");this.style(f)}if(n===void 0||n)this.restore()},xr=function e(C){C={bfs:C.bfs||!C.dfs,dfs:C.dfs||!C.bfs};return function e(t,d,p){var r;if(I(t)&&!Q(t)){r=t;t=r.roots||r.root;d=r.visit;p=r.directed}p=arguments.length===2&&!U(d)?d:p;d=U(d)?d:function(){};var n=this._private.cy;var a=t=J(t)?this.filter(t):t;var g=[];var y=[];var m={};var b={};var x={};var w=0;var E;var i=this.byGroup(),T=i.nodes,_=i.edges;for(var o=0;o<a.length;o++){var s=a[o];var l=s.id();if(s.isNode()){g.unshift(s);if(C.bfs){x[l]=true;y.push(s)}b[l]=0}}var u=function e(){var t=C.bfs?g.shift():g.pop();var r=t.id();if(C.dfs){if(x[r])return"continue";x[r]=true;y.push(t)}var n=b[r];var a=m[r];var i=a!=null?a.source():null;var o=a!=null?a.target():null;var s=a==null?void 0:t.same(i)?o[0]:i[0];var l=void 0;l=d(t,a,s,w++,n);if(l===true){E=t;return"break"}if(l===false)return"break";var u=t.connectedEdges().filter(function(e){return(!p||e.source().same(t))&&_.has(e)});for(var c=0;c<u.length;c++){var h=u[c];var v=h.connectedNodes().filter(function(e){return!e.same(t)&&T.has(e)});var f=v.id();if(v.length!==0&&!x[f]){v=v[0];g.push(v);if(C.bfs){x[f]=true;y.push(v)}m[f]=h;b[f]=b[r]+1}}};while(g.length!==0){var c=u();if(c==="continue")continue;if(c==="break")break}var h=n.collection();for(var v=0;v<y.length;v++){var f=y[v];var D=m[f.id()];if(D!=null)h.push(D);h.push(f)}return{path:n.collection(h),found:n.collection(E)}}},wr={breadthFirstSearch:xr({bfs:true}),depthFirstSearch:xr({dfs:true})};wr.bfs=wr.breadthFirstSearch,wr.dfs=wr.depthFirstSearch;var Er,Tr=Re(function(s,e){(function(){var e,v,l,f,d,r,u,n,p,g,a,i,o,c,h;l=Math.floor,g=Math.min;v=function(e,t){if(e<t)return-1;if(e>t)return 1;return 0};p=function(e,t,r,n,a){var i;if(r==null)r=0;if(a==null)a=v;if(r<0)throw new Error("lo must be non-negative");if(n==null)n=e.length;while(r<n){i=l((r+n)/2);if(a(t,e[i])<0)n=i;else r=i+1}return[].splice.apply(e,[r,r-r].concat(t)),t};r=function(e,t,r){if(r==null)r=v;e.push(t);return c(e,0,e.length-1,r)};d=function(e,t){var r,n;if(t==null)t=v;r=e.pop();if(e.length){n=e[0];e[0]=r;h(e,0,t)}else n=r;return n};n=function(e,t,r){var n;if(r==null)r=v;n=e[0];e[0]=t;h(e,0,r);return n};u=function(e,t,r){var n;if(r==null)r=v;if(e.length&&r(e[0],t)<0){n=[e[0],t],t=n[0],e[0]=n[1];h(e,0,r)}return t};f=function(r,e){var t,n,a,i,o,s;if(e==null)e=v;i=function(){s=[];for(var e=0,t=l(r.length/2);0<=t?e<t:e>t;0<=t?e++:e--)s.push(e);return s}.apply(this).reverse();o=[];for(n=0,a=i.length;n<a;n++){t=i[n];o.push(h(r,t,e))}return o};o=function(e,t,r){var n;if(r==null)r=v;n=e.indexOf(t);if(n===-1)return;c(e,0,n,r);return h(e,n,r)};a=function(e,t,r){var n,a,i,o,s;if(r==null)r=v;a=e.slice(0,t);if(!a.length)return a;f(a,r);s=e.slice(t);for(i=0,o=s.length;i<o;i++){n=s[i];u(a,n,r)}return a.sort(r).reverse()};i=function(e,t,r){var n,a,i,o,s,l,u,c,h;if(r==null)r=v;if(t*10<=e.length){i=e.slice(0,t).sort(r);if(!i.length)return i;a=i[i.length-1];u=e.slice(t);for(o=0,l=u.length;o<l;o++){n=u[o];if(r(n,a)<0){p(i,n,0,null,r);i.pop();a=i[i.length-1]}}return i}f(e,r);h=[];for(s=0,c=g(t,e.length);0<=c?s<c:s>c;0<=c?++s:--s)h.push(d(e,r));return h};c=function(e,t,r,n){var a,i,o;if(n==null)n=v;a=e[r];while(r>t){o=r-1>>1;i=e[o];if(n(a,i)<0){e[r]=i;r=o;continue}break}return e[r]=a};h=function(e,t,r){var n,a,i,o,s;if(r==null)r=v;a=e.length;s=t;i=e[t];n=2*t+1;while(n<a){o=n+1;if(o<a&&!(r(e[n],e[o])<0))n=o;e[t]=e[n];t=n;n=2*t+1}e[t]=i;return c(e,s,t,r)};e=function(){t.push=r;t.pop=d;t.replace=n;t.pushpop=u;t.heapify=f;t.updateItem=o;t.nlargest=a;t.nsmallest=i;function t(e){this.cmp=e!=null?e:v;this.nodes=[]}t.prototype.push=function(e){return r(this.nodes,e,this.cmp)};t.prototype.pop=function(){return d(this.nodes,this.cmp)};t.prototype.peek=function(){return this.nodes[0]};t.prototype.contains=function(e){return this.nodes.indexOf(e)!==-1};t.prototype.replace=function(e){return n(this.nodes,e,this.cmp)};t.prototype.pushpop=function(e){return u(this.nodes,e,this.cmp)};t.prototype.heapify=function(){return f(this.nodes,this.cmp)};t.prototype.updateItem=function(e){return o(this.nodes,e,this.cmp)};t.prototype.clear=function(){return this.nodes=[]};t.prototype.empty=function(){return this.nodes.length===0};t.prototype.size=function(){return this.nodes.length};t.prototype.clone=function(){var e;e=new t;e.nodes=this.nodes.slice(0);return e};t.prototype.toArray=function(){return this.nodes.slice(0)};t.prototype.insert=t.prototype.push;t.prototype.top=t.prototype.peek;t.prototype.front=t.prototype.peek;t.prototype.has=t.prototype.contains;t.prototype.copy=t.prototype.clone;return t}();(function(e,t){return s.exports=t()})(this,function(){return e})}).call(Pe)}),_r=e({root:null,weight:function e(t){return 1},directed:false}),Dr={dijkstra:function e(t){if(!I(t)){var r=arguments;t={root:r[0],weight:r[1],directed:r[2]}}var n=_r(t),a=n.root,i=n.weight,u=n.directed;var s=this;var c=i;var o=J(a)?this.filter(a)[0]:a[0];var l={};var h={};var v={};var f=this.byGroup(),d=f.nodes,p=f.edges;p.unmergeBy(function(e){return e.isLoop()});var g=function e(t){return l[t.id()]};var y=function e(t,r){l[t.id()]=r;m.updateItem(t)};var m=new Tr(function(e,t){return g(e)-g(t)});for(var b=0;b<d.length;b++){var x=d[b];l[x.id()]=x.same(o)?0:Infinity;m.push(x)}var w=function e(t,r){var n=(u?t.edgesTo(r):t.edgesWith(r)).intersect(p);var a=Infinity;var i;for(var o=0;o<n.length;o++){var s=n[o];var l=c(s);if(l<a||!i){a=l;i=s}}return{edge:i,dist:a}};while(m.size()>0){var E=m.pop();var T=g(E);var _=E.id();v[_]=T;if(T===Infinity)continue;var D=E.neighborhood().intersect(d);for(var C=0;C<D.length;C++){var N=D[C];var A=N.id();var L=w(E,N);var S=T+L.dist;if(S<g(N)){y(N,S);h[A]={node:E,edge:L.edge}}}}return{distanceTo:function e(t){var r=J(t)?d.filter(t)[0]:t[0];return v[r.id()]},pathTo:function e(t){var r=J(t)?d.filter(t)[0]:t[0];var n=[];var a=r;var i=a.id();if(r.length>0){n.unshift(r);while(h[i]){var o=h[i];n.unshift(o.edge);n.unshift(o.node);a=o.node;i=a.id()}}return s.spawn(n)}}}},Cr={kruskal:function e(r){r=r||function(e){return 1};var t=this.byGroup(),n=t.nodes,a=t.edges;var i=n.length;var o=new Array(i);var s=n;var l=function e(t){for(var r=0;r<o.length;r++){var n=o[r];if(n.has(t))return r}};for(var u=0;u<i;u++)o[u]=this.spawn(n[u]);var c=a.sort(function(e,t){return r(e)-r(t)});for(var h=0;h<c.length;h++){var v=c[h];var f=v.source()[0];var d=v.target()[0];var p=l(f);var g=l(d);var y=o[p];var m=o[g];if(p!==g){s.merge(v);y.merge(m);o.splice(g,1)}}return s}},Nr=e({root:null,goal:null,weight:function e(t){return 1},heuristic:function e(t){return 0},directed:false}),Ar={aStar:function P(e){var t=this.cy();var r=Nr(e),n=r.root,a=r.goal,i=r.heuristic,o=r.directed,s=r.weight;n=t.collection(n)[0];a=t.collection(a)[0];var l=n.id();var u=a.id();var c={};var h={};var v={};var f=new Tr(function(e,t){return h[e.id()]-h[t.id()]});var d=new mr;var p={};var g={};var y=function e(t,r){f.push(t);d.add(r)};var m,b;var x=function e(){m=f.pop();b=m.id();d["delete"](b)};var w=function e(t){return d.has(t)};y(n,l);c[l]=0;h[l]=i(n);var E=0;while(f.size()>0){x();E++;if(b===u){var T=[];var _=a;var D=u;var C=g[D];for(;;){T.unshift(_);if(C!=null)T.unshift(C);_=p[D];if(_==null)break;D=_.id();C=g[D]}return{found:true,distance:c[b],path:this.spawn(T),steps:E}}v[b]=true;var N=m._private.edges;for(var A=0;A<N.length;A++){var L=N[A];if(!this.hasElementWithId(L.id()))continue;if(o&&L.data("source")!==b)continue;var S=L.source();var I=L.target();var k=S.id()!==b?S:I;var O=k.id();if(!this.hasElementWithId(O))continue;if(v[O])continue;var M=c[b]+s(L);if(!w(O)){c[O]=M;h[O]=M+i(k);y(k,O);p[O]=m;g[O]=L;continue}if(M<c[O]){c[O]=M;h[O]=M+i(k);p[O]=m;g[O]=L}}}return{found:false,distance:void 0,path:void 0,steps:E}}},Lr=e({weight:function e(t){return 1},directed:false}),Sr={floydWarshall:function R(e){var u=this.cy();var t=Lr(e),r=t.weight,n=t.directed;var a=r;var i=this.byGroup(),o=i.nodes,s=i.edges;var c=o.length;var l=c*c;var h=function e(t){return o.indexOf(t)};var v=function e(t){return o[t]};var f=new Array(l);for(var d=0;d<l;d++){var p=d%c;var g=(d-p)/c;if(g===p)f[d]=0;else f[d]=Infinity}var y=new Array(l);var m=new Array(l);for(var b=0;b<s.length;b++){var x=s[b];var w=x.source()[0];var E=x.target()[0];if(w===E)continue;var T=h(w);var _=h(E);var D=T*c+_;var C=a(x);if(f[D]>C){f[D]=C;y[D]=_;m[D]=x}if(!n){var N=_*c+T;if(!n&&f[N]>C){f[N]=C;y[N]=T;m[N]=x}}}for(var A=0;A<c;A++)for(var L=0;L<c;L++){var S=L*c+A;for(var I=0;I<c;I++){var k=L*c+I;var O=A*c+I;if(f[S]+f[O]<f[k]){f[k]=f[S]+f[O];y[k]=y[S]}}}var M=function e(t){return(J(t)?u.filter(t):t)[0]};var P=function e(t){return h(M(t))};var B={distance:function e(t,r){var n=P(t);var a=P(r);return f[n*c+a]},path:function e(t,r){var n=P(t);var a=P(r);var i=v(n);if(n===a)return i.collection();if(y[n*c+a]==null)return u.collection();var o=u.collection();var s=n;var l;o.merge(i);while(n!==a){s=n;n=y[n*c+a];l=m[s*c+n];o.merge(l);o.merge(v(n))}return o}};return B}},Ir=e({weight:function e(t){return 1},directed:false,root:null}),kr={bellmanFord:function R(e){var B=this;var t=Ir(e),F=t.weight,r=t.directed,u=t.root;var n=F;var c=this;var a=this.cy();var i=this.byGroup(),o=i.edges,s=i.nodes;var l=s.length;var h=new pr;var v=false;var f=[];u=a.collection(u)[0];o.unmergeBy(function(e){return e.isLoop()});var d=o.length;var p=function e(t){var r=h.get(t.id());if(!r){r={};h.set(t.id(),r)}return r};var g=function e(t){return(J(t)?a.$(t):t)[0]};var z=function e(t){return p(g(t)).dist};var G=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u;var n=g(t);var a=[];var i=n;for(;;){if(i==null)return B.spawn();var o=p(i),s=o.edge,l=o.pred;a.unshift(i[0]);if(i.same(r)&&a.length>0)break;if(s!=null)a.unshift(s);i=l}return c.spawn(a)};for(var y=0;y<l;y++){var Y=s[y];var m=p(Y);if(Y.same(u))m.dist=0;else m.dist=Infinity;m.pred=null;m.edge=null}var b=false;var X=function e(t,r,n,a,i,o){var s=a.dist+o;if(s<i.dist&&!n.same(a.edge)){i.dist=s;i.pred=t;i.edge=n;b=true}};for(var V=1;V<l;V++){b=false;for(var x=0;x<d;x++){var w=o[x];var E=w.source();var T=w.target();var U=n(w);var j=p(E);var q=p(T);X(E,T,w,j,q,U);if(!r)X(T,E,w,q,j,U)}if(!b)break}if(b){var H=[];for(var _=0;_<d;_++){var D=o[_];var W=D.source();var $=D.target();var C=n(D);var N=p(W).dist;var A=p($).dist;if(N+C<A||!r&&A+C<N){if(!v){ee("Graph contains a negative weight cycle for Bellman-Ford");v=true}if(e.findNegativeWeightCycles!==false){var L=[];if(N+C<A)L.push(W);if(!r&&A+C<N)L.push($);var K=L.length;for(var S=0;S<K;S++){var I=L[S];var k=[I];k.push(p(I).edge);var O=p(I).pred;while(k.indexOf(O)===-1){k.push(O);k.push(p(O).edge);O=p(O).pred}k=k.slice(k.indexOf(O));var Z=k[0].id();var M=0;for(var P=2;P<k.length;P+=2)if(k[P].id()<Z){Z=k[P].id();M=P}k=k.slice(M).concat(k.slice(0,M));k.push(k[0]);var Q=k.map(function(e){return e.id()}).join(",");if(H.indexOf(Q)===-1){f.push(c.spawn(k));H.push(Q)}}}else break}}}return{distanceTo:z,pathTo:G,hasNegativeWeightCycle:v,negativeWeightCycles:f}}},Or=Math.sqrt(2),Mr=function e(t,r,n){if(n.length===0)z("Karger-Stein must be run on a connected (sub)graph");var a=n[t];var i=a[1];var o=a[2];var s=r[i];var l=r[o];var u=n;for(var c=u.length-1;c>=0;c--){var h=u[c];var v=h[1];var f=h[2];if(r[v]===s&&r[f]===l||r[v]===l&&r[f]===s)u.splice(c,1)}for(var d=0;d<u.length;d++){var p=u[d];if(p[1]===l){u[d]=p.slice();u[d][1]=s}else if(p[2]===l){u[d]=p.slice();u[d][2]=s}}for(var g=0;g<r.length;g++)if(r[g]===l)r[g]=s;return u},Pr=function e(t,r,n,a){while(n>a){var i=Math.floor(Math.random()*r.length);r=Mr(i,t,r);n--}return r},Rr={kargerStein:function e(){var n=this;var t=this.byGroup(),r=t.nodes,a=t.edges;a.unmergeBy(function(e){return e.isLoop()});var i=r.length;var o=a.length;var s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2));var l=Math.floor(i/Or);if(i<2){z("At least 2 nodes are required for Karger-Stein algorithm");return void 0}var u=[];for(var c=0;c<o;c++){var h=a[c];u.push([c,r.indexOf(h.source()),r.indexOf(h.target())])}var v=Infinity;var f=[];var d=new Array(i);var p=new Array(i);var g=new Array(i);var y=function e(t,r){for(var n=0;n<i;n++)r[n]=t[n]};for(var m=0;m<=s;m++){for(var b=0;b<i;b++)p[b]=b;var x=Pr(p,u.slice(),i,l);var w=x.slice();y(p,g);var E=Pr(p,x,l,2);var T=Pr(g,w,l,2);if(E.length<=T.length&&E.length<v){v=E.length;f=E;y(p,d)}else if(T.length<=E.length&&T.length<v){v=T.length;f=T;y(g,d)}}var _=this.spawn(f.map(function(e){return a[e[0]]}));var D=this.spawn();var C=this.spawn();var N=d[0];for(var A=0;A<d.length;A++){var L=d[A];var S=r[A];if(L===N)D.merge(S);else C.merge(S)}var I=function e(t){var r=n.spawn();t.forEach(function(e){r.merge(e);e.connectedEdges().forEach(function(e){if(n.contains(e)&&!_.contains(e))r.merge(e)})});return r};var k=[I(D),I(C)];var O={cut:_,components:k,partition1:D,partition2:C};return O}},Br=function e(t){return{x:t.x,y:t.y}},Fr=function e(t,r,n){return{x:t.x*r+n.x,y:t.y*r+n.y}},zr=function e(t,r,n){return{x:(t.x-n.x)/r,y:(t.y-n.y)/r}},Gr=function e(t){return{x:t[0],y:t[1]}},Yr=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length;var a=Infinity;for(var i=r;i<n;i++){var o=t[i];if(isFinite(o))a=Math.min(o,a)}return a},Xr=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length;var a=-Infinity;for(var i=r;i<n;i++){var o=t[i];if(isFinite(o))a=Math.max(o,a)}return a},Vr=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length;var a=0;var i=0;for(var o=r;o<n;o++){var s=t[o];if(isFinite(s)){a+=s;i++}}return a/i},Ur=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length;var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:true;var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:true;var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:true;if(a)t=t.slice(r,n);else{if(n<t.length)t.splice(n,t.length-n);if(r>0)t.splice(0,r)}var s=0;for(var l=t.length-1;l>=0;l--){var u=t[l];if(o){if(!isFinite(u)){t[l]=-Infinity;s++}}else t.splice(l,1)}if(i)t.sort(function(e,t){return e-t});var c=t.length;var h=Math.floor(c/2);if(c%2!==0)return t[h+1+s];else return(t[h-1+s]+t[h+s])/2},jr=function e(t){return Math.PI*t/180},qr=function e(t,r){return Math.atan2(r,t)-Math.PI/2},Hr=Math.log2||function(e){return Math.log(e)/Math.log(2)},Wr=function e(t){if(t>0)return 1;else if(t<0)return-1;else return 0},$r=function e(t,r){return Math.sqrt(Kr(t,r))},Kr=function e(t,r){var n=r.x-t.x;var a=r.y-t.y;return n*n+a*a},Zr=function e(t){var r=t.length;var n=0;for(var a=0;a<r;a++)n+=t[a];for(var i=0;i<r;i++)t[i]=t[i]/n;return t},k=function e(t,r,n,a){return(1-a)*(1-a)*t+2*(1-a)*a*r+a*a*n},Qr=function e(t,r,n,a){return{x:k(t.x,r.x,n.x,a),y:k(t.y,r.y,n.y,a)}},Jr=function e(t,r,n,a){var i={x:r.x-t.x,y:r.y-t.y};var o=$r(t,r);var s={x:i.x/o,y:i.y/o};n=n==null?0:n;a=a!=null?a:n*o;return{x:t.x+s.x*a,y:t.y+s.y*a}},en=function e(t,r,n){return Math.max(t,Math.min(n,r))},tn=function e(t){if(t==null)return{x1:Infinity,y1:Infinity,x2:-Infinity,y2:-Infinity,w:0,h:0};else if(t.x1!=null&&t.y1!=null)if(t.x2!=null&&t.y2!=null&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};else if(t.w!=null&&t.h!=null&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}},rn=function e(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}},nn=function e(t){t.x1=Infinity;t.y1=Infinity;t.x2=-Infinity;t.y2=-Infinity;t.w=0;t.h=0},an=function e(t,r){t.x1=Math.min(t.x1,r.x1);t.x2=Math.max(t.x2,r.x2);t.w=t.x2-t.x1;t.y1=Math.min(t.y1,r.y1);t.y2=Math.max(t.y2,r.y2);t.h=t.y2-t.y1},on=function e(t,r,n){t.x1=Math.min(t.x1,r);t.x2=Math.max(t.x2,r);t.w=t.x2-t.x1;t.y1=Math.min(t.y1,n);t.y2=Math.max(t.y2,n);t.h=t.y2-t.y1},sn=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;t.x1-=r;t.x2+=r;t.y1-=r;t.y2+=r;t.w=t.x2-t.x1;t.h=t.y2-t.y1;return t},ln=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0];var n,a,i,o;if(r.length===1)n=a=i=o=r[0];else if(r.length===2){n=i=r[0];o=a=r[1]}else if(r.length===4){var s=L(r,4);n=s[0];a=s[1];i=s[2];o=s[3]}t.x1-=o;t.x2+=a;t.y1-=n;t.y2+=i;t.w=t.x2-t.x1;t.h=t.y2-t.y1;return t},un=function e(t,r){t.x1=r.x1;t.y1=r.y1;t.x2=r.x2;t.y2=r.y2;t.w=t.x2-t.x1;t.h=t.y2-t.y1},cn=function e(t,r){if(t.x1>r.x2)return false;if(r.x1>t.x2)return false;if(t.x2<r.x1)return false;if(r.x2<t.x1)return false;if(t.y2<r.y1)return false;if(r.y2<t.y1)return false;if(t.y1>r.y2)return false;if(r.y1>t.y2)return false;return true},hn=function e(t,r,n){return t.x1<=r&&r<=t.x2&&t.y1<=n&&n<=t.y2},vn=function e(t,r){return hn(t,r.x,r.y)},fn=function e(t,r){return hn(t,r.x1,r.y1)&&hn(t,r.x2,r.y2)},dn=function R(e,t,r,n,a,i,o){var s=Rn(a,i);var l=a/2;var u=i/2;var c;{var h=r-l+s-o;var v=n-u-o;var f=r+l-s+o;var d=v;c=Sn(e,t,r,n,h,v,f,d,false);if(c.length>0)return c}{var p=r+l+o;var g=n-u+s-o;var y=p;var m=n+u-s+o;c=Sn(e,t,r,n,p,g,y,m,false);if(c.length>0)return c}{var b=r-l+s-o;var x=n+u+o;var w=r+l-s+o;var E=x;c=Sn(e,t,r,n,b,x,w,E,false);if(c.length>0)return c}{var T=r-l-o;var _=n-u+s-o;var D=T;var C=n+u-s+o;c=Sn(e,t,r,n,T,_,D,C,false);if(c.length>0)return c}var N;{var A=r-l+s;var L=n-u+s;N=An(e,t,r,n,A,L,s+o);if(N.length>0&&N[0]<=A&&N[1]<=L)return[N[0],N[1]]}{var S=r+l-s;var I=n-u+s;N=An(e,t,r,n,S,I,s+o);if(N.length>0&&N[0]>=S&&N[1]<=I)return[N[0],N[1]]}{var k=r+l-s;var O=n+u-s;N=An(e,t,r,n,k,O,s+o);if(N.length>0&&N[0]>=k&&N[1]>=O)return[N[0],N[1]]}{var M=r-l+s;var P=n+u-s;N=An(e,t,r,n,M,P,s+o);if(N.length>0&&N[0]<=M&&N[1]>=P)return[N[0],N[1]]}return[]},pn=function e(t,r,n,a,i,o,s){var l=s;var u=Math.min(n,i);var c=Math.max(n,i);var h=Math.min(a,o);var v=Math.max(a,o);return u-l<=t&&t<=c+l&&h-l<=r&&r<=v+l},gn=function e(t,r,n,a,i,o,s,l,u){var c={x1:Math.min(n,s,i)-u,x2:Math.max(n,s,i)+u,y1:Math.min(a,l,o)-u,y2:Math.max(a,l,o)+u};if(t<c.x1||t>c.x2||r<c.y1||r>c.y2)return false;else return true},yn=function e(t,r,n,a){n-=a;var i=r*r-4*t*n;if(i<0)return[];var o=Math.sqrt(i);var s=2*t;var l=(-r+o)/s;var u=(-r-o)/s;return[l,u]},mn=function e(t,r,n,a,i){var o=1e-5;if(t===0)t=o;r/=t;n/=t;a/=t;var s,l,u,c,h,v,f,d;l=(3*n-r*r)/9;u=-(27*a)+r*(9*n-2*(r*r));u/=54;s=l*l*l+u*u;i[1]=0;f=r/3;if(s>0){h=u+Math.sqrt(s);h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3);v=u-Math.sqrt(s);v=v<0?-Math.pow(-v,1/3):Math.pow(v,1/3);i[0]=-f+h+v;f+=(h+v)/2;i[4]=i[2]=-f;f=Math.sqrt(3)*(-v+h)/2;i[3]=f;i[5]=-f;return}i[5]=i[3]=0;if(s===0){d=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3);i[0]=-f+2*d;i[4]=i[2]=-(d+f);return}l=-l;c=l*l*l;c=Math.acos(u/Math.sqrt(c));d=2*Math.sqrt(l);i[0]=-f+d*Math.cos(c/3);i[2]=-f+d*Math.cos((c+2*Math.PI)/3);i[4]=-f+d*Math.cos((c+4*Math.PI)/3);return},bn=function e(t,r,n,a,i,o,s,l){var u=1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+a*a-4*a*o+2*a*l+4*o*o-4*o*l+l*l;var c=1*9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*a*o-3*a*a-3*a*l-6*o*o+3*o*l;var h=1*3*n*n-6*n*i+n*s-n*t+2*i*i+2*i*t-s*t+3*a*a-6*a*o+a*l-a*r+2*o*o+2*o*r-l*r;var v=1*n*i-n*n+n*t-i*t+a*o-a*a+a*r-o*r;var f=[];mn(u,c,h,v,f);var d=1e-7;var p=[];for(var g=0;g<6;g+=2)if(Math.abs(f[g+1])<d&&f[g]>=0&&f[g]<=1)p.push(f[g]);p.push(1);p.push(0);var y=-1;var m,b,x;for(var w=0;w<p.length;w++){m=Math.pow(1-p[w],2)*n+2*(1-p[w])*p[w]*i+p[w]*p[w]*s;b=Math.pow(1-p[w],2)*a+2*(1-p[w])*p[w]*o+p[w]*p[w]*l;x=Math.pow(m-t,2)+Math.pow(b-r,2);if(y>=0){if(x<y)y=x}else y=x}return y},xn=function e(t,r,n,a,i,o){var s=[t-n,r-a];var l=[i-n,o-a];var u=l[0]*l[0]+l[1]*l[1];var c=s[0]*s[0]+s[1]*s[1];var h=s[0]*l[0]+s[1]*l[1];var v=h*h/u;if(h<0)return c;if(v>u)return(t-i)*(t-i)+(r-o)*(r-o);return c-v},wn=function e(t,r,n){var a,i,o,s;var l;var u=0;for(var c=0;c<n.length/2;c++){a=n[c*2];i=n[c*2+1];if(c+1<n.length/2){o=n[(c+1)*2];s=n[(c+1)*2+1]}else{o=n[(c+1-n.length/2)*2];s=n[(c+1-n.length/2)*2+1]}if(a==t&&o==t);else if(a>=t&&t>=o||a<=t&&t<=o){l=(t-a)/(o-a)*(s-i)+i;if(l>r)u++}else continue}if(u%2===0)return false;else return true},En=function e(t,r,n,a,i,o,s,l,u){var c=new Array(n.length);var h;if(l[0]!=null){h=Math.atan(l[1]/l[0]);if(l[0]<0)h=h+Math.PI/2;else h=-h-Math.PI/2}else h=l;var v=Math.cos(-h);var f=Math.sin(-h);for(var d=0;d<c.length/2;d++){c[d*2]=o/2*(n[d*2]*v-n[d*2+1]*f);c[d*2+1]=s/2*(n[d*2+1]*v+n[d*2]*f);c[d*2]+=a;c[d*2+1]+=i}var p;if(u>0){var g=Dn(c,-u);p=_n(g)}else p=c;return wn(t,r,p)},Tn=function e(t,r,n,a,i,o,s){var l=new Array(n.length);var u=o/2;var c=s/2;var h=Bn(o,s);var v=h*h;for(var f=0;f<n.length/4;f++){var d=void 0,p=void 0;if(f===0)d=n.length-2;else d=f*4-2;p=f*4+2;var g=a+u*n[f*4];var y=i+c*n[f*4+1];var m=-n[d]*n[p]-n[d+1]*n[p+1];var b=h/Math.tan(Math.acos(m)/2);var x=g-b*n[d];var w=y-b*n[d+1];var E=g+b*n[p];var T=y+b*n[p+1];l[f*4]=x;l[f*4+1]=w;l[f*4+2]=E;l[f*4+3]=T;var _=n[d+1];var D=-n[d];var C=_*n[p]+D*n[p+1];if(C<0){_*=-1;D*=-1}var N=x+_*h;var A=w+D*h;var L=Math.pow(N-t,2)+Math.pow(A-r,2);if(L<=v)return true}return wn(t,r,l)},_n=function e(t){var r=new Array(t.length/2);var n,a,i,o;var s,l,u,c;for(var h=0;h<t.length/4;h++){n=t[h*4];a=t[h*4+1];i=t[h*4+2];o=t[h*4+3];if(h<t.length/4-1){s=t[(h+1)*4];l=t[(h+1)*4+1];u=t[(h+1)*4+2];c=t[(h+1)*4+3]}else{s=t[0];l=t[1];u=t[2];c=t[3]}var v=Sn(n,a,i,o,s,l,u,c,true);r[h*2]=v[0];r[h*2+1]=v[1]}return r},Dn=function e(t,r){var n=new Array(t.length*2);var a,i,o,s;for(var l=0;l<t.length/2;l++){a=t[l*2];i=t[l*2+1];if(l<t.length/2-1){o=t[(l+1)*2];s=t[(l+1)*2+1]}else{o=t[0];s=t[1]}var u=s-i;var c=-(o-a);var h=Math.sqrt(u*u+c*c);var v=u/h;var f=c/h;n[l*4]=a+v*r;n[l*4+1]=i+f*r;n[l*4+2]=o+v*r;n[l*4+3]=s+f*r}return n},Cn=function e(t,r,n,a,i,o){var s=n-t;var l=a-r;s/=i;l/=o;var u=Math.sqrt(s*s+l*l);var c=u-1;if(c<0)return[];var h=c/u;return[(n-t)*h+t,(a-r)*h+r]},Nn=function e(t,r,n,a,i,o,s){t-=i;r-=o;t/=n/2+s;r/=a/2+s;return t*t+r*r<=1},An=function e(t,r,n,a,i,o,s){var l=[n-t,a-r];var u=[t-i,r-o];var c=l[0]*l[0]+l[1]*l[1];var h=2*(u[0]*l[0]+u[1]*l[1]);var v=u[0]*u[0]+u[1]*u[1]-s*s;var f=h*h-4*c*v;if(f<0)return[];var d=(-h+Math.sqrt(f))/(2*c);var p=(-h-Math.sqrt(f))/(2*c);var g=Math.min(d,p);var y=Math.max(d,p);var m=[];if(g>=0&&g<=1)m.push(g);if(y>=0&&y<=1)m.push(y);if(m.length===0)return[];var b=m[0]*l[0]+t;var x=m[0]*l[1]+r;if(m.length>1)if(m[0]==m[1])return[b,x];else{var w=m[1]*l[0]+t;var E=m[1]*l[1]+r;return[b,x,w,E]}else return[b,x]},Ln=function e(t,r,n){if(r<=t&&t<=n||n<=t&&t<=r)return t;else if(t<=r&&r<=n||n<=r&&r<=t)return r;else return n},Sn=function e(t,r,n,a,i,o,s,l,u){var c=t-i;var h=n-t;var v=s-i;var f=r-o;var d=a-r;var p=l-o;var g=v*f-p*c;var y=h*f-d*c;var m=p*h-v*d;if(m!==0){var b=g/m;var x=y/m;var w=.001;var E=0-w;var T=1+w;if(E<=b&&b<=T&&E<=x&&x<=T)return[t+b*h,r+b*d];else if(!u)return[];else return[t+b*h,r+b*d]}else if(g===0||y===0){if(Ln(t,n,s)===s)return[s,l];if(Ln(t,n,i)===i)return[i,o];if(Ln(i,s,n)===n)return[n,a];return[]}else return[]},In=function e(t,r,n,a,i,o,s,l){var u=[];var c;var h=new Array(n.length);var v=true;if(o==null)v=false;var f;if(v){for(var d=0;d<h.length/2;d++){h[d*2]=n[d*2]*o+a;h[d*2+1]=n[d*2+1]*s+i}if(l>0){var p=Dn(h,-l);f=_n(p)}else f=h}else f=n;var g,y,m,b;for(var x=0;x<f.length/2;x++){g=f[x*2];y=f[x*2+1];if(x<f.length/2-1){m=f[(x+1)*2];b=f[(x+1)*2+1]}else{m=f[0];b=f[1]}c=Sn(t,r,a,i,g,y,m,b);if(c.length!==0)u.push(c[0],c[1])}return u},kn=function e(t,r,n,a,i,o,s,P){var l=[];var u;var c=new Array(n.length);var h=o/2;var v=s/2;var f=Bn(o,s);for(var d=0;d<n.length/4;d++){var p=void 0,g=void 0;if(d===0)p=n.length-2;else p=d*4-2;g=d*4+2;var y=a+h*n[d*4];var m=i+v*n[d*4+1];var b=-n[p]*n[g]-n[p+1]*n[g+1];var x=f/Math.tan(Math.acos(b)/2);var w=y-x*n[p];var E=m-x*n[p+1];var T=y+x*n[g];var _=m+x*n[g+1];if(d===0){c[n.length-2]=w;c[n.length-1]=E}else{c[d*4-2]=w;c[d*4-1]=E}c[d*4]=T;c[d*4+1]=_;var D=n[p+1];var C=-n[p];var N=D*n[g]+C*n[g+1];if(N<0){D*=-1;C*=-1}var A=w+D*f;var L=E+C*f;u=An(t,r,a,i,A,L,f);if(u.length!==0)l.push(u[0],u[1])}for(var S=0;S<c.length/4;S++){u=Sn(t,r,a,i,c[S*4],c[S*4+1],c[S*4+2],c[S*4+3],false);if(u.length!==0)l.push(u[0],u[1])}if(l.length>2){var I=[l[0],l[1]];var k=Math.pow(I[0]-t,2)+Math.pow(I[1]-r,2);for(var O=1;O<l.length/2;O++){var M=Math.pow(l[O*2]-t,2)+Math.pow(l[O*2+1]-r,2);if(M<=k){I[0]=l[O*2];I[1]=l[O*2+1];k=M}}return I}return l},On=function e(t,r,n){var a=[t[0]-r[0],t[1]-r[1]];var i=Math.sqrt(a[0]*a[0]+a[1]*a[1]);var o=(i-n)/i;if(o<0)o=1e-5;return[r[0]+o*a[0],r[1]+o*a[1]]},u=function e(t,r){var n=Pn(t,r);n=Mn(n);return n},Mn=function e(t){var r,n;var a=t.length/2;var i=Infinity,o=Infinity,s=-Infinity,l=-Infinity;for(var u=0;u<a;u++){r=t[2*u];n=t[2*u+1];i=Math.min(i,r);s=Math.max(s,r);o=Math.min(o,n);l=Math.max(l,n)}var c=2/(s-i);var h=2/(l-o);for(var v=0;v<a;v++){r=t[2*v]=t[2*v]*c;n=t[2*v+1]=t[2*v+1]*h;i=Math.min(i,r);s=Math.max(s,r);o=Math.min(o,n);l=Math.max(l,n)}if(o<-1)for(var f=0;f<a;f++)n=t[2*f+1]=t[2*f+1]+(-1-o);return t},Pn=function e(t,r){var n=1/t*2*Math.PI;var a=t%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;var i=new Array(t*2);var o;for(var s=0;s<t;s++){o=s*n+a;i[2*s]=Math.cos(o);i[2*s+1]=Math.sin(-o)}return i},Rn=function e(t,r){return Math.min(t/4,r/4,8)},Bn=function e(t,r){return Math.min(t/10,r/10,8)},Fn=function e(){return 8},zn=function e(t,r,n){return[t-2*r+n,2*(r-t),t]},Gn=function e(t,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},Yn=e({dampingFactor:.8,precision:1e-6,iterations:200,weight:function e(t){return 1}}),Xn={pageRank:function R(e){var t=Yn(e),r=t.dampingFactor,n=t.precision,a=t.iterations,i=t.weight;var B=this._private.cy;var o=this.byGroup(),s=o.nodes,l=o.edges;var u=s.length;var F=u*u;var z=l.length;var c=new Array(F);var h=new Array(u);var v=(1-r)/u;for(var f=0;f<u;f++){for(var d=0;d<u;d++){var G=f*u+d;c[G]=0}h[f]=0}for(var p=0;p<z;p++){var g=l[p];var y=g.data("source");var m=g.data("target");if(y===m)continue;var b=s.indexOfId(y);var Y=s.indexOfId(m);var x=i(g);var X=Y*u+b;c[X]+=x;h[b]+=x}var V=1/u+v;for(var w=0;w<u;w++)if(h[w]===0)for(var E=0;E<u;E++){var U=E*u+w;c[U]=V}else for(var T=0;T<u;T++){var _=T*u+w;c[_]=c[_]/h[w]+v}var D=new Array(u);var C=new Array(u);var N;for(var A=0;A<u;A++)D[A]=1;for(var L=0;L<a;L++){for(var S=0;S<u;S++)C[S]=0;for(var I=0;I<u;I++)for(var k=0;k<u;k++){var j=I*u+k;C[I]+=c[j]*D[k]}Zr(C);N=D;D=C;C=N;var O=0;for(var M=0;M<u;M++){var P=N[M]-D[M];O+=P*P}if(O<n)break}var q={rank:function e(t){t=B.collection(t)[0];return D[s.indexOf(t)]}};return q}},Vn=e({root:null,weight:function e(t){return 1},directed:false,alpha:0}),Un={degreeCentralityNormalized:function e(t){t=Vn(t);var r=this.cy();var n=this.nodes();var a=n.length;if(!t.directed){var i={};var o=0;for(var s=0;s<a;s++){var l=n[s];t.root=l;var u=this.degreeCentrality(t);if(o<u.degree)o=u.degree;i[l.id()]=u.degree}return{degree:function e(t){if(o===0)return 0;if(J(t))t=r.filter(t);return i[t.id()]/o}}}else{var c={};var h={};var v=0;var f=0;for(var d=0;d<a;d++){var p=n[d];var g=p.id();t.root=p;var y=this.degreeCentrality(t);if(v<y.indegree)v=y.indegree;if(f<y.outdegree)f=y.outdegree;c[g]=y.indegree;h[g]=y.outdegree}return{indegree:function e(t){if(v==0)return 0;if(J(t))t=r.filter(t);return c[t.id()]/v},outdegree:function e(t){if(f===0)return 0;if(J(t))t=r.filter(t);return h[t.id()]/f}}}},degreeCentrality:function e(t){t=Vn(t);var r=this.cy();var n=this;var a=t,i=a.root,o=a.weight,s=a.directed,l=a.alpha;i=r.collection(i)[0];if(!s){var u=i.connectedEdges().intersection(n);var c=u.length;var h=0;for(var v=0;v<u.length;v++)h+=o(u[v]);return{degree:Math.pow(c,1-l)*Math.pow(h,l)}}else{var f=i.connectedEdges();var d=f.filter(function(e){return e.target().same(i)&&n.has(e)});var p=f.filter(function(e){return e.source().same(i)&&n.has(e)});var g=d.length;var y=p.length;var m=0;var b=0;for(var x=0;x<d.length;x++)m+=o(d[x]);for(var w=0;w<p.length;w++)b+=o(p[w]);return{indegree:Math.pow(g,1-l)*Math.pow(m,l),outdegree:Math.pow(y,1-l)*Math.pow(b,l)}}}},jn=(Un.dc=Un.degreeCentrality,Un.dcn=Un.degreeCentralityNormalised=Un.degreeCentralityNormalized,e({harmonic:true,weight:function e(){return 1},directed:false,root:null})),qn={closenessCentralityNormalized:function e(t){var r=jn(t),n=r.harmonic,a=r.weight,i=r.directed;var o=this.cy();var s={};var l=0;var u=this.nodes();var c=this.floydWarshall({weight:a,directed:i});for(var h=0;h<u.length;h++){var v=0;var f=u[h];for(var d=0;d<u.length;d++)if(h!==d){var p=c.distance(f,u[d]);if(n)v+=1/p;else v+=p}if(!n)v=1/v;if(l<v)l=v;s[f.id()]=v}return{closeness:function e(t){if(l==0)return 0;if(J(t))t=o.filter(t)[0].id();else t=t.id();return s[t]/l}}},closenessCentrality:function e(t){var r=jn(t),n=r.root,a=r.weight,i=r.directed,o=r.harmonic;n=this.filter(n)[0];var s=this.dijkstra({root:n,weight:a,directed:i});var l=0;var u=this.nodes();for(var c=0;c<u.length;c++){var h=u[c];if(!h.same(n)){var v=s.distanceTo(h);if(o)l+=1/v;else l+=v}}return o?l:1/l}},Hn=(qn.cc=qn.closenessCentrality,qn.ccn=qn.closenessCentralityNormalised=qn.closenessCentralityNormalized,e({weight:null,directed:false})),Wn={betweennessCentrality:function e(t){var r=Hn(t),n=r.directed,T=r.weight;var _=T!=null;var D=this.cy();var C=this.nodes();var N={};var a={};var i=0;var A={set:function e(t,r){a[t]=r;if(r>i)i=r},get:function e(t){return a[t]}};for(var o=0;o<C.length;o++){var s=C[o];var l=s.id();if(n)N[l]=s.outgoers().nodes();else N[l]=s.openNeighborhood().nodes();A.set(l,0)}var u=function e(t){var r=C[t].id();var n=[];var a={};var i={};var o={};var s=new Tr(function(e,t){return o[e]-o[t]});for(var l=0;l<C.length;l++){var u=C[l].id();a[u]=[];i[u]=0;o[u]=Infinity}i[r]=1;o[r]=0;s.push(r);while(!s.empty()){var c=s.pop();n.push(c);if(_)for(var h=0;h<N[c].length;h++){var v=N[c][h];var f=D.getElementById(c);var d=void 0;if(f.edgesTo(v).length>0)d=f.edgesTo(v)[0];else d=v.edgesTo(f)[0];var p=T(d);v=v.id();if(o[v]>o[c]+p){o[v]=o[c]+p;if(s.nodes.indexOf(v)<0)s.push(v);else s.updateItem(v);i[v]=0;a[v]=[]}if(o[v]==o[c]+p){i[v]=i[v]+i[c];a[v].push(c)}}else for(var g=0;g<N[c].length;g++){var y=N[c][g].id();if(o[y]==Infinity){s.push(y);o[y]=o[c]+1}if(o[y]==o[c]+1){i[y]=i[y]+i[c];a[y].push(c)}}}var m={};for(var b=0;b<C.length;b++)m[C[b].id()]=0;while(n.length>0){var x=n.pop();for(var w=0;w<a[x].length;w++){var E=a[x][w];m[E]=m[E]+i[E]/i[x]*(1+m[x])}if(x!=C[t].id())A.set(x,A.get(x)+m[x])}};for(var c=0;c<C.length;c++)u(c);var h={betweenness:function e(t){var r=D.collection(t).id();return A.get(r)},betweennessNormalized:function e(t){if(i==0)return 0;var r=D.collection(t).id();return A.get(r)/i}};h.betweennessNormalised=h.betweennessNormalized;return h}},$n=(Wn.bc=Wn.betweennessCentrality,e({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]})),Kn=function e(t){return $n(t)},Zn=function e(t,r){var n=0;for(var a=0;a<r.length;a++)n+=r[a](t);return n},Qn=function e(t,r,n){for(var a=0;a<r;a++)t[a*r+a]=n},Jn=function e(t,r){var n;for(var a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=t[i*r+a];for(var o=0;o<r;o++)t[o*r+a]=t[o*r+a]/n}},ea=function e(t,r,n){var a=new Array(n*n);for(var i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var s=0;s<n;s++)for(var l=0;l<n;l++)a[i*n+l]+=t[i*n+s]*r[s*n+l]}return a},ta=function e(t,r,n){var a=t.slice(0);for(var i=1;i<n;i++)t=ea(t,a,r);return t},ra=function e(t,r,n){var a=new Array(r*r);for(var i=0;i<r*r;i++)a[i]=Math.pow(t[i],n);Jn(a,r);return a},na=function e(t,r,n,a){for(var i=0;i<n;i++){var o=Math.round(t[i]*Math.pow(10,a))/Math.pow(10,a);var s=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==s)return false}return true},aa=function e(t,r,n,a){var i=[];for(var o=0;o<r;o++){var s=[];for(var l=0;l<r;l++)if(Math.round(t[o*r+l]*1e3)/1e3>0)s.push(n[l]);if(s.length!==0)i.push(a.collection(s))}return i},ia=function e(t,r){for(var n=0;n<t.length;n++)if(!r[n]||t[n].id()!==r[n].id())return false;return true},oa=function e(t){for(var r=0;r<t.length;r++)for(var n=0;n<t.length;n++)if(r!=n&&ia(t[r],t[n]))t.splice(n,1);return t},sa=function e(t){var r=this.nodes();var n=this.edges();var a=this.cy();var i=Kn(t);var o={};for(var s=0;s<r.length;s++)o[r[s].id()]=s;var l=r.length,u=l*l;var c=new Array(u),h;for(var v=0;v<u;v++)c[v]=0;for(var f=0;f<n.length;f++){var d=n[f];var p=o[d.source().id()];var g=o[d.target().id()];var y=Zn(d,i.attributes);c[p*l+g]+=y;c[g*l+p]+=y}Qn(c,l,i.multFactor);Jn(c,l);var m=true;var b=0;while(m&&b<i.maxIterations){m=false;h=ta(c,l,i.expandFactor);c=ra(h,l,i.inflateFactor);if(!na(c,h,u,4))m=true;b++}var x=aa(c,l,r,a);x=oa(x);return x},la={markovClustering:sa,mcl:sa},ua=function e(t){return t},ca=function e(t,r){return Math.abs(r-t)},ha=function e(t,r,n){return t+ca(r,n)},va=function e(t,r,n){return t+Math.pow(n-r,2)},fa=function e(t){return Math.sqrt(t)},da=function e(t,r,n){return Math.max(t,ca(r,n))},pa=function e(t,r,n,a,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:ua;var s=a;var l,u;for(var c=0;c<t;c++){l=r(c);u=n(c);s=i(s,l,u)}return o(s)},ga={euclidean:function e(t,r,n){if(t>=2)return pa(t,r,n,0,va,fa);else return pa(t,r,n,0,ha)},squaredEuclidean:function e(t,r,n){return pa(t,r,n,0,va)},manhattan:function e(t,r,n){return pa(t,r,n,0,ha)},max:function e(t,r,n){return pa(t,r,n,-Infinity,da)}};function ya(e,t,r,n,a,i){var o;if(U(e))o=e;else o=ga[e]||ga.euclidean;if(t===0&&U(e))return o(a,i);else return o(t,r,n,a,i)}ga["squared-euclidean"]=ga["squaredEuclidean"],ga["squaredeuclidean"]=ga["squaredEuclidean"];var ma=e({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:false,testCentroids:null}),ba=function e(t){return ma(t)},xa=function e(t,r,n,a,i){var o=i!=="kMedoids";var s=o?function(e){return n[e]}:function(e){return a[e](n)};var l=function e(t){return a[t](r)};var u=n;var c=r;return ya(t,a.length,s,l,u,c)},wa=function e(t,r,n){var a=n.length;var i=new Array(a);var o=new Array(a);var s=new Array(r);var l=null;for(var u=0;u<a;u++){i[u]=t.min(n[u]).value;o[u]=t.max(n[u]).value}for(var c=0;c<r;c++){l=[];for(var h=0;h<a;h++)l[h]=Math.random()*(o[h]-i[h])+i[h];s[c]=l}return s},Ea=function e(t,r,n,a,i){var o=Infinity;var s=0;for(var l=0;l<r.length;l++){var u=xa(n,t,r[l],a,i);if(u<o){o=u;s=l}}return s},Ta=function e(t,r,n){var a=[];var i=null;for(var o=0;o<r.length;o++){i=r[o];if(n[i.id()]===t)a.push(i)}return a},_a=function e(t,r,n){return Math.abs(r-t)<=n},Da=function e(t,r,n){for(var a=0;a<t.length;a++)for(var i=0;i<t[a].length;i++){var o=Math.abs(t[a][i]-r[a][i]);if(o>n)return false}return true},Ca=function e(t,r,n){for(var a=0;a<n;a++)if(t===r[a])return true;return false},Na=function e(t,r){var n=new Array(r);if(t.length<50)for(var a=0;a<r;a++){var i=t[Math.floor(Math.random()*t.length)];while(Ca(i,n,a))i=t[Math.floor(Math.random()*t.length)];n[a]=i}else for(var o=0;o<r;o++)n[o]=t[Math.floor(Math.random()*t.length)];return n},Aa=function e(t,r,n){var a=0;for(var i=0;i<r.length;i++)a+=xa("manhattan",r[i],t,n,"kMedoids");return a},La,Sa,Ia=function e(t,r,n,a,i){var o,s;for(var l=0;l<r.length;l++)for(var u=0;u<t.length;u++)a[l][u]=Math.pow(n[l][u],i.m);for(var c=0;c<t.length;c++)for(var h=0;h<i.attributes.length;h++){o=0;s=0;for(var v=0;v<r.length;v++){o+=a[v][c]*i.attributes[h](r[v]);s+=a[v][c]}t[c][h]=o/s}},ka=function e(t,r,n,a,i){for(var o=0;o<t.length;o++)r[o]=t[o].slice();var s,l,u;var c=2/(i.m-1);for(var h=0;h<n.length;h++)for(var v=0;v<a.length;v++){s=0;for(var f=0;f<n.length;f++){l=xa(i.distance,a[v],n[h],i.attributes,"cmeans");u=xa(i.distance,a[v],n[f],i.attributes,"cmeans");s+=Math.pow(l/u,c)}t[v][h]=1/s}},Oa=function e(t,r,n,a){var i=new Array(n.k);for(var o=0;o<i.length;o++)i[o]=[];var s;var l;for(var u=0;u<r.length;u++){s=-Infinity;l=-1;for(var c=0;c<r[0].length;c++)if(r[u][c]>s){s=r[u][c];l=c}i[l].push(t[u])}for(var h=0;h<i.length;h++)i[h]=a.collection(i[h]);return i},Ma=function e(t){var r=this.cy();var n=this.nodes();var a=ba(t);var i;var o;var s;var l;var u;l=new Array(n.length);for(var c=0;c<n.length;c++)l[c]=new Array(a.k);s=new Array(n.length);for(var h=0;h<n.length;h++)s[h]=new Array(a.k);for(var v=0;v<n.length;v++){var f=0;for(var d=0;d<a.k;d++){s[v][d]=Math.random();f+=s[v][d]}for(var p=0;p<a.k;p++)s[v][p]=s[v][p]/f}o=new Array(a.k);for(var g=0;g<a.k;g++)o[g]=new Array(a.attributes.length);u=new Array(n.length);for(var y=0;y<n.length;y++)u[y]=new Array(a.k);var m=true;var b=0;while(m&&b<a.maxIterations){m=false;Ia(o,n,s,u,a);ka(s,l,o,n,a);if(!Da(s,l,a.sensitivityThreshold))m=true;b++}i=Oa(n,s,a,r);return{clusters:i,degreeOfMembership:s}},Pa={kMeans:function e(t){var r=this.cy();var n=this.nodes();var a=null;var i=ba(t);var o=new Array(i.k);var s={};var l;if(i.testMode)if(typeof i.testCentroids==="number"){i.testCentroids;l=wa(n,i.k,i.attributes)}else if(x(i.testCentroids)==="object")l=i.testCentroids;else l=wa(n,i.k,i.attributes);else l=wa(n,i.k,i.attributes);var u=true;var c=0;while(u&&c<i.maxIterations){for(var h=0;h<n.length;h++){a=n[h];s[a.id()]=Ea(a,l,i.distance,i.attributes,"kMeans")}u=false;for(var v=0;v<i.k;v++){var f=Ta(v,n,s);if(f.length===0)continue;var d=i.attributes.length;var p=l[v];var g=new Array(d);var y=new Array(d);for(var m=0;m<d;m++){y[m]=0;for(var b=0;b<f.length;b++){a=f[b];y[m]+=i.attributes[m](a)}g[m]=y[m]/f.length;if(!_a(g[m],p[m],i.sensitivityThreshold))u=true}l[v]=g;o[v]=r.collection(f)}c++}return o},kMedoids:function e(t){var r=this.cy();var n=this.nodes();var a=null;var i=ba(t);var o=new Array(i.k);var s;var l={};var u;var c=new Array(i.k);if(i.testMode)if(typeof i.testCentroids==="number");else if(x(i.testCentroids)==="object")s=i.testCentroids;else s=Na(n,i.k);else s=Na(n,i.k);var h=true;var v=0;while(h&&v<i.maxIterations){for(var f=0;f<n.length;f++){a=n[f];l[a.id()]=Ea(a,s,i.distance,i.attributes,"kMedoids")}h=false;for(var d=0;d<s.length;d++){var p=Ta(d,n,l);if(p.length===0)continue;c[d]=Aa(s[d],p,i.attributes);for(var g=0;g<p.length;g++){u=Aa(p[g],p,i.attributes);if(u<c[d]){c[d]=u;s[d]=p[g];h=true}}o[d]=r.collection(p)}v++}return o},fuzzyCMeans:Ma,fcm:Ma},Ra=e({distance:"euclidean",linkage:"min",mode:"threshold",threshold:Infinity,addDendrogram:false,dendrogramDepth:0,attributes:[]}),Ba={single:"min",complete:"max"},Fa=function e(t){var r=Ra(t);var n=Ba[r.linkage];if(n!=null)r.linkage=n;return r},za=function e(t,r,n,a,i){var o=0;var s=Infinity;var l;var u=i.attributes;var c=function e(t,r){return ya(i.distance,u.length,function(e){return u[e](t)},function(e){return u[e](r)},t,r)};for(var h=0;h<t.length;h++){var v=t[h].key;var f=n[v][a[v]];if(f<s){o=v;s=f}}if(i.mode==="threshold"&&s>=i.threshold||i.mode==="dendrogram"&&t.length===1)return false;var d=r[o];var p=r[a[o]];var g;if(i.mode==="dendrogram")g={left:d,right:p,key:d.key};else g={value:d.value.concat(p.value),key:d.key};t[d.index]=g;t.splice(p.index,1);r[d.key]=g;for(var y=0;y<t.length;y++){var m=t[y];if(d.key===m.key)l=Infinity;else if(i.linkage==="min"){l=n[d.key][m.key];if(n[d.key][m.key]>n[p.key][m.key])l=n[p.key][m.key]}else if(i.linkage==="max"){l=n[d.key][m.key];if(n[d.key][m.key]<n[p.key][m.key])l=n[p.key][m.key]}else if(i.linkage==="mean")l=(n[d.key][m.key]*d.size+n[p.key][m.key]*p.size)/(d.size+p.size);else if(i.mode==="dendrogram")l=c(m.value,d.value);else l=c(m.value[0],d.value[0]);n[d.key][m.key]=n[m.key][d.key]=l}for(var b=0;b<t.length;b++){var x=t[b].key;if(a[x]===d.key||a[x]===p.key){var w=x;for(var E=0;E<t.length;E++){var T=t[E].key;if(n[x][T]<n[x][w])w=T}a[x]=w}t[b].index=b}d.key=p.key=d.index=p.index=null;return true},Ga=function e(t,r,n){if(!t)return;if(t.value)r.push(t.value);else{if(t.left)e(t.left,r);if(t.right)e(t.right,r)}},Ya=function e(t,r){if(!t)return"";if(t.left&&t.right){var n=e(t.left,r);var a=e(t.right,r);var i=r.add({group:"nodes",data:{id:n+","+a}});r.add({group:"edges",data:{source:n,target:i.id()}});r.add({group:"edges",data:{source:a,target:i.id()}});return i.id()}else if(t.value)return t.value.id()},Xa=function e(t,r,n){if(!t)return[];var a=[],i=[],o=[];if(r===0){if(t.left)Ga(t.left,a);if(t.right)Ga(t.right,i);o=a.concat(i);return[n.collection(o)]}else if(r===1)if(t.value)return[n.collection(t.value)];else{if(t.left)Ga(t.left,a);if(t.right)Ga(t.right,i);return[n.collection(a),n.collection(i)]}else if(t.value)return[n.collection(t.value)];else{if(t.left)a=e(t.left,r-1,n);if(t.right)i=e(t.right,r-1,n);return a.concat(i)}},Va=function e(t){var r=this.cy();var n=this.nodes();var a=Fa(t);var i=a.attributes;var o=function e(t,r){return ya(a.distance,i.length,function(e){return i[e](t)},function(e){return i[e](r)},t,r)};var s=[];var l=[];var u=[];var c=[];for(var h=0;h<n.length;h++){var v={value:a.mode==="dendrogram"?n[h]:[n[h]],key:h,index:h};s[h]=v;c[h]=v;l[h]=[];u[h]=0}for(var f=0;f<s.length;f++)for(var d=0;d<=f;d++){var p=void 0;if(a.mode==="dendrogram")p=f===d?Infinity:o(s[f].value,s[d].value);else p=f===d?Infinity:o(s[f].value[0],s[d].value[0]);l[f][d]=p;l[d][f]=p;if(p<l[f][u[f]])u[f]=d}var g=za(s,c,l,u,a);while(g)g=za(s,c,l,u,a);var y;if(a.mode==="dendrogram"){y=Xa(s[0],a.dendrogramDepth,r);if(a.addDendrogram)Ya(s[0],r)}else{y=new Array(s.length);s.forEach(function(e,t){e.key=e.index=null;y[t]=r.collection(e.value)})}return y},Ua={hierarchicalClustering:Va,hca:Va},ja=e({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),qa=function e(t){var r=t.damping;var n=t.preference;if(!(.5<=r&&r<1))z("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];if(!(a.some(function(e){return e===n})||me(n)))z("Preference must be one of [".concat(a.map(function(e){return"'".concat(e,"'")}).join(", "),"] or a number.  Got: ").concat(n));return ja(t)},Ha=function e(t,r,n,a){var i=function e(t,r){return a[r](t)};return-ya(t,a.length,function(e){return i(r,e)},function(e){return i(n,e)},r,n)},Wa=function e(t,r){var n=null;if(r==="median")n=Ur(t);else if(r==="mean")n=Vr(t);else if(r==="min")n=Yr(t);else if(r==="max")n=Xr(t);else n=r;return n},$a=function e(t,r,n){var a=[];for(var i=0;i<t;i++)if(r[i*t+i]+n[i*t+i]>0)a.push(i);return a},Ka=function e(t,r,n){var a=[];for(var i=0;i<t;i++){var o=-1;var s=-Infinity;for(var l=0;l<n.length;l++){var u=n[l];if(r[i*t+u]>s){o=u;s=r[i*t+u]}}if(o>0)a.push(o)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},Za=function e(t,r,n){var a=Ka(t,r,n);for(var i=0;i<n.length;i++){var o=[];for(var s=0;s<a.length;s++)if(a[s]===n[i])o.push(s);var l=-1;var u=-Infinity;for(var c=0;c<o.length;c++){var h=0;for(var v=0;v<o.length;v++)h+=r[o[v]*t+o[c]];if(h>u){l=c;u=h}}n[i]=o[l]}a=Ka(t,r,n);return a},Qa=function R(B){var F=this.cy();var e=this.nodes();var t=qa(B);var z={};for(var r=0;r<e.length;r++)z[e[r].id()]=r;var n;var a;var i;var G;var o;var s;n=e.length;a=n*n;i=new Array(a);for(var l=0;l<a;l++)i[l]=-Infinity;for(var u=0;u<n;u++)for(var c=0;c<n;c++)if(u!==c)i[u*n+c]=Ha(t.distance,e[u],e[c],t.attributes);G=Wa(i,t.preference);for(var h=0;h<n;h++)i[h*n+h]=G;o=new Array(a);for(var v=0;v<a;v++)o[v]=0;s=new Array(a);for(var f=0;f<a;f++)s[f]=0;var d=new Array(n);var p=new Array(n);var g=new Array(n);for(var y=0;y<n;y++){d[y]=0;p[y]=0;g[y]=0}var m=new Array(n*t.minIterations);for(var Y=0;Y<m.length;Y++)m[Y]=0;var b;for(b=0;b<t.maxIterations;b++){for(var x=0;x<n;x++){var w=-Infinity,E=-Infinity,T=-1,_=0;for(var D=0;D<n;D++){d[D]=o[x*n+D];_=s[x*n+D]+i[x*n+D];if(_>=w){E=w;w=_;T=D}else if(_>E)E=_}for(var C=0;C<n;C++)o[x*n+C]=(1-t.damping)*(i[x*n+C]-w)+t.damping*d[C];o[x*n+T]=(1-t.damping)*(i[x*n+T]-E)+t.damping*d[T]}for(var N=0;N<n;N++){var A=0;for(var L=0;L<n;L++){d[L]=s[L*n+N];p[L]=Math.max(0,o[L*n+N]);A+=p[L]}A-=p[N];p[N]=o[N*n+N];A+=p[N];for(var S=0;S<n;S++)s[S*n+N]=(1-t.damping)*Math.min(0,A-p[S])+t.damping*d[S];s[N*n+N]=(1-t.damping)*(A-p[N])+t.damping*d[N]}var X=0;for(var I=0;I<n;I++){var V=s[I*n+I]+o[I*n+I]>0?1:0;m[b%t.minIterations*n+I]=V;X+=V}if(X>0&&(b>=t.minIterations-1||b==t.maxIterations-1)){var U=0;for(var k=0;k<n;k++){g[k]=0;for(var j=0;j<t.minIterations;j++)g[k]+=m[j*n+k];if(g[k]===0||g[k]===t.minIterations)U++}if(U===n)break}}var O=$a(n,o,s);var q=Za(n,i,O);var H={};for(var W=0;W<O.length;W++)H[O[W]]=[];for(var M=0;M<e.length;M++){var $=z[e[M].id()];var K=q[$];if(K!=null)H[K].push(e[M])}var Z=new Array(O.length);for(var P=0;P<O.length;P++)Z[P]=F.collection(H[O[P]]);return Z},Ja={affinityPropagation:Qa,ap:Qa},ei=e({root:void 0,directed:false}),ti,ri=function e(){var u=this;var c={};var h=0;var v=0;var f=[];var d=[];var p={};var g=function e(t,r){var n=d.length-1;var a=[];var i=u.spawn();while(d[n].x!=t||d[n].y!=r){a.push(d.pop().edge);n--}a.push(d.pop().edge);a.forEach(function(e){var t=e.connectedNodes().intersection(u);i.merge(e);t.forEach(function(e){var t=e.id();var r=e.connectedEdges().intersection(u);i.merge(e);if(!c[t].cutVertex)i.merge(r);else i.merge(r.filter(function(e){return e.isLoop()}))})});f.push(i)};var r=function t(r,n,a){if(r===a)v+=1;c[n]={id:h,low:h++,cutVertex:false};var e=u.getElementById(n).connectedEdges().intersection(u);if(e.size()===0)f.push(u.spawn(u.getElementById(n)));else{var i,o,s,l;e.forEach(function(e){i=e.source().id();o=e.target().id();s=i===n?o:i;if(s!==a){l=e.id();if(!p[l]){p[l]=true;d.push({x:n,y:s,edge:e})}if(!(s in c)){t(r,s,n);c[n].low=Math.min(c[n].low,c[s].low);if(c[n].id<=c[s].low){c[n].cutVertex=true;g(n,s)}}else c[n].low=Math.min(c[n].low,c[s].id)}})}};u.forEach(function(e){if(e.isNode()){var t=e.id();if(!(t in c)){v=0;r(t,t);c[t].cutVertex=v>1}}});var t=Object.keys(c).filter(function(e){return c[e].cutVertex}).map(function(e){return u.getElementById(e)});return{cut:u.spawn(t),components:f}},ni,ai=function e(){var s=this;var l={};var u=0;var c=[];var h=[];var v=s.spawn(s);var r=function r(n){h.push(n);l[n]={index:u,low:u++,explored:false};var e=s.getElementById(n).connectedEdges().intersection(s);e.forEach(function(e){var t=e.target().id();if(t!==n){if(!(t in l))r(t);if(!l[t].explored)l[n].low=Math.min(l[n].low,l[t].low)}});if(l[n].index===l[n].low){var t=s.spawn();for(;;){var a=h.pop();t.merge(s.getElementById(a));l[a].low=l[n].index;l[a].explored=true;if(a===n)break}var i=t.edgesWith(t);var o=t.merge(i);c.push(o);v=v.difference(o)}};s.forEach(function(e){if(e.isNode()){var t=e.id();if(!(t in l))r(t)}});return{cut:v,components:c}},ii,oi={},si=([wr,Dr,Cr,Ar,Sr,kr,Rr,Xn,Un,qn,Wn,la,Pa,Ua,Ja,{hierholzer:function e(t){if(!I(t)){var r=arguments;t={root:r[0],directed:r[1]}}var n=ei(t),a=n.root,s=n.directed;var i=this;var o=false;var l;var u;var c;if(a)c=J(a)?this.filter(a)[0].id():a[0].id();var h={};var v={};if(s)i.forEach(function(e){var t=e.id();if(e.isNode()){var r=e.indegree(true);var n=e.outdegree(true);var a=r-n;var i=n-r;if(a==1)if(l)o=true;else l=t;else if(i==1)if(u)o=true;else u=t;else if(i>1||a>1)o=true;h[t]=[];e.outgoers().forEach(function(e){if(e.isEdge())h[t].push(e.id())})}else v[t]=[void 0,e.target().id()]});else i.forEach(function(e){var t=e.id();if(e.isNode()){var r=e.degree(true);if(r%2)if(!l)l=t;else if(!u)u=t;else o=true;h[t]=[];e.connectedEdges().forEach(function(e){return h[t].push(e.id())})}else v[t]=[e.source().id(),e.target().id()]});var f={found:false,trail:void 0};if(o)return f;else if(u&&l){if(s){if(c&&u!=c)return f;c=u}else if(c&&u!=c&&l!=c)return f;else if(!c)c=u}else if(!c)c=i[0].id();var d=function e(t){var r=t;var n=[t];var a,i,o;while(h[r].length){a=h[r].shift();i=v[a][0];o=v[a][1];if(r!=o){h[o]=h[o].filter(function(e){return e!=a});r=o}else if(!s&&r!=i){h[i]=h[i].filter(function(e){return e!=a});r=i}n.unshift(a);n.unshift(r)}return n};var p=[];var g=[];g=d(c);while(g.length!=1)if(h[g[0]].length==0){p.unshift(i.getElementById(g.shift()));p.unshift(i.getElementById(g.shift()))}else g=d(g.shift()).concat(g);p.unshift(i.getElementById(g.shift()));for(var y in h)if(h[y].length)return f;f.found=true;f.trail=this.spawn(p,true);return f}},{hopcroftTarjanBiconnected:ri,htbc:ri,htb:ri,hopcroftTarjanBiconnectedComponents:ri},{tarjanStronglyConnected:ai,tsc:ai,tscc:ai,tarjanStronglyConnectedComponents:ai}].forEach(function(e){T(oi,e)}),0),li=1,ui=2,ci=function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7";this.state=si;this.fulfillValue=void 0;this.rejectReason=void 0;this.onFulfilled=[];this.onRejected=[];this.proxy={then:this.then.bind(this)};if(typeof t==="function")t.call(this,this.fulfill.bind(this),this.reject.bind(this))},hi=(ci.prototype={fulfill:function e(t){return hi(this,li,"fulfillValue",t)},reject:function e(t){return hi(this,ui,"rejectReason",t)},then:function e(t,r){var n=this;var a=new ci;n.onFulfilled.push(di(t,a,"fulfill"));n.onRejected.push(di(r,a,"reject"));vi(n);return a.proxy}},function e(t,r,n,a){if(t.state===si){t.state=r;t[n]=a;vi(t)}return t}),vi=function e(t){if(t.state===li)fi(t,"onFulfilled",t.fulfillValue);else if(t.state===ui)fi(t,"onRejected",t.rejectReason)},fi=function e(t,r,n){if(t[r].length===0)return;var a=t[r];t[r]=[];var i=function e(){for(var t=0;t<a.length;t++)a[t](n)};if(typeof setImmediate==="function")setImmediate(i);else setTimeout(i,0)},di=function e(r,n,a){return function(e){if(typeof r!=="function")n[a].call(n,e);else{var t;try{t=r(e)}catch(e){n.reject(e);return}pi(n,t)}}},pi=function t(r,n){if(r===n||r.proxy===n){r.reject(new TypeError("cannot resolve promise with itself"));return}var e;if(x(n)==="object"&&n!==null||typeof n==="function")try{e=n.then}catch(e){r.reject(e);return}if(typeof e==="function"){var a=false;try{e.call(n,function(e){if(a)return;a=true;if(e===n)r.reject(new TypeError("circular thenable chain"));else t(r,e)},function(e){if(a)return;a=true;r.reject(e)})}catch(e){if(!a)r.reject(e)}return}r.fulfill(n)},gi=(ci.all=function(l){return new ci(function(n,a){var i=new Array(l.length);var o=0;var s=function e(t,r){i[t]=r;o++;if(o===l.length)n(i)};for(var e=0;e<l.length;e++)(function(t){var e=l[t];var r=e!=null&&e.then!=null;if(r)e.then(function(e){s(t,e)},function(e){a(e)});else{var n=e;s(t,n)}})(e)})},ci.resolve=function(r){return new ci(function(e,t){e(r)})},ci.reject=function(r){return new ci(function(e,t){t(r)})},typeof Promise!=="undefined"?Promise:ci),yi=function e(t,r,n){var a=ne(t);var i=!a;var o=this._private=T({duration:1e3},r,n);o.target=t;o.style=o.style||o.css;o.started=false;o.playing=false;o.hooked=false;o.applying=false;o.progress=0;o.completes=[];o.frames=[];if(o.complete&&U(o.complete))o.completes.push(o.complete);if(i){var s=t.position();o.startPosition=o.startPosition||{x:s.x,y:s.y};o.startStyle=o.startStyle||t.cy().style().getAnimationStartStyle(t,o.style)}if(a){var l=t.pan();o.startPan={x:l.x,y:l.y};o.startZoom=t.zoom()}this.length=1;this[0]=this},mi=yi.prototype,bi=(T(mi,{instanceString:function e(){return"animation"},hook:function e(){var t=this._private;if(!t.hooked){var r;var n=t.target._private.animation;if(t.queue)r=n.queue;else r=n.current;r.push(this);if(Q(t.target))t.target.cy().addToAnimationPool(t.target);t.hooked=true}return this},play:function e(){var t=this._private;if(t.progress===1)t.progress=0;t.playing=true;t.started=false;t.stopped=false;this.hook();return this},playing:function e(){return this._private.playing},apply:function e(){var t=this._private;t.applying=true;t.started=false;t.stopped=false;this.hook();return this},applying:function e(){return this._private.applying},pause:function e(){var t=this._private;t.playing=false;t.started=false;return this},stop:function e(){var t=this._private;t.playing=false;t.started=false;t.stopped=true;return this},rewind:function e(){return this.progress(0)},fastforward:function e(){return this.progress(1)},time:function e(t){var r=this._private;if(t===void 0)return r.progress*r.duration;else return this.progress(t/r.duration)},progress:function e(t){var r=this._private;var n=r.playing;if(t===void 0)return r.progress;else{if(n)this.pause();r.progress=t;r.started=false;if(n)this.play()}return this},completed:function e(){return this._private.progress===1},reverse:function e(){var a=this._private;var t=a.playing;if(t)this.pause();a.progress=1-a.progress;a.started=false;var r=function e(t,r){var n=a[t];if(n==null)return;a[t]=a[r];a[r]=n};r("zoom","startZoom");r("pan","startPan");r("position","startPosition");if(a.style)for(var n=0;n<a.style.length;n++){var i=a.style[n];var o=i.name;var s=a.startStyle[o];a.startStyle[o]=i;a.style[n]=s}if(t)this.play();return this},promise:function e(t){var r=this._private;var n;switch(t){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new gi(function(e,t){n.push(function(){e()})})}}),mi.complete=mi.completed,mi.run=mi.play,mi.running=mi.playing,{animated:function e(){return function e(){var t=this;var r=t.length!==void 0;var n=r?t:[t];var a=this._private.cy||this;if(!a.styleEnabled())return false;var i=n[0];if(i)return i._private.animation.current.length>0}},clearQueue:function e(){return function e(){var t=this;var r=t.length!==void 0;var n=r?t:[t];var a=this._private.cy||this;if(!a.styleEnabled())return this;for(var i=0;i<n.length;i++){var o=n[i];o._private.animation.queue=[]}return this}},delay:function e(){return function e(t,r){var n=this._private.cy||this;if(!n.styleEnabled())return this;return this.animate({delay:t,duration:t,complete:r})}},delayAnimation:function e(){return function e(t,r){var n=this._private.cy||this;if(!n.styleEnabled())return this;return this.animation({delay:t,duration:t,complete:r})}},animation:function e(){return function e(t,r){var n=this;var a=n.length!==void 0;var i=a?n:[n];var o=this._private.cy||this;var s=!a;var l=!s;if(!o.styleEnabled())return this;var u=o.style();t=T({},t,r);var c=Object.keys(t).length===0;if(c)return new yi(i[0],t);if(t.duration===void 0)t.duration=400;switch(t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(l){t.style=u.getPropsList(t.style||t.css);t.css=void 0}if(l&&t.renderedPosition!=null){var h=t.renderedPosition;var v=o.pan();var f=o.zoom();t.position=zr(h,f,v)}if(s&&t.panBy!=null){var d=t.panBy;var p=o.pan();t.pan={x:p.x+d.x,y:p.y+d.y}}var g=t.center||t.centre;if(s&&g!=null){var y=o.getCenterPan(g.eles,t.zoom);if(y!=null)t.pan=y}if(s&&t.fit!=null){var m=t.fit;var b=o.getFitViewport(m.eles||m.boundingBox,m.padding);if(b!=null){t.pan=b.pan;t.zoom=b.zoom}}if(s&&I(t.zoom)){var x=o.getZoomedViewport(t.zoom);if(x!=null){if(x.zoomed)t.zoom=x.zoom;if(x.panned)t.pan=x.pan}else t.zoom=null}return new yi(i[0],t)}},animate:function e(){return function e(t,r){var n=this;var a=n.length!==void 0;var i=a?n:[n];var o=this._private.cy||this;if(!o.styleEnabled())return this;if(r)t=T({},t,r);for(var s=0;s<i.length;s++){var l=i[s];var u=l.animated()&&(t.queue===void 0||t.queue);var c=l.animation(t,u?{queue:true}:void 0);c.play()}return this}},stop:function e(){return function e(t,r){var n=this;var a=n.length!==void 0;var i=a?n:[n];var o=this._private.cy||this;if(!o.styleEnabled())return this;for(var s=0;s<i.length;s++){var l=i[s];var u=l._private;var c=u.animation.current;for(var h=0;h<c.length;h++){var v=c[h];var f=v._private;if(r)f.duration=0}if(t)u.animation.queue=[];if(!r)u.animation.current=[]}o.notify("draw");return this}}}),xi,wi=Array.isArray,Ei=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ti=/^\w*$/;function _i(e,t){if(wi(e))return false;var r=typeof e;if(r=="number"||r=="symbol"||r=="boolean"||e==null||yt(e))return true;return Ti.test(e)||!Ei.test(e)||t!=null&&e in Object(t)}var Di=_i,Ci="[object AsyncFunction]",Ni="[object Function]",Ai="[object GeneratorFunction]",Li="[object Proxy]";function Si(e){if(!Me(e))return false;var t=vt(e);return t==Ni||t==Ai||t==Ci||t==Li}var Ii=Si,ki,Oi=Ye["__core-js_shared__"],Mi=function(){var e=/[^.]+$/.exec(Oi&&Oi.keys&&Oi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Pi(e){return!!Mi&&Mi in e}var Ri=Pi,Bi,Fi=Function.prototype.toString;function zi(e){if(e!=null){try{return Fi.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Gi=zi,Yi=/[\\^$.*+?()[\]{}|]/g,Xi=/^\[object .+?Constructor\]$/,Vi=Function.prototype,Ui=Object.prototype,ji=Vi.toString,qi=Ui.hasOwnProperty,Hi=RegExp("^"+ji.call(qi).replace(Yi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Wi(e){if(!Me(e)||Ri(e))return false;var t=Ii(e)?Hi:Xi;return t.test(Gi(e))}var $i=Wi;function Ki(e,t){return e==null?void 0:e[t]}var Zi=Ki;function Qi(e,t){var r=Zi(e,t);return $i(r)?r:void 0}var Ji=Qi,eo,to=Ji(Object,"create"),ro;function no(){this.__data__=to?to(null):{};this.size=0}function ao(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}var io=ao,oo="__lodash_hash_undefined__",so,lo=Object.prototype.hasOwnProperty;function uo(e){var t=this.__data__;if(to){var r=t[e];return r===oo?void 0:r}return lo.call(t,e)?t[e]:void 0}var co=uo,ho,vo=Object.prototype.hasOwnProperty;function fo(e){var t=this.__data__;return to?t[e]!==void 0:vo.call(t,e)}var po=fo,go="__lodash_hash_undefined__";function yo(e,t){var r=this.__data__;this.size+=this.has(e)?0:1;r[e]=to&&t===void 0?go:t;return this}var mo=yo;function bo(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}bo.prototype.clear=no,bo.prototype["delete"]=io,bo.prototype.get=co,bo.prototype.has=po,bo.prototype.set=mo;var xo=bo,wo;function Eo(){this.__data__=[];this.size=0}function To(e,t){return e===t||e!==e&&t!==t}var _o=To;function Do(e,t){var r=e.length;while(r--)if(_o(e[r][0],t))return r;return-1}var Co=Do,No,Ao=Array.prototype.splice;function Lo(e){var t=this.__data__,r=Co(t,e);if(r<0)return false;var n=t.length-1;if(r==n)t.pop();else Ao.call(t,r,1);--this.size;return true}var So=Lo;function Io(e){var t=this.__data__,r=Co(t,e);return r<0?void 0:t[r][1]}var ko=Io;function Oo(e){return Co(this.__data__,e)>-1}var Mo=Oo;function Po(e,t){var r=this.__data__,n=Co(r,e);if(n<0){++this.size;r.push([e,t])}else r[n][1]=t;return this}var Ro=Po;function Bo(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}Bo.prototype.clear=Eo,Bo.prototype["delete"]=So,Bo.prototype.get=ko,Bo.prototype.has=Mo,Bo.prototype.set=Ro;var Fo=Bo,zo,Go=Ji(Ye,"Map"),Yo;function Xo(){this.size=0;this.__data__={hash:new xo,map:new(Go||Fo),string:new xo}}function Vo(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Uo=Vo;function jo(e,t){var r=e.__data__;return Uo(t)?r[typeof t=="string"?"string":"hash"]:r.map}var qo=jo;function Ho(e){var t=qo(this,e)["delete"](e);this.size-=t?1:0;return t}var Wo=Ho;function $o(e){return qo(this,e).get(e)}var Ko=$o;function Zo(e){return qo(this,e).has(e)}var Qo=Zo;function Jo(e,t){var r=qo(this,e),n=r.size;r.set(e,t);this.size+=r.size==n?0:1;return this}var es=Jo;function ts(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}ts.prototype.clear=Xo,ts.prototype["delete"]=Wo,ts.prototype.get=Ko,ts.prototype.has=Qo,ts.prototype.set=es;var rs=ts,ns="Expected a function";function as(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError(ns);var o=function(){var e=arguments,t=i?i.apply(this,e):e[0],r=o.cache;if(r.has(t))return r.get(t);var n=a.apply(this,e);o.cache=r.set(t,n)||r;return n};o.cache=new(as.Cache||rs);return o}as.Cache=rs;var is=as,os=500;function ss(e){var t=is(e,function(e){if(r.size===os)r.clear();return e});var r=t.cache;return t}var ls,us=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cs=/\\(\\)?/g,hs,vs=ss(function(e){var a=[];if(e.charCodeAt(0)===46)a.push("");e.replace(us,function(e,t,r,n){a.push(r?n.replace(cs,"$1"):t||e)});return a});function fs(e,t){var r=-1,n=e==null?0:e.length,a=Array(n);while(++r<n)a[r]=t(e[r],r,e);return a}var ds=fs,ps=1/0,gs=Ze?Ze.prototype:void 0,ys=gs?gs.toString:void 0;function ms(e){if(typeof e=="string")return e;if(wi(e))return ds(e,ms)+"";if(yt(e))return ys?ys.call(e):"";var t=e+"";return t=="0"&&1/e==-ps?"-0":t}var bs=ms;function xs(e){return e==null?"":bs(e)}var ws=xs;function Es(e,t){if(wi(e))return e;return Di(e,t)?[e]:vs(ws(e))}var Ts=Es,_s=1/0;function Ds(e){if(typeof e=="string"||yt(e))return e;var t=e+"";return t=="0"&&1/e==-_s?"-0":t}var Cs=Ds;function Ns(e,t){t=Ts(t,e);var r=0,n=t.length;while(e!=null&&r<n)e=e[Cs(t[r++])];return r&&r==n?e:void 0}var As=Ns;function Ls(e,t,r){var n=e==null?void 0:As(e,t);return n===void 0?r:n}var Ss=Ls,Is,ks=function(){try{var e=Ji(Object,"defineProperty");e({},"",{});return e}catch(e){}}();function Os(e,t,r){if(t=="__proto__"&&ks)ks(e,t,{configurable:true,enumerable:true,value:r,writable:true});else e[t]=r}var Ms=Os,Ps,Rs=Object.prototype.hasOwnProperty;function Bs(e,t,r){var n=e[t];if(!(Rs.call(e,t)&&_o(n,r))||r===void 0&&!(t in e))Ms(e,t,r)}var Fs=Bs,zs=9007199254740991,Gs=/^(?:0|[1-9]\d*)$/;function Ys(e,t){var r=typeof e;t=t==null?zs:t;return!!t&&(r=="number"||r!="symbol"&&Gs.test(e))&&(e>-1&&e%1==0&&e<t)}var Xs=Ys;function Vs(e,t,r,n){if(!Me(e))return e;t=Ts(t,e);var a=-1,i=t.length,o=i-1,s=e;while(s!=null&&++a<i){var l=Cs(t[a]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(a!=o){var c=s[l];u=n?n(c,l,s):void 0;if(u===void 0)u=Me(c)?c:Xs(t[a+1])?[]:{}}Fs(s,l,u);s=s[l]}return e}var Us=Vs;function js(e,t,r){return e==null?e:Us(e,t,r)}var qs=js;function Hs(e,t){var r=-1,n=e.length;t||(t=Array(n));while(++r<n)t[r]=e[r];return t}var Ws=Hs;function $s(e){if(wi(e))return ds(e,Cs);return yt(e)?[e]:Ws(vs(ws(e)))}var Ks=$s,Zs,Qs,_={},Js=([bi,{data:function e(C){var t={field:"data",bindingEvent:"data",allowBinding:false,allowSetting:false,allowGetting:false,settingEvent:"data",settingTriggersEvent:false,triggerFnName:"trigger",immutableKeys:{},updateStyle:false,beforeGet:function e(t){},beforeSet:function e(t,r){},onSet:function e(t){},canSet:function e(t){return true}};C=T({},t,C);return function e(t,r){var n=C;var a=this;var i=a.length!==void 0;var o=i?a:[a];var s=i?a[0]:a;if(J(t)){var l=t.indexOf(".")!==-1;var u=l&&Ks(t);if(n.allowGetting&&r===void 0){var c;if(s){n.beforeGet(s);if(u&&s._private[n.field][t]===void 0)c=Ss(s._private[n.field],u);else c=s._private[n.field][t]}return c}else if(n.allowSetting&&r!==void 0){var h=!n.immutableKeys[t];if(h){var v=A({},t,r);n.beforeSet(a,v);for(var f=0,d=o.length;f<d;f++){var p=o[f];if(n.canSet(p))if(u&&s._private[n.field][t]===void 0)qs(p._private[n.field],u,r);else p._private[n.field][t]=r}if(n.updateStyle)a.updateStyle();n.onSet(a);if(n.settingTriggersEvent)a[n.triggerFnName](n.settingEvent)}}}else if(n.allowSetting&&I(t)){var g=t;var y,m;var b=Object.keys(g);n.beforeSet(a,g);for(var x=0;x<b.length;x++){y=b[x];m=g[y];var w=!n.immutableKeys[y];if(w)for(var E=0;E<o.length;E++){var T=o[E];if(n.canSet(T))T._private[n.field][y]=m}}if(n.updateStyle)a.updateStyle();n.onSet(a);if(n.settingTriggersEvent)a[n.triggerFnName](n.settingEvent)}else if(n.allowBinding&&U(t)){var _=t;a.on(n.bindingEvent,_)}else if(n.allowGetting&&t===void 0){var D;if(s){n.beforeGet(s);D=s._private[n.field]}return D}return a}},removeData:function e(x){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:false,immutableKeys:{}};x=T({},t,x);return function e(t){var r=x;var n=this;var a=n.length!==void 0;var i=a?n:[n];if(J(t)){var o=t.split(/\s+/);var s=o.length;for(var l=0;l<s;l++){var u=o[l];if(oe(u))continue;var c=!r.immutableKeys[u];if(c)for(var h=0,v=i.length;h<v;h++)i[h]._private[r.field][u]=void 0}if(r.triggerEvent)n[r.triggerFnName](r.event)}else if(t===void 0){for(var f=0,d=i.length;f<d;f++){var p=i[f]._private[r.field];var g=Object.keys(p);for(var y=0;y<g.length;y++){var m=g[y];var b=!r.immutableKeys[m];if(b)p[m]=void 0}}if(r.triggerEvent)n[r.triggerFnName](r.event)}return n}}},{eventAliasesOn:function e(t){var r=t;r.addListener=r.listen=r.bind=r.on;r.unlisten=r.unbind=r.off=r.removeListener;r.trigger=r.emit;r.pon=r.promiseOn=function(e,t){var i=this;var o=Array.prototype.slice.call(arguments,0);return new gi(function(r,e){var t=function e(t){i.off.apply(i,a);r(t)};var n=o.concat([t]);var a=n.concat([]);i.on.apply(i,n)})}}}].forEach(function(e){T(_,e)}),{animate:_.animate(),animation:_.animation(),animated:_.animated(),clearQueue:_.clearQueue(),delay:_.delay(),delayAnimation:_.delayAnimation(),stop:_.stop()}),el={classes:function e(t){var r=this;if(t===void 0){var n=[];r[0]._private.classes.forEach(function(e){return n.push(e)});return n}else if(!K(t))t=(t||"").match(/\S+/g)||[];var a=[];var i=new mr(t);for(var o=0;o<r.length;o++){var s=r[o];var l=s._private;var u=l.classes;var c=false;for(var h=0;h<t.length;h++){var v=t[h];var f=u.has(v);if(!f){c=true;break}}if(!c)c=u.size!==t.length;if(c){l.classes=i;a.push(s)}}if(a.length>0)this.spawn(a).updateStyle().emit("class");return r},addClass:function e(t){return this.toggleClass(t,true)},hasClass:function e(t){var r=this[0];return r!=null&&r._private.classes.has(t)},toggleClass:function e(t,r){if(!K(t))t=t.match(/\S+/g)||[];var n=this;var a=r===void 0;var i=[];for(var o=0,s=n.length;o<s;o++){var l=n[o];var u=l._private.classes;var c=false;for(var h=0;h<t.length;h++){var v=t[h];var f=u.has(v);var d=false;if(r||a&&!f){u.add(v);d=true}else if(!r||a&&f){u["delete"](v);d=true}if(!c&&d){i.push(l);c=true}}}if(i.length>0)this.spawn(i).updateStyle().emit("class");return n},removeClass:function e(t){return this.toggleClass(t,false)},flashClass:function e(t,r){var n=this;if(r==null)r=250;else if(r===0)return n;n.addClass(t);setTimeout(function(){n.removeClass(t)},r);return n}},c=(el.className=el.classNames=el.classes,{metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:j,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"}),tl,rl,nl;for(c.variable="(?:[\\w-.]|(?:\\\\"+c.metaChar+"))+",c.className="(?:[\\w-]|(?:\\\\"+c.metaChar+"))+",c.value=c.string+"|"+c.number,c.id=c.variable,tl=c.comparatorOp.split("|"),nl=0;nl<tl.length;nl++){rl=tl[nl];c.comparatorOp+="|@"+rl}for(tl=c.comparatorOp.split("|"),nl=0;nl<tl.length;nl++){rl=tl[nl];if(rl.indexOf("!")>=0)continue;if(rl==="=")continue;c.comparatorOp+="|\\!"+rl}var p=function e(){return{checks:[]}},w={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},al=[{selector:":selected",matches:function e(t){return t.selected()}},{selector:":unselected",matches:function e(t){return!t.selected()}},{selector:":selectable",matches:function e(t){return t.selectable()}},{selector:":unselectable",matches:function e(t){return!t.selectable()}},{selector:":locked",matches:function e(t){return t.locked()}},{selector:":unlocked",matches:function e(t){return!t.locked()}},{selector:":visible",matches:function e(t){return t.visible()}},{selector:":hidden",matches:function e(t){return!t.visible()}},{selector:":transparent",matches:function e(t){return t.transparent()}},{selector:":grabbed",matches:function e(t){return t.grabbed()}},{selector:":free",matches:function e(t){return!t.grabbed()}},{selector:":removed",matches:function e(t){return t.removed()}},{selector:":inside",matches:function e(t){return!t.removed()}},{selector:":grabbable",matches:function e(t){return t.grabbable()}},{selector:":ungrabbable",matches:function e(t){return!t.grabbable()}},{selector:":animated",matches:function e(t){return t.animated()}},{selector:":unanimated",matches:function e(t){return!t.animated()}},{selector:":parent",matches:function e(t){return t.isParent()}},{selector:":childless",matches:function e(t){return t.isChildless()}},{selector:":child",matches:function e(t){return t.isChild()}},{selector:":orphan",matches:function e(t){return t.isOrphan()}},{selector:":nonorphan",matches:function e(t){return t.isChild()}},{selector:":compound",matches:function e(t){if(t.isNode())return t.isParent();else return t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function e(t){return t.isLoop()}},{selector:":simple",matches:function e(t){return t.isSimple()}},{selector:":active",matches:function e(t){return t.active()}},{selector:":inactive",matches:function e(t){return!t.active()}},{selector:":backgrounding",matches:function e(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function e(t){return!t.backgrounding()}}].sort(function(e,t){return _e(e.selector,t.selector)}),il=function(){var e={};var t;for(var r=0;r<al.length;r++){t=al[r];e[t.selector]=t.matches}return e}(),ol=function e(t,r){return il[t](r)},sl="("+al.map(function(e){return e.selector}).join("|")+")",ll=function e(t){return t.replace(new RegExp("\\\\("+c.metaChar+")","g"),function(e,t){return t})},ul=function e(t,r,n){t[t.length-1]=n},cl=[{name:"group",query:true,regex:"("+c.group+")",populate:function e(t,r,n){var a=L(n,1),i=a[0];r.checks.push({type:w.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:true,regex:sl,populate:function e(t,r,n){var a=L(n,1),i=a[0];r.checks.push({type:w.STATE,value:i})}},{name:"id",query:true,regex:"\\#("+c.id+")",populate:function e(t,r,n){var a=L(n,1),i=a[0];r.checks.push({type:w.ID,value:ll(i)})}},{name:"className",query:true,regex:"\\.("+c.className+")",populate:function e(t,r,n){var a=L(n,1),i=a[0];r.checks.push({type:w.CLASS,value:ll(i)})}},{name:"dataExists",query:true,regex:"\\[\\s*("+c.variable+")\\s*\\]",populate:function e(t,r,n){var a=L(n,1),i=a[0];r.checks.push({type:w.DATA_EXIST,field:ll(i)})}},{name:"dataCompare",query:true,regex:"\\[\\s*("+c.variable+")\\s*("+c.comparatorOp+")\\s*("+c.value+")\\s*\\]",populate:function e(t,r,n){var a=L(n,3),i=a[0],o=a[1],s=a[2];var l=new RegExp("^"+c.string+"$").exec(s)!=null;if(l)s=s.substring(1,s.length-1);else s=parseFloat(s);r.checks.push({type:w.DATA_COMPARE,field:ll(i),operator:o,value:s})}},{name:"dataBool",query:true,regex:"\\[\\s*("+c.boolOp+")\\s*("+c.variable+")\\s*\\]",populate:function e(t,r,n){var a=L(n,2),i=a[0],o=a[1];r.checks.push({type:w.DATA_BOOL,field:ll(o),operator:i})}},{name:"metaCompare",query:true,regex:"\\[\\[\\s*("+c.meta+")\\s*("+c.comparatorOp+")\\s*("+c.number+")\\s*\\]\\]",populate:function e(t,r,n){var a=L(n,3),i=a[0],o=a[1],s=a[2];r.checks.push({type:w.META_COMPARE,field:ll(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:true,regex:c.separator,populate:function e(t,r){var n=t.currentSubject;var a=t.edgeCount;var i=t.compoundCount;var o=t[t.length-1];if(n!=null){o.subject=n;t.currentSubject=null}o.edgeCount=a;o.compoundCount=i;t.edgeCount=0;t.compoundCount=0;var s=t[t.length++]=p();return s}},{name:"directedEdge",separator:true,regex:c.directedEdge,populate:function e(t,r){if(t.currentSubject==null){var n=p();var a=r;var i=p();n.checks.push({type:w.DIRECTED_EDGE,source:a,target:i});ul(t,r,n);t.edgeCount++;return i}else{var o=p();var s=r;var l=p();o.checks.push({type:w.NODE_SOURCE,source:s,target:l});ul(t,r,o);t.edgeCount++;return l}}},{name:"undirectedEdge",separator:true,regex:c.undirectedEdge,populate:function e(t,r){if(t.currentSubject==null){var n=p();var a=r;var i=p();n.checks.push({type:w.UNDIRECTED_EDGE,nodes:[a,i]});ul(t,r,n);t.edgeCount++;return i}else{var o=p();var s=r;var l=p();o.checks.push({type:w.NODE_NEIGHBOR,node:s,neighbor:l});ul(t,r,o);return l}}},{name:"child",separator:true,regex:c.child,populate:function e(t,r){if(t.currentSubject==null){var n=p();var a=p();var i=t[t.length-1];n.checks.push({type:w.CHILD,parent:i,child:a});ul(t,r,n);t.compoundCount++;return a}else if(t.currentSubject===r){var o=p();var s=t[t.length-1];var l=p();var u=p();var c=p();var h=p();o.checks.push({type:w.COMPOUND_SPLIT,left:s,right:l,subject:u});u.checks=r.checks;r.checks=[{type:w.TRUE}];h.checks.push({type:w.TRUE});l.checks.push({type:w.PARENT,parent:h,child:c});ul(t,s,o);t.currentSubject=u;t.compoundCount++;return c}else{var v=p();var f=p();var d=[{type:w.PARENT,parent:v,child:f}];v.checks=r.checks;r.checks=d;t.compoundCount++;return f}}},{name:"descendant",separator:true,regex:c.descendant,populate:function e(t,r){if(t.currentSubject==null){var n=p();var a=p();var i=t[t.length-1];n.checks.push({type:w.DESCENDANT,ancestor:i,descendant:a});ul(t,r,n);t.compoundCount++;return a}else if(t.currentSubject===r){var o=p();var s=t[t.length-1];var l=p();var u=p();var c=p();var h=p();o.checks.push({type:w.COMPOUND_SPLIT,left:s,right:l,subject:u});u.checks=r.checks;r.checks=[{type:w.TRUE}];h.checks.push({type:w.TRUE});l.checks.push({type:w.ANCESTOR,ancestor:h,descendant:c});ul(t,s,o);t.currentSubject=u;t.compoundCount++;return c}else{var v=p();var f=p();var d=[{type:w.ANCESTOR,ancestor:v,descendant:f}];v.checks=r.checks;r.checks=d;t.compoundCount++;return f}}},{name:"subject",modifier:true,regex:c.subject,populate:function e(t,r){if(t.currentSubject!=null&&t.currentSubject!==r){ee("Redefinition of subject in selector `"+t.toString()+"`");return false}t.currentSubject=r;var n=t[t.length-1];var a=n.checks[0];var i=a==null?null:a.type;if(i===w.DIRECTED_EDGE)a.type=w.NODE_TARGET;else if(i===w.UNDIRECTED_EDGE){a.type=w.NODE_NEIGHBOR;a.node=a.nodes[1];a.neighbor=a.nodes[0];a.nodes=null}}}],hl=(cl.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)}),function e(t){var r;var n;var a;for(var i=0;i<cl.length;i++){var o=cl[i];var s=o.name;var l=t.match(o.regexObj);if(l!=null){n=l;r=o;a=s;var u=l[0];t=t.substring(u.length);break}}return{expr:r,match:n,name:a,remaining:t}}),vl=function e(t){var r=t.match(/^\s+/);if(r){var n=r[0];t=t.substring(n.length)}return t},fl,dl,pl={parse:function e(t){var r=this;var n=r.inputText=t;var a=r[0]=p();r.length=1;n=vl(n);for(;;){var i=hl(n);if(i.expr==null){ee("The selector `"+t+"`is invalid");return false}else{var o=i.match.slice(1);var s=i.expr.populate(r,a,o);if(s===false)return false;else if(s!=null)a=s}n=i.remaining;if(n.match(/^\s*$/))break}var l=r[r.length-1];if(r.currentSubject!=null)l.subject=r.currentSubject;l.edgeCount=r.edgeCount;l.compoundCount=r.compoundCount;for(var u=0;u<r.length;u++){var c=r[u];if(c.compoundCount>0&&c.edgeCount>0){ee("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector");return false}if(c.edgeCount>1){ee("The selector `"+t+"` is invalid because it uses multiple edge selectors");return false}else if(c.edgeCount===1)ee("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return true},toString:function e(){if(this.toStringCache!=null)return this.toStringCache;var g=function e(t){if(t==null)return"";else return t};var y=function e(t){if(J(t))return'"'+t+'"';else return g(t)};var m=function e(t){return" "+t+" "};var i=function e(t,r){var n=t.type,a=t.value;switch(n){case w.GROUP:{var i=g(a);return i.substring(0,i.length-1)}case w.DATA_COMPARE:{var o=t.field,s=t.operator;return"["+o+m(g(s))+y(a)+"]"}case w.DATA_BOOL:{var l=t.operator,u=t.field;return"["+g(l)+u+"]"}case w.DATA_EXIST:{var c=t.field;return"["+c+"]"}case w.META_COMPARE:{var h=t.operator,v=t.field;return"[["+v+m(g(h))+y(a)+"]]"}case w.STATE:return a;case w.ID:return"#"+a;case w.CLASS:return"."+a;case w.PARENT:case w.CHILD:return b(t.parent,r)+m(">")+b(t.child,r);case w.ANCESTOR:case w.DESCENDANT:return b(t.ancestor,r)+" "+b(t.descendant,r);case w.COMPOUND_SPLIT:{var f=b(t.left,r);var d=b(t.subject,r);var p=b(t.right,r);return f+(f.length>0?" ":"")+d+p}case w.TRUE:return""}};var b=function e(n,a){return n.checks.reduce(function(e,t,r){return e+(a===n&&r===0?"$":"")+i(t,a)},"")};var t="";for(var r=0;r<this.length;r++){var n=this[r];t+=b(n,n.subject);if(this.length>1&&r<this.length-1)t+=", "}this.toStringCache=t;return t}},gl=function e(t,r,n){var a;var i=J(t);var o=me(t);var s=J(n);var l,u;var c=false;var h=false;var v=false;if(r.indexOf("!")>=0){r=r.replace("!","");h=true}if(r.indexOf("@")>=0){r=r.replace("@","");c=true}if(i||s||c){l=!i&&!o?"":""+t;u=""+n}if(c){t=l=l.toLowerCase();n=u=u.toLowerCase()}switch(r){case"*=":a=l.indexOf(u)>=0;break;case"$=":a=l.indexOf(u,l.length-u.length)>=0;break;case"^=":a=l.indexOf(u)===0;break;case"=":a=t===n;break;case">":v=true;a=t>n;break;case">=":v=true;a=t>=n;break;case"<":v=true;a=t<n;break;case"<=":v=true;a=t<=n;break;default:a=false;break}if(h&&(t!=null||!v))a=!a;return a},yl=function e(t,r){switch(r){case"?":return t?true:false;case"!":return t?false:true;case"^":return t===void 0}},ml=function e(t){return t!==void 0},bl=function e(t,r){return t.data(r)},xl=function e(t,r){return t[r]()},n=[],o=function e(t,r){return t.checks.every(function(e){return n[e.type](e,r)})};n[w.GROUP]=function(e,t){var r=e.value;return r==="*"||r===t.group()},n[w.STATE]=function(e,t){var r=e.value;return ol(r,t)},n[w.ID]=function(e,t){var r=e.value;return t.id()===r},n[w.CLASS]=function(e,t){var r=e.value;return t.hasClass(r)},n[w.META_COMPARE]=function(e,t){var r=e.field,n=e.operator,a=e.value;return gl(xl(t,r),n,a)},n[w.DATA_COMPARE]=function(e,t){var r=e.field,n=e.operator,a=e.value;return gl(bl(t,r),n,a)},n[w.DATA_BOOL]=function(e,t){var r=e.field,n=e.operator;return yl(bl(t,r),n)},n[w.DATA_EXIST]=function(e,t){var r=e.field;e.operator;return ml(bl(t,r))},n[w.UNDIRECTED_EDGE]=function(e,t){var r=e.nodes[0];var n=e.nodes[1];var a=t.source();var i=t.target();return o(r,a)&&o(n,i)||o(n,a)&&o(r,i)},n[w.NODE_NEIGHBOR]=function(t,e){return o(t.node,e)&&e.neighborhood().some(function(e){return e.isNode()&&o(t.neighbor,e)})},n[w.DIRECTED_EDGE]=function(e,t){return o(e.source,t.source())&&o(e.target,t.target())},n[w.NODE_SOURCE]=function(t,e){return o(t.source,e)&&e.outgoers().some(function(e){return e.isNode()&&o(t.target,e)})},n[w.NODE_TARGET]=function(t,e){return o(t.target,e)&&e.incomers().some(function(e){return e.isNode()&&o(t.source,e)})},n[w.CHILD]=function(e,t){return o(e.child,t)&&o(e.parent,t.parent())},n[w.PARENT]=function(t,e){return o(t.parent,e)&&e.children().some(function(e){return o(t.child,e)})},n[w.DESCENDANT]=function(t,e){return o(t.descendant,e)&&e.ancestors().some(function(e){return o(t.ancestor,e)})},n[w.ANCESTOR]=function(t,e){return o(t.ancestor,e)&&e.descendants().some(function(e){return o(t.descendant,e)})},n[w.COMPOUND_SPLIT]=function(e,t){return o(e.subject,t)&&o(e.left,t)&&o(e.right,t)},n[w.TRUE]=function(){return true},n[w.COLLECTION]=function(e,t){var r=e.value;return r.has(t)},n[w.FILTER]=function(e,t){var r=e.value;return r(t)};var wl,El,Tl={matches:function e(t){var r=this;for(var n=0;n<r.length;n++){var a=r[n];if(o(a,t))return true}return false},filter:function e(t){var a=this;if(a.length===1&&a[0].checks.length===1&&a[0].checks[0].type===w.ID)return t.getElementById(a[0].checks[0].value).collection();var r=function e(t){for(var r=0;r<a.length;r++){var n=a[r];if(o(n,t))return true}return false};if(a.text()==null)r=function e(){return true};return t.filter(r)}},_l=function e(t){this.inputText=t;this.currentSubject=null;this.compoundCount=0;this.edgeCount=0;this.length=0;if(t==null||J(t)&&t.match(/^\s*$/));else if(Q(t))this.addQuery({checks:[{type:w.COLLECTION,value:t.collection()}]});else if(U(t))this.addQuery({checks:[{type:w.FILTER,value:t}]});else if(J(t)){if(!this.parse(t))this.invalid=true}else z("A selector must be created from a string; found ")},Dl=_l.prototype,Cl=([pl,Tl].forEach(function(e){return T(Dl,e)}),Dl.text=function(){return this.inputText},Dl.size=function(){return this.length},Dl.eq=function(e){return this[e]},Dl.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},Dl.addQuery=function(e){this[this.length++]=e},Dl.selector=Dl.toString,{allAre:function e(t){var r=new _l(t);return this.every(function(e){return r.matches(e)})},is:function e(t){var r=new _l(t);return this.some(function(e){return r.matches(e)})},some:function e(t,r){for(var n=0;n<this.length;n++){var a=!r?t(this[n],n,this):t.apply(r,[this[n],n,this]);if(a)return true}return false},every:function e(t,r){for(var n=0;n<this.length;n++){var a=!r?t(this[n],n,this):t.apply(r,[this[n],n,this]);if(!a)return false}return true},same:function e(t){if(this===t)return true;t=this.cy().collection(t);var r=this.length;var n=t.length;if(r!==n)return false;if(r===1)return this[0]===t[0];return this.every(function(e){return t.hasElementWithId(e.id())})},anySame:function e(t){t=this.cy().collection(t);return this.some(function(e){return t.hasElementWithId(e.id())})},allAreNeighbors:function e(t){t=this.cy().collection(t);var r=this.neighborhood();return t.every(function(e){return r.hasElementWithId(e.id())})},contains:function e(t){t=this.cy().collection(t);var r=this;return t.every(function(e){return r.hasElementWithId(e.id())})}}),Nl=(Cl.allAreNeighbours=Cl.allAreNeighbors,Cl.has=Cl.contains,Cl.equal=Cl.equals=Cl.same,function e(f,d){return function e(t,r,n,a){var i=t;var o=this;var s;if(i==null)s="";else if(Q(i)&&i.length===1)s=i.id();if(o.length===1&&s){var l=o[0]._private;var u=l.traversalCache=l.traversalCache||{};var c=u[d]=u[d]||[];var h=jt(s);var v=c[h];if(v)return v;else return c[h]=f.call(o,t,r,n,a)}else return f.call(o,t,r,n,a)}}),Al={parent:function e(t){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a];var o=i._private.parent;if(o)r.push(o)}return this.spawn(r,true).filter(t)},parents:function e(t){var r=[];var n=this.parent();while(n.nonempty()){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,true).filter(t)},commonAncestors:function e(t){var r;for(var n=0;n<this.length;n++){var a=this[n];var i=a.parents();r=r||i;r=r.intersect(i)}return r.filter(t)},orphans:function e(t){return this.stdFilter(function(e){return e.isOrphan()}).filter(t)},nonorphans:function e(t){return this.stdFilter(function(e){return e.isChild()}).filter(t)},children:Nl(function(e){var t=[];for(var r=0;r<this.length;r++){var n=this[r];var a=n._private.children;for(var i=0;i<a.length;i++)t.push(a[i])}return this.spawn(t,true).filter(e)},"children"),siblings:function e(t){return this.parent().children().not(this).filter(t)},isParent:function e(){var t=this[0];if(t)return t.isNode()&&t._private.children.length!==0},isChildless:function e(){var t=this[0];if(t)return t.isNode()&&t._private.children.length===0},isChild:function e(){var t=this[0];if(t)return t.isNode()&&t._private.parent!=null},isOrphan:function e(){var t=this[0];if(t)return t.isNode()&&t._private.parent==null},descendants:function e(t){var n=[];function a(e){for(var t=0;t<e.length;t++){var r=e[t];n.push(r);if(r.children().nonempty())a(r.children())}}a(this.children());return this.spawn(n,true).filter(t)}},Ll,Sl;function Il(e,t,r,n){var a=[];var i=new mr;var o=e.cy();var s=o.hasCompoundNodes();for(var l=0;l<e.length;l++){var u=e[l];if(r)a.push(u);else if(s)n(a,i,u)}while(a.length>0){var c=a.shift();t(c);i.add(c.id());if(s)n(a,i,c)}return e}function kl(e,t,r){if(r.isParent()){var n=r._private.children;for(var a=0;a<n.length;a++){var i=n[a];if(!t.has(i.id()))e.push(i)}}}function Ol(e,t,r){if(r.isChild()){var n=r._private.parent;if(!t.has(n.id()))e.push(n)}}function Ml(e,t,r){Ol(e,t,r);kl(e,t,r)}Al.forEachDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:true;return Il(this,e,t,kl)},Al.forEachUp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:true;return Il(this,e,t,Ol)},Al.forEachUpAndDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:true;return Il(this,e,t,Ml)},Al.ancestors=Al.parents,(Ll=Sl={data:_.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateStyle:true}),removeData:_.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateStyle:true}),scratch:_.data({field:"scratch",bindingEvent:"scratch",allowBinding:true,allowSetting:true,settingEvent:"scratch",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,updateStyle:true}),removeScratch:_.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:true,updateStyle:true}),rscratch:_.data({field:"rscratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeRscratch:_.removeData({field:"rscratch",triggerEvent:false}),id:function e(){var t=this[0];if(t)return t._private.data.id}}).attr=Ll.data,Ll.removeAttr=Ll.removeData;var Pl=Sl,Rl={},Bl,Fl;function zl(s){return function(e){var t=this;if(e===void 0)e=true;if(t.length===0)return;if(t.isNode()&&!t.removed()){var r=0;var n=t[0];var a=n._private.edges;for(var i=0;i<a.length;i++){var o=a[i];if(!e&&o.isLoop())continue;r+=s(n,o)}return r}else return}}function Gl(o,s){return function(e){var t;var r=this.nodes();for(var n=0;n<r.length;n++){var a=r[n];var i=a[o](e);if(i!==void 0&&(t===void 0||s(i,t)))t=i}return t}}T(Rl,{degree:zl(function(e,t){if(t.source().same(t.target()))return 2;else return 1}),indegree:zl(function(e,t){if(t.target().same(e))return 1;else return 0}),outdegree:zl(function(e,t){if(t.source().same(e))return 1;else return 0})}),T(Rl,{minDegree:Gl("degree",function(e,t){return e<t}),maxDegree:Gl("degree",function(e,t){return e>t}),minIndegree:Gl("indegree",function(e,t){return e<t}),maxIndegree:Gl("indegree",function(e,t){return e>t}),minOutdegree:Gl("outdegree",function(e,t){return e<t}),maxOutdegree:Gl("outdegree",function(e,t){return e>t})}),T(Rl,{totalDegree:function e(t){var r=0;var n=this.nodes();for(var a=0;a<n.length;a++)r+=n[a].degree(t);return r}});var Yl=function e(t,r,n){for(var a=0;a<t.length;a++){var i=t[a];if(!i.locked()){var o=i._private.position;var s={x:r.x!=null?r.x-o.x:0,y:r.y!=null?r.y-o.y:0};if(i.isParent()&&!(s.x===0&&s.y===0))i.children().shift(s,n);i.dirtyBoundingBoxCache()}}},Xl={field:"position",bindingEvent:"position",allowBinding:true,allowSetting:true,settingEvent:"position",settingTriggersEvent:true,triggerFnName:"emitAndNotify",allowGetting:true,validKeys:["x","y"],beforeGet:function e(t){t.updateCompoundBounds()},beforeSet:function e(t,r){Yl(t,r,false)},onSet:function e(t){t.dirtyCompoundBoundsCache()},canSet:function e(t){return!t.locked()}},Bl,Vl=((Bl=Fl={position:_.data(Xl),silentPosition:_.data(T({},Xl,{allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:false,beforeSet:function e(t,r){Yl(t,r,true)},onSet:function e(t){t.dirtyCompoundBoundsCache()}})),positions:function e(t,r){if(I(t))if(r)this.silentPosition(t);else this.position(t);else if(U(t)){var n=t;var a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i];var s=void 0;if(s=n(o,i))if(r)o.silentPosition(s);else o.position(s)}a.endBatch()}return this},silentPositions:function e(t){return this.positions(t,true)},shift:function e(t,r,n){var a;if(I(t)){a={x:me(t.x)?t.x:0,y:me(t.y)?t.y:0};n=r}else if(J(t)&&me(r)){a={x:0,y:0};a[t]=r}if(a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))continue;var l=s.position();var u={x:l.x+a.x,y:l.y+a.y};if(n)s.silentPosition(u);else s.position(u)}i.endBatch()}return this},silentShift:function e(t,r){if(I(t))this.shift(t,true);else if(J(t)&&me(r))this.shift(t,r,true);return this},renderedPosition:function e(t,r){var n=this[0];var a=this.cy();var i=a.zoom();var o=a.pan();var s=I(t)?t:void 0;var l=s!==void 0||r!==void 0&&J(t);if(n&&n.isNode())if(l)for(var u=0;u<this.length;u++){var c=this[u];if(r!==void 0)c.position(t,(r-o[t])/i);else if(s!==void 0)c.position(zr(s,i,o))}else{var h=n.position();s=Fr(h,i,o);if(t===void 0)return s;else return s[t]}else if(!l)return void 0;return this},relativePosition:function e(t,r){var n=this[0];var a=this.cy();var i=I(t)?t:void 0;var o=i!==void 0||r!==void 0&&J(t);var s=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var l=0;l<this.length;l++){var u=this[l];var c=s?u.parent():null;var h=c&&c.length>0;var v=h;if(h)c=c[0];var f=v?c.position():{x:0,y:0};if(r!==void 0)u.position(t,r+f[t]);else if(i!==void 0)u.position({x:i.x+f.x,y:i.y+f.y})}else{var d=n.position();var p=s?n.parent():null;var g=p&&p.length>0;var y=g;if(g)p=p[0];var m=y?p.position():{x:0,y:0};i={x:d.x-m.x,y:d.y-m.y};if(t===void 0)return i;else return i[t]}else if(!o)return void 0;return this}}).modelPosition=Bl.point=Bl.position,Bl.modelPositions=Bl.points=Bl.positions,Bl.renderedPoint=Bl.renderedPosition,Bl.relativePoint=Bl.relativePosition,Fl),Ul,jl,Ul=jl={renderedBoundingBox:function(e){var t=this.boundingBox(e);var r=this.cy();var n=r.zoom();var a=r.pan();var i=t.x1*n+a.x;var o=t.x2*n+a.x;var s=t.y1*n+a.y;var l=t.y2*n+a.y;return{x1:i,x2:o,y1:s,y2:l,w:o-i,h:l-s}},dirtyCompoundBoundsCache:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:false;var e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;this.forEachUp(function(e){if(e.isParent()){var t=e._private;t.compoundBoundsClean=false;t.bbCache=null;if(!r)e.emitAndNotify("bounds")}});return this},updateCompoundBounds:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:false;var t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function r(e){if(!e.isParent())return;var t=e._private;var r=e.children();var n=e.pstyle("compound-sizing-wrt-labels").value==="include";var a={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}};var i=r.boundingBox({includeLabels:n,includeOverlays:false,useCache:false});var o=t.position;if(i.w===0||i.h===0){i={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue};i.x1=o.x-i.w/2;i.x2=o.x+i.w/2;i.y1=o.y-i.h/2;i.y2=o.y+i.h/2}function s(e,t,r){var n=0;var a=0;var i=t+r;if(e>0&&i>0){n=t/i*e;a=r/i*e}return{biasDiff:n,biasComplementDiff:a}}function l(e,t,r,n){if(r.units==="%")switch(n){case"width":return e>0?r.pfValue*e:0;case"height":return t>0?r.pfValue*t:0;case"average":return e>0&&t>0?r.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?r.pfValue*t:r.pfValue*e:0;case"max":return e>0&&t>0?e>t?r.pfValue*e:r.pfValue*t:0;default:return 0}else if(r.units==="px")return r.pfValue;else return 0}var u=a.width.left.value;if(a.width.left.units==="px"&&a.width.val>0)u=u*100/a.width.val;var c=a.width.right.value;if(a.width.right.units==="px"&&a.width.val>0)c=c*100/a.width.val;var h=a.height.top.value;if(a.height.top.units==="px"&&a.height.val>0)h=h*100/a.height.val;var v=a.height.bottom.value;if(a.height.bottom.units==="px"&&a.height.val>0)v=v*100/a.height.val;var f=s(a.width.val-i.w,u,c);var d=f.biasDiff;var p=f.biasComplementDiff;var g=s(a.height.val-i.h,h,v);var y=g.biasDiff;var m=g.biasComplementDiff;t.autoPadding=l(i.w,i.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value);t.autoWidth=Math.max(i.w,a.width.val);o.x=(-d+i.x1+i.x2+p)/2;t.autoHeight=Math.max(i.h,a.height.val);o.y=(-y+i.y1+i.y2+m)/2}for(var n=0;n<this.length;n++){var a=this[n];var i=a._private;if(!i.compoundBoundsClean||e){r(a);if(!t.batching())i.compoundBoundsClean=true}}return this}},ql=function e(t){if(t===Infinity||t===-Infinity)return 0;return t},Hl=function e(t,r,n,a,i){if(a-r===0||i-n===0)return;if(r==null||n==null||a==null||i==null)return;t.x1=r<t.x1?r:t.x1;t.x2=a>t.x2?a:t.x2;t.y1=n<t.y1?n:t.y1;t.y2=i>t.y2?i:t.y2;t.w=t.x2-t.x1;t.h=t.y2-t.y1},Wl=function e(t,r){if(r==null)return t;return Hl(t,r.x1,r.y1,r.x2,r.y2)},$l=function e(t,r,n){return vr(t,r,n)},Kl=function e(t,r,n){if(r.cy().headless())return;var a=r._private;var i=a.rstyle;var o=i.arrowWidth/2;var s=r.pstyle(n+"-arrow-shape").value;var l;var u;if(s!=="none"){if(n==="source"){l=i.srcX;u=i.srcY}else if(n==="target"){l=i.tgtX;u=i.tgtY}else{l=i.midX;u=i.midY}var c=a.arrowBounds=a.arrowBounds||{};var h=c[n]=c[n]||{};h.x1=l-o;h.y1=u-o;h.x2=l+o;h.y2=u+o;h.w=h.x2-h.x1;h.h=h.y2-h.y1;sn(h,1);Hl(t,h.x1,h.y1,h.x2,h.y2)}},Zl=function R(e,t,r){if(t.cy().headless())return;var n;if(r)n=r+"-";else n="";var a=t._private;var i=a.rstyle;var B=t.pstyle(n+"label").strValue;if(B){var o=t.pstyle("text-halign");var s=t.pstyle("text-valign");var F=$l(i,"labelWidth",r);var z=$l(i,"labelHeight",r);var l=$l(i,"labelX",r);var u=$l(i,"labelY",r);var c=t.pstyle(n+"text-margin-x").pfValue;var G=t.pstyle(n+"text-margin-y").pfValue;var h=t.isEdge();var v=t.pstyle(n+"text-rotation");var f=t.pstyle("text-outline-width").pfValue;var Y=t.pstyle("text-border-width").pfValue;var d=Y/2;var p=t.pstyle("text-background-padding").pfValue;var g=2;var y=z;var m=F;var b=m/2;var x=y/2;var w,E,T,_;if(h){w=l-b;E=l+b;T=u-x;_=u+x}else{switch(o.value){case"left":w=l-m;E=l;break;case"center":w=l-b;E=l+b;break;case"right":w=l;E=l+m;break}switch(s.value){case"top":T=u-y;_=u;break;case"center":T=u-x;_=u+x;break;case"bottom":T=u;_=u+y;break}}w+=c-Math.max(f,d)-p-g;E+=c+Math.max(f,d)+p+g;T+=G-Math.max(f,d)-p-g;_+=G+Math.max(f,d)+p+g;var D=r||"main";var C=a.labelBounds;var N=C[D]=C[D]||{};N.x1=w;N.y1=T;N.x2=E;N.y2=_;N.w=E-w;N.h=_-T;var X=h&&v.strValue==="autorotate";var V=v.pfValue!=null&&v.pfValue!==0;if(X||V){var U=X?$l(a.rstyle,"labelAngle",r):v.pfValue;var j=Math.cos(U);var q=Math.sin(U);var A=(w+E)/2;var L=(T+_)/2;if(!h){switch(o.value){case"left":A=E;break;case"right":A=w;break}switch(s.value){case"top":L=_;break;case"bottom":L=T;break}}var S=function e(t,r){t=t-A;r=r-L;return{x:t*j-r*q+A,y:t*q+r*j+L}};var I=S(w,T);var k=S(w,_);var O=S(E,T);var M=S(E,_);w=Math.min(I.x,k.x,O.x,M.x);E=Math.max(I.x,k.x,O.x,M.x);T=Math.min(I.y,k.y,O.y,M.y);_=Math.max(I.y,k.y,O.y,M.y)}var H=D+"Rot";var P=C[H]=C[H]||{};P.x1=w;P.y1=T;P.x2=E;P.y2=_;P.w=E-w;P.h=_-T;Hl(e,w,T,E,_);Hl(a.labelBounds.all,w,T,E,_)}return e},Ql=function R(e,t){var r=e._private.cy;var n=r.styleEnabled();var B=r.headless();var a=tn();var i=e._private;var o=e.isNode();var s=e.isEdge();var l,u,c,h;var v,f;var d=i.rstyle;var p=o&&n?e.pstyle("bounds-expansion").pfValue:[0];var g=function e(t){return t.pstyle("display").value!=="none"};var y=!n||g(e)&&(!s||g(e.source())&&g(e.target()));if(y){var m=0;var b=0;if(n&&t.includeOverlays){m=e.pstyle("overlay-opacity").value;if(m!==0)b=e.pstyle("overlay-padding").value}var x=0;var w=0;if(n&&t.includeUnderlays){x=e.pstyle("underlay-opacity").value;if(x!==0)w=e.pstyle("underlay-padding").value}var E=Math.max(b,w);var T=0;var _=0;if(n){T=e.pstyle("width").pfValue;_=T/2}if(o&&t.includeNodes){var D=e.position();v=D.x;f=D.y;var F=e.outerWidth();var C=F/2;var z=e.outerHeight();var N=z/2;l=v-C;u=v+C;c=f-N;h=f+N;Hl(a,l,c,u,h)}else if(s&&t.includeEdges)if(n&&!B){var A=e.pstyle("curve-style").strValue;l=Math.min(d.srcX,d.midX,d.tgtX);u=Math.max(d.srcX,d.midX,d.tgtX);c=Math.min(d.srcY,d.midY,d.tgtY);h=Math.max(d.srcY,d.midY,d.tgtY);l-=_;u+=_;c-=_;h+=_;Hl(a,l,c,u,h);if(A==="haystack"){var L=d.haystackPts;if(L&&L.length===2){l=L[0].x;c=L[0].y;u=L[1].x;h=L[1].y;if(l>u){var G=l;l=u;u=G}if(c>h){var Y=c;c=h;h=Y}Hl(a,l-_,c-_,u+_,h+_)}}else if(A==="bezier"||A==="unbundled-bezier"||A==="segments"||A==="taxi"){var S;switch(A){case"bezier":case"unbundled-bezier":S=d.bezierPts;break;case"segments":case"taxi":S=d.linePts;break}if(S!=null)for(var I=0;I<S.length;I++){var k=S[I];l=k.x-_;u=k.x+_;c=k.y-_;h=k.y+_;Hl(a,l,c,u,h)}}}else{var X=e.source();var V=X.position();var U=e.target();var j=U.position();l=V.x;u=j.x;c=V.y;h=j.y;if(l>u){var q=l;l=u;u=q}if(c>h){var H=c;c=h;h=H}l-=_;u+=_;c-=_;h+=_;Hl(a,l,c,u,h)}if(n&&t.includeEdges&&s){Kl(a,e,"mid-source");Kl(a,e,"mid-target");Kl(a,e,"source");Kl(a,e,"target")}if(n){var W=e.pstyle("ghost").value==="yes";if(W){var $=e.pstyle("ghost-offset-x").pfValue;var K=e.pstyle("ghost-offset-y").pfValue;Hl(a,a.x1+$,a.y1+K,a.x2+$,a.y2+K)}}var O=i.bodyBounds=i.bodyBounds||{};un(O,a);ln(O,p);sn(O,1);if(n){l=a.x1;u=a.x2;c=a.y1;h=a.y2;Hl(a,l-E,c-E,u+E,h+E)}var M=i.overlayBounds=i.overlayBounds||{};un(M,a);ln(M,p);sn(M,1);var P=i.labelBounds=i.labelBounds||{};if(P.all!=null)nn(P.all);else P.all=tn();if(n&&t.includeLabels){if(t.includeMainLabels)Zl(a,e,null);if(s){if(t.includeSourceLabels)Zl(a,e,"source");if(t.includeTargetLabels)Zl(a,e,"target")}}}a.x1=ql(a.x1);a.y1=ql(a.y1);a.x2=ql(a.x2);a.y2=ql(a.y2);a.w=ql(a.x2-a.x1);a.h=ql(a.y2-a.y1);if(a.w>0&&a.h>0&&y){ln(a,p);sn(a,1)}return a},Jl=function e(t){var r=0;var n=function e(t){return(t?1:0)<<r++};var a=0;a+=n(t.incudeNodes);a+=n(t.includeEdges);a+=n(t.includeLabels);a+=n(t.includeMainLabels);a+=n(t.includeSourceLabels);a+=n(t.includeTargetLabels);a+=n(t.includeOverlays);return a},eu=function e(t){if(t.isEdge()){var r=t.source().position();var n=t.target().position();var a=function e(t){return Math.round(t)};return Ut([a(r.x),a(r.y),a(n.x),a(n.y)])}else return 0},tu=function e(t,r){var n=t._private;var a;var i=t.isEdge();var o=r==null?nu:Jl(r);var s=o===nu;var l=eu(t);var u=n.bbCachePosKey===l;var c=r.useCache&&u;var h=function e(t){return t._private.bbCache==null||t._private.styleDirty};var v=!c||h(t)||i&&h(t.source())||h(t.target());if(v){if(!u)t.recalculateRenderedStyle(c);a=Ql(t,ru);n.bbCache=a;n.bbCachePosKey=l}else a=n.bbCache;if(!s){var f=t.isNode();a=tn();if(r.includeNodes&&f||r.includeEdges&&!f)if(r.includeOverlays)Wl(a,n.overlayBounds);else Wl(a,n.bodyBounds);if(r.includeLabels)if(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels))Wl(a,n.labelBounds.all);else{if(r.includeMainLabels)Wl(a,n.labelBounds.mainRot);if(r.includeSourceLabels)Wl(a,n.labelBounds.sourceRot);if(r.includeTargetLabels)Wl(a,n.labelBounds.targetRot)}a.w=a.x2-a.x1;a.h=a.y2-a.y1}return a},ru={includeNodes:true,includeEdges:true,includeLabels:true,includeMainLabels:true,includeSourceLabels:true,includeTargetLabels:true,includeOverlays:true,includeUnderlays:true,useCache:true},nu=Jl(ru),au=e(ru),iu=(jl.boundingBox=function(e){var t;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(e===void 0||e.useCache===void 0||e.useCache===true)){if(e===void 0)e=ru;else e=au(e);t=tu(this[0],e)}else{t=tn();e=e||ru;var r=au(e);var n=this;var a=n.cy();var i=a.styleEnabled();if(i)for(var o=0;o<n.length;o++){var s=n[o];var l=s._private;var u=eu(s);var c=l.bbCachePosKey===u;var h=r.useCache&&c&&!l.styleDirty;s.recalculateRenderedStyle(h)}this.updateCompoundBounds(!e.useCache);for(var v=0;v<n.length;v++){var f=n[v];Wl(t,tu(f,r))}}t.x1=ql(t.x1);t.y1=ql(t.y1);t.x2=ql(t.x2);t.y2=ql(t.y2);t.w=ql(t.x2-t.x1);t.h=ql(t.y2-t.y1);return t},jl.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null;t.bbCachePosKey=null;t.bodyBounds=null;t.overlayBounds=null;t.labelBounds.all=null;t.labelBounds.source=null;t.labelBounds.target=null;t.labelBounds.main=null;t.labelBounds.sourceRot=null;t.labelBounds.targetRot=null;t.labelBounds.mainRot=null;t.arrowBounds.source=null;t.arrowBounds.target=null;t.arrowBounds["mid-source"]=null;t.arrowBounds["mid-target"]=null}this.emitAndNotify("bounds");return this},jl.boundingBoxAt=function(n){var e=this.nodes();var t=this.cy();var r=t.hasCompoundNodes();var a=t.collection();if(r){a=e.filter(function(e){return e.isParent()});e=e.not(a)}if(I(n)){var i=n;n=function e(){return i}}var o=function e(t,r){return t._private.bbAtOldPos=n(t,r)};var s=function e(t){return t._private.bbAtOldPos};t.startBatch();e.forEach(o).silentPositions(n);if(r){a.dirtyCompoundBoundsCache();a.dirtyBoundingBoxCache();a.updateCompoundBounds(true)}var l=rn(this.boundingBox({useCache:false}));e.silentPositions(s);if(r){a.dirtyCompoundBoundsCache();a.dirtyBoundingBoxCache();a.updateCompoundBounds(true)}t.endBatch();return l},Ul.boundingbox=Ul.bb=Ul.boundingBox,Ul.renderedBoundingbox=Ul.renderedBoundingBox,jl),ou,su,ou=su={},lu=function e(l){l.uppercaseName=pe(l.name);l.autoName="auto"+l.uppercaseName;l.labelName="label"+l.uppercaseName;l.outerName="outer"+l.uppercaseName;l.uppercaseOuterName=pe(l.outerName);ou[l.name]=function e(){var t=this[0];var r=t._private;var n=r.cy;var a=n._private.styleEnabled;if(t)if(a){if(t.isParent()){t.updateCompoundBounds();return r[l.autoName]||0}var i=t.pstyle(l.name);switch(i.strValue){case"label":t.recalculateRenderedStyle();return r.rstyle[l.labelName]||0;default:return i.pfValue}}else return 1};ou["outer"+l.uppercaseName]=function e(){var t=this[0];var r=t._private;var n=r.cy;var a=n._private.styleEnabled;if(t)if(a){var i=t[l.name]();var o=t.pstyle("border-width").pfValue;var s=2*t.padding();return i+o+s}else return 1};ou["rendered"+l.uppercaseName]=function e(){var t=this[0];if(t){var r=t[l.name]();return r*this.cy().zoom()}};ou["rendered"+l.uppercaseOuterName]=function e(){var t=this[0];if(t){var r=t[l.outerName]();return r*this.cy().zoom()}}},uu=(lu({name:"width"}),lu({name:"height"}),su.padding=function(){var e=this[0];var t=e._private;if(e.isParent()){e.updateCompoundBounds();if(t.autoPadding!==void 0)return t.autoPadding;else return e.pstyle("padding").pfValue}else return e.pstyle("padding").pfValue},su.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},su.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()},su),cu=function e(t,r){if(t.isEdge())return r(t)},hu=function e(t,r){if(t.isEdge()){var n=t.cy();return Fr(r(t),n.zoom(),n.pan())}},vu=function e(t,r){if(t.isEdge()){var n=t.cy();var a=n.pan();var i=n.zoom();return r(t).map(function(e){return Fr(e,i,a)})}},fu,du,pu,gu,yu,mu={controlPoints:{get:function e(t){return t.renderer().getControlPoints(t)},mult:true},segmentPoints:{get:function e(t){return t.renderer().getSegmentPoints(t)},mult:true},sourceEndpoint:{get:function e(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function e(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function e(t){return t.renderer().getEdgeMidpoint(t)}}},bu=function e(t){return"rendered"+t[0].toUpperCase()+t.substr(1)},xu=Object.keys(mu).reduce(function(e,t){var r=mu[t];var n=bu(t);e[t]=function(){return cu(this,r.get)};if(r.mult)e[n]=function(){return vu(this,r.get)};else e[n]=function(){return hu(this,r.get)};return e},{}),wu=T({},Vl,iu,uu,xu),Eu=function e(t,r){this.recycle(t,r)};function Tu(){return false}function _u(){return true}Eu.prototype={instanceString:function e(){return"event"},recycle:function e(t,r){this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Tu;if(t!=null&&t.preventDefault){this.type=t.type;this.isDefaultPrevented=t.defaultPrevented?_u:Tu}else if(t!=null&&t.type)r=t;else this.type=t;if(r!=null){this.originalEvent=r.originalEvent;this.type=r.type!=null?r.type:this.type;this.cy=r.cy;this.target=r.target;this.position=r.position;this.renderedPosition=r.renderedPosition;this.namespace=r.namespace;this.layout=r.layout}if(this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position;var a=this.cy.zoom();var i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function e(){this.isDefaultPrevented=_u;var t=this.originalEvent;if(!t)return;if(t.preventDefault)t.preventDefault()},stopPropagation:function e(){this.isPropagationStopped=_u;var t=this.originalEvent;if(!t)return;if(t.stopPropagation)t.stopPropagation()},stopImmediatePropagation:function e(){this.isImmediatePropagationStopped=_u;this.stopPropagation()},isDefaultPrevented:Tu,isPropagationStopped:Tu,isImmediatePropagationStopped:Tu};var Du=/^([^.]+)(\.(?:[^.]+))?$/,Cu=".*",Nu={qualifierCompare:function e(t,r){return t===r},eventMatches:function e(){return true},addEventFields:function e(){},callbackContext:function e(t){return t},beforeEmit:function e(){},afterEmit:function e(){},bubble:function e(){return false},parent:function e(){return null},context:null},Au=Object.keys(Nu),Lu={};function Su(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Lu;var t=arguments.length>1?arguments[1]:void 0;for(var r=0;r<Au.length;r++){var n=Au[r];this[n]=e[n]||Nu[n]}this.context=t||this.context;this.listeners=[];this.emitting=0}var Iu=Su.prototype,ku=function e(t,r,n,a,i,o,s){if(U(a)){i=a;a=null}if(s)if(o==null)o=s;else o=T({},o,s);var l=K(n)?n:n.split(/\s+/);for(var u=0;u<l.length;u++){var c=l[u];if(oe(c))continue;var h=c.match(Du);if(h){var v=h[1];var f=h[2]?h[2]:null;var d=r(t,c,v,f,a,i,o);if(d===false)break}}},Ou=function e(t,r){t.addEventFields(t.context,r);return new Eu(r.type,r)},Mu=function e(t,r,n){if(ie(n)){r(t,n);return}else if(I(n)){r(t,Ou(t,n));return}var a=K(n)?n:n.split(/\s+/);for(var i=0;i<a.length;i++){var o=a[i];if(oe(o))continue;var s=o.match(Du);if(s){var l=s[1];var u=s[2]?s[2]:null;var c=Ou(t,{type:l,namespace:u,target:t.context});r(t,c)}}},Pu=(Iu.on=Iu.addListener=function(e,t,r,n,a){ku(this,function(e,t,r,n,a,i,o){if(U(i))e.listeners.push({event:t,callback:i,type:r,namespace:n,qualifier:a,conf:o})},e,t,r,n,a);return this},Iu.one=function(e,t,r,n){return this.on(e,t,r,n,{one:true})},Iu.removeListener=Iu.off=function(l,t,r,n){var a=this;if(this.emitting!==0)this.listeners=ir(this.listeners);var u=this.listeners;var e=function e(o){var s=u[o];ku(a,function(e,t,r,n,a,i){if((s.type===r||l==="*")&&(!n&&s.namespace!==".*"||s.namespace===n)&&(!a||e.qualifierCompare(s.qualifier,a))&&(!i||s.callback===i)){u.splice(o,1);return false}},l,t,r,n)};for(var i=u.length-1;i>=0;i--)e(i);return this},Iu.removeAllListeners=function(){return this.removeListener("*")},Iu.emit=Iu.trigger=function(e,l,r){var u=this.listeners;var n=u.length;this.emitting++;if(!K(l))l=[l];Mu(this,function(o,s){if(r!=null){u=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}];n=u.length}var e=function e(t){var r=u[t];if(r.type===s.type&&(!r.namespace||r.namespace===s.namespace||r.namespace===Cu)&&o.eventMatches(o.context,r,s)){var n=[s];if(l!=null)hr(n,l);o.beforeEmit(o.context,r,s);if(r.conf&&r.conf.one)o.listeners=o.listeners.filter(function(e){return e!==r});var a=o.callbackContext(o.context,r,s);var i=r.callback.apply(a,n);o.afterEmit(o.context,r,s);if(i===false){s.stopPropagation();s.preventDefault()}}};for(var t=0;t<n;t++)e(t);if(o.bubble(o.context)&&!s.isPropagationStopped())o.parent(o.context).emit(s,l)},e);this.emitting--;return this},{qualifierCompare:function e(t,r){if(t==null||r==null)return t==null&&r==null;else return t.sameText(r)},eventMatches:function e(t,r,n){var a=r.qualifier;if(a!=null)return t!==n.target&&te(n.target)&&a.matches(n.target);return true},addEventFields:function e(t,r){r.cy=t.cy();r.target=t},callbackContext:function e(t,r,n){return r.qualifier!=null?n.target:t},beforeEmit:function e(t,r){if(r.conf&&r.conf.once)r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function e(){return true},parent:function e(t){return t.isChild()?t.parent():t.cy()}}),Ru=function e(t){if(J(t))return new _l(t);else return t},Bu={createEmitter:function e(){for(var t=0;t<this.length;t++){var r=this[t];var n=r._private;if(!n.emitter)n.emitter=new Su(Pu,r)}return this},emitter:function e(){return this._private.emitter},on:function e(t,r,n){var a=Ru(r);for(var i=0;i<this.length;i++){var o=this[i];o.emitter().on(t,a,n)}return this},removeListener:function e(t,r,n){var a=Ru(r);for(var i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(t,a,n)}return this},removeAllListeners:function e(){for(var t=0;t<this.length;t++){var r=this[t];r.emitter().removeAllListeners()}return this},one:function e(t,r,n){var a=Ru(r);for(var i=0;i<this.length;i++){var o=this[i];o.emitter().one(t,a,n)}return this},once:function e(t,r,n){var a=Ru(r);for(var i=0;i<this.length;i++){var o=this[i];o.emitter().on(t,a,n,{once:true,onceCollection:this})}},emit:function e(t,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(t,r)}return this},emitAndNotify:function e(t,r){if(this.length===0)return;this.cy().notify(t,this);this.emit(t,r);return this}},Fu=(_.eventAliasesOn(Bu),{nodes:function e(t){return this.filter(function(e){return e.isNode()}).filter(t)},edges:function e(t){return this.filter(function(e){return e.isEdge()}).filter(t)},byGroup:function e(){var t=this.spawn();var r=this.spawn();for(var n=0;n<this.length;n++){var a=this[n];if(a.isNode())t.push(a);else r.push(a)}return{nodes:t,edges:r}},filter:function e(t,r){if(t===void 0)return this;else if(J(t)||Q(t))return new _l(t).filter(this);else if(U(t)){var n=this.spawn();var a=this;for(var i=0;i<a.length;i++){var o=a[i];var s=r?t.apply(r,[o,i,a]):t(o,i,a);if(s)n.push(o)}return n}return this.spawn()},not:function e(t){if(!t)return this;else{if(J(t))t=this.filter(t);var r=this.spawn();for(var n=0;n<this.length;n++){var a=this[n];var i=t.has(a);if(!i)r.push(a)}return r}},absoluteComplement:function e(){var t=this.cy();return t.mutableElements().not(this)},intersect:function e(t){if(J(t)){var r=t;return this.filter(r)}var n=this.spawn();var a=this;var i=t;var o=this.length<t.length;var s=o?a:i;var l=o?i:a;for(var u=0;u<s.length;u++){var c=s[u];if(l.has(c))n.push(c)}return n},xor:function e(t){var r=this._private.cy;if(J(t))t=r.$(t);var s=this.spawn();var n=this;var a=t;var i=function e(t,r){for(var n=0;n<t.length;n++){var a=t[n];var i=a._private.data.id;var o=r.hasElementWithId(i);if(!o)s.push(a)}};i(n,a);i(a,n);return s},diff:function e(t){var r=this._private.cy;if(J(t))t=r.$(t);var n=this.spawn();var a=this.spawn();var l=this.spawn();var i=this;var o=t;var s=function e(t,r,n){for(var a=0;a<t.length;a++){var i=t[a];var o=i._private.data.id;var s=r.hasElementWithId(o);if(s)l.merge(i);else n.push(i)}};s(i,o,n);s(o,i,a);return{left:n,right:a,both:l}},add:function e(t){var r=this._private.cy;if(!t)return this;if(J(t)){var n=t;t=r.mutableElements().filter(n)}var a=this.spawnSelf();for(var i=0;i<t.length;i++){var o=t[i];var s=!this.has(o);if(s)a.push(o)}return a},merge:function e(t){var r=this._private;var n=r.cy;if(!t)return this;if(t&&J(t)){var a=t;t=n.mutableElements().filter(a)}var i=r.map;for(var o=0;o<t.length;o++){var s=t[o];var l=s._private.data.id;var u=!i.has(l);if(u){var c=this.length++;this[c]=s;i.set(l,{ele:s,index:c})}}return this},unmergeAt:function e(t){var r=this[t];var n=r.id();var a=this._private;var i=a.map;this[t]=void 0;i["delete"](n);var o=t===this.length-1;if(this.length>1&&!o){var s=this.length-1;var l=this[s];var u=l._private.data.id;this[s]=void 0;this[t]=l;i.set(u,{ele:l,index:t})}this.length--;return this},unmergeOne:function e(t){t=t[0];var r=this._private;var n=t._private.data.id;var a=r.map;var i=a.get(n);if(!i)return this;var o=i.index;this.unmergeAt(o);return this},unmerge:function e(t){var r=this._private.cy;if(!t)return this;if(t&&J(t)){var n=t;t=r.mutableElements().filter(n)}for(var a=0;a<t.length;a++)this.unmergeOne(t[a]);return this},unmergeBy:function e(t){for(var r=this.length-1;r>=0;r--){var n=this[r];if(t(n))this.unmergeAt(r)}return this},map:function e(t,r){var n=[];var a=this;for(var i=0;i<a.length;i++){var o=a[i];var s=r?t.apply(r,[o,i,a]):t(o,i,a);n.push(s)}return n},reduce:function e(t,r){var n=r;var a=this;for(var i=0;i<a.length;i++)n=t(n,a[i],i,a);return n},max:function e(t,r){var n=-Infinity;var a;var i=this;for(var o=0;o<i.length;o++){var s=i[o];var l=r?t.apply(r,[s,o,i]):t(s,o,i);if(l>n){n=l;a=s}}return{value:n,ele:a}},min:function e(t,r){var n=Infinity;var a;var i=this;for(var o=0;o<i.length;o++){var s=i[o];var l=r?t.apply(r,[s,o,i]):t(s,o,i);if(l<n){n=l;a=s}}return{value:n,ele:a}}}),t=Fu,zu=(t["u"]=t["|"]=t["+"]=t.union=t.or=t.add,t["\\"]=t["!"]=t["-"]=t.difference=t.relativeComplement=t.subtract=t.not,t["n"]=t["&"]=t["."]=t.and=t.intersection=t.intersect,t["^"]=t["(+)"]=t["(-)"]=t.symmetricDifference=t.symdiff=t.xor,t.fnFilter=t.filterFn=t.stdFilter=t.filter,t.complement=t.abscomp=t.absoluteComplement,{isNode:function e(){return this.group()==="nodes"},isEdge:function e(){return this.group()==="edges"},isLoop:function e(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function e(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function e(){var t=this[0];if(t)return t._private.group}}),Gu=function e(t,r){var n=t.cy();var a=n.hasCompoundNodes();function i(e){var t=e.pstyle("z-compound-depth");if(t.value==="auto")return a?e.zDepth():0;else if(t.value==="bottom")return-1;else if(t.value==="top")return Zt;return 0}var o=i(t)-i(r);if(o!==0)return o;function s(e){var t=e.pstyle("z-index-compare");if(t.value==="auto")return e.isNode()?1:0;return 0}var l=s(t)-s(r);if(l!==0)return l;var u=t.pstyle("z-index").value-r.pstyle("z-index").value;if(u!==0)return u;return t.poolIndex()-r.poolIndex()},Yu={forEach:function e(t,r){if(U(t)){var n=this.length;for(var a=0;a<n;a++){var i=this[a];var o=r?t.apply(r,[i,a,this]):t(i,a,this);if(o===false)break}}return this},toArray:function e(){var t=[];for(var r=0;r<this.length;r++)t.push(this[r]);return t},slice:function e(t,r){var n=[];var a=this.length;if(r==null)r=a;if(t==null)t=0;if(t<0)t=a+t;if(r<0)r=a+r;for(var i=t;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function e(){return this.length},eq:function e(t){return this[t]||this.spawn()},first:function e(){return this[0]||this.spawn()},last:function e(){return this[this.length-1]||this.spawn()},empty:function e(){return this.length===0},nonempty:function e(){return!this.empty()},sort:function e(t){if(!U(t))return this;var r=this.toArray().sort(t);return this.spawn(r)},sortByZIndex:function e(){return this.sort(Gu)},zDepth:function e(){var t=this[0];if(!t)return void 0;var r=t._private;var n=r.group;if(n==="nodes"){var a=r.data.parent?t.parents().size():0;if(!t.isParent())return Zt-1;return a}else{var i=r.source;var o=r.target;var s=i.zDepth();var l=o.zDepth();return Math.max(s,l,0)}}};Yu.each=Yu.forEach;var Xu,Vu=(function e(){var t="undefined";var r=(typeof Symbol==="undefined"?"undefined":x(Symbol))!=t&&x(Symbol.iterator)!=t;if(r)Yu[Symbol.iterator]=function(){var t=this;var r={value:void 0,done:false};var n=0;var a=this.length;return A({next:function e(){if(n<a)r.value=t[n++];else{r.value=void 0;r.done=true}return r}},Symbol.iterator,function(){return this})}}(),e({nodeDimensionsIncludeLabels:false})),Uu={layoutDimensions:function e(t){t=Vu(t);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(t.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};if(r.w===0||r.h===0)r.w=r.h=1;return r},layoutPositions:function e(t,a,r){var i=this.nodes().filter(function(e){return!e.isParent()});var n=this.cy();var o=a.eles;var s=function e(t){return t.id()};var l=he(r,s);t.emit({type:"layoutstart",layout:t});t.animations=[];var u=function e(t,r,n){var a={x:r.x1+r.w/2,y:r.y1+r.h/2};var i={x:(n.x-a.x)*t,y:(n.y-a.y)*t};return{x:a.x+i.x,y:a.y+i.y}};var c=a.spacingFactor&&a.spacingFactor!==1;var h=function e(){if(!c)return null;var t=tn();for(var r=0;r<i.length;r++){var n=i[r];var a=l(n,r);on(t,a.x,a.y)}return t};var v=h();var f=he(function(e,t){var r=l(e,t);if(c){var n=Math.abs(a.spacingFactor);r=u(n,v,r)}if(a.transform!=null)r=a.transform(e,r);return r},s);if(a.animate){for(var d=0;d<i.length;d++){var p=i[d];var g=f(p,d);var y=a.animateFilter==null||a.animateFilter(p,d);if(y){var m=p.animation({position:g,duration:a.animationDuration,easing:a.animationEasing});t.animations.push(m)}else p.position(g)}if(a.fit){var b=n.animation({fit:{boundingBox:o.boundingBoxAt(f),padding:a.padding},duration:a.animationDuration,easing:a.animationEasing});t.animations.push(b)}else if(a.zoom!==void 0&&a.pan!==void 0){var x=n.animation({zoom:a.zoom,pan:a.pan,duration:a.animationDuration,easing:a.animationEasing});t.animations.push(x)}t.animations.forEach(function(e){return e.play()});t.one("layoutready",a.ready);t.emit({type:"layoutready",layout:t});gi.all(t.animations.map(function(e){return e.promise()})).then(function(){t.one("layoutstop",a.stop);t.emit({type:"layoutstop",layout:t})})}else{i.positions(f);if(a.fit)n.fit(a.eles,a.padding);if(a.zoom!=null)n.zoom(a.zoom);if(a.pan)n.pan(a.pan);t.one("layoutready",a.ready);t.emit({type:"layoutready",layout:t});t.one("layoutstop",a.stop);t.emit({type:"layoutstop",layout:t})}return this},layout:function e(t){var r=this.cy();return r.makeLayout(T({},t,{eles:this}))}};function ju(e,t,r){var n=r._private;var a=n.styleCache=n.styleCache||[];var i;if((i=a[e])!=null)return i;else{i=a[e]=t(r);return i}}function qu(r,n){r=jt(r);return function e(t){return ju(r,n,t)}}function Hu(r,n){r=jt(r);var a=function e(t){return n.call(t)};return function e(){var t=this[0];if(t)return ju(r,a,t)}}Uu.createLayout=Uu.makeLayout=Uu.layout;var r={recalculateRenderedStyle:function e(t){var r=this.cy();var n=r.renderer();var a=r.styleEnabled();if(n&&a)n.recalculateRenderedStyle(this,t);return this},dirtyStyleCache:function e(){var t=this.cy();var r=function e(t){return t._private.styleCache=null};if(t.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents());n.merge(n.connectedEdges());n.forEach(r)}else this.forEach(function(e){r(e);e.connectedEdges().forEach(r)});return this},updateStyle:function e(t){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;n.merge(this);return this}var a=r.hasCompoundNodes();var i=this;t=t||t===void 0?true:false;if(a)i=this.spawnSelf().merge(this.descendants()).merge(this.parents());var o=i;if(t)o.emitAndNotify("style");else o.emit("style");i.forEach(function(e){return e._private.styleDirty=true});return this},cleanStyle:function e(){var t=this.cy();if(!t.styleEnabled())return;for(var r=0;r<this.length;r++){var n=this[r];if(n._private.styleDirty){n._private.styleDirty=false;t.style().apply(n)}}},parsedStyle:function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:true;var n=this[0];var a=n.cy();if(!a.styleEnabled())return;if(n){this.cleanStyle();var i=n._private.style[t];if(i!=null)return i;else if(r)return a.style().getDefaultProperty(t);else return null}},numericStyle:function e(t){var r=this[0];if(!r.cy().styleEnabled())return;if(r){var n=r.pstyle(t);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function e(t){var r=this[0];if(!r.cy().styleEnabled())return;if(r)return r.pstyle(t).units},renderedStyle:function e(t){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,t)},style:function e(t,r){var n=this.cy();if(!n.styleEnabled())return this;var a=false;var i=n.style();if(I(t)){var o=t;i.applyBypass(this,o,a);this.emitAndNotify("style")}else if(J(t))if(r===void 0){var s=this[0];if(s)return i.getStylePropertyValue(s,t);else return}else{i.applyBypass(this,t,r,a);this.emitAndNotify("style")}else if(t===void 0){var l=this[0];if(l)return i.getRawStyle(l);else return}return this},removeStyle:function e(t){var r=this.cy();if(!r.styleEnabled())return this;var n=false;var a=r.style();var i=this;if(t===void 0)for(var o=0;o<i.length;o++){var s=i[o];a.removeAllBypasses(s,n)}else{t=t.split(/\s+/);for(var l=0;l<i.length;l++){var u=i[l];a.removeBypasses(u,t,n)}}this.emitAndNotify("style");return this},show:function e(){this.css("display","element");return this},hide:function e(){this.css("display","none");return this},effectiveOpacity:function e(){var t=this.cy();if(!t.styleEnabled())return 1;var r=t.hasCompoundNodes();var n=this[0];if(n){var a=n._private;var i=n.pstyle("opacity").value;if(!r)return i;var o=!a.data.parent?null:n.parents();if(o)for(var s=0;s<o.length;s++){var l=o[s];var u=l.pstyle("opacity").value;i=u*i}return i}},transparent:function e(){var t=this.cy();if(!t.styleEnabled())return false;var r=this[0];var n=r.cy().hasCompoundNodes();if(r)if(!n)return r.pstyle("opacity").value===0;else return r.effectiveOpacity()===0},backgrounding:function e(){var t=this.cy();if(!t.styleEnabled())return false;var r=this[0];return r._private.backgrounding?true:false}};function Wu(e,t){var r=e._private;var n=r.data.parent?e.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!t(i))return false}return true}function $u(e){var o=e.ok;var s=e.edgeOkViaNode||e.ok;var l=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return true;var t=this[0];var r=e.hasCompoundNodes();if(t){var n=t._private;if(!o(t))return false;if(t.isNode())return!r||Wu(t,l);else{var a=n.source;var i=n.target;return s(a)&&(!r||Wu(a,s))&&(a===i||s(i)&&(!r||Wu(i,s)))}}}}var Ku=qu("eleTakesUpSpace",function(e){return e.pstyle("display").value==="element"&&e.width()!==0&&(e.isNode()?e.height()!==0:true)}),Zu=(r.takesUpSpace=Hu("takesUpSpace",$u({ok:Ku})),qu("eleInteractive",function(e){return e.pstyle("events").value==="yes"&&e.pstyle("visibility").value==="visible"&&Ku(e)})),Qu=qu("parentInteractive",function(e){return e.pstyle("visibility").value==="visible"&&Ku(e)}),Ju=(r.interactive=Hu("interactive",$u({ok:Zu,parentOk:Qu,edgeOkViaNode:Ku})),r.noninteractive=function(){var e=this[0];if(e)return!e.interactive()},qu("eleVisible",function(e){return e.pstyle("visibility").value==="visible"&&e.pstyle("opacity").pfValue!==0&&Ku(e)})),ec,tc=(r.visible=Hu("visible",$u({ok:Ju,edgeOkViaNode:Ku})),r.hidden=function(){var e=this[0];if(e)return!e.visible()},r.isBundledBezier=Hu("isBundledBezier",function(){if(!this.cy().styleEnabled())return false;return!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace()}),r.bypass=r.css=r.style,r.renderedCss=r.renderedStyle,r.removeBypass=r.removeCss=r.removeStyle,r.pstyle=r.parsedStyle,{});function rc(v){return function(){var e=arguments;var t=[];if(e.length===2){var r=e[0];var n=e[1];this.on(v.event,r,n)}else if(e.length===1&&U(e[0])){var a=e[0];this.on(v.event,a)}else if(e.length===0||e.length===1&&K(e[0])){var i=e.length===1?e[0]:null;for(var o=0;o<this.length;o++){var s=this[o];var l=!v.ableField||s._private[v.ableField];var u=s._private[v.field]!=v.value;if(v.overrideAble){var c=v.overrideAble(s);if(c!==void 0){l=c;if(!c)return this}}if(l){s._private[v.field]=v.value;if(u)t.push(s)}}var h=this.spawn(t);h.updateStyle();h.emit(v.event);if(i)h.emit(i)}return this}}function nc(r){tc[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}};tc[r.on]=rc({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:true});tc[r.off]=rc({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:false})}nc({field:"locked",overrideField:function e(t){return t.cy().autolock()?true:void 0},on:"lock",off:"unlock"}),nc({field:"grabbable",overrideField:function e(t){return t.cy().autoungrabify()||t.pannable()?false:void 0},on:"grabify",off:"ungrabify"}),nc({field:"selected",ableField:"selectable",overrideAble:function e(t){return t.cy().autounselectify()?false:void 0},on:"select",off:"unselect"}),nc({field:"selectable",overrideField:function e(t){return t.cy().autounselectify()?false:void 0},on:"selectify",off:"unselectify"}),tc.deselect=tc.unselect,tc.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},nc({field:"active",on:"activate",off:"unactivate"}),nc({field:"pannable",on:"panify",off:"unpanify"}),tc.inactive=function(){var e=this[0];if(e)return!e._private.active};var a={},ac=function e(v){return function e(t){var r=this;var n=[];for(var a=0;a<r.length;a++){var i=r[a];if(!i.isNode())continue;var o=false;var s=i.connectedEdges();for(var l=0;l<s.length;l++){var u=s[l];var c=u.source();var h=u.target();if(v.noIncomingEdges&&h===i&&c!==i||v.noOutgoingEdges&&c===i&&h!==i){o=true;break}}if(!o)n.push(i)}return this.spawn(n,true).filter(t)}},ic=function e(c){return function(e){var t=this;var r=[];for(var n=0;n<t.length;n++){var a=t[n];if(!a.isNode())continue;var i=a.connectedEdges();for(var o=0;o<i.length;o++){var s=i[o];var l=s.source();var u=s.target();if(c.outgoing&&l===a){r.push(s);r.push(u)}else if(c.incoming&&u===a){r.push(s);r.push(l)}}}return this.spawn(r,true).filter(e)}},oc=function e(u){return function(e){var t=this;var r=[];var n={};for(;;){var a=u.outgoing?t.outgoers():t.incomers();if(a.length===0)break;var i=false;for(var o=0;o<a.length;o++){var s=a[o];var l=s.id();if(!n[l]){n[l]=true;r.push(s);i=true}}if(!i)break;t=a}return this.spawn(r,true).filter(e)}};function sc(o){return function e(t){var r=[];for(var n=0;n<this.length;n++){var a=this[n];var i=a._private[o.attr];if(i)r.push(i)}return this.spawn(r,true).filter(t)}}function lc(f){return function e(t){var r=[];var n=this._private.cy;var a=f||{};if(J(t))t=n.$(t);for(var i=0;i<t.length;i++){var o=t[i]._private.edges;for(var s=0;s<o.length;s++){var l=o[s];var u=l._private.data;var c=this.hasElementWithId(u.source)&&t.hasElementWithId(u.target);var h=t.hasElementWithId(u.source)&&this.hasElementWithId(u.target);var v=c||h;if(!v)continue;if(a.thisIsSrc||a.thisIsTgt){if(a.thisIsSrc&&!c)continue;if(a.thisIsTgt&&!h)continue}r.push(l)}}return this.spawn(r,true)}}function uc(b){var e={codirected:false};b=T({},e,b);return function e(t){var r=[];var n=this.edges();var a=b;for(var i=0;i<n.length;i++){var o=n[i];var s=o._private;var l=s.source;var u=l._private.data.id;var c=s.data.target;var h=l._private.edges;for(var v=0;v<h.length;v++){var f=h[v];var d=f._private.data;var p=d.target;var g=d.source;var y=p===c&&g===u;var m=u===p&&c===g;if(a.codirected&&y||!a.codirected&&(y||m))r.push(f)}}return this.spawn(r,true).filter(t)}}a.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},T(a,{roots:ac({noIncomingEdges:true}),leaves:ac({noOutgoingEdges:true}),outgoers:Nl(ic({outgoing:true}),"outgoers"),successors:oc({outgoing:true}),incomers:Nl(ic({incoming:true}),"incomers"),predecessors:oc({incoming:true})}),T(a,{neighborhood:Nl(function(e){var t=[];var r=this.nodes();for(var n=0;n<r.length;n++){var a=r[n];var i=a.connectedEdges();for(var o=0;o<i.length;o++){var s=i[o];var l=s.source();var u=s.target();var c=a===l?u:l;if(c.length>0)t.push(c[0]);t.push(s[0])}}return this.spawn(t,true).filter(e)},"neighborhood"),closedNeighborhood:function e(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function e(t){return this.neighborhood(t)}}),a.neighbourhood=a.neighborhood,a.closedNeighbourhood=a.closedNeighborhood,a.openNeighbourhood=a.openNeighborhood,T(a,{source:Nl(function e(t){var r=this[0];var n;if(r)n=r._private.source||r.cy().collection();return n&&t?n.filter(t):n},"source"),target:Nl(function e(t){var r=this[0];var n;if(r)n=r._private.target||r.cy().collection();return n&&t?n.filter(t):n},"target"),sources:sc({attr:"source"}),targets:sc({attr:"target"})}),T(a,{edgesWith:Nl(lc(),"edgesWith"),edgesTo:Nl(lc({thisIsSrc:true}),"edgesTo")}),T(a,{connectedEdges:Nl(function(e){var t=[];var r=this;for(var n=0;n<r.length;n++){var a=r[n];if(!a.isNode())continue;var i=a._private.edges;for(var o=0;o<i.length;o++){var s=i[o];t.push(s)}}return this.spawn(t,true).filter(e)},"connectedEdges"),connectedNodes:Nl(function(e){var t=[];var r=this;for(var n=0;n<r.length;n++){var a=r[n];if(!a.isEdge())continue;t.push(a.source()[0]);t.push(a.target()[0])}return this.spawn(t,true).filter(e)},"connectedNodes"),parallelEdges:Nl(uc(),"parallelEdges"),codirectedEdges:Nl(uc({codirected:true}),"codirectedEdges")}),T(a,{components:function e(t){var n=this;var a=n.cy();var i=a.collection();var o=t==null?n.nodes():t.nodes();var s=[];if(t!=null&&o.empty())o=t.sources();var l=function e(t,r){i.merge(t);o.unmerge(t);r.merge(t)};if(o.empty())return n.spawn();var r=function e(){var r=a.collection();s.push(r);var t=o[0];l(t,r);n.bfs({directed:false,roots:t,visit:function e(t){return l(t,r)}});r.forEach(function(e){e.connectedEdges().forEach(function(e){if(n.has(e)&&r.has(e.source())&&r.has(e.target()))r.merge(e)})})};do{r()}while(o.length>0);return s},component:function e(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),a.componentsOf=a.components;var G=function e(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:false;var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:false;if(t===void 0){z("A collection must have a reference to the core");return}var i=new pr;var o=false;if(!r)r=[];else if(r.length>0&&I(r[0])&&!te(r[0])){o=true;var s=[];var l=new mr;for(var u=0,c=r.length;u<c;u++){var h=r[u];if(h.data==null)h.data={};var v=h.data;if(v.id==null)v.id=or();else if(t.hasElementWithId(v.id)||l.has(v.id))continue;var f=new br(t,h,false);s.push(f);l.add(v.id)}r=s}this.length=0;for(var d=0,p=r.length;d<p;d++){var g=r[d][0];if(g==null)continue;var y=g._private.data.id;if(!n||!i.has(y)){if(n)i.set(y,{index:this.length,ele:g});this[this.length]=g;this.length++}}this._private={eles:this,cy:t,get map(){if(this.lazyMap==null)this.rebuildMap();return this.lazyMap},set map(e){this.lazyMap=e},rebuildMap:function e(){var t=this.lazyMap=new pr;var r=this.eles;for(var n=0;n<r.length;n++){var a=r[n];t.set(a.id(),{index:n,ele:a})}}};if(n)this._private.map=i;if(o&&!a)this.restore()},i=br.prototype=G.prototype=Object.create(Array.prototype),cc=(i.instanceString=function(){return"collection"},i.spawn=function(e,t){return new G(this.cy(),e,t)},i.spawnSelf=function(){return this.spawn(this)},i.cy=function(){return this._private.cy},i.renderer=function(){return this._private.cy.renderer()},i.element=function(){return this[0]},i.collection=function(){if(re(this))return this;else return new G(this._private.cy,[this])},i.unique=function(){return new G(this._private.cy,this,true)},i.hasElementWithId=function(e){e=""+e;return this._private.map.has(e)},i.getElementById=function(e){e=""+e;var t=this._private.cy;var r=this._private.map.get(e);return r?r.ele:new G(t)},i.$id=i.getElementById,i.poolIndex=function(){var e=this._private.cy;var t=e._private.elements;var r=this[0]._private.data.id;return t._private.map.get(r).index},i.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},i.indexOfId=function(e){e=""+e;return this._private.map.get(e).index},i.json=function(i){var o=this.element();var e=this.cy();if(o==null&&i)return this;if(o==null)return void 0;var s=o._private;if(I(i)){e.startBatch();if(i.data){o.data(i.data);var t=s.data;if(o.isEdge()){var r=false;var n={};var a=i.data.source;var l=i.data.target;if(a!=null&&a!=t.source){n.source=""+a;r=true}if(l!=null&&l!=t.target){n.target=""+l;r=true}if(r)o=o.move(n)}else{var u="parent"in i.data;var c=i.data.parent;if(u&&(c!=null||t.parent!=null)&&c!=t.parent){if(c===void 0)c=null;if(c!=null)c=""+c;o=o.move({parent:c})}}}if(i.position)o.position(i.position);var h=function e(t,r,n){var a=i[t];if(a!=null&&a!==s[t])if(a)o[r]();else o[n]()};h("removed","remove","restore");h("selected","select","unselect");h("selectable","selectify","unselectify");h("locked","lock","unlock");h("grabbable","grabify","ungrabify");h("pannable","panify","unpanify");if(i.classes!=null)o.classes(i.classes);e.endBatch();return this}else if(i===void 0){var v={data:ar(s.data),position:ar(s.position),group:s.group,removed:s.removed,selected:s.selected,selectable:s.selectable,locked:s.locked,grabbable:s.grabbable,pannable:s.pannable,classes:null};v.classes="";var f=0;s.classes.forEach(function(e){return v.classes+=f++===0?e:" "+e});return v}},i.jsons=function(){var e=[];for(var t=0;t<this.length;t++){var r=this[t];var n=r.json();e.push(n)}return e},i.clone=function(){var e=this.cy();var t=[];for(var r=0;r<this.length;r++){var n=this[r];var a=n.json();var i=new br(e,a,false);t.push(i)}return new G(e,t)},i.copy=i.clone,i.restore=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:true;var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:true;var r=this;var n=r.cy();var a=n._private;var i=[];var o=[];var s;for(var l=0,P=r.length;l<P;l++){var u=r[l];if(t&&!u.removed())continue;if(u.isNode())i.push(u);else o.push(u)}s=i.concat(o);var c;var h=function e(){s.splice(c,1);c--};for(c=0;c<s.length;c++){var v=s[c];var f=v._private;var d=f.data;v.clearTraversalCache();if(!t&&!f.removed);else if(d.id===void 0)d.id=or();else if(me(d.id))d.id=""+d.id;else if(oe(d.id)||!J(d.id)){z("Can not create element with invalid string ID `"+d.id+"`");h();continue}else if(n.hasElementWithId(d.id)){z("Can not create second element with ID `"+d.id+"`");h();continue}var p=d.id;if(v.isNode()){var g=f.position;if(g.x==null)g.x=0;if(g.y==null)g.y=0}if(v.isEdge()){var y=v;var m=["source","target"];var R=m.length;var b=false;for(var x=0;x<R;x++){var w=m[x];var E=d[w];if(me(E))E=d[w]=""+d[w];if(E==null||E===""){z("Can not create edge `"+p+"` with unspecified "+w);b=true}else if(!n.hasElementWithId(E)){z("Can not create edge `"+p+"` with nonexistant "+w+" `"+E+"`");b=true}}if(b){h();continue}var T=n.getElementById(d.source);var _=n.getElementById(d.target);if(T.same(_))T._private.edges.push(y);else{T._private.edges.push(y);_._private.edges.push(y)}y._private.source=T;y._private.target=_}f.map=new pr;f.map.set(p,{ele:v,index:0});f.removed=false;if(t)n.addToPool(v)}for(var D=0;D<i.length;D++){var C=i[D];var N=C._private.data;if(me(N.parent))N.parent=""+N.parent;var A=N.parent;var B=A!=null;if(B||C._private.parent){var L=C._private.parent?n.collection().merge(C._private.parent):n.getElementById(A);if(L.empty())N.parent=void 0;else if(L[0].removed()){ee("Node added with missing parent, reference to parent removed");N.parent=void 0;C._private.parent=null}else{var F=false;var S=L;while(!S.empty()){if(C.same(S)){F=true;N.parent=void 0;break}S=S.parent()}if(!F){L[0]._private.children.push(C);C._private.parent=L[0];a.hasCompoundNodes=true}}}}if(s.length>0){var I=s.length===r.length?r:new G(n,s);for(var k=0;k<I.length;k++){var O=I[k];if(O.isNode())continue;O.parallelEdges().clearTraversalCache();O.source().clearTraversalCache();O.target().clearTraversalCache()}var M;if(a.hasCompoundNodes)M=n.collection().merge(I).merge(I.connectedNodes()).merge(I.parent());else M=I;M.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e);if(e)I.emitAndNotify("add");else if(t)I.emit("add")}return r},i.removed=function(){var e=this[0];return e&&e._private.removed},i.inside=function(){var e=this[0];return e&&!e._private.removed},i.remove=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:true;var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:true;var t=this;var n=[];var a={};var i=t._private.cy;function o(e){var t=e._private.edges;for(var r=0;r<t.length;r++)l(t[r])}function s(e){var t=e._private.children;for(var r=0;r<t.length;r++)l(t[r])}function l(e){var t=a[e.id()];if(r&&e.removed()||t)return;else a[e.id()]=true;if(e.isNode()){n.push(e);o(e);s(e)}else n.unshift(e)}for(var u=0,c=t.length;u<c;u++){var h=t[u];l(h)}function v(e,t){var r=e._private.edges;ur(r,t);e.clearTraversalCache()}function f(e){e.clearTraversalCache()}var d=[];d.ids={};function p(e,t){t=t[0];e=e[0];var r=e._private.children;var n=e.id();ur(r,t);t._private.parent=null;if(!d.ids[n]){d.ids[n]=true;d.push(e)}}t.dirtyCompoundBoundsCache();if(r)i.removeFromPool(n);for(var g=0;g<n.length;g++){var y=n[g];if(y.isEdge()){var m=y.source()[0];var b=y.target()[0];v(m,y);v(b,y);var x=y.parallelEdges();for(var w=0;w<x.length;w++){var E=x[w];f(E);if(E.isBundledBezier())E.dirtyBoundingBoxCache()}}else{var T=y.parent();if(T.length!==0)p(T,y)}if(r)y._private.removed=true}var _=i._private.elements;i._private.hasCompoundNodes=false;for(var D=0;D<_.length;D++){var C=_[D];if(C.isParent()){i._private.hasCompoundNodes=true;break}}var N=new G(this.cy(),n);if(N.size()>0)if(e)N.emitAndNotify("remove");else if(r)N.emit("remove");for(var A=0;A<d.length;A++){var L=d[A];if(!r||!L.removed())L.updateStyle()}return N},i.move=function(e){var t=this._private.cy;var a=this;var i=false;var o=false;var r=function e(t){return t==null?t:""+t};if(e.source!==void 0||e.target!==void 0){var n=r(e.source);var s=r(e.target);var l=n!=null&&t.hasElementWithId(n);var u=s!=null&&t.hasElementWithId(s);if(l||u){t.batch(function(){a.remove(i,o);a.emitAndNotify("moveout");for(var e=0;e<a.length;e++){var t=a[e];var r=t._private.data;if(t.isEdge()){if(l)r.source=n;if(u)r.target=s}}a.restore(i,o)});a.emitAndNotify("move")}}else if(e.parent!==void 0){var c=r(e.parent);var h=c===null||t.hasElementWithId(c);if(h){var v=c===null?void 0:c;t.batch(function(){var e=a.remove(i,o);e.emitAndNotify("moveout");for(var t=0;t<a.length;t++){var r=a[t];var n=r._private.data;if(r.isNode())n.parent=v}e.restore(i,o)});a.emitAndNotify("move")}}return this},[oi,Js,el,Cl,Al,Pl,Rl,wu,Bu,Fu,zu,Yu,Uu,r,tc,a].forEach(function(e){T(i,e)}),{add:function e(t){var r;var n=this;if(Q(t)){var a=t;if(a._private.cy===n)r=a.restore();else{var i=[];for(var o=0;o<a.length;o++){var s=a[o];i.push(s.json())}r=new G(n,i)}}else if(K(t)){var l=t;r=new G(n,l)}else if(I(t)&&(K(t.nodes)||K(t.edges))){var u=t;var c=[];var h=["nodes","edges"];for(var v=0,f=h.length;v<f;v++){var d=h[v];var p=u[d];if(K(p))for(var g=0,y=p.length;g<y;g++){var m=T({group:d},p[g]);c.push(m)}}r=new G(n,c)}else{var b=t;r=new br(n,b).collection()}return r},remove:function e(t){if(Q(t));else if(J(t)){var r=t;t=this.$(r)}return t.remove()}});function hc(s,r,l,n){var i=4,u=.001,o=1e-7,c=10,h=11,v=1/(h-1),e=typeof Float32Array!=="undefined";if(arguments.length!==4)return false;for(var t=0;t<4;++t)if(typeof arguments[t]!=="number"||isNaN(arguments[t])||!isFinite(arguments[t]))return false;s=Math.min(s,1);l=Math.min(l,1);s=Math.max(s,0);l=Math.max(l,0);var f=e?new Float32Array(h):new Array(h);function a(e,t){return 1-3*t+3*e}function d(e,t){return 3*t-6*e}function p(e){return 3*e}function g(e,t,r){return((a(t,r)*e+d(t,r))*e+p(t))*e}function y(e,t,r){return 3*a(t,r)*e*e+2*d(t,r)*e+p(t)}function m(e,t){for(var r=0;r<i;++r){var n=y(t,s,l);if(n===0)return t;var a=g(t,s,l)-e;t-=a/n}return t}function b(){for(var e=0;e<h;++e)f[e]=g(e*v,s,l)}function x(e,t,r){var n,a,i=0;do{a=t+(r-t)/2;n=g(a,s,l)-e;if(n>0)r=a;else t=a}while(Math.abs(n)>o&&++i<c);return a}function w(e){var t=0,r=1,n=h-1;for(;r!==n&&f[r]<=e;++r)t+=v;--r;var a=(e-f[r])/(f[r+1]-f[r]),i=t+a*v,o=y(i,s,l);if(o>=u)return m(e,i);else if(o===0)return i;else return x(e,t,t+v)}var E=false;function T(){E=true;if(s!==r||l!==n)b()}var _=function e(t){if(!E)T();if(s===r&&l===n)return t;if(t===0)return 0;if(t===1)return 1;return g(w(t),r,n)};_.getControlPoints=function(){return[{x:s,y:r},{x:l,y:n}]};var D="generateBezier("+[s,r,l,n]+")";_.toString=function(){return D};return _}var vc=function(){function l(e){return-e.tension*e.x-e.friction*e.v}function u(e,t,r){var n={x:e.x+r.dx*t,v:e.v+r.dv*t,tension:e.tension,friction:e.friction};return{dx:n.v,dv:l(n)}}function v(e,t){var r={dx:e.v,dv:l(e)},n=u(e,t*.5,r),a=u(e,t*.5,n),i=u(e,t,a),o=1/6*(r.dx+2*(n.dx+a.dx)+i.dx),s=1/6*(r.dv+2*(n.dv+a.dv)+i.dv);e.x=e.x+o*t;e.v=e.v+s*t;return e}return function e(t,r,n){var a={x:-1,v:0,tension:null,friction:null},i=[0],o=0,s=1/1e4,l=16/1e3,u,c,h;t=parseFloat(t)||500;r=parseFloat(r)||20;n=n||null;a.tension=t;a.friction=r;u=n!==null;if(u){o=e(t,r);c=o/n*l}else c=l;for(;;){h=v(h||a,c);i.push(1+h.x);o+=16;if(!(Math.abs(h.x)>s&&Math.abs(h.v)>s))break}return!u?o:function(e){return i[e*(i.length-1)|0]}}}(),s=function e(t,r,n,a){var i=hc(t,r,n,a);return function(e,t,r){return e+(t-e)*i(r)}},fc={linear:function e(t,r,n){return t+(r-t)*n},ease:s(.25,.1,.25,1),"ease-in":s(.42,0,1,1),"ease-out":s(0,0,.58,1),"ease-in-out":s(.42,0,.58,1),"ease-in-sine":s(.47,0,.745,.715),"ease-out-sine":s(.39,.575,.565,1),"ease-in-out-sine":s(.445,.05,.55,.95),"ease-in-quad":s(.55,.085,.68,.53),"ease-out-quad":s(.25,.46,.45,.94),"ease-in-out-quad":s(.455,.03,.515,.955),"ease-in-cubic":s(.55,.055,.675,.19),"ease-out-cubic":s(.215,.61,.355,1),"ease-in-out-cubic":s(.645,.045,.355,1),"ease-in-quart":s(.895,.03,.685,.22),"ease-out-quart":s(.165,.84,.44,1),"ease-in-out-quart":s(.77,0,.175,1),"ease-in-quint":s(.755,.05,.855,.06),"ease-out-quint":s(.23,1,.32,1),"ease-in-out-quint":s(.86,0,.07,1),"ease-in-expo":s(.95,.05,.795,.035),"ease-out-expo":s(.19,1,.22,1),"ease-in-out-expo":s(1,0,0,1),"ease-in-circ":s(.6,.04,.98,.335),"ease-out-circ":s(.075,.82,.165,1),"ease-in-out-circ":s(.785,.135,.15,.86),spring:function e(t,r,n){if(n===0)return fc.linear;var a=vc(t,r,n);return function(e,t,r){return e+(t-e)*a(r)}},"cubic-bezier":s};function dc(e,t,r,n,a){if(n===1)return r;if(t===r)return r;var i=a(t,r,n);if(e==null)return i;if(e.roundValue||e.color)i=Math.round(i);if(e.min!==void 0)i=Math.max(i,e.min);if(e.max!==void 0)i=Math.min(i,e.max);return i}function pc(e,t){if(e.pfValue!=null||e.value!=null)if(e.pfValue!=null&&(t==null||t.type.units!=="%"))return e.pfValue;else return e.value;else return e}function gc(e,t,r,n,a){var i=a!=null?a.type:null;if(r<0)r=0;else if(r>1)r=1;var o=pc(e,a);var s=pc(t,a);if(me(o)&&me(s))return dc(i,o,s,r,n);else if(K(o)&&K(s)){var l=[];for(var u=0;u<s.length;u++){var c=o[u];var h=s[u];if(c!=null&&h!=null){var v=dc(i,c,h,r,n);l.push(v)}else l.push(h)}return l}return void 0}function yc(e,t,r,n){var a=!n;var i=e._private;var o=t._private;var s=o.easing;var l=o.startTime;var u=n?e:e.cy();var c=u.style();if(!o.easingImpl)if(s==null)o.easingImpl=fc["linear"];else{var h;if(J(s)){var v=c.parse("transition-timing-function",s);h=v.value}else h=s;var f,d;if(J(h)){f=h;d=[]}else{f=h[1];d=h.slice(2).map(function(e){return+e})}if(d.length>0){if(f==="spring")d.push(o.duration);o.easingImpl=fc[f].apply(null,d)}else o.easingImpl=fc[f]}var p=o.easingImpl;var g;if(o.duration===0)g=1;else g=(r-l)/o.duration;if(o.applying)g=o.progress;if(g<0)g=0;else if(g>1)g=1;if(o.delay==null){var y=o.startPosition;var m=o.position;if(m&&a&&!e.locked()){var b={};if(mc(y.x,m.x))b.x=gc(y.x,m.x,g,p);if(mc(y.y,m.y))b.y=gc(y.y,m.y,g,p);e.position(b)}var x=o.startPan;var w=o.pan;var E=i.pan;var T=w!=null&&n;if(T){if(mc(x.x,w.x))E.x=gc(x.x,w.x,g,p);if(mc(x.y,w.y))E.y=gc(x.y,w.y,g,p);e.emit("pan")}var _=o.startZoom;var D=o.zoom;var C=D!=null&&n;if(C){if(mc(_,D))i.zoom=en(i.minZoom,gc(_,D,g,p),i.maxZoom);e.emit("zoom")}if(T||C)e.emit("viewport");var N=o.style;if(N&&N.length>0&&a){for(var A=0;A<N.length;A++){var L=N[A];var S=L.name;var I=L;var k=o.startStyle[S];var O=c.properties[k.name];var M=gc(k,I,g,p,O);c.overrideBypass(e,S,M)}e.emit("style")}}o.progress=g;return g}function mc(e,t){if(e==null||t==null)return false;if(me(e)&&me(t))return true;else if(e&&t)return true;return false}function bc(e,t,r,n){var a=t._private;a.started=true;a.startTime=r-a.progress*a.duration}function xc(h,e){var t=e._private.aniEles;var v=[];function r(e,t){var r=e._private;var n=r.animation.current;var a=r.animation.queue;var i=false;if(n.length===0){var o=a.shift();if(o)n.push(o)}var s=function e(t){for(var r=t.length-1;r>=0;r--){var n=t[r];n()}t.splice(0,t.length)};for(var l=n.length-1;l>=0;l--){var u=n[l];var c=u._private;if(c.stopped){n.splice(l,1);c.hooked=false;c.playing=false;c.started=false;s(c.frames);continue}if(!c.playing&&!c.applying)continue;if(c.playing&&c.applying)c.applying=false;if(!c.started)bc(e,u,h);yc(e,u,h,t);if(c.applying)c.applying=false;s(c.frames);if(c.step!=null)c.step(h);if(u.completed()){n.splice(l,1);c.hooked=false;c.playing=false;c.started=false;s(c.completes)}i=true}if(!t&&n.length===0&&a.length===0)v.push(e);return i}var n=false;for(var a=0;a<t.length;a++){var i=t[a];var o=r(i);n=n||o}var s=r(e,true);if(n||s)if(t.length>0)e.notify("draw",t);else e.notify("draw");t.unmerge(v);e.emit("step")}var wc={animate:_.animate(),animation:_.animation(),animated:_.animated(),clearQueue:_.clearQueue(),delay:_.delay(),delayAnimation:_.delayAnimation(),stop:_.stop(),addToAnimationPool:function e(t){var r=this;if(!r.styleEnabled())return;r._private.aniEles.merge(t)},stopAnimationLoop:function e(){this._private.animationsRunning=false},startAnimationLoop:function e(){var n=this;n._private.animationsRunning=true;if(!n.styleEnabled())return;function r(){if(!n._private.animationsRunning)return;Ot(function e(t){xc(t,n);r()})}var t=n.renderer();if(t&&t.beforeRender)t.beforeRender(function e(t,r){xc(r,n)},t.beforeRenderPriorities.animations);else r()}},Ec={qualifierCompare:function e(t,r){if(t==null||r==null)return t==null&&r==null;else return t.sameText(r)},eventMatches:function e(t,r,n){var a=r.qualifier;if(a!=null)return t!==n.target&&te(n.target)&&a.matches(n.target);return true},addEventFields:function e(t,r){r.cy=t;r.target=t},callbackContext:function e(t,r,n){return r.qualifier!=null?n.target:t}},Tc=function e(t){if(J(t))return new _l(t);else return t},_c={createEmitter:function e(){var t=this._private;if(!t.emitter)t.emitter=new Su(Ec,this);return this},emitter:function e(){return this._private.emitter},on:function e(t,r,n){this.emitter().on(t,Tc(r),n);return this},removeListener:function e(t,r,n){this.emitter().removeListener(t,Tc(r),n);return this},removeAllListeners:function e(){this.emitter().removeAllListeners();return this},one:function e(t,r,n){this.emitter().one(t,Tc(r),n);return this},once:function e(t,r,n){this.emitter().one(t,Tc(r),n);return this},emit:function e(t,r){this.emitter().emit(t,r);return this},emitAndNotify:function e(t,r){this.emit(t);this.notify(t,r);return this}},Dc=(_.eventAliasesOn(_c),{png:function e(t){var r=this._private.renderer;t=t||{};return r.png(t)},jpg:function e(t){var r=this._private.renderer;t=t||{};t.bg=t.bg||"#fff";return r.jpg(t)}}),Cc=(Dc.jpeg=Dc.jpg,{layout:function e(t){var r=this;if(t==null){z("Layout options must be specified to make a layout");return}if(t.name==null){z("A `name` must be specified to make a layout");return}var n=t.name;var a=r.extension("layout",n);if(a==null){z("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;if(J(t.eles))i=r.$(t.eles);else i=t.eles!=null?t.eles:r.$();var o=new a(T({},t,{cy:r,eles:i}));return o}}),Nc=(Cc.createLayout=Cc.makeLayout=Cc.layout,{notify:function e(t,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[t]=n.batchNotifications[t]||this.collection();if(r!=null)a.merge(r);return}if(!n.notificationsEnabled)return;var i=this.renderer();if(this.destroyed()||!i)return;i.notify(t,r)},notifications:function e(t){var r=this._private;if(t===void 0)return r.notificationsEnabled;else r.notificationsEnabled=t?true:false;return this},noNotifications:function e(t){this.notifications(false);t();this.notifications(true)},batching:function e(){return this._private.batchCount>0},startBatch:function e(){var t=this._private;if(t.batchCount==null)t.batchCount=0;if(t.batchCount===0){t.batchStyleEles=this.collection();t.batchNotifications={}}t.batchCount++;return this},endBatch:function e(){var r=this._private;if(r.batchCount===0)return this;r.batchCount--;if(r.batchCount===0){r.batchStyleEles.updateStyle();var n=this.renderer();Object.keys(r.batchNotifications).forEach(function(e){var t=r.batchNotifications[e];if(t.empty())n.notify(e);else n.notify(e,t)})}return this},batch:function e(t){this.startBatch();t();this.endBatch();return this},batchData:function e(i){var o=this;return this.batch(function(){var e=Object.keys(i);for(var t=0;t<e.length;t++){var r=e[t];var n=i[r];var a=o.getElementById(r);a.data(n)}})}}),Ac=e({hideEdgesOnViewport:false,textureOnViewport:false,motionBlur:false,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:false,showFps:false}),Lc={renderTo:function e(t,r,n,a){var i=this._private.renderer;i.renderTo(t,r,n,a);return this},renderer:function e(){return this._private.renderer},forceRender:function e(){this.notify("draw");return this},resize:function e(){this.invalidateSize();this.emitAndNotify("resize");return this},initRenderer:function e(t){var r=this;var n=r.extension("renderer",t.name);if(n==null){z("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}if(t.wheelSensitivity!==void 0)ee("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=Ac(t);a.cy=r;r._private.renderer=new n(a);this.notify("init")},destroyRenderer:function e(){var t=this;t.notify("destroy");var r=t.container();if(r){r._cyreg=null;while(r.childNodes.length>0)r.removeChild(r.childNodes[0])}t._private.renderer=null;t.mutableElements().forEach(function(e){var t=e._private;t.rscratch={};t.rstyle={};t.animation.current=[];t.animation.queue=[]})},onRender:function e(t){return this.on("render",t)},offRender:function e(t){return this.off("render",t)}},Sc=(Lc.invalidateDimensions=Lc.resize,{collection:function e(t,r){if(J(t))return this.$(t);else if(Q(t))return t.collection();else if(K(t)){if(!r)r={};return new G(this,t,r.unique,r.removed)}return new G(this)},nodes:function e(t){var r=this.$(function(e){return e.isNode()});if(t)return r.filter(t);return r},edges:function e(t){var r=this.$(function(e){return e.isEdge()});if(t)return r.filter(t);return r},$:function e(t){var r=this._private.elements;if(t)return r.filter(t);else return r.spawnSelf()},mutableElements:function e(){return this._private.elements}}),l=(Sc.elements=Sc.filter=Sc.$,{}),Ic="t",kc="f",Oc=(l.apply=function(e){var t=this;var r=t._private;var n=r.cy;var a=n.collection();for(var i=0;i<e.length;i++){var o=e[i];var s=t.getContextMeta(o);if(s.empty)continue;var l=t.getContextStyle(s);var u=t.applyContextStyle(s,l,o);if(o._private.appliedInitStyle)t.updateTransitions(o,u.diffProps);else o._private.appliedInitStyle=true;var c=t.updateStyleHints(o);if(c)a.push(o)}return a},l.getPropertiesDiff=function(e,t){var r=this;var n=r._private.propDiffs=r._private.propDiffs||{};var a=e+"-"+t;var i=n[a];if(i)return i;var o=[];var s={};for(var l=0;l<r.length;l++){var u=r[l];var c=e[l]===Ic;var h=t[l]===Ic;var v=c!==h;var f=u.mappedProperties.length>0;if(v||h&&f){var d=void 0;if(v&&f)d=u.properties;else if(v)d=u.properties;else if(f)d=u.mappedProperties;for(var p=0;p<d.length;p++){var g=d[p];var y=g.name;var m=false;for(var b=l+1;b<r.length;b++){var x=r[b];var w=t[b]===Ic;if(!w)continue;m=x.properties[g.name]!=null;if(m)break}if(!s[y]&&!m){s[y]=true;o.push(y)}}}}n[a]=o;return o},l.getContextMeta=function(e){var t=this;var r="";var n;var a=e._private.styleCxtKey||"";for(var i=0;i<t.length;i++){var o=t[i];var s=o.selector&&o.selector.matches(e);if(s)r+=Ic;else r+=kc}n=t.getPropertiesDiff(a,r);e._private.styleCxtKey=r;return{key:r,diffPropNames:n,empty:n.length===0}},l.getContextStyle=function(e){var t=e.key;var r=this;var n=this._private.contextStyles=this._private.contextStyles||{};if(n[t])return n[t];var a={_private:{key:t}};for(var i=0;i<r.length;i++){var o=r[i];var s=t[i]===Ic;if(!s)continue;for(var l=0;l<o.properties.length;l++){var u=o.properties[l];a[u.name]=u}}n[t]=a;return a},l.applyContextStyle=function(e,t,r){var n=this;var a=e.diffPropNames;var i={};var o=n.types;for(var s=0;s<a.length;s++){var l=a[s];var u=t[l];var c=r.pstyle(l);if(!u)if(!c)continue;else if(c.bypass)u={name:l,deleteBypassed:true};else u={name:l,delete:true};if(c===u)continue;if(u.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===u.value){var h=c.mapping;var v=h.fnValue=u.value(r);if(v===h.prevFnValue)continue}var f=i[l]={prev:c};n.applyParsedProperty(r,u);f.next=r.pstyle(l);if(f.next&&f.next.bypass)f.next=f.next.bypassed}return{diffProps:i}},l.updateStyleHints=function(e){var n=e._private;var a=this;var t=a.propertyGroupNames;var r=a.propertyGroupKeys;var i=function e(t,r,n){return a.getPropertiesHash(t,r,n)};var o=n.styleKey;if(e.removed())return false;var s=n.group==="nodes";var l=e._private.style;t=Object.keys(l);for(var u=0;u<r.length;u++){var c=r[u];n.styleKeys[c]=[Pt,Bt]}var h=function e(t,r){return n.styleKeys[r][0]=zt(t,n.styleKeys[r][0])};var v=function e(t,r){return n.styleKeys[r][1]=Gt(t,n.styleKeys[r][1])};var f=function e(t,r){h(t,r);v(t,r)};var d=function e(t,r){for(var n=0;n<t.length;n++){var a=t.charCodeAt(n);h(a,r);v(a,r)}};var p=2e9;var g=function e(t){return-128<t&&t<128&&Math.floor(t)!==t?p-(t*1024|0):t};for(var y=0;y<t.length;y++){var m=t[y];var b=l[m];if(b==null)continue;var x=this.properties[m];var w=x.type;var E=x.groupKey;var T=void 0;if(x.hashOverride!=null)T=x.hashOverride(e,b);else if(b.pfValue!=null)T=b.pfValue;var _=x.enums==null?b.value:null;var D=T!=null;var R=_!=null;var B=D||R;var C=b.units;if(w.number&&B&&!w.multiple){var F=D?T:_;f(g(F),E);if(!D&&C!=null)d(C,E)}else d(b.strValue,E)}var N=[Pt,Bt];for(var A=0;A<r.length;A++){var z=r[A];var L=n.styleKeys[z];N[0]=zt(L[0],N[0]);N[1]=Gt(L[1],N[1])}n.styleKey=Yt(N[0],N[1]);var S=n.styleKeys;n.labelDimsKey=Xt(S.labelDimensions);var I=i(e,["label"],S.labelDimensions);n.labelKey=Xt(I);n.labelStyleKey=Xt(Vt(S.commonLabel,I));if(!s){var k=i(e,["source-label"],S.labelDimensions);n.sourceLabelKey=Xt(k);n.sourceLabelStyleKey=Xt(Vt(S.commonLabel,k));var O=i(e,["target-label"],S.labelDimensions);n.targetLabelKey=Xt(O);n.targetLabelStyleKey=Xt(Vt(S.commonLabel,O))}if(s){var M=n.styleKeys,G=M.nodeBody,Y=M.nodeBorder,X=M.backgroundImage,V=M.compound,P=M.pie;var U=[G,Y,X,V,P].filter(function(e){return e!=null}).reduce(Vt,[Pt,Bt]);n.nodeKey=Xt(U);n.hasPie=P!=null&&P[0]!==Pt&&P[1]!==Bt}return o!==n.styleKey},l.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="";t.styleKeys={};t.styleKey=null;t.labelKey=null;t.labelStyleKey=null;t.sourceLabelKey=null;t.sourceLabelStyleKey=null;t.targetLabelKey=null;t.targetLabelStyleKey=null;t.nodeKey=null;t.hasPie=null},l.applyParsedProperty=function(n,e){var a=this;var i=e;var t=n._private.style;var r;var o=a.types;var s=a.properties[i.name].type;var l=i.bypass;var u=t[i.name];var c=u&&u.bypass;var h=n._private;var v="mapping";var f=function e(t){if(t==null)return null;else if(t.pfValue!=null)return t.pfValue;else return t.value};var d=function e(){var t=f(u);var r=f(i);a.checkTriggers(n,i.name,t,r)};if(i&&i.name.substr(0,3)==="pie")ee("The pie style properties are deprecated.  Create charts using background images instead.");if(e.name==="curve-style"&&n.isEdge()&&(e.value!=="bezier"&&n.isLoop()||e.value==="haystack"&&(n.source().isParent()||n.target().isParent())))i=e=this.parse(e.name,"bezier",l);if(i["delete"]){t[i.name]=void 0;d();return true}if(i.deleteBypassed)if(!u){d();return true}else if(u.bypass){u.bypassed=void 0;d();return true}else return false;if(i.deleteBypass)if(!u){d();return true}else if(u.bypass){t[i.name]=u.bypassed;d();return true}else return false;var p=function e(){ee("Do not assign mappings to elements without corresponding data (i.e. ele `"+n.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case o.mapData:{var g=i.field.split(".");var y=h.data;for(var m=0;m<g.length&&y;m++){var b=g[m];y=y[b]}if(y==null){p();return false}var x;if(!me(y)){ee("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+y+"` for `"+n.id()+"` is non-numeric)");return false}else{var w=i.fieldMax-i.fieldMin;if(w===0)x=0;else x=(y-i.fieldMin)/w}if(x<0)x=0;else if(x>1)x=1;if(s.color){var E=i.valueMin[0];var T=i.valueMax[0];var _=i.valueMin[1];var D=i.valueMax[1];var C=i.valueMin[2];var N=i.valueMax[2];var A=i.valueMin[3]==null?1:i.valueMin[3];var L=i.valueMax[3]==null?1:i.valueMax[3];var S=[Math.round(E+(T-E)*x),Math.round(_+(D-_)*x),Math.round(C+(N-C)*x),Math.round(A+(L-A)*x)];r={bypass:i.bypass,name:i.name,value:S,strValue:"rgb("+S[0]+", "+S[1]+", "+S[2]+")"}}else if(s.number){var I=i.valueMin+(i.valueMax-i.valueMin)*x;r=this.parse(i.name,I,i.bypass,v)}else return false;if(!r){p();return false}r.mapping=i;i=r;break}case o.data:{var k=i.field.split(".");var O=h.data;for(var M=0;M<k.length&&O;M++){var R=k[M];O=O[R]}if(O!=null)r=this.parse(i.name,O,i.bypass,v);if(!r){p();return false}r.mapping=i;i=r;break}case o.fn:{var B=i.value;var P=i.fnValue!=null?i.fnValue:B(n);i.prevFnValue=P;if(P==null){ee("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+n.id()+"` is null)");return false}r=this.parse(i.name,P,i.bypass,v);if(!r){ee("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+n.id()+"` is invalid)");return false}r.mapping=ar(i);i=r;break}case void 0:break;default:return false}if(l){if(c)i.bypassed=u.bypassed;else i.bypassed=u;t[i.name]=i}else if(c)u.bypassed=i;else t[i.name]=i;d();return true},l.cleanElements=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];this.clearStyleHints(n);n.dirtyCompoundBoundsCache();n.dirtyBoundingBoxCache();if(!t)n._private.style={};else{var a=n._private.style;var i=Object.keys(a);for(var o=0;o<i.length;o++){var s=i[o];var l=a[s];if(l!=null)if(l.bypass)l.bypassed=null;else a[s]=null}}}},l.update=function(){var e=this._private.cy;var t=e.mutableElements();t.updateStyle()},l.updateTransitions=function(t,e){var r=this;var n=t._private;var a=t.pstyle("transition-property").value;var i=t.pstyle("transition-duration").pfValue;var o=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){var s={};var l=false;for(var u=0;u<a.length;u++){var c=a[u];var h=t.pstyle(c);var v=e[c];if(!v)continue;var f=v.prev;var d=f;var p=v.next!=null?v.next:h;var g=false;var y=void 0;var m=1e-6;if(!d)continue;if(me(d.pfValue)&&me(p.pfValue)){g=p.pfValue-d.pfValue;y=d.pfValue+m*g}else if(me(d.value)&&me(p.value)){g=p.value-d.value;y=d.value+m*g}else if(K(d.value)&&K(p.value)){g=d.value[0]!==p.value[0]||d.value[1]!==p.value[1]||d.value[2]!==p.value[2];y=d.strValue}if(g){s[c]=p.strValue;this.applyBypass(t,c,y);l=true}}if(!l)return;n.transitioning=true;new gi(function(e){if(o>0)t.delayAnimation(o).play().promise().then(e);else e()}).then(function(){return t.animation({style:s,duration:i,easing:t.pstyle("transition-timing-function").value,queue:false}).play().promise()}).then(function(){r.removeBypasses(t,a);t.emitAndNotify("style");n.transitioning=false})}else if(n.transitioning){this.removeBypasses(t,a);t.emitAndNotify("style");n.transitioning=false}},l.checkTrigger=function(e,t,r,n,a,i){var o=this.properties[t];var s=a(o);if(s!=null&&s(r,n))i(o)},l.checkZOrderTrigger=function(e,t,r,n){var a=this;this.checkTrigger(e,t,r,n,function(e){return e.triggersZOrder},function(){a._private.cy.notify("zorder",e)})},l.checkBoundsTrigger=function(t,r,n,a){this.checkTrigger(t,r,n,a,function(e){return e.triggersBounds},function(e){t.dirtyCompoundBoundsCache();t.dirtyBoundingBoxCache();if(e.triggersBoundsOfParallelBeziers&&(r==="curve-style"&&(n==="bezier"||a==="bezier")||r==="display"&&(n==="none"||a==="none")))t.parallelEdges().forEach(function(e){if(e.isBundledBezier())e.dirtyBoundingBoxCache()})})},l.checkTriggers=function(e,t,r,n){e.dirtyStyleCache();this.checkZOrderTrigger(e,t,r,n);this.checkBoundsTrigger(e,t,r,n)},{}),Mc=(Oc.applyBypass=function(e,t,r,n){var a=this;var i=[];var o=true;if(t==="*"||t==="**"){if(r!==void 0)for(var s=0;s<a.properties.length;s++){var l=a.properties[s];var u=l.name;var c=this.parse(u,r,true);if(c)i.push(c)}}else if(J(t)){var h=this.parse(t,r,true);if(h)i.push(h)}else if(I(t)){var v=t;n=r;var f=Object.keys(v);for(var d=0;d<f.length;d++){var p=f[d];var g=v[p];if(g===void 0)g=v[fe(p)];if(g!==void 0){var y=this.parse(p,g,true);if(y)i.push(y)}}}else return false;if(i.length===0)return false;var m=false;for(var b=0;b<e.length;b++){var x=e[b];var w={};var E=void 0;for(var T=0;T<i.length;T++){var _=i[T];if(n){var D=x.pstyle(_.name);E=w[_.name]={prev:D}}m=this.applyParsedProperty(x,ar(_))||m;if(n)E.next=x.pstyle(_.name)}if(m)this.updateStyleHints(x);if(n)this.updateTransitions(x,w,o)}return m},Oc.overrideBypass=function(e,t,r){t=ve(t);for(var n=0;n<e.length;n++){var a=e[n];var i=a._private.style[t];var o=this.properties[t].type;var s=o.color;var l=o.mutiple;var u=!i?null:i.pfValue!=null?i.pfValue:i.value;if(!i||!i.bypass)this.applyBypass(a,t,r);else{i.value=r;if(i.pfValue!=null)i.pfValue=r;if(s)i.strValue="rgb("+r.join(",")+")";else if(l)i.strValue=r.join(" ");else i.strValue=""+r;this.updateStyleHints(a)}this.checkTriggers(a,t,u,r)}},Oc.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)},Oc.removeBypasses=function(e,t,r){var n=true;for(var a=0;a<e.length;a++){var i=e[a];var o={};for(var s=0;s<t.length;s++){var l=t[s];var u=this.properties[l];var c=i.pstyle(u.name);if(!c||!c.bypass)continue;var h="";var v=this.parse(l,h,true);var f=o[u.name]={prev:c};this.applyParsedProperty(i,v);f.next=i.pstyle(u.name)}this.updateStyleHints(i);if(r)this.updateTransitions(i,o,n)}},{}),Pc=(Mc.getEmSizeInPixels=function(){var e=this.containerCss("font-size");if(e!=null)return parseFloat(e);else return 1},Mc.containerCss=function(e){var t=this._private.cy;var r=t.container();if(g&&r&&g.getComputedStyle)return g.getComputedStyle(r).getPropertyValue(e)},{}),Rc=(Pc.getRenderedStyle=function(e,t){if(t)return this.getStylePropertyValue(e,t,true);else return this.getRawStyle(e,true)},Pc.getRawStyle=function(e,t){var r=this;e=e[0];if(e){var n={};for(var a=0;a<r.properties.length;a++){var i=r.properties[a];var o=r.getStylePropertyValue(e,i.name,t);if(o!=null){n[i.name]=o;n[fe(i.name)]=o}}return n}},Pc.getIndexedStyle=function(e,t,r,n){var a=e.pstyle(t)[r][n];return a!=null?a:e.cy().style().getDefaultProperty(t)[r][0]},Pc.getStylePropertyValue=function(e,t,r){var n=this;e=e[0];if(e){var a=n.properties[t];if(a.alias)a=a.pointsTo;var i=a.type;var o=e.pstyle(a.name);if(o){var s=o.value,l=o.units,u=o.strValue;if(r&&i.number&&s!=null&&me(s)){var c=e.cy().zoom();var h=function e(t){return t*c};var v=function e(t,r){return h(t)+r};var f=K(s);var d=f?l.every(function(e){return e!=null}):l!=null;if(d)if(f)return s.map(function(e,t){return v(e,l[t])}).join(" ");else return v(s,l);else if(f)return s.map(function(e){return J(e)?e:""+h(e)}).join(" ");else return""+h(s)}else if(u!=null)return u}return null}},Pc.getAnimationStartStyle=function(e,t){var r={};for(var n=0;n<t.length;n++){var a=t[n];var i=a.name;var o=e.pstyle(i);if(o!==void 0)if(I(o))o=this.parse(i,o.strValue);else o=this.parse(i,o);if(o)r[i]=o}return r},Pc.getPropsList=function(e){var t=this;var r=[];var n=e;var a=t.properties;if(n){var i=Object.keys(n);for(var o=0;o<i.length;o++){var s=i[o];var l=n[s];var u=a[s]||a[ve(s)];var c=this.parse(u.name,l);if(c)r.push(c)}}return r},Pc.getNonDefaultPropertiesHash=function(e,t,r){var n=r.slice();var a,i,o,s;var l,u;for(l=0;l<t.length;l++){a=t[l];i=e.pstyle(a,false);if(i==null)continue;else if(i.pfValue!=null){n[0]=zt(s,n[0]);n[1]=Gt(s,n[1])}else{o=i.strValue;for(u=0;u<o.length;u++){s=o.charCodeAt(u);n[0]=zt(s,n[0]);n[1]=Gt(s,n[1])}}}return n},Pc.getPropertiesHash=Pc.getNonDefaultPropertiesHash,{}),Bc=(Rc.appendFromJson=function(e){var t=this;for(var r=0;r<e.length;r++){var n=e[r];var a=n.selector;var i=n.style||n.css;var o=Object.keys(i);t.selector(a);for(var s=0;s<o.length;s++){var l=o[s];var u=i[l];t.css(l,u)}}return t},Rc.fromJson=function(e){var t=this;t.resetToDefault();t.appendFromJson(e);return t},Rc.json=function(){var e=[];for(var t=this.defaultLength;t<this.length;t++){var r=this[t];var n=r.selector;var a=r.properties;var i={};for(var o=0;o<a.length;o++){var s=a[o];i[s.name]=s.strValue}e.push({selector:!n?"core":n.toString(),style:i})}return e},{}),h=(Bc.appendFromString=function(e){var t=this;var r=this;var n=""+e;var a;var i;var o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){if(n.length>a.length)n=n.substr(a.length);else n=""}function l(){if(i.length>o.length)i=i.substr(o.length);else i=""}for(;;){var u=n.match(/^\s*$/);if(u)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){ee("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var h=c[1];if(h!=="core"){var v=new _l(h);if(v.invalid){ee("Skipping parsing of block: Invalid selector found in string stylesheet: "+h);s();continue}}var f=c[2];var d=false;i=f;var p=[];for(;;){var g=i.match(/^\s*$/);if(g)break;var y=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!y){ee("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+f);d=true;break}o=y[0];var m=y[1];var b=y[2];var x=t.properties[m];if(!x){ee("Skipping property: Invalid property name in: "+o);l();continue}var w=r.parse(m,b);if(!w){ee("Skipping property: Invalid property definition in: "+o);l();continue}p.push({name:m,val:b});l()}if(d){s();break}r.selector(h);for(var E=0;E<p.length;E++){var T=p[E];r.css(T.name,T.val)}s()}return r},Bc.fromString=function(e){var t=this;t.resetToDefault();t.appendFromString(e);return t},{}),Fc=j,zc=ye,Gc=xe,Yc=we,Xc=Ee,Vc=function e(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},Uc=function e(t){var r=Fc+"|\\w+|"+zc+"|"+Gc+"|"+Yc+"|"+Xc;return"^"+t+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+Fc+")\\s*\\,\\s*("+Fc+")\\s*,\\s*("+r+")\\s*\\,\\s*("+r+")\\)$"},jc=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"],v=(h.types={time:{number:true,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:true,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:true,min:0,max:100,units:"%",implicitUnits:"%",multiple:true},zeroOneNumber:{number:true,min:0,max:1,unitless:true},zeroOneNumbers:{number:true,min:0,max:1,unitless:true,multiple:true},nOneOneNumber:{number:true,min:-1,max:1,unitless:true},nonNegativeInt:{number:true,min:0,integer:true,unitless:true},position:{enums:["parent","origin"]},nodeSize:{number:true,min:0,enums:["label"]},number:{number:true,unitless:true},numbers:{number:true,unitless:true,multiple:true},positiveNumber:{number:true,unitless:true,min:0,strictMin:true},size:{number:true,min:0},bidirectionalSize:{number:true},bidirectionalSizeMaybePercent:{number:true,allowPercent:true},bidirectionalSizes:{number:true,multiple:true},sizeMaybePercent:{number:true,min:0,allowPercent:true},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:true,min:0,allowPercent:true,enums:["auto"],multiple:true},bgPos:{number:true,allowPercent:true,multiple:true},bgRelativeTo:{enums:["inner","include-padding"],multiple:true},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:true},bgFit:{enums:["none","contain","cover"],multiple:true},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:true},bgClip:{enums:["none","node"],multiple:true},bgContainment:{enums:["inside","over"],multiple:true},color:{color:true},colors:{color:true,multiple:true},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:true},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:true},data:{mapping:true,regex:Vc("data")},layoutData:{mapping:true,regex:Vc("layoutData")},scratch:{mapping:true,regex:Vc("scratch")},mapData:{mapping:true,regex:Uc("mapData")},mapLayoutData:{mapping:true,regex:Uc("mapLayoutData")},mapScratch:{mapping:true,regex:Uc("mapScratch")},fn:{mapping:true,fn:true},url:{regexes:jc,singleRegexMatchValue:true},urls:{regexes:jc,singleRegexMatchValue:true,multiple:true},propList:{propList:true},angle:{number:true,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:true,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:true,multiple:true,evenMultiple:true,min:-1,max:1,unitless:true},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:true,multiple:true,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:true,validate:function e(t,r){switch(t.length){case 2:return r[0]!=="deg"&&r[0]!=="rad"&&r[1]!=="deg"&&r[1]!=="rad";case 1:return J(t[0])||r[0]==="deg"||r[0]==="rad";default:return false}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+Fc+")\\s*,\\s*("+Fc+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+Fc+")\\s*,\\s*("+Fc+")\\s*,\\s*("+Fc+")\\s*,\\s*("+Fc+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:true,multiple:true,min:0,validate:function e(t){var r=t.length;return r===1||r===2||r===4}}},{zeroNonZero:function e(t,r){if((t==null||r==null)&&t!==r)return true;if(t==0&&r!=0)return true;else if(t!=0&&r==0)return true;else return false},any:function e(t,r){return t!=r},emptyNonEmpty:function e(t,r){var n=oe(t);var a=oe(r);return n&&!a||!n&&a}}),f=h.types,qc=[{name:"label",type:f.text,triggersBounds:v.any,triggersZOrder:v.emptyNonEmpty},{name:"text-rotation",type:f.textRotation,triggersBounds:v.any},{name:"text-margin-x",type:f.bidirectionalSize,triggersBounds:v.any},{name:"text-margin-y",type:f.bidirectionalSize,triggersBounds:v.any}],Hc=[{name:"source-label",type:f.text,triggersBounds:v.any},{name:"source-text-rotation",type:f.textRotation,triggersBounds:v.any},{name:"source-text-margin-x",type:f.bidirectionalSize,triggersBounds:v.any},{name:"source-text-margin-y",type:f.bidirectionalSize,triggersBounds:v.any},{name:"source-text-offset",type:f.size,triggersBounds:v.any}],Wc=[{name:"target-label",type:f.text,triggersBounds:v.any},{name:"target-text-rotation",type:f.textRotation,triggersBounds:v.any},{name:"target-text-margin-x",type:f.bidirectionalSize,triggersBounds:v.any},{name:"target-text-margin-y",type:f.bidirectionalSize,triggersBounds:v.any},{name:"target-text-offset",type:f.size,triggersBounds:v.any}],$c=[{name:"font-family",type:f.fontFamily,triggersBounds:v.any},{name:"font-style",type:f.fontStyle,triggersBounds:v.any},{name:"font-weight",type:f.fontWeight,triggersBounds:v.any},{name:"font-size",type:f.size,triggersBounds:v.any},{name:"text-transform",type:f.textTransform,triggersBounds:v.any},{name:"text-wrap",type:f.textWrap,triggersBounds:v.any},{name:"text-overflow-wrap",type:f.textOverflowWrap,triggersBounds:v.any},{name:"text-max-width",type:f.size,triggersBounds:v.any},{name:"text-outline-width",type:f.size,triggersBounds:v.any},{name:"line-height",type:f.positiveNumber,triggersBounds:v.any}],Kc=[{name:"text-valign",type:f.valign,triggersBounds:v.any},{name:"text-halign",type:f.halign,triggersBounds:v.any},{name:"color",type:f.color},{name:"text-outline-color",type:f.color},{name:"text-outline-opacity",type:f.zeroOneNumber},{name:"text-background-color",type:f.color},{name:"text-background-opacity",type:f.zeroOneNumber},{name:"text-background-padding",type:f.size,triggersBounds:v.any},{name:"text-border-opacity",type:f.zeroOneNumber},{name:"text-border-color",type:f.color},{name:"text-border-width",type:f.size,triggersBounds:v.any},{name:"text-border-style",type:f.borderStyle,triggersBounds:v.any},{name:"text-background-shape",type:f.textBackgroundShape,triggersBounds:v.any},{name:"text-justification",type:f.justification}],Zc=[{name:"events",type:f.bool},{name:"text-events",type:f.bool}],Qc=[{name:"display",type:f.display,triggersZOrder:v.any,triggersBounds:v.any,triggersBoundsOfParallelBeziers:true},{name:"visibility",type:f.visibility,triggersZOrder:v.any},{name:"opacity",type:f.zeroOneNumber,triggersZOrder:v.zeroNonZero},{name:"text-opacity",type:f.zeroOneNumber},{name:"min-zoomed-font-size",type:f.size},{name:"z-compound-depth",type:f.zCompoundDepth,triggersZOrder:v.any},{name:"z-index-compare",type:f.zIndexCompare,triggersZOrder:v.any},{name:"z-index",type:f.nonNegativeInt,triggersZOrder:v.any}],Jc=[{name:"overlay-padding",type:f.size,triggersBounds:v.any},{name:"overlay-color",type:f.color},{name:"overlay-opacity",type:f.zeroOneNumber,triggersBounds:v.zeroNonZero},{name:"overlay-shape",type:f.overlayShape,triggersBounds:v.any}],eh=[{name:"underlay-padding",type:f.size,triggersBounds:v.any},{name:"underlay-color",type:f.color},{name:"underlay-opacity",type:f.zeroOneNumber,triggersBounds:v.zeroNonZero},{name:"underlay-shape",type:f.overlayShape,triggersBounds:v.any}],th=[{name:"transition-property",type:f.propList},{name:"transition-duration",type:f.time},{name:"transition-delay",type:f.time},{name:"transition-timing-function",type:f.easing}],rh=function e(t,r){if(r.value==="label")return-t.poolIndex();else return r.pfValue},nh=[{name:"height",type:f.nodeSize,triggersBounds:v.any,hashOverride:rh},{name:"width",type:f.nodeSize,triggersBounds:v.any,hashOverride:rh},{name:"shape",type:f.nodeShape,triggersBounds:v.any},{name:"shape-polygon-points",type:f.polygonPointList,triggersBounds:v.any},{name:"background-color",type:f.color},{name:"background-fill",type:f.fill},{name:"background-opacity",type:f.zeroOneNumber},{name:"background-blacken",type:f.nOneOneNumber},{name:"background-gradient-stop-colors",type:f.colors},{name:"background-gradient-stop-positions",type:f.percentages},{name:"background-gradient-direction",type:f.gradientDirection},{name:"padding",type:f.sizeMaybePercent,triggersBounds:v.any},{name:"padding-relative-to",type:f.paddingRelativeTo,triggersBounds:v.any},{name:"bounds-expansion",type:f.boundsExpansion,triggersBounds:v.any}],ah=[{name:"border-color",type:f.color},{name:"border-opacity",type:f.zeroOneNumber},{name:"border-width",type:f.size,triggersBounds:v.any},{name:"border-style",type:f.borderStyle}],ih=[{name:"background-image",type:f.urls},{name:"background-image-crossorigin",type:f.bgCrossOrigin},{name:"background-image-opacity",type:f.zeroOneNumbers},{name:"background-image-containment",type:f.bgContainment},{name:"background-image-smoothing",type:f.bools},{name:"background-position-x",type:f.bgPos},{name:"background-position-y",type:f.bgPos},{name:"background-width-relative-to",type:f.bgRelativeTo},{name:"background-height-relative-to",type:f.bgRelativeTo},{name:"background-repeat",type:f.bgRepeat},{name:"background-fit",type:f.bgFit},{name:"background-clip",type:f.bgClip},{name:"background-width",type:f.bgWH},{name:"background-height",type:f.bgWH},{name:"background-offset-x",type:f.bgPos},{name:"background-offset-y",type:f.bgPos}],oh=[{name:"position",type:f.position,triggersBounds:v.any},{name:"compound-sizing-wrt-labels",type:f.compoundIncludeLabels,triggersBounds:v.any},{name:"min-width",type:f.size,triggersBounds:v.any},{name:"min-width-bias-left",type:f.sizeMaybePercent,triggersBounds:v.any},{name:"min-width-bias-right",type:f.sizeMaybePercent,triggersBounds:v.any},{name:"min-height",type:f.size,triggersBounds:v.any},{name:"min-height-bias-top",type:f.sizeMaybePercent,triggersBounds:v.any},{name:"min-height-bias-bottom",type:f.sizeMaybePercent,triggersBounds:v.any}],sh=[{name:"line-style",type:f.lineStyle},{name:"line-color",type:f.color},{name:"line-fill",type:f.fill},{name:"line-cap",type:f.lineCap},{name:"line-opacity",type:f.zeroOneNumber},{name:"line-dash-pattern",type:f.numbers},{name:"line-dash-offset",type:f.number},{name:"line-gradient-stop-colors",type:f.colors},{name:"line-gradient-stop-positions",type:f.percentages},{name:"curve-style",type:f.curveStyle,triggersBounds:v.any,triggersBoundsOfParallelBeziers:true},{name:"haystack-radius",type:f.zeroOneNumber,triggersBounds:v.any},{name:"source-endpoint",type:f.edgeEndpoint,triggersBounds:v.any},{name:"target-endpoint",type:f.edgeEndpoint,triggersBounds:v.any},{name:"control-point-step-size",type:f.size,triggersBounds:v.any},{name:"control-point-distances",type:f.bidirectionalSizes,triggersBounds:v.any},{name:"control-point-weights",type:f.numbers,triggersBounds:v.any},{name:"segment-distances",type:f.bidirectionalSizes,triggersBounds:v.any},{name:"segment-weights",type:f.numbers,triggersBounds:v.any},{name:"taxi-turn",type:f.bidirectionalSizeMaybePercent,triggersBounds:v.any},{name:"taxi-turn-min-distance",type:f.size,triggersBounds:v.any},{name:"taxi-direction",type:f.axisDirection,triggersBounds:v.any},{name:"edge-distances",type:f.edgeDistances,triggersBounds:v.any},{name:"arrow-scale",type:f.positiveNumber,triggersBounds:v.any},{name:"loop-direction",type:f.angle,triggersBounds:v.any},{name:"loop-sweep",type:f.angle,triggersBounds:v.any},{name:"source-distance-from-node",type:f.size,triggersBounds:v.any},{name:"target-distance-from-node",type:f.size,triggersBounds:v.any}],lh=[{name:"ghost",type:f.bool,triggersBounds:v.any},{name:"ghost-offset-x",type:f.bidirectionalSize,triggersBounds:v.any},{name:"ghost-offset-y",type:f.bidirectionalSize,triggersBounds:v.any},{name:"ghost-opacity",type:f.zeroOneNumber}],uh=[{name:"selection-box-color",type:f.color},{name:"selection-box-opacity",type:f.zeroOneNumber},{name:"selection-box-border-color",type:f.color},{name:"selection-box-border-width",type:f.size},{name:"active-bg-color",type:f.color},{name:"active-bg-opacity",type:f.zeroOneNumber},{name:"active-bg-size",type:f.size},{name:"outside-texture-bg-color",type:f.color},{name:"outside-texture-bg-opacity",type:f.zeroOneNumber}],ch=[];h.pieBackgroundN=16,ch.push({name:"pie-size",type:f.sizeMaybePercent});for(var hh=1;hh<=h.pieBackgroundN;hh++){ch.push({name:"pie-"+hh+"-background-color",type:f.color});ch.push({name:"pie-"+hh+"-background-size",type:f.percent});ch.push({name:"pie-"+hh+"-background-opacity",type:f.zeroOneNumber})}var vh=[],fh=h.arrowPrefixes=["source","mid-source","target","mid-target"],dh=([{name:"arrow-shape",type:f.arrowShape,triggersBounds:v.any},{name:"arrow-color",type:f.color},{name:"arrow-fill",type:f.arrowFill}].forEach(function(a){fh.forEach(function(e){var t=e+"-"+a.name;var r=a.type,n=a.triggersBounds;vh.push({name:t,type:r,triggersBounds:n})})},{}),h.properties=[].concat(Zc,th,Qc,Jc,eh,lh,Kc,$c,qc,Hc,Wc,nh,ah,ih,ch,oh,sh,vh,uh)),ph=h.propertyGroups={behavior:Zc,transition:th,visibility:Qc,overlay:Jc,underlay:eh,ghost:lh,commonLabel:Kc,labelDimensions:$c,mainLabel:qc,sourceLabel:Hc,targetLabel:Wc,nodeBody:nh,nodeBorder:ah,backgroundImage:ih,pie:ch,compound:oh,edgeLine:sh,edgeArrow:vh,core:uh},gh=h.propertyGroupNames={},yh,mh=((h.propertyGroupKeys=Object.keys(ph)).forEach(function(t){gh[t]=ph[t].map(function(e){return e.name});ph[t].forEach(function(e){return e.groupKey=t})}),h.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}]);h.propertyNames=dh.map(function(e){return e.name});for(var bh=0;bh<dh.length;bh++){var xh=dh[bh];dh[xh.name]=xh}for(var wh=0;wh<mh.length;wh++){var Eh=mh[wh];var Th=dh[Eh.pointsTo];var _h={name:Eh.name,alias:true,pointsTo:Th};dh.push(_h);dh[Eh.name]=_h}h.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},h.getDefaultProperties=function(){var e=this._private;if(e.defaultProperties!=null)return e.defaultProperties;var t=T({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var r=1;r<=h.pieBackgroundN;r++){var n=t.name.replace("{{i}}",r);var a=t.value;e[n]=a}return e},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(n,a){h.arrowPrefixes.forEach(function(e){var t=e+"-"+a.name;var r=a.value;n[t]=r});return n},{}));var r={};for(var n=0;n<this.properties.length;n++){var a=this.properties[n];if(a.pointsTo)continue;var i=a.name;var o=t[i];var s=this.parse(i,o);r[i]=s}e.defaultProperties=r;return e.defaultProperties},h.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25});this.defaultLength=this.length};var Dh={parse:function(e,t,r,n){var a=this;if(U(t))return a.parseImplWarn(e,t,r,n);var i=n==="mapping"||n===true||n===false||n==null?"dontcare":n;var o=r?"t":"f";var s=""+t;var l=qt(e,s,o,i);var u=a.propCache=a.propCache||[];var c;if(!(c=u[l]))c=u[l]=a.parseImplWarn(e,t,r,n);if(r||n==="mapping"){c=ar(c);if(c)c.value=ar(c.value)}return c},parseImplWarn:function(e,t,r,n){var a=this.parseImpl(e,t,r,n);if(!a&&t!=null)ee("The style property `".concat(e,": ").concat(t,"` is invalid"));if(a&&(a.name==="width"||a.name==="height")&&t==="label")ee("The style value of `label` is deprecated for `"+a.name+"`");return a},parseImpl:function(n,a,i,e){var t=this;n=ve(n);var r=t.properties[n];var R=a;var o=t.types;if(!r)return null;if(a===void 0)return null;if(r.alias){r=r.pointsTo;n=r.name}var s=J(a);if(s)a=a.trim();var l=r.type;if(!l)return null;if(i&&(a===""||a===null))return{name:n,value:a,bypass:true,deleteBypass:true};if(U(a))return{name:n,value:a,strValue:"fn",mapped:o.fn,bypass:i};var u,c;if(!s||e||a.length<7||a[1]!=="a");else if(a.length>=7&&a[0]==="d"&&(u=new RegExp(o.data.regex).exec(a))){if(i)return false;var B=o.data;return{name:n,value:u,strValue:""+a,mapped:B,field:u[1],bypass:i}}else if(a.length>=10&&a[0]==="m"&&(c=new RegExp(o.mapData.regex).exec(a))){if(i)return false;if(l.multiple)return false;var F=o.mapData;if(!(l.color||l.number))return false;var h=this.parse(n,c[4]);if(!h||h.mapped)return false;var v=this.parse(n,c[5]);if(!v||v.mapped)return false;if(h.pfValue===v.pfValue||h.strValue===v.strValue){ee("`"+n+": "+a+"` is not a valid mapper because the output range is zero; converting to `"+n+": "+h.strValue+"`");return this.parse(n,h.strValue)}else if(l.color){var f=h.value;var d=v.value;var z=f[0]===d[0]&&f[1]===d[1]&&f[2]===d[2]&&(f[3]===d[3]||(f[3]==null||f[3]===1)&&(d[3]==null||d[3]===1));if(z)return false}return{name:n,value:c,strValue:""+a,mapped:F,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:h.value,valueMax:v.value,bypass:i}}if(l.multiple&&e!=="multiple"){var p;if(s)p=a.split(/\s+/);else if(K(a))p=a;else p=[a];if(l.evenMultiple&&p.length%2!==0)return null;var g=[];var y=[];var m=[];var b="";var x=false;for(var w=0;w<p.length;w++){var E=t.parse(n,p[w],i,"multiple");x=x||J(E.value);g.push(E.value);m.push(E.pfValue!=null?E.pfValue:E.value);y.push(E.units);b+=(w>0?" ":"")+E.strValue}if(l.validate&&!l.validate(g,y))return null;if(l.singleEnum&&x)if(g.length===1&&J(g[0]))return{name:n,value:g[0],strValue:g[0],bypass:i};else return null;return{name:n,value:g,pfValue:m,strValue:b,bypass:i,units:y}}var T=function e(){for(var t=0;t<l.enums.length;t++){var r=l.enums[t];if(r===a)return{name:n,value:a,strValue:""+a,bypass:i}}return null};if(l.number){var _;var D="px";if(l.units)_=l.units;if(l.implicitUnits)D=l.implicitUnits;if(!l.unitless)if(s){var C="px|em"+(l.allowPercent?"|\\%":"");if(_)C=_;var N=a.match("^("+j+")("+C+")?$");if(N){a=N[1];_=N[2]||D}}else if(!_||l.implicitUnits)_=D;a=parseFloat(a);if(isNaN(a)&&l.enums===void 0)return null;if(isNaN(a)&&l.enums!==void 0){a=R;return T()}if(l.integer&&!$(a))return null;if(l.min!==void 0&&(a<l.min||l.strictMin&&a===l.min)||l.max!==void 0&&(a>l.max||l.strictMax&&a===l.max))return null;var A={name:n,value:a,strValue:""+a+(_?_:""),units:_,bypass:i};if(l.unitless||_!=="px"&&_!=="em")A.pfValue=a;else A.pfValue=_==="px"||!_?a:this.getEmSizeInPixels()*a;if(_==="ms"||_==="s")A.pfValue=_==="ms"?a:1e3*a;if(_==="deg"||_==="rad")A.pfValue=_==="rad"?a:jr(a);if(_==="%")A.pfValue=a/100;return A}else if(l.propList){var L=[];var S=""+a;if(S==="none");else{var G=S.split(/\s*,\s*|\s+/);for(var I=0;I<G.length;I++){var k=G[I].trim();if(t.properties[k])L.push(k);else ee("`"+k+"` is not a valid property name")}if(L.length===0)return null}return{name:n,value:L,strValue:L.length===0?"none":L.join(" "),bypass:i}}else if(l.color){var O=Le(a);if(!O)return null;return{name:n,value:O,pfValue:O,strValue:"rgb("+O[0]+","+O[1]+","+O[2]+")",bypass:i}}else if(l.regex||l.regexes){if(l.enums){var Y=T();if(Y)return Y}var X=l.regexes?l.regexes:[l.regex];for(var M=0;M<X.length;M++){var V=new RegExp(X[M]);var P=V.exec(a);if(P)return{name:n,value:l.singleRegexMatchValue?P[1]:P,strValue:""+a,bypass:i}}return null}else if(l.string)return{name:n,value:""+a,strValue:""+a,bypass:i};else if(l.enums)return T();else return null}},d=function e(t){if(!(this instanceof e))return new e(t);if(!ne(t)){z("A style must have a core reference");return}this._private={cy:t,coreStyle:{}};this.length=0;this.resetToDefault()},y=d.prototype,Ch=(y.instanceString=function(){return"style"},y.clear=function(){var e=this._private;var t=e.cy;var r=t.elements();for(var n=0;n<this.length;n++)this[n]=void 0;this.length=0;e.contextStyles={};e.propDiffs={};this.cleanElements(r,true);r.forEach(function(e){var t=e[0]._private;t.styleDirty=true;t.appliedInitStyle=false});return this},y.resetToDefault=function(){this.clear();this.addDefaultStylesheet();return this},y.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},y.selector=function(e){var t=e==="core"?null:new _l(e);var r=this.length++;this[r]={selector:t,properties:[],mappedProperties:[],index:r};return this},y.css=function(){var e=this;var t=arguments;if(t.length===1){var r=t[0];for(var n=0;n<e.properties.length;n++){var a=e.properties[n];var i=r[a.name];if(i===void 0)i=r[fe(a.name)];if(i!==void 0)this.cssRule(a.name,i)}}else if(t.length===2)this.cssRule(t[0],t[1]);return this},y.style=y.css,y.cssRule=function(e,t){var r=this.parse(e,t);if(r){var n=this.length-1;this[n].properties.push(r);this[n].properties[r.name]=r;if(r.name.match(/pie-(\d+)-background-size/)&&r.value)this._private.hasPie=true;if(r.mapped)this[n].mappedProperties.push(r);var a=!this[n].selector;if(a)this._private.coreStyle[r.name]=r}return this},y.append=function(e){if(ae(e))e.appendToStyle(this);else if(K(e))this.appendFromJson(e);else if(J(e))this.appendFromString(e);return this},d.fromJson=function(e,t){var r=new d(e);r.fromJson(t);return r},d.fromString=function(e,t){return new d(e).fromString(t)},[l,Oc,Mc,Pc,Rc,Bc,h,Dh].forEach(function(e){T(y,e)}),d.types=y.types,d.properties=y.properties,d.propertyGroups=y.propertyGroups,d.propertyGroupNames=y.propertyGroupNames,d.propertyGroupKeys=y.propertyGroupKeys,{style:function e(t){if(t){var r=this.setStyle(t);r.update()}return this._private.style},setStyle:function e(t){var r=this._private;if(ae(t))r.style=t.generateStyle(this);else if(K(t))r.style=d.fromJson(this,t);else if(J(t))r.style=d.fromString(this,t);else r.style=d(this);return r.style},updateStyle:function e(){this.mutableElements().updateStyle()}}),Nh="single",Ah={autolock:function e(t){if(t!==void 0)this._private.autolock=t?true:false;else return this._private.autolock;return this},autoungrabify:function e(t){if(t!==void 0)this._private.autoungrabify=t?true:false;else return this._private.autoungrabify;return this},autounselectify:function e(t){if(t!==void 0)this._private.autounselectify=t?true:false;else return this._private.autounselectify;return this},selectionType:function e(t){var r=this._private;if(r.selectionType==null)r.selectionType=Nh;if(t!==void 0){if(t==="additive"||t==="single")r.selectionType=t}else return r.selectionType;return this},panningEnabled:function e(t){if(t!==void 0)this._private.panningEnabled=t?true:false;else return this._private.panningEnabled;return this},userPanningEnabled:function e(t){if(t!==void 0)this._private.userPanningEnabled=t?true:false;else return this._private.userPanningEnabled;return this},zoomingEnabled:function e(t){if(t!==void 0)this._private.zoomingEnabled=t?true:false;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function e(t){if(t!==void 0)this._private.userZoomingEnabled=t?true:false;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function e(t){if(t!==void 0)this._private.boxSelectionEnabled=t?true:false;else return this._private.boxSelectionEnabled;return this},pan:function e(){var t=arguments;var r=this._private.pan;var n,a,i,o,s;switch(t.length){case 0:return r;case 1:if(J(t[0])){n=t[0];return r[n]}else if(I(t[0])){if(!this._private.panningEnabled)return this;i=t[0];o=i.x;s=i.y;if(me(o))r.x=o;if(me(s))r.y=s;this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=t[0];a=t[1];if((n==="x"||n==="y")&&me(a))r[n]=a;this.emit("pan viewport");break}this.notify("viewport");return this},panBy:function e(t,r){var n=arguments;var a=this._private.pan;var i,o,s,l,u;if(!this._private.panningEnabled)return this;switch(n.length){case 1:if(I(t)){s=n[0];l=s.x;u=s.y;if(me(l))a.x+=l;if(me(u))a.y+=u;this.emit("pan viewport")}break;case 2:i=t;o=r;if((i==="x"||i==="y")&&me(o))a[i]+=o;this.emit("pan viewport");break}this.notify("viewport");return this},fit:function e(t,r){var n=this.getFitViewport(t,r);if(n){var a=this._private;a.zoom=n.zoom;a.pan=n.pan;this.emit("pan zoom viewport");this.notify("viewport")}return this},getFitViewport:function e(t,r){if(me(t)&&r===void 0){r=t;t=void 0}if(!this._private.panningEnabled||!this._private.zoomingEnabled)return;var n;if(J(t)){var a=t;t=this.$(a)}else if(le(t)){var i=t;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2};n.w=n.x2-n.x1;n.h=n.y2-n.y1}else if(!Q(t))t=this.mutableElements();if(Q(t)&&t.empty())return;n=n||t.boundingBox();var o=this.width();var s=this.height();var l;r=me(r)?r:0;if(!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((o-2*r)/n.w,(s-2*r)/n.h);l=l>this._private.maxZoom?this._private.maxZoom:l;l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(o-l*(n.x1+n.x2))/2,y:(s-l*(n.y1+n.y2))/2};return{zoom:l,pan:u}}return},zoomRange:function e(t,r){var n=this._private;if(r==null){var a=t;t=a.min;r=a.max}if(me(t)&&me(r)&&t<=r){n.minZoom=t;n.maxZoom=r}else if(me(t)&&r===void 0&&t<=n.maxZoom)n.minZoom=t;else if(me(r)&&t===void 0&&r>=n.minZoom)n.maxZoom=r;return this},minZoom:function e(t){if(t===void 0)return this._private.minZoom;else return this.zoomRange({min:t})},maxZoom:function e(t){if(t===void 0)return this._private.maxZoom;else return this.zoomRange({max:t})},getZoomedViewport:function e(t){var r=this._private;var n=r.pan;var a=r.zoom;var i;var o;var s=false;if(!r.zoomingEnabled)s=true;if(me(t))o=t;else if(I(t)){o=t.level;if(t.position!=null)i=Fr(t.position,a,n);else if(t.renderedPosition!=null)i=t.renderedPosition;if(i!=null&&!r.panningEnabled)s=true}o=o>r.maxZoom?r.maxZoom:o;o=o<r.minZoom?r.minZoom:o;if(s||!me(o)||o===a||i!=null&&(!me(i.x)||!me(i.y)))return null;if(i!=null){var l=n;var u=a;var c=o;var h={x:-c/u*(i.x-l.x)+i.x,y:-c/u*(i.y-l.y)+i.y};return{zoomed:true,panned:true,zoom:c,pan:h}}else return{zoomed:true,panned:false,zoom:o,pan:n}},zoom:function e(t){if(t===void 0)return this._private.zoom;else{var r=this.getZoomedViewport(t);var n=this._private;if(r==null||!r.zoomed)return this;n.zoom=r.zoom;if(r.panned){n.pan.x=r.pan.x;n.pan.y=r.pan.y}this.emit("zoom"+(r.panned?" pan":"")+" viewport");this.notify("viewport");return this}},viewport:function e(t){var r=this._private;var n=true;var a=true;var i=[];var o=false;var s=false;if(!t)return this;if(!me(t.zoom))n=false;if(!I(t.pan))a=false;if(!n&&!a)return this;if(n){var l=t.zoom;if(l<r.minZoom||l>r.maxZoom||!r.zoomingEnabled)o=true;else{r.zoom=l;i.push("zoom")}}if(a&&(!o||!t.cancelOnFailedZoom)&&r.panningEnabled){var u=t.pan;if(me(u.x)){r.pan.x=u.x;s=false}if(me(u.y)){r.pan.y=u.y;s=false}if(!s)i.push("pan")}if(i.length>0){i.push("viewport");this.emit(i.join(" "));this.notify("viewport")}return this},center:function e(t){var r=this.getCenterPan(t);if(r){this._private.pan=r;this.emit("pan viewport");this.notify("viewport")}return this},getCenterPan:function e(t,r){if(!this._private.panningEnabled)return;if(J(t)){var n=t;t=this.mutableElements().filter(n)}else if(!Q(t))t=this.mutableElements();if(t.length===0)return;var a=t.boundingBox();var i=this.width();var o=this.height();r=r===void 0?this._private.zoom:r;var s={x:(i-r*(a.x1+a.x2))/2,y:(o-r*(a.y1+a.y2))/2};return s},reset:function e(){if(!this._private.panningEnabled||!this._private.zoomingEnabled)return this;this.viewport({pan:{x:0,y:0},zoom:1});return this},invalidateSize:function e(){this._private.sizeCache=null},size:function e(){var t=this._private;var n=t.container;return t.sizeCache=t.sizeCache||(n?function(){var r=g.getComputedStyle(n);var e=function e(t){return parseFloat(r.getPropertyValue(t))};return{width:n.clientWidth-e("padding-left")-e("padding-right"),height:n.clientHeight-e("padding-top")-e("padding-bottom")}}():{width:1,height:1})},width:function e(){return this.size().width},height:function e(){return this.size().height},extent:function e(){var t=this._private.pan;var r=this._private.zoom;var n=this.renderedExtent();var a={x1:(n.x1-t.x)/r,x2:(n.x2-t.x)/r,y1:(n.y1-t.y)/r,y2:(n.y2-t.y)/r};a.w=a.x2-a.x1;a.h=a.y2-a.y1;return a},renderedExtent:function e(){var t=this.width();var r=this.height();return{x1:0,y1:0,x2:t,y2:r,w:t,h:r}},multiClickDebounceTime:function e(t){if(t)this._private.multiClickDebounceTime=t;else return this._private.multiClickDebounceTime;return this}},Lh=(Ah.centre=Ah.center,Ah.autolockNodes=Ah.autolock,Ah.autoungrabifyNodes=Ah.autoungrabify,{data:_.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,updateStyle:true}),removeData:_.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true,updateStyle:true}),scratch:_.data({field:"scratch",bindingEvent:"scratch",allowBinding:true,allowSetting:true,settingEvent:"scratch",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,updateStyle:true}),removeScratch:_.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:true,updateStyle:true})}),Sh=(Lh.attr=Lh.data,Lh.removeAttr=Lh.removeData,function e(t){var o=this;t=T({},t);var r=t.container;if(r&&!Z(r)&&Z(r[0]))r=r[0];var n=r?r._cyreg:null;n=n||{};if(n&&n.cy){n.cy.destroy();n={}}var a=n.readies=n.readies||[];if(r)r._cyreg=n;n.cy=o;var i=g!==void 0&&r!==void 0&&!t.headless;var s=t;s.layout=T({name:i?"grid":"null"},s.layout);s.renderer=T({name:i?"canvas":"null"},s.renderer);var l=function e(t,r,n){if(r!==void 0)return r;else if(n!==void 0)return n;else return t};var u=this._private={container:r,ready:false,options:s,elements:new G(this),listeners:[],aniEles:new G(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:false,notificationsEnabled:true,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(true,s.zoomingEnabled),userZoomingEnabled:l(true,s.userZoomingEnabled),panningEnabled:l(true,s.panningEnabled),userPanningEnabled:l(true,s.userPanningEnabled),boxSelectionEnabled:l(true,s.boxSelectionEnabled),autolock:l(false,s.autolock,s.autolockNodes),autoungrabify:l(false,s.autoungrabify,s.autoungrabifyNodes),autounselectify:l(false,s.autounselectify),styleEnabled:s.styleEnabled===void 0?i:s.styleEnabled,zoom:me(s.zoom)?s.zoom:1,pan:{x:I(s.pan)&&me(s.pan.x)?s.pan.x:0,y:I(s.pan)&&me(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:false,multiClickDebounceTime:l(250,s.multiClickDebounceTime)};this.createEmitter();this.selectionType(s.selectionType);this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function e(t,r){var n=t.some(ue);if(n)return gi.all(t).then(r);else r(t)};if(u.styleEnabled)o.setStyle([]);var h=T({},s,s.renderer);o.initRenderer(h);var v=function e(t,r,n){o.notifications(false);var a=o.mutableElements();if(a.length>0)a.remove();if(t!=null)if(I(t)||K(t))o.add(t);o.one("layoutready",function(e){o.notifications(true);o.emit(e);o.one("load",r);o.emitAndNotify("load")}).one("layoutstop",function(){o.one("done",n);o.emit("done")});var i=T({},o._private.options.layout);i.eles=o.elements();o.layout(i).run()};c([s.style,s.elements],function(e){var t=e[0];var r=e[1];if(u.styleEnabled)o.style().append(t);v(r,function(){o.startAnimationLoop();u.ready=true;if(U(s.ready))o.on("ready",s.ready);for(var e=0;e<a.length;e++){var t=a[e];o.on("ready",t)}if(n)n.readies=[];o.emit("ready")},s.done)})}),Ih=Sh.prototype,kh=(T(Ih,{instanceString:function e(){return"core"},isReady:function e(){return this._private.ready},destroyed:function e(){return this._private.destroyed},ready:function e(t){if(this.isReady())this.emitter().emit("ready",[],t);else this.on("ready",t);return this},destroy:function e(){var t=this;if(t.destroyed())return;t.stopAnimationLoop();t.destroyRenderer();this.emit("destroy");t._private.destroyed=true;return t},hasElementWithId:function e(t){return this._private.elements.hasElementWithId(t)},getElementById:function e(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function e(){return this._private.hasCompoundNodes},headless:function e(){return this._private.renderer.isHeadless()},styleEnabled:function e(){return this._private.styleEnabled},addToPool:function e(t){this._private.elements.merge(t);return this},removeFromPool:function e(t){this._private.elements.unmerge(t);return this},container:function e(){return this._private.container||null},mount:function e(t){if(t==null)return;var r=this;var n=r._private;var a=n.options;if(!Z(t)&&Z(t[0]))t=t[0];r.stopAnimationLoop();r.destroyRenderer();n.container=t;n.styleEnabled=true;r.invalidateSize();r.initRenderer(T({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name}));r.startAnimationLoop();r.style(a.style);r.emit("mount");return r},unmount:function e(){var t=this;t.stopAnimationLoop();t.destroyRenderer();t.initRenderer({name:"null"});t.emit("unmount");return t},options:function e(){return ar(this._private.options)},json:function e(t){var f=this;var r=f._private;var n=f.mutableElements();var a=function e(t){return f.getElementById(t.id())};if(I(t)){f.startBatch();if(t.elements){var d={};var i=function e(t,r){var n=[];var a=[];for(var i=0;i<t.length;i++){var o=t[i];if(!o.data.id){ee("cy.json() cannot handle elements without an ID attribute");continue}var s=""+o.data.id;var l=f.getElementById(s);d[s]=true;if(l.length!==0)a.push({ele:l,json:o});else if(r){o.group=r;n.push(o)}else n.push(o)}f.add(n);for(var u=0;u<a.length;u++){var c=a[u],h=c.ele,v=c.json;h.json(v)}};if(K(t.elements))i(t.elements);else{var o=["nodes","edges"];for(var s=0;s<o.length;s++){var l=o[s];var u=t.elements[l];if(K(u))i(u,l)}}var c=f.collection();n.filter(function(e){return!d[e.id()]}).forEach(function(e){if(e.isParent())c.merge(e);else e.remove()});c.forEach(function(e){return e.children().move({parent:null})});c.forEach(function(e){return a(e).remove()})}if(t.style)f.style(t.style);if(t.zoom!=null&&t.zoom!==r.zoom)f.zoom(t.zoom);if(t.pan)if(t.pan.x!==r.pan.x||t.pan.y!==r.pan.y)f.pan(t.pan);if(t.data)f.data(t.data);var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"];for(var v=0;v<h.length;v++){var p=h[v];if(t[p]!=null)f[p](t[p])}f.endBatch();return this}else{var g=!!t;var y={};if(g)y.elements=this.elements().map(function(e){return e.json()});else{y.elements={};n.forEach(function(e){var t=e.group();if(!y.elements[t])y.elements[t]=[];y.elements[t].push(e.json())})}if(this._private.styleEnabled)y.style=f.style().json();y.data=ar(f.data());var m=r.options;y.zoomingEnabled=r.zoomingEnabled;y.userZoomingEnabled=r.userZoomingEnabled;y.zoom=r.zoom;y.minZoom=r.minZoom;y.maxZoom=r.maxZoom;y.panningEnabled=r.panningEnabled;y.userPanningEnabled=r.userPanningEnabled;y.pan=ar(r.pan);y.boxSelectionEnabled=r.boxSelectionEnabled;y.renderer=ar(m.renderer);y.hideEdgesOnViewport=m.hideEdgesOnViewport;y.textureOnViewport=m.textureOnViewport;y.wheelSensitivity=m.wheelSensitivity;y.motionBlur=m.motionBlur;y.multiClickDebounceTime=m.multiClickDebounceTime;return y}}}),Ih.$id=Ih.getElementById,[cc,wc,_c,Dc,Cc,Nc,Lc,Sc,Ch,Ah,Lh].forEach(function(e){T(Ih,e)}),{fit:true,directed:false,padding:30,circle:false,grid:false,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:true,nodeDimensionsIncludeLabels:false,roots:void 0,maximal:false,depthSort:void 0,animate:false,animationDuration:500,animationEasing:void 0,animateFilter:function e(t,r){return true},ready:void 0,stop:void 0,transform:function e(t,r){return r}}),Oh=function e(t){return t.scratch("breadthfirst")},Mh=function e(t,r){return t.scratch("breadthfirst",r)};function Ph(e){this.options=T({},kh,e)}Ph.prototype.run=function(){var e=this.options;var v=e;var t=e.cy;var c=v.eles;var f=c.nodes().filter(function(e){return!e.isParent()});var r=c;var n=v.directed;var R=v.maximal||v.maximalAdjustments>0;var d=tn(v.boundingBox?v.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});var i;if(Q(v.roots))i=v.roots;else if(K(v.roots)){var a=[];for(var o=0;o<v.roots.length;o++){var B=v.roots[o];var F=t.getElementById(B);a.push(F)}i=t.collection(a)}else if(J(v.roots))i=t.$(v.roots);else if(n)i=f.roots();else{var s=c.components();i=t.collection();var z=function e(t){var r=s[t];var n=r.maxDegree(false);var a=r.filter(function(e){return e.degree(false)===n});i=i.add(a)};for(var l=0;l<s.length;l++)z(l)}var p=[];var u={};var h=function e(t,r){if(p[r]==null)p[r]=[];var n=p[r].length;p[r].push(t);Mh(t,{index:n,depth:r})};var G=function e(t,r){var n=Oh(t),a=n.depth,i=n.index;p[a][i]=null;h(t,r)};r.bfs({roots:i,directed:v.directed,visit:function e(t,r,n,a,i){var o=t[0];var s=o.id();h(o,i);u[s]=true}});var g=[];for(var y=0;y<f.length;y++){var m=f[y];if(u[m.id()])continue;else g.push(m)}var b=function e(t){var r=p[t];for(var n=0;n<r.length;n++){var a=r[n];if(a==null){r.splice(n,1);n--;continue}Mh(a,{depth:t,index:n})}};var x=function e(){for(var t=0;t<p.length;t++)b(t)};var Y=function e(t,r){var n=Oh(t);var a=t.incomers().filter(function(e){return e.isNode()&&c.has(e)});var i=-1;var o=t.id();for(var s=0;s<a.length;s++){var l=a[s];var u=Oh(l);i=Math.max(i,u.depth)}if(n.depth<=i){if(r[o])return null;G(t,i+1);r[o]=true;return true}return false};if(n&&R){var w=[];var X={};var V=function e(t){return w.push(t)};var U=function e(){return w.shift()};f.forEach(function(e){return w.push(e)});while(w.length>0){var E=U();var T=Y(E,X);if(T)E.outgoers().filter(function(e){return e.isNode()&&c.has(e)}).forEach(V);else if(T===null){ee("Detected double maximal shift for node `"+E.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}x();var _=0;if(v.avoidOverlap)for(var D=0;D<f.length;D++){var j=f[D];var C=j.layoutDimensions(v);var q=C.w;var H=C.h;_=Math.max(_,q,H)}var N={};var A=function e(t){if(N[t.id()])return N[t.id()];var r=Oh(t).depth;var n=t.neighborhood();var a=0;var i=0;for(var o=0;o<n.length;o++){var s=n[o];if(s.isEdge()||s.isParent()||!f.has(s))continue;var l=Oh(s);if(l==null)continue;var u=l.index;var c=l.depth;if(u==null||c==null)continue;var h=p[c].length;if(c<r){a+=u/h;i++}}i=Math.max(1,i);a=a/i;if(i===0)a=0;N[t.id()]=a;return a};var L=function e(t,r){var n=A(t);var a=A(r);var i=n-a;if(i===0)return Te(t.id(),r.id());else return i};if(v.depthSort!==void 0)L=v.depthSort;for(var S=0;S<p.length;S++){p[S].sort(L);b(S)}var I=[];for(var k=0;k<g.length;k++)I.push(g[k]);p.unshift(I);x();var O=0;for(var M=0;M<p.length;M++)O=Math.max(p[M].length,O);var P={x:d.x1+d.w/2,y:d.x1+d.h/2};var W=p.reduce(function(e,t){return Math.max(e,t.length)},0);var $=function e(t){var r=Oh(t),n=r.depth,a=r.index;var i=p[n].length;var o=Math.max(d.w/((v.grid?W:i)+1),_);var s=Math.max(d.h/(p.length+1),_);var l=Math.min(d.w/2/p.length,d.h/2/p.length);l=Math.max(l,_);if(!v.circle){var u={x:P.x+(a+1-(i+1)/2)*o,y:(n+1)*s};return u}else{var c=l*n+l-(p.length>0&&p[0].length<=3?l/2:0);var h=2*Math.PI/p[n].length*a;if(n===0&&p[0].length===1)c=1;return{x:P.x+c*Math.cos(h),y:P.y+c*Math.sin(h)}}};c.nodes().layoutPositions(this,v,$);return this};var Rh={fit:true,padding:30,boundingBox:void 0,avoidOverlap:true,nodeDimensionsIncludeLabels:false,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:true,sort:void 0,animate:false,animationDuration:500,animationEasing:void 0,animateFilter:function e(t,r){return true},ready:void 0,stop:void 0,transform:function e(t,r){return r}};function Bh(e){this.options=T({},Rh,e)}Bh.prototype.run=function(){var e=this.options;var s=e;var t=e.cy;var r=s.eles;var l=s.counterclockwise!==void 0?!s.counterclockwise:s.clockwise;var n=r.nodes().not(":parent");if(s.sort)n=n.sort(s.sort);var a=tn(s.boundingBox?s.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});var u={x:a.x1+a.w/2,y:a.y1+a.h/2};var i=s.sweep===void 0?2*Math.PI-2*Math.PI/n.length:s.sweep;var c=i/Math.max(1,n.length-1);var h;var o=0;for(var v=0;v<n.length;v++){var f=n[v];var d=f.layoutDimensions(s);var p=d.w;var g=d.h;o=Math.max(o,p,g)}if(me(s.radius))h=s.radius;else if(n.length<=1)h=0;else h=Math.min(a.h,a.w)/2-o;if(n.length>1&&s.avoidOverlap){o*=1.75;var y=Math.cos(c)-Math.cos(0);var m=Math.sin(c)-Math.sin(0);var b=Math.sqrt(o*o/(y*y+m*m));h=Math.max(b,h)}var x=function e(t,r){var n=s.startAngle+r*c*(l?1:-1);var a=h*Math.cos(n);var i=h*Math.sin(n);var o={x:u.x+a,y:u.y+i};return o};r.nodes().layoutPositions(this,s,x);return this};var Fh={fit:true,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:true,equidistant:false,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:true,nodeDimensionsIncludeLabels:false,height:void 0,width:void 0,spacingFactor:void 0,concentric:function e(t){return t.degree()},levelWidth:function e(t){return t.maxDegree()/4},animate:false,animationDuration:500,animationEasing:void 0,animateFilter:function e(t,r){return true},ready:void 0,stop:void 0,transform:function e(t,r){return r}},zh;function Gh(e){this.options=T({},Fh,e)}Gh.prototype.run=function(){var e=this.options;var t=e;var R=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise;var r=e.cy;var n=t.eles;var a=n.nodes().not(":parent");var i=tn(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});var o={x:i.x1+i.w/2,y:i.y1+i.h/2};var s=[];var l=0;for(var u=0;u<a.length;u++){var c=a[u];var h=void 0;h=t.concentric(c);s.push({value:h,node:c});c._private.scratch.concentric=h}a.updateStyle();for(var v=0;v<a.length;v++){var B=a[v];var f=B.layoutDimensions(t);l=Math.max(l,f.w,f.h)}s.sort(function(e,t){return t.value-e.value});var F=t.levelWidth(a);var d=[[]];var p=d[0];for(var g=0;g<s.length;g++){var y=s[g];if(p.length>0){var z=Math.abs(p[0].value-y.value);if(z>=F){p=[];d.push(p)}}p.push(y)}var m=l+t.minNodeSpacing;if(!t.avoidOverlap){var G=d.length>0&&d[0].length>1;var Y=Math.min(i.w,i.h)/2-m;var X=Y/(d.length+G?1:0);m=Math.min(m,X)}var b=0;for(var x=0;x<d.length;x++){var w=d[x];var V=t.sweep===void 0?2*Math.PI-2*Math.PI/w.length:t.sweep;var E=w.dTheta=V/Math.max(1,w.length-1);if(w.length>1&&t.avoidOverlap){var T=Math.cos(E)-Math.cos(0);var _=Math.sin(E)-Math.sin(0);var U=Math.sqrt(m*m/(T*T+_*_));b=Math.max(U,b)}w.r=b;b+=m}if(t.equidistant){var D=0;var C=0;for(var N=0;N<d.length;N++){var j=d[N];var q=j.r-C;D=Math.max(D,q)}C=0;for(var A=0;A<d.length;A++){var L=d[A];if(A===0)C=L.r;L.r=C;C+=D}}var S={};for(var I=0;I<d.length;I++){var k=d[I];var H=k.dTheta;var O=k.r;for(var M=0;M<k.length;M++){var W=k[M];var P=t.startAngle+(R?1:-1)*H*M;var $={x:o.x+O*Math.cos(P),y:o.y+O*Math.sin(P)};S[W.node.id()]=$}}n.nodes().layoutPositions(this,t,function(e){var t=e.id();return S[t]});return this};var Yh={ready:function e(){},stop:function e(){},animate:true,animationEasing:void 0,animationDuration:void 0,animateFilter:function e(t,r){return true},animationThreshold:250,refresh:20,fit:true,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:false,randomize:false,componentSpacing:40,nodeRepulsion:function e(t){return 2048},nodeOverlap:4,idealEdgeLength:function e(t){return 32},edgeElasticity:function e(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Xh(e){this.options=T({},Yh,e);this.options.layout=this}Xh.prototype.run=function(){var n=this.options;var t=n.cy;var a=this;a.stopped=false;if(n.animate===true||n.animate===false)a.emit({type:"layoutstart",layout:a});if(true===n.debug)zh=true;else zh=false;var i=Vh(t,a,n);if(zh)qh(i);if(n.randomize)Hh(i);var o=Mt();var s=function e(){$h(i,t,n);if(true===n.fit)t.fit(n.padding)};var l=function e(t){if(a.stopped||t>=n.numIter)return false;Kh(i,n);i.temperature=i.temperature*n.coolingFactor;if(i.temperature<n.minTemp)return false;return true};var u=function e(){if(n.animate===true||n.animate===false){s();a.one("layoutstop",n.stop);a.emit({type:"layoutstop",layout:a})}else{var t=n.eles.nodes();var r=Wh(i,n,t);t.layoutPositions(a,n,r)}};var c=0;var h=true;if(n.animate===true){var e=function e(){var t=0;while(h&&t<n.refresh){h=l(c);c++;t++}if(!h){lv(i,n);u()}else{var r=Mt();if(r-o>=n.animationThreshold)s();Ot(e)}};e()}else{while(h){h=l(c);c++}lv(i,n);u()}return this},Xh.prototype.stop=function(){this.stopped=true;if(this.thread)this.thread.stop();this.emit("layoutstop");return this},Xh.prototype.destroy=function(){if(this.thread)this.thread.stop();return this};var Vh=function P(e,R,t){var r=t.eles.edges();var n=t.eles.nodes();var a={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:n.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:t.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:tn(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})};var i=t.eles.components();var o={};for(var s=0;s<i.length;s++){var l=i[s];for(var u=0;u<l.length;u++){var c=l[u];o[c.id()]=s}}for(var s=0;s<a.nodeSize;s++){var h=n[s];var v=h.layoutDimensions(t);var f={};f.isLocked=h.locked();f.id=h.data("id");f.parentId=h.data("parent");f.cmptId=o[h.id()];f.children=[];f.positionX=h.position("x");f.positionY=h.position("y");f.offsetX=0;f.offsetY=0;f.height=v.w;f.width=v.h;f.maxX=f.positionX+f.width/2;f.minX=f.positionX-f.width/2;f.maxY=f.positionY+f.height/2;f.minY=f.positionY-f.height/2;f.padLeft=parseFloat(h.style("padding"));f.padRight=parseFloat(h.style("padding"));f.padTop=parseFloat(h.style("padding"));f.padBottom=parseFloat(h.style("padding"));f.nodeRepulsion=U(t.nodeRepulsion)?t.nodeRepulsion(h):t.nodeRepulsion;a.layoutNodes.push(f);a.idToIndex[f.id]=s}var d=[];var p=0;var g=-1;var y=[];for(var s=0;s<a.nodeSize;s++){var h=a.layoutNodes[s];var m=h.parentId;if(null!=m)a.layoutNodes[a.idToIndex[m]].children.push(h.id);else{d[++g]=h.id;y.push(h.id)}}a.graphSet.push(y);while(p<=g){var b=d[p++];var x=a.idToIndex[b];var c=a.layoutNodes[x];var w=c.children;if(w.length>0){a.graphSet.push(w);for(var s=0;s<w.length;s++)d[++g]=w[s]}}for(var s=0;s<a.graphSet.length;s++){var E=a.graphSet[s];for(var u=0;u<E.length;u++){var T=a.idToIndex[E[u]];a.indexToGraph[T]=s}}for(var s=0;s<a.edgeSize;s++){var _=r[s];var D={};D.id=_.data("id");D.sourceId=_.data("source");D.targetId=_.data("target");var C=U(t.idealEdgeLength)?t.idealEdgeLength(_):t.idealEdgeLength;var N=U(t.edgeElasticity)?t.edgeElasticity(_):t.edgeElasticity;var A=a.idToIndex[D.sourceId];var L=a.idToIndex[D.targetId];var S=a.indexToGraph[A];var I=a.indexToGraph[L];if(S!=I){var k=Uh(D.sourceId,D.targetId,a);var O=a.graphSet[k];var M=0;var f=a.layoutNodes[A];while(-1===O.indexOf(f.id)){f=a.layoutNodes[a.idToIndex[f.parentId]];M++}f=a.layoutNodes[L];while(-1===O.indexOf(f.id)){f=a.layoutNodes[a.idToIndex[f.parentId]];M++}C*=M*t.nestingFactor}D.idealLength=C;D.elasticity=N;a.layoutEdges.push(D)}return a},Uh=function e(t,r,n){var a=jh(t,r,0,n);if(2>a.count)return 0;else return a.graph},jh=function e(t,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(t)&&-1<i.indexOf(r))return{count:2,graph:n};var o=0;for(var s=0;s<i.length;s++){var l=i[s];var u=a.idToIndex[l];var c=a.layoutNodes[u].children;if(0===c.length)continue;var h=a.indexToGraph[a.idToIndex[c[0]]];var v=e(t,r,h,a);if(0===v.count)continue;else if(1===v.count){o++;if(2===o)break}else return v}return{count:o,graph:n}},qh,Hh=function e(t,r){var n=t.clientWidth;var a=t.clientHeight;for(var i=0;i<t.nodeSize;i++){var o=t.layoutNodes[i];if(0===o.children.length&&!o.isLocked){o.positionX=Math.random()*n;o.positionY=Math.random()*a}}},Wh=function e(i,o,t){var s=i.boundingBox;var l={x1:Infinity,x2:-Infinity,y1:Infinity,y2:-Infinity};if(o.boundingBox){t.forEach(function(e){var t=i.layoutNodes[i.idToIndex[e.data("id")]];l.x1=Math.min(l.x1,t.positionX);l.x2=Math.max(l.x2,t.positionX);l.y1=Math.min(l.y1,t.positionY);l.y2=Math.max(l.y2,t.positionY)});l.w=l.x2-l.x1;l.h=l.y2-l.y1}return function(e,t){var r=i.layoutNodes[i.idToIndex[e.data("id")]];if(o.boundingBox){var n=(r.positionX-l.x1)/l.w;var a=(r.positionY-l.y1)/l.h;return{x:s.x1+n*s.w,y:s.y1+a*s.h}}else return{x:r.positionX,y:r.positionY}}},$h=function e(t,r,n){var a=n.layout;var i=n.eles.nodes();var o=Wh(t,n,i);i.positions(o);if(true!==t.ready){t.ready=true;a.one("layoutready",n.ready);a.emit({type:"layoutready",layout:this})}},Kh=function e(t,r,n){Zh(t,r);rv(t);nv(t,r);av(t);iv(t)},Zh=function e(t,r){for(var n=0;n<t.graphSet.length;n++){var a=t.graphSet[n];var i=a.length;for(var o=0;o<i;o++){var s=t.layoutNodes[t.idToIndex[a[o]]];for(var l=o+1;l<i;l++){var u=t.layoutNodes[t.idToIndex[a[l]]];Jh(s,u,t,r)}}}},Qh=function e(t){return-t+2*t*Math.random()},Jh=function e(t,r,n,a){var i=t.cmptId;var o=r.cmptId;if(i!==o&&!n.isCompound)return;var s=r.positionX-t.positionX;var l=r.positionY-t.positionY;var u=1;if(0===s&&0===l){s=Qh(u);l=Qh(u)}var c=ev(t,r,s,l);if(c>0){var h=a.nodeOverlap*c;var v=Math.sqrt(s*s+l*l);var f=h*s/v;var d=h*l/v}else{var p=tv(t,s,l);var g=tv(r,-1*s,-1*l);var y=g.x-p.x;var m=g.y-p.y;var b=y*y+m*m;var v=Math.sqrt(b);var h=(t.nodeRepulsion+r.nodeRepulsion)/b;var f=h*y/v;var d=h*m/v}if(!t.isLocked){t.offsetX-=f;t.offsetY-=d}if(!r.isLocked){r.offsetX+=f;r.offsetY+=d}return},ev=function e(t,r,n,a){if(n>0)var i=t.maxX-r.minX;else var i=r.maxX-t.minX;if(a>0)var o=t.maxY-r.minY;else var o=r.maxY-t.minY;if(i>=0&&o>=0)return Math.sqrt(i*i+o*o);else return 0},tv=function e(t,r,n){var a=t.positionX;var i=t.positionY;var o=t.height||1;var s=t.width||1;var l=n/r;var u=o/s;var c={};if(0===r&&0<n){c.x=a;c.y=i+o/2;return c}if(0===r&&0>n){c.x=a;c.y=i+o/2;return c}if(0<r&&-1*u<=l&&l<=u){c.x=a+s/2;c.y=i+s*n/2/r;return c}if(0>r&&-1*u<=l&&l<=u){c.x=a-s/2;c.y=i-s*n/2/r;return c}if(0<n&&(l<=-1*u||l>=u)){c.x=a+o*r/2/n;c.y=i+o/2;return c}if(0>n&&(l<=-1*u||l>=u)){c.x=a-o*r/2/n;c.y=i-o/2;return c}return c},rv=function e(t,r){for(var n=0;n<t.edgeSize;n++){var a=t.layoutEdges[n];var i=t.idToIndex[a.sourceId];var o=t.layoutNodes[i];var s=t.idToIndex[a.targetId];var l=t.layoutNodes[s];var u=l.positionX-o.positionX;var c=l.positionY-o.positionY;if(0===u&&0===c)continue;var h=tv(o,u,c);var v=tv(l,-1*u,-1*c);var f=v.x-h.x;var d=v.y-h.y;var p=Math.sqrt(f*f+d*d);var g=Math.pow(a.idealLength-p,2)/a.elasticity;if(0!==p){var y=g*f/p;var m=g*d/p}else{var y=0;var m=0}if(!o.isLocked){o.offsetX+=y;o.offsetY+=m}if(!l.isLocked){l.offsetX-=y;l.offsetY-=m}}},nv=function e(t,r){if(r.gravity===0)return;var n=1;for(var a=0;a<t.graphSet.length;a++){var i=t.graphSet[a];var o=i.length;if(0===a){var s=t.clientHeight/2;var l=t.clientWidth/2}else{var u=t.layoutNodes[t.idToIndex[i[0]]];var c=t.layoutNodes[t.idToIndex[u.parentId]];var s=c.positionX;var l=c.positionY}for(var h=0;h<o;h++){var v=t.layoutNodes[t.idToIndex[i[h]]];if(v.isLocked)continue;var f=s-v.positionX;var d=l-v.positionY;var p=Math.sqrt(f*f+d*d);if(p>n){var g=r.gravity*f/p;var y=r.gravity*d/p;v.offsetX+=g;v.offsetY+=y}}}},av=function e(t,r){var n=[];var a=0;var i=-1;n.push.apply(n,t.graphSet[0]);i+=t.graphSet[0].length;while(a<=i){var o=n[a++];var s=t.idToIndex[o];var l=t.layoutNodes[s];var u=l.children;if(0<u.length&&!l.isLocked){var c=l.offsetX;var h=l.offsetY;for(var v=0;v<u.length;v++){var f=t.layoutNodes[t.idToIndex[u[v]]];f.offsetX+=c;f.offsetY+=h;n[++i]=u[v]}l.offsetX=0;l.offsetY=0}}},iv=function e(t,r){for(var n=0;n<t.nodeSize;n++){var a=t.layoutNodes[n];if(0<a.children.length){a.maxX=void 0;a.minX=void 0;a.maxY=void 0;a.minY=void 0}}for(var n=0;n<t.nodeSize;n++){var a=t.layoutNodes[n];if(0<a.children.length||a.isLocked)continue;var i=ov(a.offsetX,a.offsetY,t.temperature);a.positionX+=i.x;a.positionY+=i.y;a.offsetX=0;a.offsetY=0;a.minX=a.positionX-a.width;a.maxX=a.positionX+a.width;a.minY=a.positionY-a.height;a.maxY=a.positionY+a.height;sv(a,t)}for(var n=0;n<t.nodeSize;n++){var a=t.layoutNodes[n];if(0<a.children.length&&!a.isLocked){a.positionX=(a.maxX+a.minX)/2;a.positionY=(a.maxY+a.minY)/2;a.width=a.maxX-a.minX;a.height=a.maxY-a.minY}}},ov=function e(t,r,n){var a=Math.sqrt(t*t+r*r);if(a>n)var i={x:n*t/a,y:n*r/a};else var i={x:t,y:r};return i},sv=function e(t,r){var n=t.parentId;if(null==n)return;var a=r.layoutNodes[r.idToIndex[n]];var i=false;if(null==a.maxX||t.maxX+a.padRight>a.maxX){a.maxX=t.maxX+a.padRight;i=true}if(null==a.minX||t.minX-a.padLeft<a.minX){a.minX=t.minX-a.padLeft;i=true}if(null==a.maxY||t.maxY+a.padBottom>a.maxY){a.maxY=t.maxY+a.padBottom;i=true}if(null==a.minY||t.minY-a.padTop<a.minY){a.minY=t.minY-a.padTop;i=true}if(i)return e(a,r);return},lv=function e(t,r){var n=t.layoutNodes;var a=[];for(var i=0;i<n.length;i++){var o=n[i];var s=o.cmptId;var l=a[s]=a[s]||[];l.push(o)}var u=0;for(var i=0;i<a.length;i++){var c=a[i];if(!c)continue;c.x1=Infinity;c.x2=-Infinity;c.y1=Infinity;c.y2=-Infinity;for(var h=0;h<c.length;h++){var v=c[h];c.x1=Math.min(c.x1,v.positionX-v.width/2);c.x2=Math.max(c.x2,v.positionX+v.width/2);c.y1=Math.min(c.y1,v.positionY-v.height/2);c.y2=Math.max(c.y2,v.positionY+v.height/2)}c.w=c.x2-c.x1;c.h=c.y2-c.y1;u+=c.w*c.h}a.sort(function(e,t){return t.w*t.h-e.w*e.h});var f=0;var d=0;var p=0;var g=0;var y=Math.sqrt(u)*t.clientWidth/t.clientHeight;for(var i=0;i<a.length;i++){var c=a[i];if(!c)continue;for(var h=0;h<c.length;h++){var v=c[h];if(!v.isLocked){v.positionX+=f-c.x1;v.positionY+=d-c.y1}}f+=c.w+r.componentSpacing;p+=c.w+r.componentSpacing;g=Math.max(g,c.h);if(p>y){d+=g+r.componentSpacing;f=0;p=0;g=0}}},uv={fit:true,padding:30,boundingBox:void 0,avoidOverlap:true,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:false,spacingFactor:void 0,condense:false,rows:void 0,cols:void 0,position:function e(t){},sort:void 0,animate:false,animationDuration:500,animationEasing:void 0,animateFilter:function e(t,r){return true},ready:void 0,stop:void 0,transform:function e(t,r){return r}};function cv(e){this.options=T({},uv,e)}cv.prototype.run=function(){var e=this.options;var t=e;var r=e.cy;var n=t.eles;var a=n.nodes().not(":parent");if(t.sort)a=a.sort(t.sort);var o=tn(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(o.h===0||o.w===0)n.nodes().layoutPositions(this,t,function(e){return{x:o.x1,y:o.y1}});else{var i=a.size();var s=Math.sqrt(i*o.h/o.w);var l=Math.round(s);var u=Math.round(o.w/o.h*s);var c=function e(t){if(t==null)return Math.min(l,u);else{var r=Math.min(l,u);if(r==l)l=t;else u=t}};var h=function e(t){if(t==null)return Math.max(l,u);else{var r=Math.max(l,u);if(r==l)l=t;else u=t}};var v=t.rows;var f=t.cols!=null?t.cols:t.columns;if(v!=null&&f!=null){l=v;u=f}else if(v!=null&&f==null){l=v;u=Math.ceil(i/l)}else if(v==null&&f!=null){u=f;l=Math.ceil(i/u)}else if(u*l>i){var d=c();var p=h();if((d-1)*p>=i)c(d-1);else if((p-1)*d>=i)h(p-1)}else while(u*l<i){var g=c();var y=h();if((y+1)*g>=i)h(y+1);else c(g+1)}var m=o.w/u;var b=o.h/l;if(t.condense){m=0;b=0}if(t.avoidOverlap)for(var x=0;x<a.length;x++){var w=a[x];var E=w._private.position;if(E.x==null||E.y==null){E.x=0;E.y=0}var T=w.layoutDimensions(t);var _=t.avoidOverlapPadding;var R=T.w+_;var B=T.h+_;m=Math.max(m,R);b=Math.max(b,B)}var D={};var C=function e(t,r){return D["c-"+t+"-"+r]?true:false};var N=function e(t,r){D["c-"+t+"-"+r]=true};var A=0;var L=0;var S=function e(){L++;if(L>=u){L=0;A++}};var I={};for(var k=0;k<a.length;k++){var O=a[k];var M=t.position(O);if(M&&(M.row!==void 0||M.col!==void 0)){var P={row:M.row,col:M.col};if(P.col===void 0){P.col=0;while(C(P.row,P.col))P.col++}else if(P.row===void 0){P.row=0;while(C(P.row,P.col))P.row++}I[O.id()]=P;N(P.row,P.col)}}var F=function e(t,r){var n,a;if(t.locked()||t.isParent())return false;var i=I[t.id()];if(i){n=i.col*m+m/2+o.x1;a=i.row*b+b/2+o.y1}else{while(C(A,L))S();n=L*m+m/2+o.x1;a=A*b+b/2+o.y1;N(A,L);S()}return{x:n,y:a}};a.layoutPositions(this,t,F)}return this};var hv={ready:function e(){},stop:function e(){}};function vv(e){this.options=T({},hv,e)}vv.prototype.run=function(){var e=this.options;var t=e.eles;var r=this;e.cy;r.emit("layoutstart");t.nodes().positions(function(){return{x:0,y:0}});r.one("layoutready",e.ready);r.emit("layoutready");r.one("layoutstop",e.stop);r.emit("layoutstop");return this},vv.prototype.stop=function(){return this};var fv={positions:void 0,zoom:void 0,pan:void 0,fit:true,padding:30,animate:false,animationDuration:500,animationEasing:void 0,animateFilter:function e(t,r){return true},ready:void 0,stop:void 0,transform:function e(t,r){return r}};function dv(e){this.options=T({},fv,e)}dv.prototype.run=function(){var r=this.options;var e=r.eles;var t=e.nodes();var n=U(r.positions);function a(e){if(r.positions==null)return Br(e.position());if(n)return r.positions(e);var t=r.positions[e._private.data.id];if(t==null)return null;return t}t.layoutPositions(this,r,function(e,t){var r=a(e);if(e.locked()||r==null)return false;return r});return this};var pv={fit:true,padding:30,boundingBox:void 0,animate:false,animationDuration:500,animationEasing:void 0,animateFilter:function e(t,r){return true},ready:void 0,stop:void 0,transform:function e(t,r){return r}};function gv(e){this.options=T({},pv,e)}gv.prototype.run=function(){var e=this.options;var t=e.cy;var r=e.eles;var n=tn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});var a=function e(t,r){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};r.nodes().layoutPositions(this,e,a);return this};var yv=[{name:"breadthfirst",impl:Ph},{name:"circle",impl:Bh},{name:"concentric",impl:Gh},{name:"cose",impl:Xh},{name:"grid",impl:cv},{name:"null",impl:vv},{name:"preset",impl:dv},{name:"random",impl:gv}];function mv(e){this.options=e;this.notifications=0}var bv=function e(){},xv=function e(){throw new Error("A headless instance can not render images")},wv=(mv.prototype={recalculateRenderedStyle:bv,notify:function e(){this.notifications++},init:bv,isHeadless:function e(){return true},png:xv,jpg:xv},{}),Ev=(wv.arrowShapeWidth=.3,wv.registerArrowShapes=function(){var n=this.arrowShapes={};var u=this;var a=function e(t,r,n,a,i,o,s){var l=i.x-n/2-s;var u=i.x+n/2+s;var c=i.y-n/2-s;var h=i.y+n/2+s;var v=l<=t&&t<=u&&c<=r&&r<=h;return v};var c=function e(t,r,n,a,i){var o=t*Math.cos(a)-r*Math.sin(a);var s=t*Math.sin(a)+r*Math.cos(a);var l=o*n;var u=s*n;var c=l+i.x;var h=u+i.y;return{x:c,y:h}};var h=function e(t,r,n,a){var i=[];for(var o=0;o<t.length;o+=2){var s=t[o];var l=t[o+1];i.push(c(s,l,r,n,a))}return i};var v=function e(t){var r=[];for(var n=0;n<t.length;n++){var a=t[n];r.push(a.x,a.y)}return r};var i=function e(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").pfValue*2};var e=function e(t,r){if(J(r))r=n[r];n[t]=T({name:t,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function e(t,r,n,a,i,o){var s=v(h(this.points,n+2*o,a,i));var l=wn(t,r,s);return l},roughCollide:a,draw:function e(t,r,n,a){var i=h(this.points,r,n,a);u.arrowShapeImpl("polygon")(t,i)},spacing:function e(t){return 0},gap:i},r)};e("none",{collide:Jt,roughCollide:Jt,draw:tr,spacing:er,gap:er});e("triangle",{points:[-.15,-.3,0,0,.15,-.3]});e("arrow","triangle");e("triangle-backcurve",{points:n["triangle"].points,controlPoint:[0,-.15],roughCollide:a,draw:function e(t,r,n,a,i){var o=h(this.points,r,n,a);var s=this.controlPoint;var l=c(s[0],s[1],r,n,a);u.arrowShapeImpl(this.name)(t,o,l)},gap:function e(t){return i(t)*.8}});e("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function e(t,r,n,a,i,o,s){var l=v(h(this.points,n+2*s,a,i));var u=v(h(this.pointsTee,n+2*s,a,i));var c=wn(t,r,l)||wn(t,r,u);return c},draw:function e(t,r,n,a,i){var o=h(this.points,r,n,a);var s=h(this.pointsTee,r,n,a);u.arrowShapeImpl(this.name)(t,o,s)}});e("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function e(t,r,n,a,i,o,s){var l=i;var u=Math.pow(l.x-t,2)+Math.pow(l.y-r,2)<=Math.pow((n+2*s)*this.radius,2);var c=v(h(this.points,n+2*s,a,i));return wn(t,r,c)||u},draw:function e(t,r,n,a,i){var o=h(this.pointsTr,r,n,a);u.arrowShapeImpl(this.name)(t,o,a.x,a.y,this.radius*r)},spacing:function e(t){return u.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}});e("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function e(t,r){var n=this.baseCrossLinePts.slice();var a=r/t;var i=3;var o=5;n[i]=n[i]-a;n[o]=n[o]-a;return n},collide:function e(t,r,n,a,i,o,s){var l=v(h(this.points,n+2*s,a,i));var u=v(h(this.crossLinePts(n,o),n+2*s,a,i));var c=wn(t,r,l)||wn(t,r,u);return c},draw:function e(t,r,n,a,i){var o=h(this.points,r,n,a);var s=h(this.crossLinePts(r,i),r,n,a);u.arrowShapeImpl(this.name)(t,o,s)}});e("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function e(t){return i(t)*.525}});e("circle",{radius:.15,collide:function e(t,r,n,a,i,o,s){var l=i;var u=Math.pow(l.x-t,2)+Math.pow(l.y-r,2)<=Math.pow((n+2*s)*this.radius,2);return u},draw:function e(t,r,n,a,i){u.arrowShapeImpl(this.name)(t,a.x,a.y,this.radius*r)},spacing:function e(t){return u.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}});e("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function e(t){return 1},gap:function e(t){return 1}});e("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]});e("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function e(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}});e("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function e(t){return.95*t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}})},{}),Tv=(Ev.projectIntoViewport=function(e,t){var r=this.cy;var n=this.findContainerClientCoords();var a=n[0];var i=n[1];var o=n[4];var s=r.pan();var l=r.zoom();var u=((e-a)/o-s.x)/l;var c=((t-i)/o-s.y)/l;return[u,c]},Ev.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var e=this.container;var t=e.getBoundingClientRect();var r=g.getComputedStyle(e);var n=function e(t){return parseFloat(r.getPropertyValue(t))};var a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")};var i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")};var o=e.clientWidth;var s=e.clientHeight;var l=a.left+a.right;var u=a.top+a.bottom;var c=i.left+i.right;var h=t.width/(o+c);var v=o-l;var f=s-u;var d=t.left+a.left+i.left;var p=t.top+a.top+i.top;return this.containerBB=[d,p,v,f,h]},Ev.invalidateContainerClientCoordsCache=function(){this.containerBB=null},Ev.findNearestElement=function(e,t,r,n){return this.findNearestElements(e,t,r,n)[0]},Ev.findNearestElements=function(D,C,e,t){var m=this;var b=this;var r=b.getCachedZSortedEles();var x=[];var n=b.cy.zoom();var w=b.cy.hasCompoundNodes();var E=(t?24:8)/n;var s=(t?8:2)/n;var N=(t?8:2)/n;var a=Infinity;var i;var o;if(e)r=r.interactive;function A(e,t){if(e.isNode())if(o)return;else{o=e;x.push(e)}if(e.isEdge()&&(t==null||t<a))if(i){if(i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value)for(var r=0;r<x.length;r++)if(x[r].isEdge()){x[r]=e;i=e;a=t!=null?t:a;break}}else{x.push(e);i=e;a=t!=null?t:a}}function T(e){var t=e.outerWidth()+2*s;var r=e.outerHeight()+2*s;var n=t/2;var a=r/2;var i=e.position();if(i.x-n<=D&&D<=i.x+n&&i.y-a<=C&&C<=i.y+a){var o=b.nodeShapes[m.getNodeShape(e)];if(o.checkPoint(D,C,0,t,r,i.x,i.y)){A(e,0);return true}}}function l(e){var t=e._private;var r=t.rscratch;var n=e.pstyle("width").pfValue;var a=e.pstyle("arrow-scale").value;var i=n/2+E;var o=i*i;var s=i*2;var l=t.source;var u=t.target;var c;if(r.edgeType==="segments"||r.edgeType==="straight"||r.edgeType==="haystack"){var h=r.allpts;for(var v=0;v+3<h.length;v+=2)if(pn(D,C,h[v],h[v+1],h[v+2],h[v+3],s)&&o>(c=xn(D,C,h[v],h[v+1],h[v+2],h[v+3]))){A(e,c);return true}}else if(r.edgeType==="bezier"||r.edgeType==="multibezier"||r.edgeType==="self"||r.edgeType==="compound"){var h=r.allpts;for(var v=0;v+5<r.allpts.length;v+=4)if(gn(D,C,h[v],h[v+1],h[v+2],h[v+3],h[v+4],h[v+5],s)&&o>(c=bn(D,C,h[v],h[v+1],h[v+2],h[v+3],h[v+4],h[v+5]))){A(e,c);return true}}var l=l||t.source;var u=u||t.target;var f=m.getArrowWidth(n,a);var d=[{name:"source",x:r.arrowStartX,y:r.arrowStartY,angle:r.srcArrowAngle},{name:"target",x:r.arrowEndX,y:r.arrowEndY,angle:r.tgtArrowAngle},{name:"mid-source",x:r.midX,y:r.midY,angle:r.midsrcArrowAngle},{name:"mid-target",x:r.midX,y:r.midY,angle:r.midtgtArrowAngle}];for(var v=0;v<d.length;v++){var p=d[v];var g=b.arrowShapes[e.pstyle(p.name+"-arrow-shape").value];var y=e.pstyle("width").pfValue;if(g.roughCollide(D,C,f,p.angle,{x:p.x,y:p.y},y,E)&&g.collide(D,C,f,p.angle,{x:p.x,y:p.y},y,E)){A(e);return true}}if(w&&x.length>0){T(l);T(u)}}function L(e,t,r){return vr(e,t,r)}function u(e,t){var r=e._private;var n=N;var a;if(t)a=t+"-";else a="";e.boundingBox();var i=r.labelBounds[t||"main"];var o=e.pstyle(a+"label").value;var s=e.pstyle("text-events").strValue==="yes";if(!s||!o)return;var l=L(r.rscratch,"labelX",t);var u=L(r.rscratch,"labelY",t);var c=L(r.rscratch,"labelAngle",t);var h=e.pstyle(a+"text-margin-x").pfValue;var v=e.pstyle(a+"text-margin-y").pfValue;var f=i.x1-n-h;var d=i.x2+n-h;var p=i.y1-n-v;var g=i.y2+n-v;if(c){var y=Math.cos(c);var m=Math.sin(c);var b=function e(t,r){t=t-l;r=r-u;return{x:t*y-r*m+l,y:t*m+r*y+u}};var x=b(f,p);var w=b(f,g);var E=b(d,p);var T=b(d,g);var _=[x.x+h,x.y+v,E.x+h,E.y+v,T.x+h,T.y+v,w.x+h,w.y+v];if(wn(D,C,_)){A(e);return true}}else if(hn(i,D,C)){A(e);return true}}for(var c=r.length-1;c>=0;c--){var h=r[c];if(h.isNode())T(h)||u(h);else l(h)||u(h)||u(h,"source")||u(h,"target")}return x},Ev.getAllInBox=function(e,t,r,n){var a=this.getCachedZSortedEles().interactive;var i=[];var o=Math.min(e,r);var s=Math.max(e,r);var l=Math.min(t,n);var u=Math.max(t,n);e=o;r=s;t=l;n=u;var c=tn({x1:e,y1:t,x2:r,y2:n});for(var h=0;h<a.length;h++){var v=a[h];if(v.isNode()){var f=v;var d=f.boundingBox({includeNodes:true,includeEdges:false,includeLabels:false});if(cn(c,d)&&!fn(d,c))i.push(f)}else{var p=v;var g=p._private;var y=g.rscratch;if(y.startX!=null&&y.startY!=null&&!hn(c,y.startX,y.startY))continue;if(y.endX!=null&&y.endY!=null&&!hn(c,y.endX,y.endY))continue;if(y.edgeType==="bezier"||y.edgeType==="multibezier"||y.edgeType==="self"||y.edgeType==="compound"||y.edgeType==="segments"||y.edgeType==="haystack"){var m=g.rstyle.bezierPts||g.rstyle.linePts||g.rstyle.haystackPts;var b=true;for(var x=0;x<m.length;x++)if(!vn(c,m[x])){b=false;break}if(b)i.push(p)}else if(y.edgeType==="haystack"||y.edgeType==="straight")i.push(p)}}return i},{}),m=(Tv.calculateArrowAngles=function(e){var t=e._private.rscratch;var r=t.edgeType==="haystack";var n=t.edgeType==="bezier";var a=t.edgeType==="multibezier";var i=t.edgeType==="segments";var o=t.edgeType==="compound";var s=t.edgeType==="self";var l,u;var c,h,v,f,d,p;if(r){c=t.haystackPts[0];h=t.haystackPts[1];v=t.haystackPts[2];f=t.haystackPts[3]}else{c=t.arrowStartX;h=t.arrowStartY;v=t.arrowEndX;f=t.arrowEndY}d=t.midX;p=t.midY;if(i){l=c-t.segpts[0];u=h-t.segpts[1]}else if(a||o||s||n){var g=t.allpts;var y=k(g[0],g[2],g[4],.1);var m=k(g[1],g[3],g[5],.1);l=c-y;u=h-m}else{l=c-d;u=h-p}t.srcArrowAngle=qr(l,u);var d=t.midX;var p=t.midY;if(r){d=(c+v)/2;p=(h+f)/2}l=v-c;u=f-h;if(i){var g=t.allpts;if(g.length/2%2===0){var b=g.length/2;var x=b-2;l=g[b]-g[x];u=g[b+1]-g[x+1]}else{var b=g.length/2-1;var x=b-2;var w=b+2;l=g[b]-g[x];u=g[b+1]-g[x+1]}}else if(a||o||s){var g=t.allpts;var E=t.ctrlpts;var T,_;var D,C;if(E.length/2%2===0){var N=g.length/2-1;var A=N+2;var L=A+2;T=k(g[N],g[A],g[L],0);_=k(g[N+1],g[A+1],g[L+1],0);D=k(g[N],g[A],g[L],1e-4);C=k(g[N+1],g[A+1],g[L+1],1e-4)}else{var A=g.length/2-1;var N=A-2;var L=A+2;T=k(g[N],g[A],g[L],.4999);_=k(g[N+1],g[A+1],g[L+1],.4999);D=k(g[N],g[A],g[L],.5);C=k(g[N+1],g[A+1],g[L+1],.5)}l=D-T;u=C-_}t.midtgtArrowAngle=qr(l,u);t.midDispX=l;t.midDispY=u;l*=-1;u*=-1;if(i){var g=t.allpts;if(g.length/2%2===0);else{var b=g.length/2-1;var w=b+2;l=-(g[w]-g[b]);u=-(g[w+1]-g[b+1])}}t.midsrcArrowAngle=qr(l,u);if(i){l=v-t.segpts[t.segpts.length-2];u=f-t.segpts[t.segpts.length-1]}else if(a||o||s||n){var g=t.allpts;var S=g.length;var y=k(g[S-6],g[S-4],g[S-2],.9);var m=k(g[S-5],g[S-3],g[S-1],.9);l=v-y;u=f-m}else{l=v-d;u=f-p}t.tgtArrowAngle=qr(l,u)},Tv.getArrowWidth=Tv.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{};var n=r[e+", "+t];if(n)return n;n=Math.max(Math.pow(e*13.37,.9),29)*t;r[e+", "+t]=n;return n},{});function _v(e){var t=[];if(e==null)return;for(var r=0;r<e.length;r+=2){var n=e[r];var a=e[r+1];t.push({x:n,y:a})}return t}m.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t];var n=r._private;var a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)};i=Math.random()*2*Math.PI;a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source;var s=n.target;var l=o.position();var u=s.position();var c=o.width();var h=s.width();var v=o.height();var f=s.height();var d=r.pstyle("haystack-radius").value;var p=d/2;a.haystackPts=a.allpts=[a.source.x*c*p+l.x,a.source.y*v*p+l.y,a.target.x*h*p+u.x,a.target.y*f*p+u.y];a.midX=(a.allpts[0]+a.allpts[2])/2;a.midY=(a.allpts[1]+a.allpts[3])/2;a.edgeType="haystack";a.haystack=true;this.storeEdgeProjections(r);this.calculateArrowAngles(r);this.recalculateEdgeLabelProjections(r);this.calculateLabelAngles(r)}},m.findSegmentsPoints=function(e,t){var r=e._private.rscratch;var n=t.posPts,a=t.intersectionPts,i=t.vectorNormInverse;var o=e.pstyle("edge-distances").value;var s=e.pstyle("segment-weights");var l=e.pstyle("segment-distances");var u=Math.min(s.pfValue.length,l.pfValue.length);r.edgeType="segments";r.segpts=[];for(var c=0;c<u;c++){var h=s.pfValue[c];var v=l.pfValue[c];var f=1-h;var d=h;var p=o==="node-position"?n:a;var g={x:p.x1*f+p.x2*d,y:p.y1*f+p.y2*d};r.segpts.push(g.x+i.x*v,g.y+i.y*v)}},m.findLoopPoints=function(e,t,r,n){var a=e._private.rscratch;var i=t.dirCounts,o=t.srcPos;var s=e.pstyle("control-point-distances");var l=s?s.pfValue[0]:void 0;var u=e.pstyle("loop-direction").pfValue;var c=e.pstyle("loop-sweep").pfValue;var h=e.pstyle("control-point-step-size").pfValue;a.edgeType="self";var v=r;var f=h;if(n){v=0;f=l}var d=u-Math.PI/2;var p=d-c/2;var g=d+c/2;var y=String(u+"_"+c);v=i[y]===void 0?i[y]=0:++i[y];a.ctrlpts=[o.x+Math.cos(p)*1.4*f*(v/3+1),o.y+Math.sin(p)*1.4*f*(v/3+1),o.x+Math.cos(g)*1.4*f*(v/3+1),o.y+Math.sin(g)*1.4*f*(v/3+1)]},m.findCompoundLoopPoints=function(e,t,r,n){var a=e._private.rscratch;a.edgeType="compound";var i=t.srcPos,o=t.tgtPos,s=t.srcW,l=t.srcH,u=t.tgtW,c=t.tgtH;var h=e.pstyle("control-point-step-size").pfValue;var v=e.pstyle("control-point-distances");var f=v?v.pfValue[0]:void 0;var d=r;var p=h;if(n){d=0;p=f}var g=50;var y={x:i.x-s/2,y:i.y-l/2};var m={x:o.x-u/2,y:o.y-c/2};var b={x:Math.min(y.x,m.x),y:Math.min(y.y,m.y)};var x=.5;var w=Math.max(x,Math.log(s*.01));var E=Math.max(x,Math.log(u*.01));a.ctrlpts=[b.x,b.y-(1+Math.pow(g,1.12)/100)*p*(d/3+1)*w,b.x-(1+Math.pow(g,1.12)/100)*p*(d/3+1)*E,b.y]},m.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},m.findBezierPoints=function(e,t,r,n,a){var i=e._private.rscratch;var o=t.vectorNormInverse,s=t.posPts,l=t.intersectionPts;var u=e.pstyle("edge-distances").value;var c=e.pstyle("control-point-step-size").pfValue;var h=e.pstyle("control-point-distances");var v=e.pstyle("control-point-weights");var f=h&&v?Math.min(h.value.length,v.value.length):1;var d=h?h.pfValue[0]:void 0;var p=v.value[0];var g=n;i.edgeType=g?"multibezier":"bezier";i.ctrlpts=[];for(var y=0;y<f;y++){var m=(.5-t.eles.length/2+r)*c*(a?-1:1);var b=void 0;var x=Wr(m);if(g){d=h?h.pfValue[y]:c;p=v.value[y]}if(n)b=d;else b=d!==void 0?x*d:void 0;var w=b!==void 0?b:m;var E=1-p;var T=p;var _=u==="node-position"?s:l;var D={x:_.x1*E+_.x2*T,y:_.y1*E+_.y2*T};i.ctrlpts.push(D.x+o.x*w,D.y+o.y*w)}},m.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var n="vertical";var a="horizontal";var i="leftward";var o="rightward";var s="downward";var l="upward";var R="auto";var u=t.posPts,c=t.srcW,h=t.srcH,v=t.tgtW,f=t.tgtH;var B=e.pstyle("edge-distances").value;var d=B!=="node-position";var p=e.pstyle("taxi-direction").value;var g=p;var y=e.pstyle("taxi-turn");var m=y.units==="%";var b=y.pfValue;var F=b<0;var z=e.pstyle("taxi-turn-min-distance").pfValue;var G=d?(c+v)/2:0;var Y=d?(h+f)/2:0;var x=u.x2-u.x1;var w=u.y2-u.y1;var E=function e(t,r){if(t>0)return Math.max(t-r,0);else return Math.min(t+r,0)};var T=E(x,G);var _=E(w,Y);var D=false;if(g===R)p=Math.abs(T)>Math.abs(_)?a:n;else if(g===l||g===s){p=n;D=true}else if(g===i||g===o){p=a;D=true}var C=p===n;var N=C?_:T;var A=C?w:x;var L=Wr(A);var S=false;if(!(D&&(m||F))&&(g===s&&A<0||g===l&&A>0||g===i&&A>0||g===o&&A<0)){L*=-1;N=L*Math.abs(N);S=true}var I;if(m){var X=b<0?1+b:b;I=X*N}else{var V=b<0?N:0;I=V+b*L}var k=function e(t){return Math.abs(t)<z||Math.abs(t)>=Math.abs(N)};var U=k(I);var j=k(Math.abs(N)-Math.abs(I));var q=U||j;if(q&&!S)if(C){var H=Math.abs(A)<=h/2;var W=Math.abs(x)<=v/2;if(H){var O=(u.x1+u.x2)/2;var $=u.y1,K=u.y2;r.segpts=[O,$,O,K]}else if(W){var M=(u.y1+u.y2)/2;var Z=u.x1,Q=u.x2;r.segpts=[Z,M,Q,M]}else r.segpts=[u.x1,u.y2]}else{var J=Math.abs(A)<=c/2;var ee=Math.abs(w)<=f/2;if(J){var P=(u.y1+u.y2)/2;var te=u.x1,re=u.x2;r.segpts=[te,P,re,P]}else if(ee){var ne=(u.x1+u.x2)/2;var ae=u.y1,ie=u.y2;r.segpts=[ne,ae,ne,ie]}else r.segpts=[u.x2,u.y1]}else if(C){var oe=u.y1+I+(d?h/2*L:0);var se=u.x1,le=u.x2;r.segpts=[se,oe,le,oe]}else{var ue=u.x1+I+(d?c/2*L:0);var ce=u.y1,he=u.y2;r.segpts=[ue,ce,ue,he]}},m.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if(r.edgeType==="bezier"){var n=t.srcPos,a=t.tgtPos,i=t.srcW,o=t.srcH,s=t.tgtW,l=t.tgtH,u=t.srcShape,c=t.tgtShape;var h=!me(r.startX)||!me(r.startY);var v=!me(r.arrowStartX)||!me(r.arrowStartY);var f=!me(r.endX)||!me(r.endY);var d=!me(r.arrowEndX)||!me(r.arrowEndY);var p=3;var g=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth;var y=p*g;var m=$r({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY});var b=m<y;var x=$r({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY});var w=x<y;var E=false;if(h||v||b){E=true;var T={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y};var _=Math.sqrt(T.x*T.x+T.y*T.y);var D={x:T.x/_,y:T.y/_};var C=Math.max(i,o);var N={x:r.ctrlpts[0]+D.x*2*C,y:r.ctrlpts[1]+D.y*2*C};var A=u.intersectLine(n.x,n.y,i,o,N.x,N.y,0);if(b){r.ctrlpts[0]=r.ctrlpts[0]+D.x*(y-m);r.ctrlpts[1]=r.ctrlpts[1]+D.y*(y-m)}else{r.ctrlpts[0]=A[0]+D.x*y;r.ctrlpts[1]=A[1]+D.y*y}}if(f||d||w){E=true;var L={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y};var S=Math.sqrt(L.x*L.x+L.y*L.y);var I={x:L.x/S,y:L.y/S};var k=Math.max(i,o);var O={x:r.ctrlpts[0]+I.x*2*k,y:r.ctrlpts[1]+I.y*2*k};var M=c.intersectLine(a.x,a.y,s,l,O.x,O.y,0);if(w){r.ctrlpts[0]=r.ctrlpts[0]+I.x*(y-x);r.ctrlpts[1]=r.ctrlpts[1]+I.y*(y-x)}else{r.ctrlpts[0]=M[0]+I.x*y;r.ctrlpts[1]=M[1]+I.y*y}}if(E)this.findEndpoints(e)}},m.storeAllpts=function(e){var t=e._private.rscratch;if(t.edgeType==="multibezier"||t.edgeType==="bezier"||t.edgeType==="self"||t.edgeType==="compound"){t.allpts=[];t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2){t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]);if(r+3<t.ctrlpts.length)t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2)}t.allpts.push(t.endX,t.endY);var n,a;if(t.ctrlpts.length/2%2===0){n=t.allpts.length/2-1;t.midX=t.allpts[n];t.midY=t.allpts[n+1]}else{n=t.allpts.length/2-3;a=.5;t.midX=k(t.allpts[n],t.allpts[n+2],t.allpts[n+4],a);t.midY=k(t.allpts[n+1],t.allpts[n+3],t.allpts[n+5],a)}}else if(t.edgeType==="straight"){t.allpts=[t.startX,t.startY,t.endX,t.endY];t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4;t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4}else if(t.edgeType==="segments"){t.allpts=[];t.allpts.push(t.startX,t.startY);t.allpts.push.apply(t.allpts,t.segpts);t.allpts.push(t.endX,t.endY);if(t.segpts.length%4===0){var i=t.segpts.length/2;var o=i-2;t.midX=(t.segpts[o]+t.segpts[i])/2;t.midY=(t.segpts[o+1]+t.segpts[i+1])/2}else{var s=t.segpts.length/2-1;t.midX=t.segpts[s];t.midY=t.segpts[s+1]}}},m.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;if(t.nodesOverlap||me(t.startX)&&me(t.startY)&&me(t.endX)&&me(t.endY))t.loggedErr=false;else if(!t.loggedErr){t.loggedErr=true;ee("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap.")}},m.findEdgeControlPoints=function(e){var B=this;if(!e||e.length===0)return;var F=this;var t=F.cy;var z=t.hasCompoundNodes();var G={map:new pr,get:function e(t){var r=this.map.get(t[0]);if(r!=null)return r.get(t[1]);else return null},set:function e(t,r){var n=this.map.get(t[0]);if(n==null){n=new pr;this.map.set(t[0],n)}n.set(t[1],r)}};var Y=[];var r=[];for(var n=0;n<e.length;n++){var a=e[n];var i=a._private;var o=a.pstyle("curve-style").value;if(a.removed()||!a.takesUpSpace())continue;if(o==="haystack"){r.push(a);continue}var s=o==="unbundled-bezier"||o==="segments"||o==="straight"||o==="straight-triangle"||o==="taxi";var l=o==="unbundled-bezier"||o==="bezier";var u=i.source;var c=i.target;var h=u.poolIndex();var v=c.poolIndex();var f=[h,v].sort();var d=G.get(f);if(d==null){d={eles:[]};G.set(f,d);Y.push(f)}d.eles.push(a);if(s)d.hasUnbundled=true;if(l)d.hasBezier=true}var p=function R(e){var t=Y[e];var r=G.get(t);var n=void 0;if(!r.hasUnbundled){var a=r.eles[0].parallelEdges().filter(function(e){return e.isBundledBezier()});cr(r.eles);a.forEach(function(e){return r.eles.push(e)});r.eles.sort(function(e,t){return e.poolIndex()-t.poolIndex()})}var i=r.eles[0];var o=i.source();var s=i.target();if(o.poolIndex()>s.poolIndex()){var l=o;o=s;s=l}var u=r.srcPos=o.position();var c=r.tgtPos=s.position();var h=r.srcW=o.outerWidth();var v=r.srcH=o.outerHeight();var f=r.tgtW=s.outerWidth();var d=r.tgtH=s.outerHeight();var p=r.srcShape=F.nodeShapes[B.getNodeShape(o)];var g=r.tgtShape=F.nodeShapes[B.getNodeShape(s)];r.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var y=0;y<r.eles.length;y++){var m=r.eles[y];var b=m[0]._private.rscratch;var x=m.pstyle("curve-style").value;var w=x==="unbundled-bezier"||x==="segments"||x==="taxi";var E=!o.same(m.source());if(!r.calculatedIntersection&&o!==s&&(r.hasBezier||r.hasUnbundled)){r.calculatedIntersection=true;var T=p.intersectLine(u.x,u.y,h,v,c.x,c.y,0);var _=r.srcIntn=T;var D=g.intersectLine(c.x,c.y,f,d,u.x,u.y,0);var C=r.tgtIntn=D;var N=r.intersectionPts={x1:T[0],x2:D[0],y1:T[1],y2:D[1]};var A=r.posPts={x1:u.x,x2:c.x,y1:u.y,y2:c.y};var L=D[1]-T[1];var S=D[0]-T[0];var I=Math.sqrt(S*S+L*L);var k=r.vector={x:S,y:L};var O=r.vectorNorm={x:k.x/I,y:k.y/I};var M={x:-O.y,y:O.x};r.nodesOverlap=!me(I)||g.checkPoint(T[0],T[1],0,f,d,c.x,c.y)||p.checkPoint(D[0],D[1],0,h,v,u.x,u.y);r.vectorNormInverse=M;n={nodesOverlap:r.nodesOverlap,dirCounts:r.dirCounts,calculatedIntersection:true,hasBezier:r.hasBezier,hasUnbundled:r.hasUnbundled,eles:r.eles,srcPos:c,tgtPos:u,srcW:f,srcH:d,tgtW:h,tgtH:v,srcIntn:C,tgtIntn:_,srcShape:g,tgtShape:p,posPts:{x1:A.x2,y1:A.y2,x2:A.x1,y2:A.y1},intersectionPts:{x1:N.x2,y1:N.y2,x2:N.x1,y2:N.y1},vector:{x:-k.x,y:-k.y},vectorNorm:{x:-O.x,y:-O.y},vectorNormInverse:{x:-M.x,y:-M.y}}}var P=E?n:r;b.nodesOverlap=P.nodesOverlap;b.srcIntn=P.srcIntn;b.tgtIntn=P.tgtIntn;if(z&&(o.isParent()||o.isChild()||s.isParent()||s.isChild())&&(o.parents().anySame(s)||s.parents().anySame(o)||o.same(s)&&o.isParent()))B.findCompoundLoopPoints(m,P,y,w);else if(o===s)B.findLoopPoints(m,P,y,w);else if(x==="segments")B.findSegmentsPoints(m,P);else if(x==="taxi")B.findTaxiPoints(m,P);else if(x==="straight"||!w&&r.eles.length%2===1&&y===Math.floor(r.eles.length/2))B.findStraightEdgePoints(m);else B.findBezierPoints(m,P,y,w,E);B.findEndpoints(m);B.tryToCorrectInvalidPoints(m,P);B.checkForInvalidEdgeWarning(m);B.storeAllpts(m);B.storeEdgeProjections(m);B.calculateArrowAngles(m);B.recalculateEdgeLabelProjections(m);B.calculateLabelAngles(m)}};for(var g=0;g<Y.length;g++)p(g);this.findHaystackPoints(r)},m.getSegmentPoints=function(e){var t=e[0]._private.rscratch;var r=t.edgeType;if(r==="segments"){this.recalculateRenderedStyle(e);return _v(t.segpts)}},m.getControlPoints=function(e){var t=e[0]._private.rscratch;var r=t.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound"){this.recalculateRenderedStyle(e);return _v(t.ctrlpts)}},m.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);return{x:t.midX,y:t.midY}};var Dv={manualEndptToPx:function(e,t){var r=this;var n=e.position();var a=e.outerWidth();var i=e.outerHeight();if(t.value.length===2){var o=[t.pfValue[0],t.pfValue[1]];if(t.units[0]==="%")o[0]=o[0]*a;if(t.units[1]==="%")o[1]=o[1]*i;o[0]+=n.x;o[1]+=n.y;return o}else{var s=t.pfValue[0];s=-Math.PI/2+s;var l=2*Math.max(a,i);var u=[n.x+Math.cos(s)*l,n.y+Math.sin(s)*l];return r.nodeShapes[this.getNodeShape(e)].intersectLine(n.x,n.y,a,i,u[0],u[1],0)}},findEndpoints:function(e){var t=this;var r;var n=e.source()[0];var a=e.target()[0];var i=n.position();var o=a.position();var s=e.pstyle("target-arrow-shape").value;var l=e.pstyle("source-arrow-shape").value;var u=e.pstyle("target-distance-from-node").pfValue;var c=e.pstyle("source-distance-from-node").pfValue;var R=e.pstyle("curve-style").value;var h=e._private.rscratch;var v=h.edgeType;var B=R==="taxi";var f=v==="self"||v==="compound";var F=v==="bezier"||v==="multibezier"||f;var z=v!=="bezier";var G=v==="straight"||v==="segments";var Y=v==="segments";var X=F||z||G;var V=f||B;var d=e.pstyle("source-endpoint");var p=V?"outside-to-node":d.value;var g=e.pstyle("target-endpoint");var y=V?"outside-to-node":g.value;h.srcManEndpt=d;h.tgtManEndpt=g;var m;var b;var x;var w;if(F){var U=[h.ctrlpts[0],h.ctrlpts[1]];var j=z?[h.ctrlpts[h.ctrlpts.length-2],h.ctrlpts[h.ctrlpts.length-1]]:U;m=j;b=U}else if(G){var q=!Y?[o.x,o.y]:h.segpts.slice(0,2);var H=!Y?[i.x,i.y]:h.segpts.slice(h.segpts.length-2);m=H;b=q}if(y==="inside-to-node")r=[o.x,o.y];else if(g.units)r=this.manualEndptToPx(a,g);else if(y==="outside-to-line")r=h.tgtIntn;else{if(y==="outside-to-node"||y==="outside-to-node-or-label")x=m;else if(y==="outside-to-line"||y==="outside-to-line-or-label")x=[i.x,i.y];r=t.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),x[0],x[1],0);if(y==="outside-to-node-or-label"||y==="outside-to-line-or-label"){var E=a._private.rscratch;var W=E.labelWidth;var $=E.labelHeight;var T=E.labelX;var _=E.labelY;var D=W/2;var C=$/2;var K=a.pstyle("text-valign").value;if(K==="top")_-=C;else if(K==="bottom")_+=C;var Z=a.pstyle("text-halign").value;if(Z==="left")T-=D;else if(Z==="right")T+=D;var N=In(x[0],x[1],[T-D,_-C,T+D,_-C,T+D,_+C,T-D,_+C],o.x,o.y);if(N.length>0){var A=i;var Q=Kr(A,Gr(r));var J=Kr(A,Gr(N));var ee=Q;if(J<Q){r=N;ee=J}if(N.length>2){var te=Kr(A,{x:N[2],y:N[3]});if(te<ee)r=[N[2],N[3]]}}}}var re=On(r,m,t.arrowShapes[s].spacing(e)+u);var ne=On(r,m,t.arrowShapes[s].gap(e)+u);h.endX=ne[0];h.endY=ne[1];h.arrowEndX=re[0];h.arrowEndY=re[1];if(p==="inside-to-node")r=[i.x,i.y];else if(d.units)r=this.manualEndptToPx(n,d);else if(p==="outside-to-line")r=h.srcIntn;else{if(p==="outside-to-node"||p==="outside-to-node-or-label")w=b;else if(p==="outside-to-line"||p==="outside-to-line-or-label")w=[o.x,o.y];r=t.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),w[0],w[1],0);if(p==="outside-to-node-or-label"||p==="outside-to-line-or-label"){var L=n._private.rscratch;var ae=L.labelWidth;var ie=L.labelHeight;var S=L.labelX;var I=L.labelY;var k=ae/2;var O=ie/2;var oe=n.pstyle("text-valign").value;if(oe==="top")I-=O;else if(oe==="bottom")I+=O;var se=n.pstyle("text-halign").value;if(se==="left")S-=k;else if(se==="right")S+=k;var M=In(w[0],w[1],[S-k,I-O,S+k,I-O,S+k,I+O,S-k,I+O],i.x,i.y);if(M.length>0){var P=o;var le=Kr(P,Gr(r));var ue=Kr(P,Gr(M));var ce=le;if(ue<le){r=[M[0],M[1]];ce=ue}if(M.length>2){var he=Kr(P,{x:M[2],y:M[3]});if(he<ce)r=[M[2],M[3]]}}}}var ve=On(r,b,t.arrowShapes[l].spacing(e)+c);var fe=On(r,b,t.arrowShapes[l].gap(e)+c);h.startX=fe[0];h.startY=fe[1];h.arrowStartX=ve[0];h.arrowStartY=ve[1];if(X)if(!me(h.startX)||!me(h.startY)||!me(h.endX)||!me(h.endY))h.badLine=true;else h.badLine=false},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);switch(t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);switch(t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}}},Cv={};function Nv(e,t,r){var n=function e(t,r,n,a){return k(t,r,n,a)};var a=t._private;var i=a.rstyle.bezierPts;for(var o=0;o<e.bezierProjPcts.length;o++){var s=e.bezierProjPcts[o];i.push({x:n(r[0],r[2],r[4],s),y:n(r[1],r[3],r[5],s)})}}Cv.storeEdgeProjections=function(e){var t=e._private;var r=t.rscratch;var n=r.edgeType;t.rstyle.bezierPts=null;t.rstyle.linePts=null;t.rstyle.haystackPts=null;if(n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){t.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)Nv(this,e,r.allpts.slice(a,a+6))}else if(n==="segments"){var i=t.rstyle.linePts=[];for(var a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]})}else if(n==="haystack"){var o=r.haystackPts;t.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},Cv.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var Av={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(oe(t))return;var r,n;var a=e._private;var i=e.width();var o=e.height();var s=e.padding();var l=e.position();var u=e.pstyle("text-halign").strValue;var c=e.pstyle("text-valign").strValue;var h=a.rscratch;var v=a.rstyle;switch(u){case"left":r=l.x-i/2-s;break;case"right":r=l.x+i/2+s;break;default:r=l.x}switch(c){case"top":n=l.y-o/2-s;break;case"bottom":n=l.y+o/2+s;break;default:n=l.y}h.labelX=r;h.labelY=n;v.labelX=r;v.labelY=n;this.calculateLabelAngles(e);this.applyLabelDimensions(e)}},Lv=function e(t,r){var n=Math.atan(r/t);if(t===0&&n<0)n=n*-1;return n},Sv=function e(t,r){var n=r.x-t.x;var a=r.y-t.y;return Lv(n,a)},Iv=function e(t,r,n,a){var i=en(0,a-.001,1);var o=en(0,a+.001,1);var s=Qr(t,r,n,i);var l=Qr(t,r,n,o);return Sv(s,l)},kv=(Av.recalculateEdgeLabelProjections=function(A){var L;var f=A._private;var S=f.rscratch;var d=this;var I={mid:A.pstyle("label").strValue,source:A.pstyle("source-label").strValue,target:A.pstyle("target-label").strValue};if(I.mid||I.source||I.target);else return;L={x:S.midX,y:S.midY};var k=function e(t,r,n){fr(f.rscratch,t,r,n);fr(f.rstyle,t,r,n)};k("labelX",null,L.x);k("labelY",null,L.y);var e=Lv(S.midDispX,S.midDispY);k("labelAutoAngle",null,e);var O=function e(){if(e.cache)return e.cache;var t=[];for(var r=0;r+5<S.allpts.length;r+=4){var n={x:S.allpts[r],y:S.allpts[r+1]};var a={x:S.allpts[r+2],y:S.allpts[r+3]};var i={x:S.allpts[r+4],y:S.allpts[r+5]};t.push({p0:n,p1:a,p2:i,startDist:0,length:0,segments:[]})}var o=f.rstyle.bezierPts;var s=d.bezierProjPcts.length;function l(e,t,r,n,a){var i=$r(t,r);var o=e.segments[e.segments.length-1];var s={p0:t,p1:r,t0:n,t1:a,startDist:o?o.startDist+o.length:0,length:i};e.segments.push(s);e.length+=i}for(var u=0;u<t.length;u++){var c=t[u];var h=t[u-1];if(h)c.startDist=h.startDist+h.length;l(c,c.p0,o[u*s],0,d.bezierProjPcts[0]);for(var v=0;v<s-1;v++)l(c,o[u*s+v],o[u*s+v+1],d.bezierProjPcts[v],d.bezierProjPcts[v+1]);l(c,o[u*s+s-1],c.p2,d.bezierProjPcts[s-1],1)}return e.cache=t};var t=function e(t){var r;var n=t==="source";if(!I[t])return;var a=A.pstyle(t+"-text-offset").pfValue;switch(S.edgeType){case"self":case"compound":case"bezier":case"multibezier":{var i=O();var o;var s=0;var l=0;for(var u=0;u<i.length;u++){var c=i[n?u:i.length-1-u];for(var h=0;h<c.segments.length;h++){var v=c.segments[n?h:c.segments.length-1-h];var f=u===i.length-1&&h===c.segments.length-1;s=l;l+=v.length;if(l>=a||f){o={cp:c,segment:v};break}}if(o)break}var d=o.cp;var p=o.segment;var g=(a-s)/p.length;var y=p.t1-p.t0;var m=n?p.t0+y*g:p.t1-y*g;m=en(0,m,1);L=Qr(d.p0,d.p1,d.p2,m);r=Iv(d.p0,d.p1,d.p2,m);break}case"straight":case"segments":case"haystack":{var b=0,x,w;var E,T;var _=S.allpts.length;for(var D=0;D+3<_;D+=2){if(n){E={x:S.allpts[D],y:S.allpts[D+1]};T={x:S.allpts[D+2],y:S.allpts[D+3]}}else{E={x:S.allpts[_-2-D],y:S.allpts[_-1-D]};T={x:S.allpts[_-4-D],y:S.allpts[_-3-D]}}x=$r(E,T);w=b;b+=x;if(b>=a)break}var C=a-w;var N=C/x;N=en(0,N,1);L=Jr(E,T,N);r=Sv(E,T);break}}k("labelX",t,L.x);k("labelY",t,L.y);k("labelAutoAngle",t,r)};t("source");t("target");this.applyLabelDimensions(A)},Av.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e);if(e.isEdge()){this.applyPrefixedLabelDimensions(e,"source");this.applyPrefixedLabelDimensions(e,"target")}},Av.applyPrefixedLabelDimensions=function(e,t){var r=e._private;var n=this.getLabelText(e,t);var a=this.calculateLabelDimensions(e,n);var i=e.pstyle("line-height").pfValue;var o=e.pstyle("text-wrap").strValue;var s=vr(r.rscratch,"labelWrapCachedLines",t)||[];var l=o!=="wrap"?1:Math.max(s.length,1);var u=a.height/l;var c=u*i;var h=a.width;var v=a.height+(l-1)*(i-1)*u;fr(r.rstyle,"labelWidth",t,h);fr(r.rscratch,"labelWidth",t,h);fr(r.rstyle,"labelHeight",t,v);fr(r.rscratch,"labelHeight",t,v);fr(r.rscratch,"labelLineHeight",t,c)},Av.getLabelText=function(e,n){var a=e._private;var t=n?n+"-":"";var r=e.pstyle(t+"label").strValue;var i=e.pstyle("text-transform").value;var o=function e(t,r){if(r){fr(a.rscratch,t,n,r);return r}else return vr(a.rscratch,t,n)};if(!r)return"";if(i=="none");else if(i=="uppercase")r=r.toUpperCase();else if(i=="lowercase")r=r.toLowerCase();var s=e.pstyle("text-wrap").value;if(s==="wrap"){var l=o("labelKey");if(l!=null&&o("labelWrapKey")===l)return o("labelWrapCachedText");var u="​";var c=r.split("\n");var h=e.pstyle("text-max-width").pfValue;var v=e.pstyle("text-overflow-wrap").value;var f=v==="anywhere";var d=[];var p=/[\s\u200b]+/;var g=f?"":" ";for(var y=0;y<c.length;y++){var m=c[y];var b=this.calculateLabelDimensions(e,m);var x=b.width;if(f){var w=m.split("").join(u);m=w}if(x>h){var E=m.split(p);var T="";for(var _=0;_<E.length;_++){var D=E[_];var C=T.length===0?D:T+g+D;var N=this.calculateLabelDimensions(e,C);var A=N.width;if(A<=h)T+=D+g;else{if(T)d.push(T);T=D+g}}if(!T.match(/^[\s\u200b]+$/))d.push(T)}else d.push(m)}o("labelWrapCachedLines",d);r=o("labelWrapCachedText",d.join("\n"));o("labelWrapKey",l)}else if(s==="ellipsis"){var L=e.pstyle("text-max-width").pfValue;var S="";var I="…";var k=false;if(this.calculateLabelDimensions(e,r).width<L)return r;for(var O=0;O<r.length;O++){var M=this.calculateLabelDimensions(e,S+r[O]+I).width;if(M>L)break;S+=r[O];if(O===r.length-1)k=true}if(!k)S+=I;return S}return r},Av.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue;var r=e.pstyle("text-halign").strValue;if(t==="auto")if(e.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return t},Av.calculateLabelDimensions=function(e,t){var r=this;var n=jt(t,e._private.labelDimsKey);var a=r.labelDimCache||(r.labelDimCache=[]);var i=a[n];if(i!=null)return i;var o=0;var s=e.pstyle("font-style").strValue;var l=e.pstyle("font-size").pfValue;var u=e.pstyle("font-family").strValue;var c=e.pstyle("font-weight").strValue;var h=this.labelCalcCanvas;var v=this.labelCalcCanvasContext;if(!h){h=this.labelCalcCanvas=document.createElement("canvas");v=this.labelCalcCanvasContext=h.getContext("2d");var f=h.style;f.position="absolute";f.left="-9999px";f.top="-9999px";f.zIndex="-1";f.visibility="hidden";f.pointerEvents="none"}v.font="".concat(s," ").concat(c," ").concat(l,"px ").concat(u);var d=0;var p=0;var g=t.split("\n");for(var y=0;y<g.length;y++){var m=g[y];var b=v.measureText(m);var x=Math.ceil(b.width);var w=l;d=Math.max(x,d);p+=w}d+=o;p+=o;return a[n]={width:d,height:p}},Av.calculateLabelAngle=function(e,t){var r=e._private;var n=r.rscratch;var a=e.isEdge();var i=t?t+"-":"";var o=e.pstyle(i+"text-rotation");var s=o.strValue;if(s==="none")return 0;else if(a&&s==="autorotate")return n.labelAutoAngle;else if(s==="autorotate")return 0;else return o.pfValue},Av.calculateLabelAngles=function(e){var t=this;var r=e.isEdge();var n=e._private;var a=n.rscratch;a.labelAngle=t.calculateLabelAngle(e);if(r){a.sourceLabelAngle=t.calculateLabelAngle(e,"source");a.targetLabelAngle=t.calculateLabelAngle(e,"target")}},{}),Ov=28,Mv=false,Pv=(kv.getNodeShape=function(e){var t=this;var r=e.pstyle("shape").value;if(r==="cutrectangle"&&(e.width()<Ov||e.height()<Ov)){if(!Mv){ee("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead");Mv=true}return"rectangle"}if(e.isParent())if(r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel")return r;else return"rectangle";if(r==="polygon"){var n=e.pstyle("shape-polygon-points").value;return t.nodeShapes.makePolygon(n).name}return r},{}),Rv=(Pv.registerCalculationListeners=function(){var l=this.cy;var u=l.collection();var c=this;var h=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:true;u.merge(t);if(r)for(var n=0;n<t.length;n++){var a=t[n];var i=a._private;var o=i.rstyle;o.clean=false;o.cleanConnected=false}};c.binder(l).on("bounds.* dirty.*",function e(t){var r=t.target;h(r)}).on("style.* background.*",function e(t){var r=t.target;h(r,false)});var e=function e(t){if(t){var r=c.onUpdateEleCalcsFns;u.cleanStyle();for(var n=0;n<u.length;n++){var a=u[n];var i=a._private.rstyle;if(a.isNode()&&!i.cleanConnected){h(a.connectedEdges());i.cleanConnected=true}}if(r)for(var o=0;o<r.length;o++){var s=r[o];s(t,u)}c.recalculateRenderedStyle(u);u=l.collection()}};c.flushRenderedStyleQueue=function(){e(true)};c.beforeRender(e,c.beforeRenderPriorities.eleCalcs)},Pv.onUpdateEleCalcs=function(e){var t=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];t.push(e)},Pv.recalculateRenderedStyle=function(e,t){var r=function e(t){return t._private.rstyle.cleanConnected};var n=[];var a=[];if(this.destroyed)return;if(t===void 0)t=true;for(var i=0;i<e.length;i++){var o=e[i];var s=o._private;var l=s.rstyle;if(o.isEdge()&&(!r(o.source())||!r(o.target())))l.clean=false;if(t&&l.clean||o.removed())continue;if(o.pstyle("display").value==="none")continue;if(s.group==="nodes")a.push(o);else n.push(o);l.clean=true}for(var u=0;u<a.length;u++){var c=a[u];var h=c._private;var v=h.rstyle;var f=c.position();this.recalculateNodeLabelProjection(c);v.nodeX=f.x;v.nodeY=f.y;v.nodeW=c.pstyle("width").pfValue;v.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var d=0;d<n.length;d++){var p=n[d];var g=p._private;var y=g.rstyle;var m=g.rscratch;y.srcX=m.arrowStartX;y.srcY=m.arrowStartY;y.tgtX=m.arrowEndX;y.tgtY=m.arrowEndY;y.midX=m.midX;y.midY=m.midY;y.labelAngle=m.labelAngle;y.sourceLabelAngle=m.sourceLabelAngle;y.targetLabelAngle=m.targetLabelAngle}},{}),Bv=(Rv.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(!e)return;e.drag=[];e.nondrag=[];var t=[];for(var r=0;r<e.length;r++){var n=e[r];var a=n._private.rscratch;if(n.grabbed()&&!n.isParent())t.push(n);else if(a.inDragLayer)e.drag.push(n);else e.nondrag.push(n)}for(var r=0;r<t.length;r++){var n=t[r];e.drag.push(n)}},Rv.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null},Rv.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(Gu);t.interactive=t.filter(function(e){return e.interactive()});this.cachedZSortedEles=t;this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t},{}),Fv=([Ev,Tv,m,Dv,Cv,Av,kv,Pv,Rv].forEach(function(e){T(Bv,e)}),{}),zv=(Fv.getCachedImage=function(e,t,r){var n=this;var a=n.imageCache=n.imageCache||{};var i=a[e];if(i){if(!i.image.complete)i.image.addEventListener("load",r);return i.image}else{i=a[e]=a[e]||{};var o=i.image=new Image;o.addEventListener("load",r);o.addEventListener("error",function(){o.error=true});var s="data:";var l=e.substring(0,s.length).toLowerCase()===s;if(!l)o.crossOrigin=t;o.src=e;return o}},{}),Gv=(zv.registerBinding=function(e,t,r,n){var a=Array.prototype.slice.apply(arguments,[1]);var i=this.binder(e);return i.on.apply(i,a)},zv.binder=function(i){var o=this;var s=i===window||i===document||i===document.body||se(i);if(o.supportsPassiveEvents==null){var t=false;try{var e=Object.defineProperty({},"passive",{get:function e(){t=true;return true}});window.addEventListener("test",null,e)}catch(e){}o.supportsPassiveEvents=t}var r=function e(t,r,n){var a=Array.prototype.slice.call(arguments);if(s&&o.supportsPassiveEvents)a[2]={capture:n!=null?n:false,passive:false,once:false};o.bindings.push({target:i,args:a});(i.addEventListener||i.on).apply(i,a);return this};return{on:r,addEventListener:r,addListener:r,bind:r}},zv.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},zv.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()},zv.load=function(){var ee=this;var _=function e(t){return t.selected()};var te=function e(t,r,n,a){if(t==null)t=ee.cy;for(var i=0;i<r.length;i++){var o=r[i];t.emit({originalEvent:n,type:o,position:a})}};var k=function e(t){return t.shiftKey||t.metaKey||t.ctrlKey};var re=function e(t,r){var n=true;if(ee.cy.hasCompoundNodes()&&t&&t.pannable())for(var a=0;r&&a<r.length;a++){var t=r[a];if(t.isNode()&&t.isParent()&&!t.pannable()){n=false;break}}else n=true;return n};var i=function e(t){t[0]._private.grabbed=true};var l=function e(t){t[0]._private.grabbed=false};var o=function e(t){t[0]._private.rscratch.inDragLayer=true};var u=function e(t){t[0]._private.rscratch.inDragLayer=false};var w=function e(t){t[0]._private.rscratch.isGrabTarget=true};var c=function e(t){t[0]._private.rscratch.isGrabTarget=false};var s=function e(t,r){var n=r.addToList;var a=n.has(t);if(!a&&t.grabbable()&&!t.locked()){n.merge(t);i(t)}};var h=function e(t,r){if(!t.cy().hasCompoundNodes())return;if(r.inDragLayer==null&&r.addToList==null)return;var n=t.descendants();if(r.inDragLayer){n.forEach(o);n.connectedEdges().forEach(o)}if(r.addToList)s(n,r)};var ne=function e(t,r){r=r||{};var n=t.cy().hasCompoundNodes();if(r.inDragLayer){t.forEach(o);t.neighborhood().stdFilter(function(e){return!n||e.isEdge()}).forEach(o)}if(r.addToList)t.forEach(function(e){s(e,r)});h(t,r);v(t,{inDragLayer:r.inDragLayer});ee.updateCachedGrabbedEles()};var E=ne;var ae=function e(t){if(!t)return;ee.getCachedZSortedEles().forEach(function(e){l(e);u(e);c(e)});ee.updateCachedGrabbedEles()};var v=function e(t,r){if(r.inDragLayer==null&&r.addToList==null)return;if(!t.cy().hasCompoundNodes())return;var n=t.ancestors().orphans();if(n.same(t))return;var a=n.descendants().spawnSelf().merge(n).unmerge(t).unmerge(t.descendants());var i=a.connectedEdges();if(r.inDragLayer){i.forEach(o);a.forEach(o)}if(r.addToList)a.forEach(function(e){s(e,r)})};var T=function e(){if(document.activeElement!=null&&document.activeElement.blur!=null)document.activeElement.blur()};var f=typeof MutationObserver!=="undefined";var d=typeof ResizeObserver!=="undefined";if(f){ee.removeObserver=new MutationObserver(function(e){for(var t=0;t<e.length;t++){var r=e[t];var n=r.removedNodes;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(i===ee.container){ee.destroy();break}}}});if(ee.container.parentNode)ee.removeObserver.observe(ee.container.parentNode,{childList:true})}else ee.registerBinding(ee.container,"DOMNodeRemoved",function(e){ee.destroy()});var e=Lt(function(){ee.cy.resize()},100);if(f){ee.styleObserver=new MutationObserver(e);ee.styleObserver.observe(ee.container,{attributes:true})}ee.registerBinding(window,"resize",e);if(d){ee.resizeObserver=new ResizeObserver(e);ee.resizeObserver.observe(ee.container)}var m=function e(t,r){while(t!=null){r(t);t=t.parentNode}};var t=function e(){ee.invalidateContainerClientCoordsCache()};m(ee.container,function(e){ee.registerBinding(e,"transitionend",t);ee.registerBinding(e,"animationend",t);ee.registerBinding(e,"scroll",t)});ee.registerBinding(ee.container,"contextmenu",function(e){e.preventDefault()});var b=function e(){return ee.selection[4]!==0};var ie=function e(t){var r=ee.findContainerClientCoords();var n=r[0];var a=r[1];var i=r[2];var o=r[3];var s=t.touches?t.touches:[t];var l=false;for(var u=0;u<s.length;u++){var c=s[u];if(n<=c.clientX&&c.clientX<=n+i&&a<=c.clientY&&c.clientY<=a+o){l=true;break}}if(!l)return false;var h=ee.container;var v=t.target;var f=v.parentNode;var d=false;while(f){if(f===h){d=true;break}f=f.parentNode}if(!d)return false;return true};ee.registerBinding(ee.container,"mousedown",function e(r){if(!ie(r))return;r.preventDefault();T();ee.hoverData.capture=true;ee.hoverData.which=r.which;var t=ee.cy;var n=[r.clientX,r.clientY];var a=ee.projectIntoViewport(n[0],n[1]);var i=ee.selection;var o=ee.findNearestElements(a[0],a[1],true,false);var s=o[0];var l=ee.dragData.possibleDragElements;ee.hoverData.mdownPos=a;ee.hoverData.mdownGPos=n;var u=function e(){ee.hoverData.tapholdCancelled=false;clearTimeout(ee.hoverData.tapholdTimeout);ee.hoverData.tapholdTimeout=setTimeout(function(){if(ee.hoverData.tapholdCancelled)return;else{var e=ee.hoverData.down;if(e)e.emit({originalEvent:r,type:"taphold",position:{x:a[0],y:a[1]}});else t.emit({originalEvent:r,type:"taphold",position:{x:a[0],y:a[1]}})}},ee.tapholdDuration)};if(r.which==3){ee.hoverData.cxtStarted=true;var c={originalEvent:r,type:"cxttapstart",position:{x:a[0],y:a[1]}};if(s){s.activate();s.emit(c);ee.hoverData.down=s}else t.emit(c);ee.hoverData.downTime=(new Date).getTime();ee.hoverData.cxtDragged=false}else if(r.which==1){if(s)s.activate();{if(s!=null)if(ee.nodeIsGrabbable(s)){var h=function e(t){return{originalEvent:r,type:t,position:{x:a[0],y:a[1]}}};var v=function e(t){t.emit(h("grab"))};w(s);if(!s.selected()){l=ee.dragData.possibleDragElements=t.collection();E(s,{addToList:l});s.emit(h("grabon")).emit(h("grab"))}else{l=ee.dragData.possibleDragElements=t.collection();var f=t.$(function(e){return e.isNode()&&e.selected()&&ee.nodeIsGrabbable(e)});ne(f,{addToList:l});s.emit(h("grabon"));f.forEach(v)}ee.redrawHint("eles",true);ee.redrawHint("drag",true)}ee.hoverData.down=s;ee.hoverData.downs=o;ee.hoverData.downTime=(new Date).getTime()}te(s,["mousedown","tapstart","vmousedown"],r,{x:a[0],y:a[1]});if(s==null){i[4]=1;ee.data.bgActivePosistion={x:a[0],y:a[1]};ee.redrawHint("select",true);ee.redraw()}else if(s.pannable())i[4]=1;u()}i[0]=i[2]=a[0];i[1]=i[3]=a[1]},false);ee.registerBinding(window,"mousemove",function e(t){var r=ee.hoverData.capture;if(!r&&!ie(t))return;var n=false;var a=ee.cy;var i=a.zoom();var o=[t.clientX,t.clientY];var s=ee.projectIntoViewport(o[0],o[1]);var l=ee.hoverData.mdownPos;var u=ee.hoverData.mdownGPos;var c=ee.selection;var h=null;if(!ee.hoverData.draggingEles&&!ee.hoverData.dragging&&!ee.hoverData.selecting)h=ee.findNearestElement(s[0],s[1],true,false);var v=ee.hoverData.last;var f=ee.hoverData.down;var d=[s[0]-c[2],s[1]-c[3]];var p=ee.dragData.possibleDragElements;var g;if(u){var y=o[0]-u[0];var m=y*y;var b=o[1]-u[1];var x=b*b;var w=m+x;ee.hoverData.isOverThresholdDrag=g=w>=ee.desktopTapThreshold2}var E=k(t);if(g)ee.hoverData.tapholdCancelled=true;var T=function e(){var t=ee.hoverData.dragDelta=ee.hoverData.dragDelta||[];if(t.length===0){t.push(d[0]);t.push(d[1])}else{t[0]+=d[0];t[1]+=d[1]}};n=true;te(h,["mousemove","vmousemove","tapdrag"],t,{x:s[0],y:s[1]});var _=function e(){ee.data.bgActivePosistion=void 0;if(!ee.hoverData.selecting)a.emit({originalEvent:t,type:"boxstart",position:{x:s[0],y:s[1]}});c[4]=1;ee.hoverData.selecting=true;ee.redrawHint("select",true);ee.redraw()};if(ee.hoverData.which===3){if(g){var D={originalEvent:t,type:"cxtdrag",position:{x:s[0],y:s[1]}};if(f)f.emit(D);else a.emit(D);ee.hoverData.cxtDragged=true;if(!ee.hoverData.cxtOver||h!==ee.hoverData.cxtOver){if(ee.hoverData.cxtOver)ee.hoverData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:s[0],y:s[1]}});ee.hoverData.cxtOver=h;if(h)h.emit({originalEvent:t,type:"cxtdragover",position:{x:s[0],y:s[1]}})}}}else if(ee.hoverData.dragging){n=true;if(a.panningEnabled()&&a.userPanningEnabled()){var C;if(ee.hoverData.justStartedPan){var N=ee.hoverData.mdownPos;C={x:(s[0]-N[0])*i,y:(s[1]-N[1])*i};ee.hoverData.justStartedPan=false}else C={x:d[0]*i,y:d[1]*i};a.panBy(C);a.emit("dragpan");ee.hoverData.dragged=true}s=ee.projectIntoViewport(t.clientX,t.clientY)}else if(c[4]==1&&(f==null||f.pannable())){if(g){if(!ee.hoverData.dragging&&a.boxSelectionEnabled()&&(E||!a.panningEnabled()||!a.userPanningEnabled()))_();else if(!ee.hoverData.selecting&&a.panningEnabled()&&a.userPanningEnabled()){var A=re(f,ee.hoverData.downs);if(A){ee.hoverData.dragging=true;ee.hoverData.justStartedPan=true;c[4]=0;ee.data.bgActivePosistion=Gr(l);ee.redrawHint("select",true);ee.redraw()}}if(f&&f.pannable()&&f.active())f.unactivate()}}else{if(f&&f.pannable()&&f.active())f.unactivate();if((!f||!f.grabbed())&&h!=v){if(v)te(v,["mouseout","tapdragout"],t,{x:s[0],y:s[1]});if(h)te(h,["mouseover","tapdragover"],t,{x:s[0],y:s[1]});ee.hoverData.last=h}if(f)if(g){if(a.boxSelectionEnabled()&&E){if(f&&f.grabbed()){ae(p);f.emit("freeon");p.emit("free");if(ee.dragData.didDrag){f.emit("dragfreeon");p.emit("dragfree")}}_()}else if(f&&f.grabbed()&&ee.nodeIsDraggable(f)){var L=!ee.dragData.didDrag;if(L)ee.redrawHint("eles",true);ee.dragData.didDrag=true;if(!ee.hoverData.draggingEles)ne(p,{inDragLayer:true});var S={x:0,y:0};if(me(d[0])&&me(d[1])){S.x+=d[0];S.y+=d[1];if(L){var I=ee.hoverData.dragDelta;if(I&&me(I[0])&&me(I[1])){S.x+=I[0];S.y+=I[1]}}}ee.hoverData.draggingEles=true;p.silentShift(S).emit("position drag");ee.redrawHint("drag",true);ee.redraw()}}else T();n=true}c[2]=s[0];c[3]=s[1];if(n){if(t.stopPropagation)t.stopPropagation();if(t.preventDefault)t.preventDefault();return false}},false);var p,g,y;ee.registerBinding(window,"mouseup",function e(t){var r=ee.hoverData.capture;if(!r)return;ee.hoverData.capture=false;var n=ee.cy;var a=ee.projectIntoViewport(t.clientX,t.clientY);var i=ee.selection;var o=ee.findNearestElement(a[0],a[1],true,false);var s=ee.dragData.possibleDragElements;var l=ee.hoverData.down;var u=k(t);if(ee.data.bgActivePosistion){ee.redrawHint("select",true);ee.redraw()}ee.hoverData.tapholdCancelled=true;ee.data.bgActivePosistion=void 0;if(l)l.unactivate();if(ee.hoverData.which===3){var c={originalEvent:t,type:"cxttapend",position:{x:a[0],y:a[1]}};if(l)l.emit(c);else n.emit(c);if(!ee.hoverData.cxtDragged){var h={originalEvent:t,type:"cxttap",position:{x:a[0],y:a[1]}};if(l)l.emit(h);else n.emit(h)}ee.hoverData.cxtDragged=false;ee.hoverData.which=null}else if(ee.hoverData.which===1){te(o,["mouseup","tapend","vmouseup"],t,{x:a[0],y:a[1]});if(!ee.dragData.didDrag&&!ee.hoverData.dragged&&!ee.hoverData.selecting&&!ee.hoverData.isOverThresholdDrag){te(l,["click","tap","vclick"],t,{x:a[0],y:a[1]});g=false;if(t.timeStamp-y<=n.multiClickDebounceTime()){p&&clearTimeout(p);g=true;y=null;te(l,["dblclick","dbltap","vdblclick"],t,{x:a[0],y:a[1]})}else{p=setTimeout(function(){if(g)return;te(l,["oneclick","onetap","voneclick"],t,{x:a[0],y:a[1]})},n.multiClickDebounceTime());y=t.timeStamp}}if(l==null&&!ee.dragData.didDrag&&!ee.hoverData.selecting&&!ee.hoverData.dragged&&!k(t)){n.$(_).unselect(["tapunselect"]);if(s.length>0)ee.redrawHint("eles",true);ee.dragData.possibleDragElements=s=n.collection()}if(o==l&&!ee.dragData.didDrag&&!ee.hoverData.selecting)if(o!=null&&o._private.selectable){if(ee.hoverData.dragging);else if(n.selectionType()==="additive"||u)if(o.selected())o.unselect(["tapunselect"]);else o.select(["tapselect"]);else if(!u){n.$(_).unmerge(o).unselect(["tapunselect"]);o.select(["tapselect"])}ee.redrawHint("eles",true)}if(ee.hoverData.selecting){var v=n.collection(ee.getAllInBox(i[0],i[1],i[2],i[3]));ee.redrawHint("select",true);if(v.length>0)ee.redrawHint("eles",true);n.emit({type:"boxend",originalEvent:t,position:{x:a[0],y:a[1]}});var f=function e(t){return t.selectable()&&!t.selected()};if(n.selectionType()==="additive")v.emit("box").stdFilter(f).select().emit("boxselect");else{if(!u)n.$(_).unmerge(v).unselect();v.emit("box").stdFilter(f).select().emit("boxselect")}ee.redraw()}if(ee.hoverData.dragging){ee.hoverData.dragging=false;ee.redrawHint("select",true);ee.redrawHint("eles",true);ee.redraw()}if(!i[4]){ee.redrawHint("drag",true);ee.redrawHint("eles",true);var d=l&&l.grabbed();ae(s);if(d){l.emit("freeon");s.emit("free");if(ee.dragData.didDrag){l.emit("dragfreeon");s.emit("dragfree")}}}}i[4]=0;ee.hoverData.down=null;ee.hoverData.cxtStarted=false;ee.hoverData.draggingEles=false;ee.hoverData.selecting=false;ee.hoverData.isOverThresholdDrag=false;ee.dragData.didDrag=false;ee.hoverData.dragged=false;ee.hoverData.dragDelta=[];ee.hoverData.mdownPos=null;ee.hoverData.mdownGPos=null},false);var x=function e(t){if(ee.scrollingPage)return;var r=ee.cy;var n=r.zoom();var a=r.pan();var i=ee.projectIntoViewport(t.clientX,t.clientY);var o=[i[0]*n+a.x,i[1]*n+a.y];if(ee.hoverData.draggingEles||ee.hoverData.dragging||ee.hoverData.cxtStarted||b()){t.preventDefault();return}if(r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()){t.preventDefault();ee.data.wheelZooming=true;clearTimeout(ee.data.wheelTimeout);ee.data.wheelTimeout=setTimeout(function(){ee.data.wheelZooming=false;ee.redrawHint("eles",true);ee.redraw()},150);var s;if(t.deltaY!=null)s=t.deltaY/-250;else if(t.wheelDeltaY!=null)s=t.wheelDeltaY/1e3;else s=t.wheelDelta/1e3;s=s*ee.wheelSensitivity;var l=t.deltaMode===1;if(l)s*=33;var u=r.zoom()*Math.pow(10,s);if(t.type==="gesturechange")u=ee.gestureStartZoom*t.scale;r.zoom({level:u,renderedPosition:{x:o[0],y:o[1]}});r.emit(t.type==="gesturechange"?"pinchzoom":"scrollzoom")}};ee.registerBinding(ee.container,"wheel",x,true);ee.registerBinding(window,"scroll",function e(t){ee.scrollingPage=true;clearTimeout(ee.scrollingPageTimeout);ee.scrollingPageTimeout=setTimeout(function(){ee.scrollingPage=false},250)},true);ee.registerBinding(ee.container,"gesturestart",function e(t){ee.gestureStartZoom=ee.cy.zoom();if(!ee.hasTouchStarted)t.preventDefault()},true);ee.registerBinding(ee.container,"gesturechange",function(e){if(!ee.hasTouchStarted)x(e)},true);ee.registerBinding(ee.container,"mouseout",function e(t){var r=ee.projectIntoViewport(t.clientX,t.clientY);ee.cy.emit({originalEvent:t,type:"mouseout",position:{x:r[0],y:r[1]}})},false);ee.registerBinding(ee.container,"mouseover",function e(t){var r=ee.projectIntoViewport(t.clientX,t.clientY);ee.cy.emit({originalEvent:t,type:"mouseover",position:{x:r[0],y:r[1]}})},false);var oe,se,le,ue;var ce,he;var D,ve;var fe,de;var C,N;var pe;var ge=function e(t,r,n,a){return Math.sqrt((n-t)*(n-t)+(a-r)*(a-r))};var ye=function e(t,r,n,a){return(n-t)*(n-t)+(a-r)*(a-r)};var I;ee.registerBinding(ee.container,"touchstart",I=function e(r){ee.hasTouchStarted=true;if(!ie(r))return;T();ee.touchData.capture=true;ee.data.bgActivePosistion=void 0;var t=ee.cy;var n=ee.touchData.now;var a=ee.touchData.earlier;if(r.touches[0]){var i=ee.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);n[0]=i[0];n[1]=i[1]}if(r.touches[1]){var i=ee.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);n[2]=i[0];n[3]=i[1]}if(r.touches[2]){var i=ee.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);n[4]=i[0];n[5]=i[1]}if(r.touches[1]){ee.touchData.singleTouchMoved=true;ae(ee.dragData.touchDragEles);var o=ee.findContainerClientCoords();fe=o[0];de=o[1];C=o[2];N=o[3];oe=r.touches[0].clientX-fe;se=r.touches[0].clientY-de;le=r.touches[1].clientX-fe;ue=r.touches[1].clientY-de;pe=0<=oe&&oe<=C&&0<=le&&le<=C&&0<=se&&se<=N&&0<=ue&&ue<=N;var s=t.pan();var l=t.zoom();ce=ge(oe,se,le,ue);he=ye(oe,se,le,ue);D=[(oe+le)/2,(se+ue)/2];ve=[(D[0]-s.x)/l,(D[1]-s.y)/l];var u=200;var c=u*u;if(he<c&&!r.touches[2]){var h=ee.findNearestElement(n[0],n[1],true,true);var v=ee.findNearestElement(n[2],n[3],true,true);if(h&&h.isNode()){h.activate().emit({originalEvent:r,type:"cxttapstart",position:{x:n[0],y:n[1]}});ee.touchData.start=h}else if(v&&v.isNode()){v.activate().emit({originalEvent:r,type:"cxttapstart",position:{x:n[0],y:n[1]}});ee.touchData.start=v}else t.emit({originalEvent:r,type:"cxttapstart",position:{x:n[0],y:n[1]}});if(ee.touchData.start)ee.touchData.start._private.grabbed=false;ee.touchData.cxt=true;ee.touchData.cxtDragged=false;ee.data.bgActivePosistion=void 0;ee.redraw();return}}if(r.touches[2]){if(t.boxSelectionEnabled())r.preventDefault()}else if(r.touches[1]);else if(r.touches[0]){var f=ee.findNearestElements(n[0],n[1],true,true);var d=f[0];if(d!=null){d.activate();ee.touchData.start=d;ee.touchData.starts=f;if(ee.nodeIsGrabbable(d)){var p=ee.dragData.touchDragEles=t.collection();var g=null;ee.redrawHint("eles",true);ee.redrawHint("drag",true);if(d.selected()){g=t.$(function(e){return e.selected()&&ee.nodeIsGrabbable(e)});ne(g,{addToList:p})}else E(d,{addToList:p});w(d);var y=function e(t){return{originalEvent:r,type:t,position:{x:n[0],y:n[1]}}};d.emit(y("grabon"));if(g)g.forEach(function(e){e.emit(y("grab"))});else d.emit(y("grab"))}}te(d,["touchstart","tapstart","vmousedown"],r,{x:n[0],y:n[1]});if(d==null){ee.data.bgActivePosistion={x:i[0],y:i[1]};ee.redrawHint("select",true);ee.redraw()}ee.touchData.singleTouchMoved=false;ee.touchData.singleTouchStartTime=+new Date;clearTimeout(ee.touchData.tapholdTimeout);ee.touchData.tapholdTimeout=setTimeout(function(){if(ee.touchData.singleTouchMoved===false&&!ee.pinching&&!ee.touchData.selecting)te(ee.touchData.start,["taphold"],r,{x:n[0],y:n[1]})},ee.tapholdDuration)}if(r.touches.length>=1){var m=ee.touchData.startPosition=[];for(var b=0;b<n.length;b++)m[b]=a[b]=n[b];var x=r.touches[0];ee.touchData.startGPosition=[x.clientX,x.clientY]}},false);var O;ee.registerBinding(window,"touchmove",O=function R(e){var t=ee.touchData.capture;if(!t&&!ie(e))return;var r=ee.selection;var n=ee.cy;var a=ee.touchData.now;var i=ee.touchData.earlier;var o=n.zoom();if(e.touches[0]){var s=ee.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);a[0]=s[0];a[1]=s[1]}if(e.touches[1]){var s=ee.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);a[2]=s[0];a[3]=s[1]}if(e.touches[2]){var s=ee.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);a[4]=s[0];a[5]=s[1]}var l=ee.touchData.startGPosition;var u;if(t&&e.touches[0]&&l){var c=[];for(var h=0;h<a.length;h++)c[h]=a[h]-i[h];var v=e.touches[0].clientX-l[0];var B=v*v;var f=e.touches[0].clientY-l[1];var F=f*f;var z=B+F;u=z>=ee.touchTapThreshold2}if(t&&ee.touchData.cxt){e.preventDefault();var d=e.touches[0].clientX-fe,p=e.touches[0].clientY-de;var g=e.touches[1].clientX-fe,y=e.touches[1].clientY-de;var m=ye(d,p,g,y);var G=m/he;var b=150;var Y=b*b;var x=1.5;var X=x*x;if(G>=X||m>=Y){ee.touchData.cxt=false;ee.data.bgActivePosistion=void 0;ee.redrawHint("select",true);var w={originalEvent:e,type:"cxttapend",position:{x:a[0],y:a[1]}};if(ee.touchData.start){ee.touchData.start.unactivate().emit(w);ee.touchData.start=null}else n.emit(w)}}if(t&&ee.touchData.cxt){var w={originalEvent:e,type:"cxtdrag",position:{x:a[0],y:a[1]}};ee.data.bgActivePosistion=void 0;ee.redrawHint("select",true);if(ee.touchData.start)ee.touchData.start.emit(w);else n.emit(w);if(ee.touchData.start)ee.touchData.start._private.grabbed=false;ee.touchData.cxtDragged=true;var E=ee.findNearestElement(a[0],a[1],true,true);if(!ee.touchData.cxtOver||E!==ee.touchData.cxtOver){if(ee.touchData.cxtOver)ee.touchData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:a[0],y:a[1]}});ee.touchData.cxtOver=E;if(E)E.emit({originalEvent:e,type:"cxtdragover",position:{x:a[0],y:a[1]}})}}else if(t&&e.touches[2]&&n.boxSelectionEnabled()){e.preventDefault();ee.data.bgActivePosistion=void 0;this.lastThreeTouch=+new Date;if(!ee.touchData.selecting)n.emit({originalEvent:e,type:"boxstart",position:{x:a[0],y:a[1]}});ee.touchData.selecting=true;ee.touchData.didSelect=true;r[4]=1;if(!r||r.length===0||r[0]===void 0){r[0]=(a[0]+a[2]+a[4])/3;r[1]=(a[1]+a[3]+a[5])/3;r[2]=(a[0]+a[2]+a[4])/3+1;r[3]=(a[1]+a[3]+a[5])/3+1}else{r[2]=(a[0]+a[2]+a[4])/3;r[3]=(a[1]+a[3]+a[5])/3}ee.redrawHint("select",true);ee.redraw()}else if(t&&e.touches[1]&&!ee.touchData.didSelect&&n.zoomingEnabled()&&n.panningEnabled()&&n.userZoomingEnabled()&&n.userPanningEnabled()){e.preventDefault();ee.data.bgActivePosistion=void 0;ee.redrawHint("select",true);var T=ee.dragData.touchDragEles;if(T){ee.redrawHint("drag",true);for(var _=0;_<T.length;_++){var D=T[_]._private;D.grabbed=false;D.rscratch.inDragLayer=false}}var C=ee.touchData.start;var d=e.touches[0].clientX-fe,p=e.touches[0].clientY-de;var g=e.touches[1].clientX-fe,y=e.touches[1].clientY-de;var N=ge(d,p,g,y);var V=N/ce;if(pe){var U=d-oe;var j=p-se;var q=g-le;var H=y-ue;var W=(U+q)/2;var $=(j+H)/2;var A=n.zoom();var L=A*V;var S=n.pan();var I=ve[0]*A+S.x;var K=ve[1]*A+S.y;var Z={x:-L/A*(I-S.x-W)+I,y:-L/A*(K-S.y-$)+K};if(C&&C.active()){var T=ee.dragData.touchDragEles;ae(T);ee.redrawHint("drag",true);ee.redrawHint("eles",true);C.unactivate().emit("freeon");T.emit("free");if(ee.dragData.didDrag){C.emit("dragfreeon");T.emit("dragfree")}}n.viewport({zoom:L,pan:Z,cancelOnFailedZoom:true});n.emit("pinchzoom");ce=N;oe=d;se=p;le=g;ue=y;ee.pinching=true}if(e.touches[0]){var s=ee.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);a[0]=s[0];a[1]=s[1]}if(e.touches[1]){var s=ee.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);a[2]=s[0];a[3]=s[1]}if(e.touches[2]){var s=ee.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);a[4]=s[0];a[5]=s[1]}}else if(e.touches[0]&&!ee.touchData.didSelect){var k=ee.touchData.start;var O=ee.touchData.last;var E;if(!ee.hoverData.draggingEles&&!ee.swipePanning)E=ee.findNearestElement(a[0],a[1],true,true);if(t&&k!=null)e.preventDefault();if(t&&k!=null&&ee.nodeIsDraggable(k))if(u){var T=ee.dragData.touchDragEles;var Q=!ee.dragData.didDrag;if(Q)ne(T,{inDragLayer:true});ee.dragData.didDrag=true;var M={x:0,y:0};if(me(c[0])&&me(c[1])){M.x+=c[0];M.y+=c[1];if(Q){ee.redrawHint("eles",true);var P=ee.touchData.dragDelta;if(P&&me(P[0])&&me(P[1])){M.x+=P[0];M.y+=P[1]}}}ee.hoverData.draggingEles=true;T.silentShift(M).emit("position drag");ee.redrawHint("drag",true);if(ee.touchData.startPosition[0]==i[0]&&ee.touchData.startPosition[1]==i[1])ee.redrawHint("eles",true);ee.redraw()}else{var P=ee.touchData.dragDelta=ee.touchData.dragDelta||[];if(P.length===0){P.push(c[0]);P.push(c[1])}else{P[0]+=c[0];P[1]+=c[1]}}{te(k||E,["touchmove","tapdrag","vmousemove"],e,{x:a[0],y:a[1]});if((!k||!k.grabbed())&&E!=O){if(O)O.emit({originalEvent:e,type:"tapdragout",position:{x:a[0],y:a[1]}});if(E)E.emit({originalEvent:e,type:"tapdragover",position:{x:a[0],y:a[1]}})}ee.touchData.last=E}if(t)for(var _=0;_<a.length;_++)if(a[_]&&ee.touchData.startPosition[_]&&u)ee.touchData.singleTouchMoved=true;if(t&&(k==null||k.pannable())&&n.panningEnabled()&&n.userPanningEnabled()){var J=re(k,ee.touchData.starts);if(J){e.preventDefault();if(!ee.data.bgActivePosistion)ee.data.bgActivePosistion=Gr(ee.touchData.startPosition);if(ee.swipePanning){n.panBy({x:c[0]*o,y:c[1]*o});n.emit("dragpan")}else if(u){ee.swipePanning=true;n.panBy({x:v*o,y:f*o});n.emit("dragpan");if(k){k.unactivate();ee.redrawHint("select",true);ee.touchData.start=null}}}var s=ee.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);a[0]=s[0];a[1]=s[1]}}for(var h=0;h<a.length;h++)i[h]=a[h];if(t&&e.touches.length>0&&!ee.hoverData.draggingEles&&!ee.swipePanning&&ee.data.bgActivePosistion!=null){ee.data.bgActivePosistion=void 0;ee.redrawHint("select",true);ee.redraw()}},false);var M;ee.registerBinding(window,"touchcancel",M=function e(t){var r=ee.touchData.start;ee.touchData.capture=false;if(r)r.unactivate()});var P,A,L,S;ee.registerBinding(window,"touchend",P=function e(t){var r=ee.touchData.start;var n=ee.touchData.capture;if(n){if(t.touches.length===0)ee.touchData.capture=false;t.preventDefault()}else return;var a=ee.selection;ee.swipePanning=false;ee.hoverData.draggingEles=false;var i=ee.cy;var o=i.zoom();var s=ee.touchData.now;var l=ee.touchData.earlier;if(t.touches[0]){var u=ee.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=u[0];s[1]=u[1]}if(t.touches[1]){var u=ee.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=u[0];s[3]=u[1]}if(t.touches[2]){var u=ee.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=u[0];s[5]=u[1]}if(r)r.unactivate();var c;if(ee.touchData.cxt){c={originalEvent:t,type:"cxttapend",position:{x:s[0],y:s[1]}};if(r)r.emit(c);else i.emit(c);if(!ee.touchData.cxtDragged){var h={originalEvent:t,type:"cxttap",position:{x:s[0],y:s[1]}};if(r)r.emit(h);else i.emit(h)}if(ee.touchData.start)ee.touchData.start._private.grabbed=false;ee.touchData.cxt=false;ee.touchData.start=null;ee.redraw();return}if(!t.touches[2]&&i.boxSelectionEnabled()&&ee.touchData.selecting){ee.touchData.selecting=false;var v=i.collection(ee.getAllInBox(a[0],a[1],a[2],a[3]));a[0]=void 0;a[1]=void 0;a[2]=void 0;a[3]=void 0;a[4]=0;ee.redrawHint("select",true);i.emit({type:"boxend",originalEvent:t,position:{x:s[0],y:s[1]}});var f=function e(t){return t.selectable()&&!t.selected()};v.emit("box").stdFilter(f).select().emit("boxselect");if(v.nonempty())ee.redrawHint("eles",true);ee.redraw()}if(r!=null)r.unactivate();if(t.touches[2]){ee.data.bgActivePosistion=void 0;ee.redrawHint("select",true)}else if(t.touches[1]);else if(t.touches[0]);else if(!t.touches[0]){ee.data.bgActivePosistion=void 0;ee.redrawHint("select",true);var d=ee.dragData.touchDragEles;if(r!=null){var p=r._private.grabbed;ae(d);ee.redrawHint("drag",true);ee.redrawHint("eles",true);if(p){r.emit("freeon");d.emit("free");if(ee.dragData.didDrag){r.emit("dragfreeon");d.emit("dragfree")}}te(r,["touchend","tapend","vmouseup","tapdragout"],t,{x:s[0],y:s[1]});r.unactivate();ee.touchData.start=null}else{var g=ee.findNearestElement(s[0],s[1],true,true);te(g,["touchend","tapend","vmouseup","tapdragout"],t,{x:s[0],y:s[1]})}var y=ee.touchData.startPosition[0]-s[0];var m=y*y;var b=ee.touchData.startPosition[1]-s[1];var x=b*b;var w=m+x;var E=w*o*o;if(!ee.touchData.singleTouchMoved){if(!r)i.$(":selected").unselect(["tapunselect"]);te(r,["tap","vclick"],t,{x:s[0],y:s[1]});A=false;if(t.timeStamp-S<=i.multiClickDebounceTime()){L&&clearTimeout(L);A=true;S=null;te(r,["dbltap","vdblclick"],t,{x:s[0],y:s[1]})}else{L=setTimeout(function(){if(A)return;te(r,["onetap","voneclick"],t,{x:s[0],y:s[1]})},i.multiClickDebounceTime());S=t.timeStamp}}if(r!=null&&!ee.dragData.didDrag&&r._private.selectable&&E<ee.touchTapThreshold2&&!ee.pinching){if(i.selectionType()==="single"){i.$(_).unmerge(r).unselect(["tapunselect"]);r.select(["tapselect"])}else if(r.selected())r.unselect(["tapunselect"]);else r.select(["tapselect"]);ee.redrawHint("eles",true)}ee.touchData.singleTouchMoved=true}for(var T=0;T<s.length;T++)l[T]=s[T];ee.dragData.didDrag=false;if(t.touches.length===0){ee.touchData.dragDelta=[];ee.touchData.startPosition=null;ee.touchData.startGPosition=null;ee.touchData.didSelect=false}if(t.touches.length<2){if(t.touches.length===1)ee.touchData.startGPosition=[t.touches[0].clientX,t.touches[0].clientY];ee.pinching=false;ee.redrawHint("eles",true);ee.redraw()}},false);if(typeof TouchEvent==="undefined"){var a=[];var R=function e(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}};var B=function e(t){return{event:t,touch:R(t)}};var F=function e(t){a.push(B(t))};var z=function e(t){for(var r=0;r<a.length;r++){var n=a[r];if(n.event.pointerId===t.pointerId){a.splice(r,1);return}}};var G=function e(t){var r=a.filter(function(e){return e.event.pointerId===t.pointerId})[0];r.event=t;r.touch=R(t)};var r=function e(t){t.touches=a.map(function(e){return e.touch})};var n=function e(t){return t.pointerType==="mouse"||t.pointerType===4};ee.registerBinding(ee.container,"pointerdown",function(e){if(n(e))return;e.preventDefault();F(e);r(e);I(e)});ee.registerBinding(ee.container,"pointerup",function(e){if(n(e))return;z(e);r(e);P(e)});ee.registerBinding(ee.container,"pointercancel",function(e){if(n(e))return;z(e);r(e);M(e)});ee.registerBinding(ee.container,"pointermove",function(e){if(n(e))return;e.preventDefault();G(e);r(e);O(e)})}},{}),Yv=(Gv.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function e(t,r,n,a,i){this.renderer.nodeShapeImpl("polygon",t,r,n,a,i,this.points)},intersectLine:function e(t,r,n,a,i,o,s){return In(i,o,this.points,t,r,n/2,a/2,s)},checkPoint:function e(t,r,n,a,i,o,s){return En(t,r,this.points,o,s,a,i,[0,-1],n)}}},Gv.generateEllipse=function(){return this.nodeShapes["ellipse"]={renderer:this,name:"ellipse",draw:function e(t,r,n,a,i){this.renderer.nodeShapeImpl(this.name,t,r,n,a,i)},intersectLine:function e(t,r,n,a,i,o,s){return Cn(i,o,t,r,n/2+s,a/2+s)},checkPoint:function e(t,r,n,a,i,o,s){return Nn(t,r,a,i,o,s,n)}}},Gv.generateRoundPolygon=function(e,t){var r=new Array(t.length*2);for(var n=0;n<t.length/2;n++){var a=n*2;var i=void 0;if(n<t.length/2-1)i=(n+1)*2;else i=0;r[n*4]=t[a];r[n*4+1]=t[a+1];var o=t[i]-t[a];var s=t[i+1]-t[a+1];var l=Math.sqrt(o*o+s*s);r[n*4+2]=o/l;r[n*4+3]=s/l}return this.nodeShapes[e]={renderer:this,name:e,points:r,draw:function e(t,r,n,a,i){this.renderer.nodeShapeImpl("round-polygon",t,r,n,a,i,this.points)},intersectLine:function e(t,r,n,a,i,o,s){return kn(i,o,this.points,t,r,n,a)},checkPoint:function e(t,r,n,a,i,o,s){return Tn(t,r,this.points,o,s,a,i)}}},Gv.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes["roundrectangle"]={renderer:this,name:"round-rectangle",points:u(4,0),draw:function e(t,r,n,a,i){this.renderer.nodeShapeImpl(this.name,t,r,n,a,i)},intersectLine:function e(t,r,n,a,i,o,s){return dn(i,o,t,r,n,a,s)},checkPoint:function e(t,r,n,a,i,o,s){var l=Rn(a,i);var u=l*2;if(En(t,r,this.points,o,s,a,i-u,[0,-1],n))return true;if(En(t,r,this.points,o,s,a-u,i,[0,-1],n))return true;if(Nn(t,r,u,u,o-a/2+l,s-i/2+l,n))return true;if(Nn(t,r,u,u,o+a/2-l,s-i/2+l,n))return true;if(Nn(t,r,u,u,o+a/2-l,s+i/2-l,n))return true;if(Nn(t,r,u,u,o-a/2+l,s+i/2-l,n))return true;return false}}},Gv.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes["cutrectangle"]={renderer:this,name:"cut-rectangle",cornerLength:Fn(),points:u(4,0),draw:function e(t,r,n,a,i){this.renderer.nodeShapeImpl(this.name,t,r,n,a,i)},generateCutTrianglePts:function e(t,r,n,a){var i=this.cornerLength;var o=r/2;var s=t/2;var l=n-s;var u=n+s;var c=a-o;var h=a+o;return{topLeft:[l,c+i,l+i,c,l+i,c+i],topRight:[u-i,c,u,c+i,u-i,c+i],bottomRight:[u,h-i,u-i,h,u-i,h-i],bottomLeft:[l+i,h,l,h-i,l+i,h-i]}},intersectLine:function e(t,r,n,a,i,o,s){var l=this.generateCutTrianglePts(n+2*s,a+2*s,t,r);var u=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return In(i,o,u,t,r)},checkPoint:function e(t,r,n,a,i,o,s){if(En(t,r,this.points,o,s,a,i-2*this.cornerLength,[0,-1],n))return true;if(En(t,r,this.points,o,s,a-2*this.cornerLength,i,[0,-1],n))return true;var l=this.generateCutTrianglePts(a,i,o,s);return wn(t,r,l.topLeft)||wn(t,r,l.topRight)||wn(t,r,l.bottomRight)||wn(t,r,l.bottomLeft)}}},Gv.generateBarrel=function(){return this.nodeShapes["barrel"]={renderer:this,name:"barrel",points:u(4,0),draw:function e(t,r,n,a,i){this.renderer.nodeShapeImpl(this.name,t,r,n,a,i)},intersectLine:function e(t,r,n,a,i,o,s){var l=.15;var u=.5;var c=.85;var h=this.generateBarrelBezierPts(n+2*s,a+2*s,t,r);var v=function e(t){var r=Qr({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},l);var n=Qr({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},u);var a=Qr({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},c);return[t[0],t[1],r.x,r.y,n.x,n.y,a.x,a.y,t[4],t[5]]};var f=[].concat(v(h.topLeft),v(h.topRight),v(h.bottomRight),v(h.bottomLeft));return In(i,o,f,t,r)},generateBarrelBezierPts:function e(t,r,n,a){var i=r/2;var o=t/2;var s=n-o;var l=n+o;var u=a-i;var c=a+i;var h=Gn(t,r);var v=h.heightOffset;var f=h.widthOffset;var d=h.ctrlPtOffsetPct*t;var p={topLeft:[s,u+v,s+d,u,s+f,u],topRight:[l-f,u,l-d,u,l,u+v],bottomRight:[l,c-v,l-d,c,l-f,c],bottomLeft:[s+f,c,s+d,c,s,c-v]};p.topLeft.isTop=true;p.topRight.isTop=true;p.bottomLeft.isBottom=true;p.bottomRight.isBottom=true;return p},checkPoint:function e(t,r,n,a,i,o,s){var l=Gn(a,i);var u=l.heightOffset;var c=l.widthOffset;if(En(t,r,this.points,o,s,a,i-2*u,[0,-1],n))return true;if(En(t,r,this.points,o,s,a-2*c,i,[0,-1],n))return true;var h=this.generateBarrelBezierPts(a,i,o,s);var v=function e(t,r,n){var a=n[4];var i=n[2];var o=n[0];var s=n[5];var l=n[1];var u=Math.min(a,o);var c=Math.max(a,o);var h=Math.min(s,l);var v=Math.max(s,l);if(u<=t&&t<=c&&h<=r&&r<=v){var f=zn(a,i,o);var d=yn(f[0],f[1],f[2],t);var p=d.filter(function(e){return 0<=e&&e<=1});if(p.length>0)return p[0]}return null};var f=Object.keys(h);for(var d=0;d<f.length;d++){var p=f[d];var g=h[p];var y=v(t,r,g);if(y==null)continue;var m=g[5];var b=g[3];var x=g[1];var w=k(m,b,x,y);if(g.isTop&&w<=r)return true;if(g.isBottom&&r<=w)return true}return false}}},Gv.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes["bottomroundrectangle"]={renderer:this,name:"bottom-round-rectangle",points:u(4,0),draw:function e(t,r,n,a,i){this.renderer.nodeShapeImpl(this.name,t,r,n,a,i)},intersectLine:function e(t,r,n,a,i,o,s){var l=t-(n/2+s);var u=r-(a/2+s);var c=u;var h=t+(n/2+s);var v=Sn(i,o,t,r,l,u,h,c,false);if(v.length>0)return v;return dn(i,o,t,r,n,a,s)},checkPoint:function e(t,r,n,a,i,o,s){var l=Rn(a,i);var u=2*l;if(En(t,r,this.points,o,s,a,i-u,[0,-1],n))return true;if(En(t,r,this.points,o,s,a-u,i,[0,-1],n))return true;var c=a/2+2*n;var h=i/2+2*n;var v=[o-c,s-h,o-c,s,o+c,s,o+c,s-h];if(wn(t,r,v))return true;if(Nn(t,r,u,u,o+a/2-l,s+i/2-l,n))return true;if(Nn(t,r,u,u,o-a/2+l,s+i/2-l,n))return true;return false}}},Gv.registerNodeShapes=function(){var e=this.nodeShapes={};var a=this;this.generateEllipse();this.generatePolygon("triangle",u(3,0));this.generateRoundPolygon("round-triangle",u(3,0));this.generatePolygon("rectangle",u(4,0));e["square"]=e["rectangle"];this.generateRoundRectangle();this.generateCutRectangle();this.generateBarrel();this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t);this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",u(5,0));this.generateRoundPolygon("round-pentagon",u(5,0));this.generatePolygon("hexagon",u(6,0));this.generateRoundPolygon("round-hexagon",u(6,0));this.generatePolygon("heptagon",u(7,0));this.generateRoundPolygon("round-heptagon",u(7,0));this.generatePolygon("octagon",u(8,0));this.generateRoundPolygon("round-octagon",u(8,0));var r=new Array(20);{var n=Pn(5,0);var i=Pn(5,Math.PI/5);var o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++){i[s*2]*=o;i[s*2+1]*=o}for(var s=0;s<20/4;s++){r[s*4]=n[s*2];r[s*4+1]=n[s*2+1];r[s*4+2]=i[s*2];r[s*4+3]=i[s*2+1]}}r=Mn(r);this.generatePolygon("star",r);this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]);this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]);this.nodeShapes["concavehexagon"]=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l);this.generateRoundPolygon("round-tag",l)}e.makePolygon=function(e){var t=e.join("$");var r="polygon-"+t;var n;if(n=this[r])return n;return a.generatePolygon(r,e)}},{}),Xv=(Yv.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},Yv.redraw=function(e){e=e||lr();var t=this;if(t.averageRedrawTime===void 0)t.averageRedrawTime=0;if(t.lastRedrawTime===void 0)t.lastRedrawTime=0;if(t.lastDrawTime===void 0)t.lastDrawTime=0;t.requestedFrame=true;t.renderOptions=e},Yv.beforeRender=function(e,t){if(this.destroyed)return;if(t==null)z("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t});r.sort(function(e,t){return t.priority-e.priority})},function e(t,r,n){var a=t.beforeRenderCallbacks;for(var i=0;i<a.length;i++)a[i].fn(r,n)});Yv.startRenderLoop=function(){var i=this;var o=i.cy;if(i.renderLoopStarted)return;else i.renderLoopStarted=true;var e=function e(t){if(i.destroyed)return;if(o.batching());else if(i.requestedFrame&&!i.skipFrame){Xv(i,true,t);var r=Mt();i.render(i.renderOptions);var n=i.lastDrawTime=Mt();if(i.averageRedrawTime===void 0)i.averageRedrawTime=n-r;if(i.redrawCount===void 0)i.redrawCount=0;i.redrawCount++;if(i.redrawTotalTime===void 0)i.redrawTotalTime=0;var a=n-r;i.redrawTotalTime+=a;i.lastRedrawTime=a;i.averageRedrawTime=i.averageRedrawTime/2+a/2;i.requestedFrame=false}else Xv(i,false,t);i.skipFrame=false;Ot(e)};Ot(e)};var Vv,Uv=function e(t){this.init(t)},jv=Uv.prototype,qv=(jv.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],jv.init=function(e){var t=this;t.options=e;t.cy=e.cy;var r=t.container=e.cy.container();if(g){var n=g.document;var a=n.head;var i="__________cytoscape_stylesheet";var o="__________cytoscape_container";var s=n.getElementById(i)!=null;if(r.className.indexOf(o)<0)r.className=(r.className||"")+" "+o;if(!s){var l=n.createElement("style");l.id=i;l.innerHTML="."+o+" { position: relative; }";a.insertBefore(l,a.children[0])}var u=g.getComputedStyle(r);var c=u.getPropertyValue("position");if(c==="static")ee("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0];t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95];t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:false,initialPan:[null,null],capture:false};t.dragData={possibleDragElements:[]};t.touchData={start:null,capture:false,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:true,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]};t.redraws=0;t.showFps=e.showFps;t.debug=e.debug;t.hideEdgesOnViewport=e.hideEdgesOnViewport;t.textureOnViewport=e.textureOnViewport;t.wheelSensitivity=e.wheelSensitivity;t.motionBlurEnabled=e.motionBlur;t.forcedPixelRatio=me(e.pixelRatio)?e.pixelRatio:null;t.motionBlur=e.motionBlur;t.motionBlurOpacity=e.motionBlurOpacity;t.motionBlurTransparency=1-t.motionBlurOpacity;t.motionBlurPxRatio=1;t.mbPxRBlurry=1;t.minMbLowQualFrames=4;t.fullQualityMb=false;t.clearedForMotionBlur=[];t.desktopTapThreshold=e.desktopTapThreshold;t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold;t.touchTapThreshold=e.touchTapThreshold;t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold;t.tapholdDuration=500;t.bindings=[];t.beforeRenderCallbacks=[];t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100};t.registerNodeShapes();t.registerArrowShapes();t.registerCalculationListeners()},jv.notify=function(e,t){var r=this;var n=r.cy;if(this.destroyed)return;if(e==="init"){r.load();return}if(e==="destroy"){r.destroy();return}if(e==="add"||e==="remove"||e==="move"&&n.hasCompoundNodes()||e==="load"||e==="zorder"||e==="mount")r.invalidateCachedZSortedEles();if(e==="viewport")r.redrawHint("select",true);if(e==="load"||e==="resize"||e==="mount"){r.invalidateContainerClientCoordsCache();r.matchCanvasSize(r.container)}r.redrawHint("eles",true);r.redrawHint("drag",true);this.startRenderLoop();this.redraw()},jv.destroy=function(){var e=this;e.destroyed=true;e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t];var n=r;var a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}e.bindings=[];e.beforeRenderCallbacks=[];e.onUpdateEleCalcsFns=[];if(e.removeObserver)e.removeObserver.disconnect();if(e.styleObserver)e.styleObserver.disconnect();if(e.resizeObserver)e.resizeObserver.disconnect();if(e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch(e){}},jv.isHeadless=function(){return false},[wv,Bv,Fv,zv,Gv,Yv].forEach(function(e){T(jv,e)}),1e3/60),Hv={setupDequeueing:function e(m){return function e(){var p=this;var g=this.renderer;if(p.dequeueingSetup)return;else p.dequeueingSetup=true;var y=Lt(function(){g.redrawHint("eles",true);g.redrawHint("drag",true);g.redraw()},m.deqRedrawThreshold);var t=function e(t,r){var n=Mt();var a=g.averageRedrawTime;var i=g.lastRedrawTime;var o=[];var s=g.cy.extent();var l=g.getPixelRatio();if(!t)g.flushRenderedStyleQueue();while(true){var u=Mt();var c=u-n;var h=u-r;if(i<qv){var v=qv-(t?a:0);if(h>=m.deqFastCost*v)break}else if(t){if(c>=m.deqCost*i||c>=m.deqAvgCost*a)break}else if(h>=m.deqNoDrawCost*qv)break;var f=m.deq(p,l,s);if(f.length>0)for(var d=0;d<f.length;d++)o.push(f[d]);else break}if(o.length>0){m.onDeqd(p,o);if(!t&&m.shouldRedraw(p,o,l,s))y()}};var r=m.priority||tr;g.beforeRender(t,r(p))}}},Wv=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jt;D(this,r);this.idsByKey=new pr;this.keyForId=new pr;this.cachesByLvl=new pr;this.lvls=[];this.getKey=e;this.doesEleInvalidateKey=t}N(r,[{key:"getIdsFor",value:function e(t){if(t==null)z("Can not get id list for null key");var r=this.idsByKey;var n=this.idsByKey.get(t);if(!n){n=new mr;r.set(t,n)}return n}},{key:"addIdForKey",value:function e(t,r){if(t!=null)this.getIdsFor(t).add(r)}},{key:"deleteIdForKey",value:function e(t,r){if(t!=null)this.getIdsFor(t)["delete"](r)}},{key:"getNumberOfIdsForKey",value:function e(t){if(t==null)return 0;else return this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function e(t){var r=t.id();var n=this.keyForId.get(r);var a=this.getKey(t);this.deleteIdForKey(n,r);this.addIdForKey(a,r);this.keyForId.set(r,a)}},{key:"deleteKeyMappingFor",value:function e(t){var r=t.id();var n=this.keyForId.get(r);this.deleteIdForKey(n,r);this.keyForId["delete"](r)}},{key:"keyHasChangedFor",value:function e(t){var r=t.id();var n=this.keyForId.get(r);var a=this.getKey(t);return n!==a}},{key:"isInvalid",value:function e(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function e(t){var r=this.cachesByLvl,n=this.lvls;var a=r.get(t);if(!a){a=new pr;r.set(t,a);n.push(t)}return a}},{key:"getCache",value:function e(t,r){return this.getCachesAt(r).get(t)}},{key:"get",value:function e(t,r){var n=this.getKey(t);var a=this.getCache(n,r);if(a!=null)this.updateKeyMappingFor(t);return a}},{key:"getForCachedKey",value:function e(t,r){var n=this.keyForId.get(t.id());var a=this.getCache(n,r);return a}},{key:"hasCache",value:function e(t,r){return this.getCachesAt(r).has(t)}},{key:"has",value:function e(t,r){var n=this.getKey(t);return this.hasCache(n,r)}},{key:"setCache",value:function e(t,r,n){n.key=t;this.getCachesAt(r).set(t,n)}},{key:"set",value:function e(t,r,n){var a=this.getKey(t);this.setCache(a,r,n);this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function e(t,r){this.getCachesAt(r)["delete"](t)}},{key:"delete",value:function e(t,r){var n=this.getKey(t);this.deleteCache(n,r)}},{key:"invalidateKey",value:function e(t){var r=this;this.lvls.forEach(function(e){return r.deleteCache(t,e)})}},{key:"invalidate",value:function e(t){var r=t.id();var n=this.keyForId.get(r);this.deleteKeyMappingFor(t);var a=this.doesEleInvalidateKey(t);if(a)this.invalidateKey(n);return a||this.getNumberOfIdsForKey(n)===0}}]);return r}(),$v=25,Kv=50,Zv=-4,Qv=3,Jv=7.99,ef=8,tf=1024,rf=1024,nf=1024,af=.2,of=.8,sf=10,lf=.15,uf=.1,cf=.9,hf=.9,vf=100,ff=1,df={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},pf=e({getKey:null,doesEleInvalidateKey:Jt,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Qt,allowEdgeTxrCaching:true,allowParentTxrCaching:true}),gf=function e(t,r){var n=this;n.renderer=t;n.onDequeues=[];var a=pf(r);T(n,a);n.lookup=new Wv(a.getKey,a.doesEleInvalidateKey);n.setupDequeueing()},b=gf.prototype,yf=(b.reasons=df,b.getTextureQueue=function(e){var t=this;t.eleImgCaches=t.eleImgCaches||{};return t.eleImgCaches[e]=t.eleImgCaches[e]||[]},b.getRetiredTextureQueue=function(e){var t=this;var r=t.eleImgCaches.retired=t.eleImgCaches.retired||{};var n=r[e]=r[e]||[];return n},b.getElementQueue=function(){var e=this;var t=e.eleCacheQueue=e.eleCacheQueue||new Tr(function(e,t){return t.reqs-e.reqs});return t},b.getElementKeyToQueue=function(){var e=this;var t=e.eleKeyToCacheQueue=e.eleKeyToCacheQueue||{};return t},b.getElement=function(e,t,r,n,a){var i=this;var o=this.renderer;var s=o.cy.zoom();var l=this.lookup;if(!t||t.w===0||t.h===0||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed())return null;if(!i.allowEdgeTxrCaching&&e.isEdge()||!i.allowParentTxrCaching&&e.isParent())return null;if(n==null)n=Math.ceil(Hr(s*r));if(n<Zv)n=Zv;else if(s>=Jv||n>Qv)return null;var u=Math.pow(2,n);var c=t.h*u;var h=t.w*u;var v=o.eleTextBiggerThanMin(e,u);if(!this.isVisible(e,v))return null;var f=l.get(e,n);if(f&&f.invalidated){f.invalidated=false;f.texture.invalidatedWidth-=f.width}if(f)return f;var d;if(c<=$v)d=$v;else if(c<=Kv)d=Kv;else d=Math.ceil(c/Kv)*Kv;if(c>nf||h>rf)return null;var p=i.getTextureQueue(d);var g=p[p.length-2];var y=function e(){return i.recycleTexture(d,h)||i.addTexture(d,h)};if(!g)g=p[p.length-1];if(!g)g=y();if(g.width-g.usedWidth<h)g=y();var m=function e(t){return t&&t.scaledLabelShown===v};var b=a&&a===df.dequeue;var x=a&&a===df.highQuality;var w=a&&a===df.downscale;var E;for(var T=n+1;T<=Qv;T++){var _=l.get(e,T);if(_){E=_;break}}var D=E&&E.level===n+1?E:null;var C=function e(){g.context.drawImage(D.texture.canvas,D.x,0,D.width,D.height,g.usedWidth,0,h,c)};g.context.setTransform(1,0,0,1,0,0);g.context.clearRect(g.usedWidth,0,h,d);if(m(D))C();else if(m(E))if(x){for(var N=E.level;N>n;N--)D=i.getElement(e,t,r,N,df.downscale);C()}else{i.queueElement(e,E.level-1);return E}else{var A;if(!b&&!x&&!w)for(var L=n-1;L>=Zv;L--){var S=l.get(e,L);if(S){A=S;break}}if(m(A)){i.queueElement(e,n);return A}g.context.translate(g.usedWidth,0);g.context.scale(u,u);this.drawElement(g.context,e,t,v,false);g.context.scale(1/u,1/u);g.context.translate(-g.usedWidth,0)}f={x:g.usedWidth,texture:g,level:n,scale:u,width:h,height:c,scaledLabelShown:v};g.usedWidth+=Math.ceil(h+ef);g.eleCaches.push(f);l.set(e,n,f);i.checkTextureFullness(g);return f},b.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},b.invalidateElement=function(e){var t=this;var r=t.lookup;var n=[];var a=r.isInvalid(e);if(!a)return;for(var i=Zv;i<=Qv;i++){var o=r.getForCachedKey(e,i);if(o)n.push(o)}var s=r.invalidate(e);if(s)for(var l=0;l<n.length;l++){var u=n[l];var c=u.texture;c.invalidatedWidth+=u.width;u.invalidated=true;t.checkTextureUtility(c)}t.removeFromQueue(e)},b.checkTextureUtility=function(e){if(e.invalidatedWidth>=af*e.width)this.retireTexture(e)},b.checkTextureFullness=function(e){var t=this;var r=t.getTextureQueue(e.height);if(e.usedWidth/e.width>of&&e.fullnessChecks>=sf)ur(r,e);else e.fullnessChecks++},b.retireTexture=function(e){var t=this;var r=e.height;var n=t.getTextureQueue(r);var a=this.lookup;ur(n,e);e.retired=true;var i=e.eleCaches;for(var o=0;o<i.length;o++){var s=i[o];a.deleteCache(s.key,s.level)}cr(i);var l=t.getRetiredTextureQueue(r);l.push(e)},b.addTexture=function(e,t){var r=this;var n=r.getTextureQueue(e);var a={};n.push(a);a.eleCaches=[];a.height=e;a.width=Math.max(tf,t);a.usedWidth=0;a.invalidatedWidth=0;a.fullnessChecks=0;a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height);a.context=a.canvas.getContext("2d");return a},b.recycleTexture=function(e,t){var r=this;var n=r.getTextureQueue(e);var a=r.getRetiredTextureQueue(e);for(var i=0;i<a.length;i++){var o=a[i];if(o.width>=t){o.retired=false;o.usedWidth=0;o.invalidatedWidth=0;o.fullnessChecks=0;cr(o.eleCaches);o.context.setTransform(1,0,0,1,0,0);o.context.clearRect(0,0,o.width,o.height);ur(a,o);n.push(o);return o}}},b.queueElement=function(e,t){var r=this;var n=r.getElementQueue();var a=r.getElementKeyToQueue();var i=this.getKey(e);var o=a[i];if(o){o.level=Math.max(o.level,t);o.eles.merge(e);o.reqs++;n.updateItem(o)}else{var s={eles:e.spawn().merge(e),level:t,reqs:1,key:i};n.push(s);a[i]=s}},b.dequeue=function(e){var t=this;var r=t.getElementQueue();var n=t.getElementKeyToQueue();var a=[];var i=t.lookup;for(var o=0;o<ff;o++)if(r.size()>0){var s=r.pop();var l=s.key;var u=s.eles[0];var c=i.hasCache(u,s.level);n[l]=null;if(c)continue;a.push(s);var h=t.getBoundingBox(u);t.getElement(u,h,e,s.level,df.dequeue)}else break;return a},b.removeFromQueue=function(e){var t=this;var r=t.getElementQueue();var n=t.getElementKeyToQueue();var a=this.getKey(e);var i=n[a];if(i!=null)if(i.eles.length===1){i.reqs=Zt;r.updateItem(i);r.pop();n[a]=null}else i.eles.unmerge(e)},b.onDequeue=function(e){this.onDequeues.push(e)},b.offDequeue=function(e){ur(this.onDequeues,e)},b.setupDequeueing=Hv.setupDequeueing({deqRedrawThreshold:vf,deqCost:lf,deqAvgCost:uf,deqNoDrawCost:cf,deqFastCost:hf,deq:function e(t,r,n){return t.dequeue(r,n)},onDeqd:function e(t,r){for(var n=0;n<t.onDequeues.length;n++){var a=t.onDequeues[n];a(r)}},shouldRedraw:function e(t,r,n,a){for(var i=0;i<r.length;i++){var o=r[i].eles;for(var s=0;s<o.length;s++){var l=o[s].boundingBox();if(cn(l,a))return true}}return false},priority:function e(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}}),1),mf=-4,bf=2,xf=3.99,wf=50,Ef=50,Tf=.15,_f=.1,Df=.9,Cf=.9,Nf=1,Af=250,Lf=4e3*4e3,Sf=true,If=function e(t){var r=this;var n=r.renderer=t;var a=n.cy;r.layersByLevel={};r.firstGet=true;r.lastInvalidationTime=Mt()-2*Af;r.skipping=false;r.eleTxrDeqs=a.collection();r.scheduleElementRefinement=Lt(function(){r.refineElementTextures(r.eleTxrDeqs);r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},Ef);n.beforeRender(function(e,t){if(t-r.lastInvalidationTime<=Af)r.skipping=true;else r.skipping=false},n.beforeRenderPriorities.lyrTxrSkip);var i=function e(t,r){return r.reqs-t.reqs};r.layersQueue=new Tr(i);r.setupDequeueing()},E=If.prototype,kf=0,Of=Math.pow(2,53)-1,Mf=(E.makeLayer=function(e,t){var r=Math.pow(2,t);var n=Math.ceil(e.w*r);var a=Math.ceil(e.h*r);var i=this.renderer.makeOffscreenCanvas(n,a);var o={id:kf=++kf%Of,bb:e,level:t,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0};var s=o.context;var l=-o.bb.x1;var u=-o.bb.y1;s.scale(r,r);s.translate(l,u);return o},E.getLayers=function(i,e,o){var s=this;var t=s.renderer;var r=t.cy;var n=r.zoom();var a=s.firstGet;s.firstGet=false;if(o==null){o=Math.ceil(Hr(n*e));if(o<mf)o=mf;else if(n>=xf||o>bf)return null}s.validateLayersElesOrdering(o,i);var l=s.layersByLevel;var u=Math.pow(2,o);var c=l[o]=l[o]||[];var h;var v=s.levelIsComplete(o,i);var f;var d=function e(){var n=function e(t){s.validateLayersElesOrdering(t,i);if(s.levelIsComplete(t,i)){f=l[t];return true}};var t=function e(t){if(f)return;for(var r=o+t;mf<=r&&r<=bf;r+=t)if(n(r))break};t(1);t(-1);for(var r=c.length-1;r>=0;r--){var a=c[r];if(a.invalid)ur(c,a)}};if(!v)d();else return c;var p=function e(){if(!h){h=tn();for(var t=0;t<i.length;t++)an(h,i[t].boundingBox())}return h};var g=function e(t){t=t||{};var r=t.after;p();var n=h.w*u*(h.h*u);if(n>Lf)return null;var a=s.makeLayer(h,o);if(r!=null){var i=c.indexOf(r)+1;c.splice(i,0,a)}else if(t.insert===void 0||t.insert)c.unshift(a);return a};if(s.skipping&&!a)return null;var y=null;var m=i.length/yf;var b=!a;for(var x=0;x<i.length;x++){var w=i[x];var E=w._private.rscratch;var T=E.imgLayerCaches=E.imgLayerCaches||{};var _=T[o];if(_){y=_;continue}if(!y||y.eles.length>=m||!fn(y.bb,w.boundingBox())){y=g({insert:true,after:y});if(!y)return null}if(f||b)s.queueLayer(y,w);else s.drawEleInLayer(y,w,o,e);y.eles.push(w);T[o]=y}if(f)return f;if(b)return null;return c},E.getEleLevelForLayerLevel=function(e,t){return e},E.drawEleInLayer=function(e,t,r,n){var a=this;var i=this.renderer;var o=e.context;var s=t.boundingBox();if(s.w===0||s.h===0||!t.visible())return;r=a.getEleLevelForLayerLevel(r,n);i.setImgSmoothing(o,false);i.drawCachedElement(o,t,null,null,r,Sf);i.setImgSmoothing(o,true)},E.levelIsComplete=function(e,t){var r=this;var n=r.layersByLevel[e];if(!n||n.length===0)return false;var a=0;for(var i=0;i<n.length;i++){var o=n[i];if(o.reqs>0)return false;if(o.invalid)return false;a+=o.eles.length}if(a!==t.length)return false;return true},E.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(!r)return;for(var n=0;n<r.length;n++){var a=r[n];var i=-1;for(var o=0;o<t.length;o++)if(a.eles[0]===t[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}var s=i;for(var o=0;o<a.eles.length;o++)if(a.eles[o]!==t[s+o]){this.invalidateLayer(a);break}}},E.updateElementsInLayers=function(e,t){var r=this;var n=te(e[0]);for(var a=0;a<e.length;a++){var i=n?null:e[a];var o=n?e[a]:e[a].ele;var s=o._private.rscratch;var l=s.imgLayerCaches=s.imgLayerCaches||{};for(var u=mf;u<=bf;u++){var c=l[u];if(!c)continue;if(i&&r.getEleLevelForLayerLevel(c.level)!==i.level)continue;t(c,o,i)}}},E.haveLayers=function(){var e=this;var t=false;for(var r=mf;r<=bf;r++){var n=e.layersByLevel[r];if(n&&n.length>0){t=true;break}}return t},E.invalidateElements=function(e){var a=this;if(e.length===0)return;a.lastInvalidationTime=Mt();if(e.length===0||!a.haveLayers())return;a.updateElementsInLayers(e,function e(t,r,n){a.invalidateLayer(t)})},E.invalidateLayer=function(e){this.lastInvalidationTime=Mt();if(e.invalid)return;var t=e.level;var r=e.eles;var n=this.layersByLevel[t];ur(n,e);e.elesQueue=[];e.invalid=true;if(e.replacement)e.replacement.invalid=true;for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;if(i)i[t]=null}},E.refineElementTextures=function(e){var o=this;o.updateElementsInLayers(e,function e(t,r,n){var a=t.replacement;if(!a){a=t.replacement=o.makeLayer(t.bb,t.level);a.replaces=t;a.eles=t.eles}if(!a.reqs)for(var i=0;i<a.eles.length;i++)o.queueLayer(a,a.eles[i])})},E.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e);this.scheduleElementRefinement()},E.queueLayer=function(e,t){var r=this;var n=r.layersQueue;var a=e.elesQueue;var i=a.hasId=a.hasId||{};if(e.replacement)return;if(t){if(i[t.id()])return;a.push(t);i[t.id()]=true}if(e.reqs){e.reqs++;n.updateItem(e)}else{e.reqs=1;n.push(e)}},E.dequeue=function(e){var t=this;var r=t.layersQueue;var n=[];var a=0;while(a<Nf){if(r.size()===0)break;var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var o=i.elesQueue.shift();if(o){t.drawEleInLayer(i,o,i.level,e);a++}if(n.length===0)n.push(true);if(i.elesQueue.length===0){r.pop();i.reqs=0;if(i.replaces)t.applyLayerReplacement(i);t.requestRedraw()}}return n},E.applyLayerReplacement=function(e){var t=this;var r=t.layersByLevel[e.level];var n=e.replaces;var a=r.indexOf(n);if(a<0||n.invalid)return;r[a]=e;for(var i=0;i<e.eles.length;i++){var o=e.eles[i]._private;var s=o.imgLayerCaches=o.imgLayerCaches||{};if(s)s[e.level]=e}t.requestRedraw()},E.requestRedraw=Lt(function(){var e=this.renderer;e.redrawHint("eles",true);e.redrawHint("drag",true);e.redraw()},100),E.setupDequeueing=Hv.setupDequeueing({deqRedrawThreshold:wf,deqCost:Tf,deqAvgCost:_f,deqNoDrawCost:Df,deqFastCost:Cf,deq:function e(t,r){return t.dequeue(r)},onDeqd:tr,shouldRedraw:Qt,priority:function e(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}}),{}),Pf;function Rf(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.lineTo(n.x,n.y)}}function Bf(e,t,r){var n;for(var a=0;a<t.length;a++){var i=t[a];if(a===0)n=i;e.lineTo(i.x,i.y)}e.quadraticCurveTo(r.x,r.y,n.x,n.y)}function Ff(e,t,r){if(e.beginPath)e.beginPath();var n=t;for(var a=0;a<n.length;a++){var i=n[a];e.lineTo(i.x,i.y)}var o=r;var s=r[0];e.moveTo(s.x,s.y);for(var a=1;a<o.length;a++){var i=o[a];e.lineTo(i.x,i.y)}if(e.closePath)e.closePath()}function zf(e,t,r,n,a){if(e.beginPath)e.beginPath();e.arc(r,n,a,0,Math.PI*2,false);var i=t;var o=i[0];e.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var l=i[s];e.lineTo(l.x,l.y)}if(e.closePath)e.closePath()}function Gf(e,t,r,n){e.arc(t,r,n,0,Math.PI*2,false)}Mf.arrowShapeImpl=function(e){return(Pf||(Pf={polygon:Rf,"triangle-backcurve":Bf,"triangle-tee":Ff,"circle-triangle":zf,"triangle-cross":Ff,circle:Gf}))[e]};var Yf={drawElement:function(e,t,r,n,a,i){var o=this;if(t.isNode())o.drawNode(e,t,r,n,a,i);else o.drawEdge(e,t,r,n,a,i)},drawElementOverlay:function(e,t){var r=this;if(t.isNode())r.drawNodeOverlay(e,t);else r.drawEdgeOverlay(e,t)},drawElementUnderlay:function(e,t){var r=this;if(t.isNode())r.drawNodeUnderlay(e,t);else r.drawEdgeUnderlay(e,t)},drawCachedElementPortion:function(e,t,r,n,a,i,o,s){var l=this;var u=r.getBoundingBox(t);if(u.w===0||u.h===0)return;var c=r.getElement(t,u,n,a,i);if(c!=null){var h=s(l,t);if(h===0)return;var v=o(l,t);var f=u.x1,d=u.y1,p=u.w,g=u.h;var y,m,b,x,w;if(v!==0){var E=r.getRotationPoint(t);b=E.x;x=E.y;e.translate(b,x);e.rotate(v);w=l.getImgSmoothing(e);if(!w)l.setImgSmoothing(e,true);var T=r.getRotationOffset(t);y=T.x;m=T.y}else{y=f;m=d}var _;if(h!==1){_=e.globalAlpha;e.globalAlpha=_*h}e.drawImage(c.texture.canvas,c.x,0,c.width,c.height,y,m,p,g);if(h!==1)e.globalAlpha=_;if(v!==0){e.rotate(-v);e.translate(-b,-x);if(!w)l.setImgSmoothing(e,false)}}else r.drawElement(e,t)}},Xf=function e(){return 0},Vf=function e(t,r){return t.getTextAngle(r,null)},Uf=function e(t,r){return t.getTextAngle(r,"source")},jf=function e(t,r){return t.getTextAngle(r,"target")},qf=function e(t,r){return r.effectiveOpacity()},Hf=function e(t,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()},Wf=(Yf.drawCachedElement=function(e,t,r,n,a,i){var o=this;var s=o.data,l=s.eleTxrCache,u=s.lblTxrCache,c=s.slbTxrCache,h=s.tlbTxrCache;var v=t.boundingBox();var f=i===true?l.reasons.highQuality:null;if(v.w===0||v.h===0||!t.visible())return;if(!n||cn(v,n)){var d=t.isEdge();var p=t.element()._private.rscratch.badLine;o.drawElementUnderlay(e,t);o.drawCachedElementPortion(e,t,l,r,a,f,Xf,qf);if(!d||!p)o.drawCachedElementPortion(e,t,u,r,a,f,Vf,Hf);if(d&&!p){o.drawCachedElementPortion(e,t,c,r,a,f,Uf,Hf);o.drawCachedElementPortion(e,t,h,r,a,f,jf,Hf)}o.drawElementOverlay(e,t)}},Yf.drawElements=function(e,t){var r=this;for(var n=0;n<t.length;n++){var a=t[n];r.drawElement(e,a)}},Yf.drawCachedElements=function(e,t,r,n){var a=this;for(var i=0;i<t.length;i++){var o=t[i];a.drawCachedElement(e,o,r,n)}},Yf.drawCachedNodes=function(e,t,r,n){var a=this;for(var i=0;i<t.length;i++){var o=t[i];if(!o.isNode())continue;a.drawCachedElement(e,o,r,n)}},Yf.drawLayeredElements=function(e,t,r,n){var a=this;var i=a.data.lyrTxrCache.getLayers(t,r);if(i)for(var o=0;o<i.length;o++){var s=i[o];var l=s.bb;if(l.w===0||l.h===0)continue;e.drawImage(s.canvas,l.x1,l.y1,l.w,l.h)}else a.drawCachedElements(e,t,r,n)},{}),$f=(Wf.drawEdge=function(r,n,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:true;var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:true;var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:true;var o=this;var s=n._private.rscratch;if(i&&!n.visible())return;if(s.badLine||s.allpts==null||isNaN(s.allpts[0]))return;var l;if(e){l=e;r.translate(-l.x1,-l.y1)}var u=i?n.pstyle("opacity").value:1;var c=i?n.pstyle("line-opacity").value:1;var h=n.pstyle("curve-style").value;var v=n.pstyle("line-style").value;var f=n.pstyle("width").pfValue;var d=n.pstyle("line-cap").value;var p=u*c;var g=u*c;var y=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p;if(h==="straight-triangle"){o.eleStrokeStyle(r,n,t);o.drawEdgeTrianglePath(n,r,s.allpts)}else{r.lineWidth=f;r.lineCap=d;o.eleStrokeStyle(r,n,t);o.drawEdgePath(n,r,s.allpts,v);r.lineCap="butt"}};var m=function e(){if(!a)return;o.drawEdgeOverlay(r,n)};var b=function e(){if(!a)return;o.drawEdgeUnderlay(r,n)};var x=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;o.drawArrowheads(r,n,t)};var w=function e(){o.drawElementText(r,n,null,t)};r.lineJoin="round";var E=n.pstyle("ghost").value==="yes";if(E){var T=n.pstyle("ghost-offset-x").pfValue;var _=n.pstyle("ghost-offset-y").pfValue;var D=n.pstyle("ghost-opacity").value;var C=p*D;r.translate(T,_);y(C);x(C);r.translate(-T,-_)}b();y();x();m();w();if(e)r.translate(l.x1,l.y1)},function e(u){if(!["overlay","underlay"].includes(u))throw new Error("Invalid state");return function(e,t){if(!t.visible())return;var r=t.pstyle("".concat(u,"-opacity")).value;if(r===0)return;var n=this;var a=n.usePaths();var i=t._private.rscratch;var o=t.pstyle("".concat(u,"-padding")).pfValue;var s=2*o;var l=t.pstyle("".concat(u,"-color")).value;e.lineWidth=s;if(i.edgeType==="self"&&!a)e.lineCap="butt";else e.lineCap="round";n.colorStrokeStyle(e,l[0],l[1],l[2],r);n.drawEdgePath(t,e,i.allpts,"solid")}}),Kf=(Wf.drawEdgeOverlay=$f("overlay"),Wf.drawEdgeUnderlay=$f("underlay"),Wf.drawEdgePath=function(e,t,r,n){var a=e._private.rscratch;var i=t;var o;var s=false;var l=this.usePaths();var u=e.pstyle("line-dash-pattern").pfValue;var c=e.pstyle("line-dash-offset").pfValue;if(l){var h=r.join("$");var v=a.pathCacheKey&&a.pathCacheKey===h;if(v){o=t=a.pathCache;s=true}else{o=t=new Path2D;a.pathCacheKey=h;a.pathCache=o}}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(u);i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!s&&!a.badLine){if(t.beginPath)t.beginPath();t.moveTo(r[0],r[1]);switch(a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var f=2;f+3<r.length;f+=4)t.quadraticCurveTo(r[f],r[f+1],r[f+2],r[f+3]);break;case"straight":case"segments":case"haystack":for(var d=2;d+1<r.length;d+=2)t.lineTo(r[d],r[d+1]);break}}t=i;if(l)t.stroke(o);else t.stroke();if(t.setLineDash)t.setLineDash([])},Wf.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;var n=e.pstyle("width").pfValue;for(var a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]];var o=Math.sqrt(i[0]*i[0]+i[1]*i[1]);var s=[i[1]/o,-i[0]/o];var l=[s[0]*n/2,s[1]*n/2];t.beginPath();t.moveTo(r[a]-l[0],r[a+1]-l[1]);t.lineTo(r[a]+l[0],r[a+1]+l[1]);t.lineTo(r[a+2],r[a+3]);t.closePath();t.fill()}},Wf.drawArrowheads=function(e,t,r){var n=t._private.rscratch;var a=n.edgeType==="haystack";if(!a)this.drawArrowhead(e,t,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r);this.drawArrowhead(e,t,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r);this.drawArrowhead(e,t,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r);if(!a)this.drawArrowhead(e,t,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)},Wf.drawArrowhead=function(e,t,r,n,a,i,o){if(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)return;var s=this;var l=t.pstyle(r+"-arrow-shape").value;if(l==="none")return;var u=t.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled";var c=t.pstyle(r+"-arrow-fill").value;var h=t.pstyle("width").pfValue;var v=t.pstyle("opacity").value;if(o===void 0)o=v;var f=e.globalCompositeOperation;if(o!==1||c==="hollow"){e.globalCompositeOperation="destination-out";s.colorFillStyle(e,255,255,255,1);s.colorStrokeStyle(e,255,255,255,1);s.drawArrowShape(t,e,u,h,l,n,a,i);e.globalCompositeOperation=f}var d=t.pstyle(r+"-arrow-color").value;s.colorFillStyle(e,d[0],d[1],d[2],o);s.colorStrokeStyle(e,d[0],d[1],d[2],o);s.drawArrowShape(t,e,c,h,l,n,a,i)},Wf.drawArrowShape=function(e,t,r,n,a,i,o,s){var l=this;var u=this.usePaths()&&a!=="triangle-cross";var c=false;var h;var v=t;var f={x:i,y:o};var d=e.pstyle("arrow-scale").value;var p=this.getArrowWidth(n,d);var g=l.arrowShapes[a];if(u){var y=l.arrowPathCache=l.arrowPathCache||[];var m=jt(a);var b=y[m];if(b!=null){h=t=b;c=true}else{h=t=new Path2D;y[m]=h}}if(!c){if(t.beginPath)t.beginPath();if(u)g.draw(t,1,0,{x:0,y:0},1);else g.draw(t,p,s,f,n);if(t.closePath)t.closePath()}t=v;if(u){t.translate(i,o);t.rotate(s);t.scale(p,p)}if(r==="filled"||r==="both")if(u)t.fill(h);else t.fill();if(r==="hollow"||r==="both"){t.lineWidth=(g.matchEdgeWidth?n:1)/(u?p:1);t.lineJoin="miter";if(u)t.stroke(h);else t.stroke()}if(u){t.scale(1/p,1/p);t.rotate(-s);t.translate(-i,-o)}},{}),Zf=(Kf.safeDrawImage=function(e,t,r,n,a,i,o,s,l,u){if(a<=0||i<=0||l<=0||u<=0)return;try{e.drawImage(t,r,n,a,i,o,s,l,u)}catch(e){ee(e)}},Kf.drawInscribedImage=function(e,t,r,n,a){var i=this;var o=r.position();var s=o.x;var l=o.y;var u=r.cy().style();var c=u.getIndexedStyle.bind(u);var h=c(r,"background-fit","value",n);var v=c(r,"background-repeat","value",n);var f=r.width();var d=r.height();var p=r.padding()*2;var g=f+(c(r,"background-width-relative-to","value",n)==="inner"?0:p);var y=d+(c(r,"background-height-relative-to","value",n)==="inner"?0:p);var m=r._private.rscratch;var b=c(r,"background-clip","value",n);var x=b==="node";var w=c(r,"background-image-opacity","value",n)*a;var E=c(r,"background-image-smoothing","value",n);var T=t.width||t.cachedW;var _=t.height||t.cachedH;if(null==T||null==_){document.body.appendChild(t);T=t.cachedW=t.width||t.offsetWidth;_=t.cachedH=t.height||t.offsetHeight;document.body.removeChild(t)}var D=T;var C=_;if(c(r,"background-width","value",n)!=="auto")if(c(r,"background-width","units",n)==="%")D=c(r,"background-width","pfValue",n)*g;else D=c(r,"background-width","pfValue",n);if(c(r,"background-height","value",n)!=="auto")if(c(r,"background-height","units",n)==="%")C=c(r,"background-height","pfValue",n)*y;else C=c(r,"background-height","pfValue",n);if(D===0||C===0)return;if(h==="contain"){var N=Math.min(g/D,y/C);D*=N;C*=N}else if(h==="cover"){var N=Math.max(g/D,y/C);D*=N;C*=N}var A=s-g/2;var R=c(r,"background-position-x","units",n);var L=c(r,"background-position-x","pfValue",n);if(R==="%")A+=(g-D)*L;else A+=L;var B=c(r,"background-offset-x","units",n);var S=c(r,"background-offset-x","pfValue",n);if(B==="%")A+=(g-D)*S;else A+=S;var I=l-y/2;var F=c(r,"background-position-y","units",n);var k=c(r,"background-position-y","pfValue",n);if(F==="%")I+=(y-C)*k;else I+=k;var z=c(r,"background-offset-y","units",n);var O=c(r,"background-offset-y","pfValue",n);if(z==="%")I+=(y-C)*O;else I+=O;if(m.pathCache){A-=s;I-=l;s=0;l=0}var G=e.globalAlpha;e.globalAlpha=w;var M=i.getImgSmoothing(e);var P=false;if(E==="no"&&M){i.setImgSmoothing(e,false);P=true}else if(E==="yes"&&!M){i.setImgSmoothing(e,true);P=true}if(v==="no-repeat"){if(x){e.save();if(m.pathCache)e.clip(m.pathCache);else{i.nodeShapes[i.getNodeShape(r)].draw(e,s,l,g,y);e.clip()}}i.safeDrawImage(e,t,0,0,T,_,A,I,D,C);if(x)e.restore()}else{var Y=e.createPattern(t,v);e.fillStyle=Y;i.nodeShapes[i.getNodeShape(r)].draw(e,s,l,g,y);e.translate(A,I);e.fill();e.translate(-A,-I)}e.globalAlpha=G;if(P)i.setImgSmoothing(e,M)},{});function Qf(e,t,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5;e.beginPath();e.moveTo(t+i,r);e.lineTo(t+n-i,r);e.quadraticCurveTo(t+n,r,t+n,r+i);e.lineTo(t+n,r+a-i);e.quadraticCurveTo(t+n,r+a,t+n-i,r+a);e.lineTo(t+i,r+a);e.quadraticCurveTo(t,r+a,t,r+a-i);e.lineTo(t,r+i);e.quadraticCurveTo(t,r,t+i,r);e.closePath();e.fill()}Zf.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom();var n=this.getPixelRatio();var a=Math.ceil(Hr(r*n));t=Math.pow(2,a)}var i=e.pstyle("font-size").pfValue*t;var o=e.pstyle("min-zoomed-font-size").pfValue;if(i<o)return false;return true},Zf.drawElementText=function(e,t,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:true;var o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(t))return}else if(n===false)return;if(t.isNode()){var s=t.pstyle("label");if(!s||!s.value)return;var l=o.getLabelJustification(t);e.textAlign=l;e.textBaseline="bottom"}else{var u=t.element()._private.rscratch.badLine;var c=t.pstyle("label");var h=t.pstyle("source-label");var v=t.pstyle("target-label");if(u||(!c||!c.value)&&(!h||!h.value)&&(!v||!v.value))return;e.textAlign="center";e.textBaseline="bottom"}var f=!r;var d;if(r){d=r;e.translate(-d.x1,-d.y1)}if(a==null){o.drawText(e,t,null,f,i);if(t.isEdge()){o.drawText(e,t,"source",f,i);o.drawText(e,t,"target",f,i)}}else o.drawText(e,t,a,f,i);if(r)e.translate(d.x1,d.y1)},Zf.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++){t=this.fontCaches[r];if(t.context===e)return t}t={context:e};this.fontCaches.push(t);return t},Zf.setupTextStyle=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:true;var n=t.pstyle("font-style").strValue;var a=t.pstyle("font-size").pfValue+"px";var i=t.pstyle("font-family").strValue;var o=t.pstyle("font-weight").strValue;var s=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1;var l=t.pstyle("text-outline-opacity").value*s;var u=t.pstyle("color").value;var c=t.pstyle("text-outline-color").value;e.font=n+" "+o+" "+a+" "+i;e.lineJoin="round";this.colorFillStyle(e,u[0],u[1],u[2],s);this.colorStrokeStyle(e,c[0],c[1],c[2],l)},Zf.getTextAngle=function(e,t){var r;var n=e._private;var a=n.rscratch;var i=t?t+"-":"";var o=e.pstyle(i+"text-rotation");var s=vr(a,"labelAngle",t);if(o.strValue==="autorotate")r=e.isEdge()?s:0;else if(o.strValue==="none")r=0;else r=o.pfValue;return r},Zf.drawText=function(e,t,r){var P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:true;var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:true;var R=t._private;var a=R.rscratch;var i=n?t.effectiveOpacity():1;if(n&&(i===0||t.pstyle("text-opacity").value===0))return;if(r==="main")r=null;var o=vr(a,"labelX",r);var s=vr(a,"labelY",r);var l,u;var c=this.getLabelText(t,r);if(c!=null&&c!==""&&!isNaN(o)&&!isNaN(s)){this.setupTextStyle(e,t,n);var h=r?r+"-":"";var v=vr(a,"labelWidth",r);var f=vr(a,"labelHeight",r);var B=t.pstyle(h+"text-margin-x").pfValue;var F=t.pstyle(h+"text-margin-y").pfValue;var z=t.isEdge();var d=t.pstyle("text-halign").value;var p=t.pstyle("text-valign").value;if(z){d="center";p="center"}o+=B;s+=F;var g;if(!P)g=0;else g=this.getTextAngle(t,r);if(g!==0){l=o;u=s;e.translate(l,u);e.rotate(g);o=0;s=0}switch(p){case"top":break;case"center":s+=f/2;break;case"bottom":s+=f;break}var y=t.pstyle("text-background-opacity").value;var m=t.pstyle("text-border-opacity").value;var b=t.pstyle("text-border-width").pfValue;var x=t.pstyle("text-background-padding").pfValue;if(y>0||b>0&&m>0){var w=o-x;switch(d){case"left":w-=v;break;case"center":w-=v/2;break}var E=s-f-x;var T=v+2*x;var _=f+2*x;if(y>0){var G=e.fillStyle;var D=t.pstyle("text-background-color").value;e.fillStyle="rgba("+D[0]+","+D[1]+","+D[2]+","+y*i+")";var Y=t.pstyle("text-background-shape").strValue;if(Y.indexOf("round")===0)Qf(e,w,E,T,_,2);else e.fillRect(w,E,T,_);e.fillStyle=G}if(b>0&&m>0){var X=e.strokeStyle;var V=e.lineWidth;var C=t.pstyle("text-border-color").value;var N=t.pstyle("text-border-style").value;e.strokeStyle="rgba("+C[0]+","+C[1]+","+C[2]+","+m*i+")";e.lineWidth=b;if(e.setLineDash)switch(N){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=b/4;e.setLineDash([]);break;case"solid":e.setLineDash([]);break}e.strokeRect(w,E,T,_);if(N==="double"){var A=b/2;e.strokeRect(w+A,E+A,T-A*2,_-A*2)}if(e.setLineDash)e.setLineDash([]);e.lineWidth=V;e.strokeStyle=X}}var L=2*t.pstyle("text-outline-width").pfValue;if(L>0)e.lineWidth=L;if(t.pstyle("text-wrap").value==="wrap"){var S=vr(a,"labelWrapCachedLines",r);var I=vr(a,"labelLineHeight",r);var k=v/2;var O=this.getLabelJustification(t);if(O==="auto");else if(d==="left"){if(O==="left")o+=-v;else if(O==="center")o+=-k}else if(d==="center"){if(O==="left")o+=-k;else if(O==="right")o+=k}else if(d==="right")if(O==="center")o+=k;else if(O==="right")o+=v;switch(p){case"top":s-=(S.length-1)*I;break;case"center":case"bottom":s-=(S.length-1)*I;break}for(var M=0;M<S.length;M++){if(L>0)e.strokeText(S[M],o,s);e.fillText(S[M],o,s);s+=I}}else{if(L>0)e.strokeText(c,o,s);e.fillText(c,o,s)}if(g!==0){e.rotate(-g);e.translate(-l,-u)}}};for(var Jf={drawNode:function(s,l,e){var P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:true;var t=arguments.length>4&&arguments[4]!==void 0?arguments[4]:true;var r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:true;var u=this;var n,a;var c=l._private;var i=c.rscratch;var o=l.position();if(!me(o.x)||!me(o.y))return;if(r&&!l.visible())return;var h=r?l.effectiveOpacity():1;var v=u.usePaths();var f;var d=false;var p=l.padding();n=l.width()+2*p;a=l.height()+2*p;var g;if(e){g=e;s.translate(-g.x1,-g.y1)}var R=l.pstyle("background-image");var y=R.value;var m=new Array(y.length);var b=new Array(y.length);var x=0;for(var w=0;w<y.length;w++){var E=y[w];var B=m[w]=E!=null&&E!=="none";if(B){var F=l.cy().style().getIndexedStyle(l,"background-image-crossorigin","value",w);x++;b[w]=u.getCachedImage(E,F,function(){c.backgroundTimestamp=Date.now();l.emitAndNotify("background")})}}var T=l.pstyle("background-blacken").value;var _=l.pstyle("border-width").pfValue;var D=l.pstyle("background-opacity").value*h;var C=l.pstyle("border-color").value;var N=l.pstyle("border-style").value;var A=l.pstyle("border-opacity").value*h;s.lineJoin="miter";var L=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D;u.eleFillStyle(s,l,t)};var S=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A;u.colorStrokeStyle(s,C[0],C[1],C[2],t)};var I=l.pstyle("shape").strValue;var z=l.pstyle("shape-polygon-points").pfValue;if(v){s.translate(o.x,o.y);var G=u.nodePathCache=u.nodePathCache||[];var Y=qt(I==="polygon"?I+","+z.join(","):I,""+a,""+n);var X=G[Y];if(X!=null){f=X;d=true;i.pathCache=f}else{f=new Path2D;G[Y]=i.pathCache=f}}var V=function e(){if(!d){var t=o;if(v)t={x:0,y:0};u.nodeShapes[u.getNodeShape(l)].draw(f||s,t.x,t.y,n,a)}if(v)s.fill(f);else s.fill()};var k=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h;var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:true;var n=c.backgrounding;var a=0;for(var i=0;i<b.length;i++){var o=l.cy().style().getIndexedStyle(l,"background-image-containment","value",i);if(r&&o==="over"||!r&&o==="inside"){a++;continue}if(m[i]&&b[i].complete&&!b[i].error){a++;u.drawInscribedImage(s,b[i],l,i,t)}}c.backgrounding=!(a===x);if(n!==c.backgrounding)l.updateStyle(false)};var U=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:false;var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;if(u.hasPie(l)){u.drawPie(s,l,r);if(t)if(!v)u.nodeShapes[u.getNodeShape(l)].draw(s,o.x,o.y,n,a)}};var j=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h;var r=(T>0?T:-T)*t;var n=T>0?0:255;if(T!==0){u.colorFillStyle(s,n,n,n,r);if(v)s.fill(f);else s.fill()}};var q=function e(){if(_>0){s.lineWidth=_;s.lineCap="butt";if(s.setLineDash)switch(N){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash([4,2]);break;case"solid":case"double":s.setLineDash([]);break}if(v)s.stroke(f);else s.stroke();if(N==="double"){s.lineWidth=_/3;var t=s.globalCompositeOperation;s.globalCompositeOperation="destination-out";if(v)s.stroke(f);else s.stroke();s.globalCompositeOperation=t}if(s.setLineDash)s.setLineDash([])}};var H=function e(){if(t)u.drawNodeOverlay(s,l,o,n,a)};var W=function e(){if(t)u.drawNodeUnderlay(s,l,o,n,a)};var $=function e(){u.drawElementText(s,l,null,P)};var K=l.pstyle("ghost").value==="yes";if(K){var Z=l.pstyle("ghost-offset-x").pfValue;var Q=l.pstyle("ghost-offset-y").pfValue;var O=l.pstyle("ghost-opacity").value;var M=O*h;s.translate(Z,Q);L(O*D);V();k(M,true);S(O*A);q();U(T!==0||_!==0);k(M,false);j(M);s.translate(-Z,-Q)}if(v)s.translate(-o.x,-o.y);W();if(v)s.translate(o.x,o.y);L();V();k(h,true);S();q();U(T!==0||_!==0);k(h,false);j();if(v)s.translate(-o.x,-o.y);$();H();if(e)s.translate(g.x1,g.y1)}},ed=function e(h){if(!["overlay","underlay"].includes(h))throw new Error("Invalid state");return function(e,t,r,n,a){var i=this;if(!t.visible())return;var o=t.pstyle("".concat(h,"-padding")).pfValue;var s=t.pstyle("".concat(h,"-opacity")).value;var l=t.pstyle("".concat(h,"-color")).value;var u=t.pstyle("".concat(h,"-shape")).value;if(s>0){r=r||t.position();if(n==null||a==null){var c=t.padding();n=t.width()+2*c;a=t.height()+2*c}i.colorFillStyle(e,l[0],l[1],l[2],s);i.nodeShapes[u].draw(e,r.x,r.y,n+o*2,a+o*2);e.fill()}}},td=(Jf.drawNodeOverlay=ed("overlay"),Jf.drawNodeUnderlay=ed("underlay"),Jf.hasPie=function(e){e=e[0];return e._private.hasPie},Jf.drawPie=function(e,t,r,n){t=t[0];n=n||t.position();var a=t.cy().style();var i=t.pstyle("pie-size");var o=n.x;var s=n.y;var l=t.width();var u=t.height();var c=Math.min(l,u)/2;var h=0;var v=this.usePaths();if(v){o=0;s=0}if(i.units==="%")c=c*i.pfValue;else if(i.pfValue!==void 0)c=i.pfValue/2;for(var f=1;f<=a.pieBackgroundN;f++){var d=t.pstyle("pie-"+f+"-background-size").value;var p=t.pstyle("pie-"+f+"-background-color").value;var g=t.pstyle("pie-"+f+"-background-opacity").value*r;var y=d/100;if(y+h>1)y=1-h;var m=1.5*Math.PI+2*Math.PI*h;var b=2*Math.PI*y;var x=m+b;if(d===0||h>=1||h+y>1)continue;e.beginPath();e.moveTo(o,s);e.arc(o,s,c,m,x);e.closePath();this.colorFillStyle(e,p[0],p[1],p[2],g);e.fill();h+=y}},{}),rd=100,nd=(td.getPixelRatio=function(){var e=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},td.paintCache=function(e){var t=this.paintCaches=this.paintCaches||[];var r=true;var n;for(var a=0;a<t.length;a++){n=t[a];if(n.context===e){r=false;break}}if(r){n={context:e};t.push(n)}return n},td.createGradientStyleFor=function(e,t,r,n,a){var i;var o=this.usePaths();var s=r.pstyle(t+"-gradient-stop-colors").value,l=r.pstyle(t+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var u=r.sourceEndpoint(),c=r.targetEndpoint(),h=r.midpoint();var v=$r(u,h);var f=$r(c,h);i=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(v,f))}else{var d=o?{x:0,y:0}:r.position(),p=r.paddedWidth(),g=r.paddedHeight();i=e.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(p,g))}else if(r.isEdge()){var y=r.sourceEndpoint(),m=r.targetEndpoint();i=e.createLinearGradient(y.x,y.y,m.x,m.y)}else{var b=o?{x:0,y:0}:r.position(),x=r.paddedWidth(),w=r.paddedHeight(),E=x/2,T=w/2;var _=r.pstyle("background-gradient-direction").value;switch(_){case"to-bottom":i=e.createLinearGradient(b.x,b.y-T,b.x,b.y+T);break;case"to-top":i=e.createLinearGradient(b.x,b.y+T,b.x,b.y-T);break;case"to-left":i=e.createLinearGradient(b.x+E,b.y,b.x-E,b.y);break;case"to-right":i=e.createLinearGradient(b.x-E,b.y,b.x+E,b.y);break;case"to-bottom-right":case"to-right-bottom":i=e.createLinearGradient(b.x-E,b.y-T,b.x+E,b.y+T);break;case"to-top-right":case"to-right-top":i=e.createLinearGradient(b.x-E,b.y+T,b.x+E,b.y-T);break;case"to-bottom-left":case"to-left-bottom":i=e.createLinearGradient(b.x+E,b.y-T,b.x-E,b.y+T);break;case"to-top-left":case"to-left-top":i=e.createLinearGradient(b.x+E,b.y+T,b.x-E,b.y-T);break}}if(!i)return null;var D=l.length===s.length;var C=s.length;for(var N=0;N<C;N++)i.addColorStop(D?l[N]:N/(C-1),"rgba("+s[N][0]+","+s[N][1]+","+s[N][2]+","+a+")");return i},td.gradientFillStyle=function(e,t,r,n){var a=this.createGradientStyleFor(e,"background",t,r,n);if(!a)return null;e.fillStyle=a},td.colorFillStyle=function(e,t,r,n,a){e.fillStyle="rgba("+t+","+r+","+n+","+a+")"},td.eleFillStyle=function(e,t,r){var n=t.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(e,t,n,r);else{var a=t.pstyle("background-color").value;this.colorFillStyle(e,a[0],a[1],a[2],r)}},td.gradientStrokeStyle=function(e,t,r,n){var a=this.createGradientStyleFor(e,"line",t,r,n);if(!a)return null;e.strokeStyle=a},td.colorStrokeStyle=function(e,t,r,n,a){e.strokeStyle="rgba("+t+","+r+","+n+","+a+")"},td.eleStrokeStyle=function(e,t,r){var n=t.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(e,t,n,r);else{var a=t.pstyle("line-color").value;this.colorStrokeStyle(e,a[0],a[1],a[2],r)}},td.matchCanvasSize=function(e){var t=this;var r=t.data;var n=t.findContainerClientCoords();var a=n[2];var i=n[3];var o=t.getPixelRatio();var s=t.motionBlurPxRatio;if(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])o=s;var l=a*o;var u=i*o;var c;if(l===t.canvasWidth&&u===t.canvasHeight)return;t.fontCaches=null;var h=r.canvasContainer;h.style.width=a+"px";h.style.height=i+"px";for(var v=0;v<t.CANVAS_LAYERS;v++){c=r.canvases[v];c.width=l;c.height=u;c.style.width=a+"px";c.style.height=i+"px"}for(var v=0;v<t.BUFFER_COUNT;v++){c=r.bufferCanvases[v];c.width=l;c.height=u;c.style.width=a+"px";c.style.height=i+"px"}t.textureMult=1;if(o<=1){c=r.bufferCanvases[t.TEXTURE_BUFFER];t.textureMult=2;c.width=l*t.textureMult;c.height=u*t.textureMult}t.canvasWidth=l;t.canvasHeight=u},td.renderTo=function(e,t,r,n){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:true,forcedPxRatio:n})},td.render=function(e){e=e||lr();var o=e.forcedContext;var s=e.drawAllLayers;var t=e.drawOnlyNodeLayer;var l=e.forcedZoom;var u=e.forcedPan;var c=this;var r=e.forcedPxRatio===void 0?this.getPixelRatio():e.forcedPxRatio;var n=c.cy;var h=c.data;var a=h.canvasNeedsRedraw;var i=c.textureOnViewport&&!o&&(c.pinching||c.hoverData.dragging||c.swipePanning||c.data.wheelZooming);var v=e.motionBlur!==void 0?e.motionBlur:c.motionBlur;var f=c.motionBlurPxRatio;var R=n.hasCompoundNodes();var B=c.hoverData.draggingEles;var F=c.hoverData.selecting||c.touchData.selecting?true:false;v=v&&!o&&c.motionBlurEnabled&&!F;var d=v;if(!o){if(c.prevPxRatio!==r){c.invalidateContainerClientCoordsCache();c.matchCanvasSize(c.container);c.redrawHint("eles",true);c.redrawHint("drag",true)}c.prevPxRatio=r}if(!o&&c.motionBlurTimeout)clearTimeout(c.motionBlurTimeout);if(v){if(c.mbFrames==null)c.mbFrames=0;c.mbFrames++;if(c.mbFrames<3)d=false;if(c.mbFrames>c.minMbLowQualFrames)c.motionBlurPxRatio=c.mbPxRBlurry}if(c.clearingMotionBlur)c.motionBlurPxRatio=1;if(c.textureDrawLastFrame&&!i){a[c.NODE]=true;a[c.SELECT_BOX]=true}var p=n.style();var g=n.zoom();var y=l!==void 0?l:g;var m=n.pan();var b={x:m.x,y:m.y};var x={zoom:g,pan:{x:m.x,y:m.y}};var w=c.prevViewport;var z=w===void 0||x.zoom!==w.zoom||x.pan.x!==w.pan.x||x.pan.y!==w.pan.y;if(!z&&!(B&&!R))c.motionBlurPxRatio=1;if(u)b=u;y*=r;b.x*=r;b.y*=r;var E=c.getCachedZSortedEles();function T(e,t,r,n,a){var i=e.globalCompositeOperation;e.globalCompositeOperation="destination-out";c.colorFillStyle(e,255,255,255,c.motionBlurTransparency);e.fillRect(t,r,n,a);e.globalCompositeOperation=i}function _(e,t){var r,n,a,i;if(!c.clearingMotionBlur&&(e===h.bufferContexts[c.MOTIONBLUR_BUFFER_NODE]||e===h.bufferContexts[c.MOTIONBLUR_BUFFER_DRAG])){r={x:m.x*f,y:m.y*f};n=g*f;a=c.canvasWidth*f;i=c.canvasHeight*f}else{r=b;n=y;a=c.canvasWidth;i=c.canvasHeight}e.setTransform(1,0,0,1,0,0);if(t==="motionBlur")T(e,0,0,a,i);else if(!o&&(t===void 0||t))e.clearRect(0,0,a,i);if(!s){e.translate(r.x,r.y);e.scale(n,n)}if(u)e.translate(u.x,u.y);if(l)e.scale(l,l)}if(!i)c.textureDrawLastFrame=false;if(i){c.textureDrawLastFrame=true;if(!c.textureCache){c.textureCache={};c.textureCache.bb=n.mutableElements().boundingBox();c.textureCache.texture=c.data.bufferCanvases[c.TEXTURE_BUFFER];var D=c.data.bufferContexts[c.TEXTURE_BUFFER];D.setTransform(1,0,0,1,0,0);D.clearRect(0,0,c.canvasWidth*c.textureMult,c.canvasHeight*c.textureMult);c.render({forcedContext:D,drawOnlyNodeLayer:true,forcedPxRatio:r*c.textureMult});var x=c.textureCache.viewport={zoom:n.zoom(),pan:n.pan(),width:c.canvasWidth,height:c.canvasHeight};x.mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}a[c.DRAG]=false;a[c.NODE]=false;var C=h.contexts[c.NODE];var G=c.textureCache.texture;var x=c.textureCache.viewport;C.setTransform(1,0,0,1,0,0);if(v)T(C,0,0,x.width,x.height);else C.clearRect(0,0,x.width,x.height);var N=p.core("outside-texture-bg-color").value;var Y=p.core("outside-texture-bg-opacity").value;c.colorFillStyle(C,N[0],N[1],N[2],Y);C.fillRect(0,0,x.width,x.height);var g=n.zoom();_(C,false);C.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/r,x.height/x.zoom/r);C.drawImage(G,x.mpan.x,x.mpan.y,x.width/x.zoom/r,x.height/x.zoom/r)}else if(c.textureOnViewport&&!o)c.textureCache=null;var A=n.extent();var X=c.pinching||c.hoverData.dragging||c.swipePanning||c.data.wheelZooming||c.hoverData.draggingEles||c.cy.animated();var L=c.hideEdgesOnViewport&&X;var S=[];S[c.NODE]=!a[c.NODE]&&v&&!c.clearedForMotionBlur[c.NODE]||c.clearingMotionBlur;if(S[c.NODE])c.clearedForMotionBlur[c.NODE]=true;S[c.DRAG]=!a[c.DRAG]&&v&&!c.clearedForMotionBlur[c.DRAG]||c.clearingMotionBlur;if(S[c.DRAG])c.clearedForMotionBlur[c.DRAG]=true;if(a[c.NODE]||s||t||S[c.NODE]){var I=v&&!S[c.NODE]&&f!==1;var C=o||(I?c.data.bufferContexts[c.MOTIONBLUR_BUFFER_NODE]:h.contexts[c.NODE]);var V=v&&!I?"motionBlur":void 0;_(C,V);if(L)c.drawCachedNodes(C,E.nondrag,r,A);else c.drawLayeredElements(C,E.nondrag,r,A);if(c.debug)c.drawDebugPoints(C,E.nondrag);if(!s&&!v)a[c.NODE]=false}if(!t&&(a[c.DRAG]||s||S[c.DRAG])){var I=v&&!S[c.DRAG]&&f!==1;var C=o||(I?c.data.bufferContexts[c.MOTIONBLUR_BUFFER_DRAG]:h.contexts[c.DRAG]);_(C,v&&!I?"motionBlur":void 0);if(L)c.drawCachedNodes(C,E.drag,r,A);else c.drawCachedElements(C,E.drag,r,A);if(c.debug)c.drawDebugPoints(C,E.drag);if(!s&&!v)a[c.DRAG]=false}if(c.showFps||!t&&a[c.SELECT_BOX]&&!s){var C=o||h.contexts[c.SELECT_BOX];_(C);if(c.selection[4]==1&&(c.hoverData.selecting||c.touchData.selecting)){var g=c.cy.zoom();var k=p.core("selection-box-border-width").value/g;C.lineWidth=k;C.fillStyle="rgba("+p.core("selection-box-color").value[0]+","+p.core("selection-box-color").value[1]+","+p.core("selection-box-color").value[2]+","+p.core("selection-box-opacity").value+")";C.fillRect(c.selection[0],c.selection[1],c.selection[2]-c.selection[0],c.selection[3]-c.selection[1]);if(k>0){C.strokeStyle="rgba("+p.core("selection-box-border-color").value[0]+","+p.core("selection-box-border-color").value[1]+","+p.core("selection-box-border-color").value[2]+","+p.core("selection-box-opacity").value+")";C.strokeRect(c.selection[0],c.selection[1],c.selection[2]-c.selection[0],c.selection[3]-c.selection[1])}}if(h.bgActivePosistion&&!c.hoverData.selecting){var g=c.cy.zoom();var O=h.bgActivePosistion;C.fillStyle="rgba("+p.core("active-bg-color").value[0]+","+p.core("active-bg-color").value[1]+","+p.core("active-bg-color").value[2]+","+p.core("active-bg-opacity").value+")";C.beginPath();C.arc(O.x,O.y,p.core("active-bg-size").pfValue/g,0,2*Math.PI);C.fill()}var M=c.lastRedrawTime;if(c.showFps&&M){M=Math.round(M);var P=Math.round(1e3/M);C.setTransform(1,0,0,1,0,0);C.fillStyle="rgba(255, 0, 0, 0.75)";C.strokeStyle="rgba(255, 0, 0, 0.75)";C.lineWidth=1;C.fillText("1 frame = "+M+" ms = "+P+" fps",0,20);var U=60;C.strokeRect(0,30,250,20);C.fillRect(0,30,250*Math.min(P/U,1),20)}if(!s)a[c.SELECT_BOX]=false}if(v&&f!==1){var j=h.contexts[c.NODE];var q=c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_NODE];var H=h.contexts[c.DRAG];var W=c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_DRAG];var $=function e(t,r,n){t.setTransform(1,0,0,1,0,0);if(n||!d)t.clearRect(0,0,c.canvasWidth,c.canvasHeight);else T(t,0,0,c.canvasWidth,c.canvasHeight);var a=f;t.drawImage(r,0,0,c.canvasWidth*a,c.canvasHeight*a,0,0,c.canvasWidth,c.canvasHeight)};if(a[c.NODE]||S[c.NODE]){$(j,q,S[c.NODE]);a[c.NODE]=false}if(a[c.DRAG]||S[c.DRAG]){$(H,W,S[c.DRAG]);a[c.DRAG]=false}}c.prevViewport=x;if(c.clearingMotionBlur){c.clearingMotionBlur=false;c.motionBlurCleared=true;c.motionBlur=true}if(v)c.motionBlurTimeout=setTimeout(function(){c.motionBlurTimeout=null;c.clearedForMotionBlur[c.NODE]=false;c.clearedForMotionBlur[c.DRAG]=false;c.motionBlur=false;c.clearingMotionBlur=!i;c.mbFrames=0;a[c.NODE]=true;a[c.DRAG]=true;c.redraw()},rd);if(!o)n.emit("render")},{}),ad=(nd.drawPolygonPath=function(e,t,r,n,a,i){var o=n/2;var s=a/2;if(e.beginPath)e.beginPath();e.moveTo(t+o*i[0],r+s*i[1]);for(var l=1;l<i.length/2;l++)e.lineTo(t+o*i[l*2],r+s*i[l*2+1]);e.closePath()},nd.drawRoundPolygonPath=function(e,t,r,n,a,i){var o=n/2;var s=a/2;var l=Bn(n,a);if(e.beginPath)e.beginPath();for(var u=0;u<i.length/4;u++){var c=void 0,h=void 0;if(u===0)c=i.length-2;else c=u*4-2;h=u*4+2;var v=t+o*i[u*4];var f=r+s*i[u*4+1];var d=-i[c]*i[h]-i[c+1]*i[h+1];var p=l/Math.tan(Math.acos(d)/2);var g=v-p*i[c];var y=f-p*i[c+1];var m=v+p*i[h];var b=f+p*i[h+1];if(u===0)e.moveTo(g,y);else e.lineTo(g,y);e.arcTo(v,f,m,b,l)}e.closePath()},nd.drawRoundRectanglePath=function(e,t,r,n,a){var i=n/2;var o=a/2;var s=Rn(n,a);if(e.beginPath)e.beginPath();e.moveTo(t,r-o);e.arcTo(t+i,r-o,t+i,r,s);e.arcTo(t+i,r+o,t,r+o,s);e.arcTo(t-i,r+o,t-i,r,s);e.arcTo(t-i,r-o,t,r-o,s);e.lineTo(t,r-o);e.closePath()},nd.drawBottomRoundRectanglePath=function(e,t,r,n,a){var i=n/2;var o=a/2;var s=Rn(n,a);if(e.beginPath)e.beginPath();e.moveTo(t,r-o);e.lineTo(t+i,r-o);e.lineTo(t+i,r);e.arcTo(t+i,r+o,t,r+o,s);e.arcTo(t-i,r+o,t-i,r,s);e.lineTo(t-i,r-o);e.lineTo(t,r-o);e.closePath()},nd.drawCutRectanglePath=function(e,t,r,n,a){var i=n/2;var o=a/2;var s=Fn();if(e.beginPath)e.beginPath();e.moveTo(t-i+s,r-o);e.lineTo(t+i-s,r-o);e.lineTo(t+i,r-o+s);e.lineTo(t+i,r+o-s);e.lineTo(t+i-s,r+o);e.lineTo(t-i+s,r+o);e.lineTo(t-i,r+o-s);e.lineTo(t-i,r-o+s);e.closePath()},nd.drawBarrelPath=function(e,t,r,n,a){var i=n/2;var o=a/2;var s=t-i;var l=t+i;var u=r-o;var c=r+o;var h=Gn(n,a);var v=h.widthOffset;var f=h.heightOffset;var d=h.ctrlPtOffsetPct*v;if(e.beginPath)e.beginPath();e.moveTo(s,u+f);e.lineTo(s,c-f);e.quadraticCurveTo(s+d,c,s+v,c);e.lineTo(l-v,c);e.quadraticCurveTo(l-d,c,l,c-f);e.lineTo(l,u+f);e.quadraticCurveTo(l-d,u,l-v,u);e.lineTo(s+v,u);e.quadraticCurveTo(s+d,u,s,u+f);e.closePath()},Math.sin(0)),id=Math.cos(0),od={},sd={},ld=Math.PI/40,ud=0*Math.PI;ud<2*Math.PI;ud+=ld){od[ud]=Math.sin(ud);sd[ud]=Math.cos(ud)}nd.drawEllipsePath=function(e,t,r,n,a){if(e.beginPath)e.beginPath();if(e.ellipse)e.ellipse(t,r,n/2,a/2,0,0,2*Math.PI);else{var i,o;var s=n/2;var l=a/2;for(var u=0*Math.PI;u<2*Math.PI;u+=ld){i=t-s*od[u]*ad+s*sd[u]*id;o=r+l*sd[u]*ad+l*od[u]*id;if(u===0)e.moveTo(i,o);else e.lineTo(i,o)}}e.closePath()};var cd={};function hd(e,t){var r=atob(e);var n=new ArrayBuffer(r.length);var a=new Uint8Array(n);for(var i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:t})}function vd(e){var t=e.indexOf(",");return e.substr(t+1)}function fd(n,a,i){var e=function e(){return a.toDataURL(i,n.quality)};switch(n.output){case"blob-promise":return new gi(function(t,r){try{a.toBlob(function(e){if(e!=null)t(e);else r(new Error("`canvas.toBlob()` sent a null value in its callback"))},i,n.quality)}catch(e){r(e)}});case"blob":return hd(vd(e()),i);case"base64":return vd(e());case"base64uri":default:return e()}}cd.createBuffer=function(e,t){var r=document.createElement("canvas");r.width=e;r.height=t;return[r,r.getContext("2d")]},cd.bufferCanvasImage=function(e){var t=this.cy;var r=t.mutableElements();var n=r.boundingBox();var a=this.findContainerClientCoords();var i=e.full?Math.ceil(n.w):a[2];var o=e.full?Math.ceil(n.h):a[3];var s=me(e.maxWidth)||me(e.maxHeight);var l=this.getPixelRatio();var u=1;if(e.scale!==void 0){i*=e.scale;o*=e.scale;u=e.scale}else if(s){var c=Infinity;var h=Infinity;if(me(e.maxWidth))c=u*e.maxWidth/i;if(me(e.maxHeight))h=u*e.maxHeight/o;u=Math.min(c,h);i*=u;o*=u}if(!s){i*=l;o*=l;u*=l}var v=document.createElement("canvas");v.width=i;v.height=o;v.style.width=i+"px";v.style.height=o+"px";var f=v.getContext("2d");if(i>0&&o>0){f.clearRect(0,0,i,o);f.globalCompositeOperation="source-over";var d=this.getCachedZSortedEles();if(e.full){f.translate(-n.x1*u,-n.y1*u);f.scale(u,u);this.drawElements(f,d);f.scale(1/u,1/u);f.translate(n.x1*u,n.y1*u)}else{var p=t.pan();var g={x:p.x*u,y:p.y*u};u*=t.zoom();f.translate(g.x,g.y);f.scale(u,u);this.drawElements(f,d);f.scale(1/u,1/u);f.translate(-g.x,-g.y)}if(e.bg){f.globalCompositeOperation="destination-over";f.fillStyle=e.bg;f.rect(0,0,i,o);f.fill()}}return v},cd.png=function(e){return fd(e,this.bufferCanvasImage(e),"image/png")},cd.jpg=function(e){return fd(e,this.bufferCanvasImage(e),"image/jpeg")};var dd={nodeShapeImpl:function(e,t,r,n,a,i,o){switch(e){case"ellipse":return this.drawEllipsePath(t,r,n,a,i);case"polygon":return this.drawPolygonPath(t,r,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(t,r,n,a,i,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,n,a,i);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,n,a,i);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,n,a,i);case"barrel":return this.drawBarrelPath(t,r,n,a,i)}}},pd=gd,X=gd.prototype;function gd(e){var o=this;o.data={canvases:new Array(X.CANVAS_LAYERS),contexts:new Array(X.CANVAS_LAYERS),canvasNeedsRedraw:new Array(X.CANVAS_LAYERS),bufferCanvases:new Array(X.BUFFER_COUNT),bufferContexts:new Array(X.CANVAS_LAYERS)};var t="-webkit-tap-highlight-color";var r="rgba(0,0,0,0)";o.data.canvasContainer=document.createElement("div");var n=o.data.canvasContainer.style;o.data.canvasContainer.style[t]=r;n.position="relative";n.zIndex="0";n.overflow="hidden";var a=e.cy.container();a.appendChild(o.data.canvasContainer);a.style[t]=r;var i={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};if(ce()){i["-ms-touch-action"]="none";i["touch-action"]="none"}for(var s=0;s<X.CANVAS_LAYERS;s++){var l=o.data.canvases[s]=document.createElement("canvas");o.data.contexts[s]=l.getContext("2d");Object.keys(i).forEach(function(e){l.style[e]=i[e]});l.style.position="absolute";l.setAttribute("data-id","layer"+s);l.style.zIndex=String(X.CANVAS_LAYERS-s);o.data.canvasContainer.appendChild(l);o.data.canvasNeedsRedraw[s]=false}o.data.topCanvas=o.data.canvases[0];o.data.canvases[X.NODE].setAttribute("data-id","layer"+X.NODE+"-node");o.data.canvases[X.SELECT_BOX].setAttribute("data-id","layer"+X.SELECT_BOX+"-selectbox");o.data.canvases[X.DRAG].setAttribute("data-id","layer"+X.DRAG+"-drag");for(var s=0;s<X.BUFFER_COUNT;s++){o.data.bufferCanvases[s]=document.createElement("canvas");o.data.bufferContexts[s]=o.data.bufferCanvases[s].getContext("2d");o.data.bufferCanvases[s].style.position="absolute";o.data.bufferCanvases[s].setAttribute("data-id","buffer"+s);o.data.bufferCanvases[s].style.zIndex=String(-s-1);o.data.bufferCanvases[s].style.visibility="hidden"}o.pathsEnabled=true;var u=tn();var c=function e(t){return{x:(t.x1+t.x2)/2,y:(t.y1+t.y2)/2}};var h=function e(t){return{x:-t.w/2,y:-t.h/2}};var v=function e(t){var r=t[0]._private;var n=r.oldBackgroundTimestamp===r.backgroundTimestamp;return!n};var f=function e(t){return t[0]._private.nodeKey};var d=function e(t){return t[0]._private.labelStyleKey};var p=function e(t){return t[0]._private.sourceLabelStyleKey};var g=function e(t){return t[0]._private.targetLabelStyleKey};var y=function e(t,r,n,a,i){return o.drawElement(t,r,n,false,false,i)};var m=function e(t,r,n,a,i){return o.drawElementText(t,r,n,a,"main",i)};var b=function e(t,r,n,a,i){return o.drawElementText(t,r,n,a,"source",i)};var x=function e(t,r,n,a,i){return o.drawElementText(t,r,n,a,"target",i)};var w=function e(t){t.boundingBox();return t[0]._private.bodyBounds};var E=function e(t){t.boundingBox();return t[0]._private.labelBounds.main||u};var T=function e(t){t.boundingBox();return t[0]._private.labelBounds.source||u};var _=function e(t){t.boundingBox();return t[0]._private.labelBounds.target||u};var D=function e(t,r){return r};var C=function e(t){return c(w(t))};var N=function e(t,r,n){var a=t?t+"-":"";return{x:r.x+n.pstyle(a+"text-margin-x").pfValue,y:r.y+n.pstyle(a+"text-margin-y").pfValue}};var A=function e(t,r,n){var a=t[0]._private.rscratch;return{x:a[r],y:a[n]}};var L=function e(t){return N("",A(t,"labelX","labelY"),t)};var R=function e(t){return N("source",A(t,"sourceLabelX","sourceLabelY"),t)};var B=function e(t){return N("target",A(t,"targetLabelX","targetLabelY"),t)};var F=function e(t){return h(w(t))};var z=function e(t){return h(T(t))};var G=function e(t){return h(_(t))};var Y=function e(t){var r=E(t);var n=h(E(t));if(t.isNode()){switch(t.pstyle("text-halign").value){case"left":n.x=-r.w;break;case"right":n.x=0;break}switch(t.pstyle("text-valign").value){case"top":n.y=-r.h;break;case"bottom":n.y=0;break}}return n};var S=o.data.eleTxrCache=new gf(o,{getKey:f,doesEleInvalidateKey:v,drawElement:y,getBoundingBox:w,getRotationPoint:C,getRotationOffset:F,allowEdgeTxrCaching:false,allowParentTxrCaching:false});var I=o.data.lblTxrCache=new gf(o,{getKey:d,drawElement:m,getBoundingBox:E,getRotationPoint:L,getRotationOffset:Y,isVisible:D});var k=o.data.slbTxrCache=new gf(o,{getKey:p,drawElement:b,getBoundingBox:T,getRotationPoint:R,getRotationOffset:z,isVisible:D});var O=o.data.tlbTxrCache=new gf(o,{getKey:g,drawElement:x,getBoundingBox:_,getRotationPoint:B,getRotationOffset:G,isVisible:D});var M=o.data.lyrTxrCache=new If(o);o.onUpdateEleCalcs(function e(t,r){S.invalidateElements(r);I.invalidateElements(r);k.invalidateElements(r);O.invalidateElements(r);M.invalidateElements(r);for(var n=0;n<r.length;n++){var a=r[n]._private;a.oldBackgroundTimestamp=a.backgroundTimestamp}});var P=function e(t){for(var r=0;r<t.length;r++)M.enqueueElementRefinement(t[r].ele)};S.onDequeue(P);I.onDequeue(P);k.onDequeue(P);O.onDequeue(P)}X.CANVAS_LAYERS=3,X.SELECT_BOX=0,X.DRAG=1,X.NODE=2,X.BUFFER_COUNT=3,X.TEXTURE_BUFFER=0,X.MOTIONBLUR_BUFFER_NODE=1,X.MOTIONBLUR_BUFFER_DRAG=2,X.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[X.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[X.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[X.SELECT_BOX]=t;break}};var yd=typeof Path2D!=="undefined";X.path2dEnabled=function(e){if(e===void 0)return this.pathsEnabled;this.pathsEnabled=e?true:false},X.usePaths=function(){return yd&&this.pathsEnabled},X.setImgSmoothing=function(e,t){if(e.imageSmoothingEnabled!=null)e.imageSmoothingEnabled=t;else{e.webkitImageSmoothingEnabled=t;e.mozImageSmoothingEnabled=t;e.msImageSmoothingEnabled=t}},X.getImgSmoothing=function(e){if(e.imageSmoothingEnabled!=null)return e.imageSmoothingEnabled;else return e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},X.makeOffscreenCanvas=function(e,t){var r;if((typeof OffscreenCanvas==="undefined"?"undefined":x(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(e,t);else{r=document.createElement("canvas");r.width=e;r.height=t}return r},[Mf,Yf,Wf,Kf,Zf,Jf,td,nd,cd,dd].forEach(function(e){T(X,e)});var md,bd=[{type:"layout",extensions:yv},{type:"renderer",extensions:[{name:"null",impl:mv},{name:"base",impl:Uv},{name:"canvas",impl:pd}]}],xd={},wd={};function Ed(r,n,a){var e=a;var t=function e(t){ee("Can not register `"+n+"` for `"+r+"` since `"+t+"` already exists in the prototype and can not be overridden")};if(r==="core")if(Sh.prototype[n])return t(n);else Sh.prototype[n]=a;else if(r==="collection")if(G.prototype[n])return t(n);else G.prototype[n]=a;else if(r==="layout"){var i=function e(t){this.options=t;a.call(this,t);if(!I(this._private))this._private={};this._private.cy=t.cy;this._private.listeners=[];this.createEmitter()};var o=i.prototype=Object.create(a.prototype);var s=[];for(var l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}if(o.start&&!o.run)o.run=function(){this.start();return this};else if(!o.start&&o.run)o.start=function(){this.run();return this};var c=a.prototype.stop;o.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var r=0;r<t.length;r++)t[r].stop()}if(c)c.call(this);else this.emit("layoutstop");return this};if(!o.destroy)o.destroy=function(){return this};o.cy=function(){return this._private.cy};var h=function e(t){return t._private.cy};var v={addEventFields:function e(t,r){r.layout=t;r.cy=h(t);r.target=t},bubble:function e(){return true},parent:function e(t){return h(t)}};T(o,{createEmitter:function e(){this._private.emitter=new Su(v,this);return this},emitter:function e(){return this._private.emitter},on:function e(t,r){this.emitter().on(t,r);return this},one:function e(t,r){this.emitter().one(t,r);return this},once:function e(t,r){this.emitter().one(t,r);return this},removeListener:function e(t,r){this.emitter().removeListener(t,r);return this},removeAllListeners:function e(){this.emitter().removeAllListeners();return this},emit:function e(t,r){this.emitter().emit(t,r);return this}});_.eventAliasesOn(o);e=i}else if(r==="renderer"&&n!=="null"&&n!=="base"){var f=Td("renderer","base");var d=f.prototype;var p=a;var g=a.prototype;var y=function e(){f.apply(this,arguments);p.apply(this,arguments)};var m=y.prototype;for(var b in d){var x=d[b];var w=g[b]!=null;if(w)return t(b);m[b]=x}for(var E in g)m[E]=g[E];d.clientFunctions.forEach(function(e){m[e]=m[e]||function(){z("Renderer does not implement `renderer."+e+"()` on its prototype")}});e=y}else if(r==="__proto__"||r==="constructor"||r==="prototype")return z(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return Ie({map:xd,keys:[r,n],value:e})}function Td(e,t){return ke({map:xd,keys:[e,t]})}function _d(e,t,r,n,a){return Ie({map:wd,keys:[e,t,r,n],value:a})}function Dd(e,t,r,n){return ke({map:wd,keys:[e,t,r,n]})}var Cd=function e(){if(arguments.length===2)return Td.apply(null,arguments);else if(arguments.length===3)return Ed.apply(null,arguments);else if(arguments.length===4)return Dd.apply(null,arguments);else if(arguments.length===5)return _d.apply(null,arguments);else z("Invalid extension access syntax")},Nd=(Sh.prototype.extension=Cd,bd.forEach(function(t){t.extensions.forEach(function(e){Ed(t.type,e.name,e.impl)})}),function e(){if(!(this instanceof e))return new e;this.length=0}),Ad=Nd.prototype,Ld=(Ad.instanceString=function(){return"stylesheet"},Ad.selector=function(e){var t=this.length++;this[t]={selector:e,properties:[]};return this},Ad.css=function(e,t){var r=this.length-1;if(J(e))this[r].properties.push({name:e,value:t});else if(I(e)){var n=e;var a=Object.keys(n);for(var i=0;i<a.length;i++){var o=a[i];var s=n[o];if(s==null)continue;var l=d.properties[o]||d.properties[fe(o)];if(l==null)continue;var u=l.name;var c=s;this[r].properties.push({name:u,value:c})}}return this},Ad.style=Ad.css,Ad.generateStyle=function(e){var t=new d(e);return this.appendToStyle(t)},Ad.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t];var n=r.selector;var a=r.properties;e.selector(n);for(var i=0;i<a.length;i++){var o=a[i];e.css(o.name,o.value)}}return e},"3.23.0"),Sd=function e(t){if(t===void 0)t={};if(I(t))return new Sh(t);else if(J(t))return Cd.apply(Cd,arguments)};return Sd.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(Sd);e.apply(null,t);return this},Sd.warnings=function(e){return rr(e)},Sd.version=Ld,Sd.stylesheet=Sd.Stylesheet=Nd,Sd}(),cytoscape_umd.exports);const cytoscape$1=getDefaultExportFromCjs(cytoscape_umdExports);var hasRequiredLayoutBase,hasRequiredCoseBase,cytoscapeCoseBilkent={exports:{}},coseBase={exports:{}},layoutBase={exports:{}};function requireLayoutBase(){return hasRequiredLayoutBase||(hasRequiredLayoutBase=1,e=function(){return r=[function(e,t,r){function n(){}n.QUALITY=1,n.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,n.DEFAULT_INCREMENTAL=!1,n.DEFAULT_ANIMATION_ON_LAYOUT=!0,n.DEFAULT_ANIMATION_DURING_LAYOUT=!1,n.DEFAULT_ANIMATION_PERIOD=50,n.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,n.DEFAULT_GRAPH_MARGIN=15,n.NODE_DIMENSIONS_INCLUDE_LABELS=!1,n.SIMPLE_NODE_HALF_SIZE=(n.SIMPLE_NODE_SIZE=40)/2,n.EMPTY_COMPOUND_NODE_SIZE=40,n.MIN_EDGE_LENGTH=1,n.INITIAL_WORLD_BOUNDARY=(n.WORLD_BOUNDARY=1e6)/1e3,n.WORLD_CENTER_X=1200,n.WORLD_CENTER_Y=900,e.exports=n},function(e,t,r){var n,a=r(2),i=r(8),o=r(9);function s(e,t,r){a.call(this,r),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=r,this.bendpoints=[],this.source=e,this.target=t}for(n in s.prototype=Object.create(a.prototype),a)s[n]=a[n];s.prototype.getSource=function(){return this.source},s.prototype.getTarget=function(){return this.target},s.prototype.isInterGraph=function(){return this.isInterGraph},s.prototype.getLength=function(){return this.length},s.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},s.prototype.getBendpoints=function(){return this.bendpoints},s.prototype.getLca=function(){return this.lca},s.prototype.getSourceInLca=function(){return this.sourceInLca},s.prototype.getTargetInLca=function(){return this.targetInLca},s.prototype.getOtherEnd=function(e){if(this.source===e)return this.target;if(this.target===e)return this.source;throw"Node is not incident with this edge"},s.prototype.getOtherEndInGraph=function(e,t){for(var r=this.getOtherEnd(e),n=t.getGraphManager().getRoot();;){if(r.getOwner()==t)return r;if(r.getOwner()==n)break;r=r.getOwner().getParent()}return null},s.prototype.updateLength=function(){var e=new Array(4);this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),e),this.isOverlapingSourceAndTarget||(this.lengthX=e[0]-e[2],this.lengthY=e[1]-e[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},s.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},e.exports=s},function(e,t,r){e.exports=function(e){this.vGraphObject=e}},function(e,t,r){var n,a=r(2),i=r(10),o=r(13),s=r(0),l=r(16),u=r(4);function c(e,t,r,n){a.call(this,n=null==r&&null==n?t:n),null!=e.graphManager&&(e=e.graphManager),this.estimatedSize=i.MIN_VALUE,this.inclusionTreeDepth=i.MAX_VALUE,this.vGraphObject=n,this.edges=[],this.graphManager=e,this.rect=null!=r&&null!=t?new o(t.x,t.y,r.width,r.height):new o}for(n in c.prototype=Object.create(a.prototype),a)c[n]=a[n];c.prototype.getEdges=function(){return this.edges},c.prototype.getChild=function(){return this.child},c.prototype.getOwner=function(){return this.owner},c.prototype.getWidth=function(){return this.rect.width},c.prototype.setWidth=function(e){this.rect.width=e},c.prototype.getHeight=function(){return this.rect.height},c.prototype.setHeight=function(e){this.rect.height=e},c.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},c.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},c.prototype.getCenter=function(){return new u(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},c.prototype.getLocation=function(){return new u(this.rect.x,this.rect.y)},c.prototype.getRect=function(){return this.rect},c.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},c.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},c.prototype.setRect=function(e,t){this.rect.x=e.x,this.rect.y=e.y,this.rect.width=t.width,this.rect.height=t.height},c.prototype.setCenter=function(e,t){this.rect.x=e-this.rect.width/2,this.rect.y=t-this.rect.height/2},c.prototype.setLocation=function(e,t){this.rect.x=e,this.rect.y=t},c.prototype.moveBy=function(e,t){this.rect.x+=e,this.rect.y+=t},c.prototype.getEdgeListToNode=function(t){var r=[],n=this;return n.edges.forEach(function(e){if(e.target==t){if(e.source!=n)throw"Incorrect edge source!";r.push(e)}}),r},c.prototype.getEdgesBetween=function(t){var r=[],n=this;return n.edges.forEach(function(e){if(e.source!=n&&e.target!=n)throw"Incorrect edge source and/or target";e.target!=t&&e.source!=t||r.push(e)}),r},c.prototype.getNeighborsList=function(){var t=new Set,r=this;return r.edges.forEach(function(e){if(e.source==r)t.add(e.target);else{if(e.target!=r)throw"Incorrect incidency!";t.add(e.source)}}),t},c.prototype.withChildren=function(){var t=new Set;if(t.add(this),null!=this.child)for(var e=this.child.getNodes(),r=0;r<e.length;r++)e[r].withChildren().forEach(function(e){t.add(e)});return t},c.prototype.getNoOfChildren=function(){var e=0;if(null==this.child)e=1;else for(var t=this.child.getNodes(),r=0;r<t.length;r++)e+=t[r].getNoOfChildren();return e=0==e?1:e},c.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},c.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},c.prototype.scatter=function(){var e=-s.INITIAL_WORLD_BOUNDARY,t=s.INITIAL_WORLD_BOUNDARY,t=s.WORLD_CENTER_X+l.nextDouble()*(t-e)+e,e=-s.INITIAL_WORLD_BOUNDARY,r=s.INITIAL_WORLD_BOUNDARY,r=s.WORLD_CENTER_Y+l.nextDouble()*(r-e)+e;this.rect.x=t,this.rect.y=r},c.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";var e,t;0!=this.getChild().getNodes().length&&((t=this.getChild()).updateBounds(!0),this.rect.x=t.getLeft(),this.rect.y=t.getTop(),this.setWidth(t.getRight()-t.getLeft()),this.setHeight(t.getBottom()-t.getTop()),s.NODE_DIMENSIONS_INCLUDE_LABELS&&(e=t.getRight()-t.getLeft(),t=t.getBottom()-t.getTop(),this.labelWidth>e&&(this.rect.x-=(this.labelWidth-e)/2,this.setWidth(this.labelWidth)),this.labelHeight>t&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-t)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-t),this.setHeight(this.labelHeight))))},c.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==i.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},c.prototype.transform=function(e){var t=this.rect.x,r=(t>s.WORLD_BOUNDARY?t=s.WORLD_BOUNDARY:t<-s.WORLD_BOUNDARY&&(t=-s.WORLD_BOUNDARY),this.rect.y),t=(r>s.WORLD_BOUNDARY?r=s.WORLD_BOUNDARY:r<-s.WORLD_BOUNDARY&&(r=-s.WORLD_BOUNDARY),new u(t,r)),r=e.inverseTransformPoint(t);this.setLocation(r.x,r.y)},c.prototype.getLeft=function(){return this.rect.x},c.prototype.getRight=function(){return this.rect.x+this.rect.width},c.prototype.getTop=function(){return this.rect.y},c.prototype.getBottom=function(){return this.rect.y+this.rect.height},c.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},e.exports=c},function(e,t,r){function n(e,t){null==e&&null==t?(this.x=0,this.y=0):(this.x=e,this.y=t)}n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.setX=function(e){this.x=e},n.prototype.setY=function(e){this.y=e},n.prototype.getDifference=function(e){return new DimensionD(this.x-e.x,this.y-e.y)},n.prototype.getCopy=function(){return new n(this.x,this.y)},n.prototype.translate=function(e){return this.x+=e.width,this.y+=e.height,this},e.exports=n},function(e,t,r){var n,a=r(2),v=r(10),i=r(0),o=r(6),s=r(3),l=r(1),f=r(13),u=r(12),c=r(11);function h(e,t,r){a.call(this,r),this.estimatedSize=v.MIN_VALUE,this.margin=i.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=e,null!=t&&t instanceof o?this.graphManager=t:null!=t&&t instanceof Layout&&(this.graphManager=t.graphManager)}for(n in h.prototype=Object.create(a.prototype),a)h[n]=a[n];h.prototype.getNodes=function(){return this.nodes},h.prototype.getEdges=function(){return this.edges},h.prototype.getGraphManager=function(){return this.graphManager},h.prototype.getParent=function(){return this.parent},h.prototype.getLeft=function(){return this.left},h.prototype.getRight=function(){return this.right},h.prototype.getTop=function(){return this.top},h.prototype.getBottom=function(){return this.bottom},h.prototype.isConnected=function(){return this.isConnected},h.prototype.add=function(e,t,r){if(null==t&&null==r){var n=e;if(null==this.graphManager)throw"Graph has no graph mgr!";if(-1<this.getNodes().indexOf(n))throw"Node already in graph!";return(n.owner=this).getNodes().push(n),n}n=e;if(!(-1<this.getNodes().indexOf(t)&&-1<this.getNodes().indexOf(r)))throw"Source or target not in graph!";if(t.owner!=r.owner||t.owner!=this)throw"Both owners must be this graph!";return t.owner!=r.owner?null:(n.source=t,n.target=r,n.isInterGraph=!1,this.getEdges().push(n),t.edges.push(n),r!=t&&r.edges.push(n),n)},h.prototype.remove=function(e){var t=e;if(e instanceof s){if(null==t)throw"Node is null!";if(null==t.owner||t.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var r,n=t.edges.slice(),a=n.length,i=0;i<a;i++)((r=n[i]).isInterGraph?this.graphManager:r.source.owner).remove(r);if(-1==(o=this.nodes.indexOf(t)))throw"Node not in owner node list!";this.nodes.splice(o,1)}else if(e instanceof l){if(null==(r=e))throw"Edge is null!";if(null==r.source||null==r.target)throw"Source and/or target is null!";if(null==r.source.owner||null==r.target.owner||r.source.owner!=this||r.target.owner!=this)throw"Source and/or target owner is invalid!";var o,t=r.source.edges.indexOf(r),e=r.target.edges.indexOf(r);if(!(-1<t&&-1<e))throw"Source and/or target doesn't know this edge!";if(r.source.edges.splice(t,1),r.target!=r.source&&r.target.edges.splice(e,1),-1==(o=r.source.owner.getEdges().indexOf(r)))throw"Not in owner's edge list!";r.source.owner.getEdges().splice(o,1)}},h.prototype.updateLeftTop=function(){for(var e,t=v.MAX_VALUE,r=v.MAX_VALUE,n=this.getNodes(),a=n.length,i=0;i<a;i++){var o,s=n[i];(o=s.getTop())<t&&(t=o),(o=s.getLeft())<r&&(r=o)}return t==v.MAX_VALUE?null:(e=null!=n[0].getParent().paddingLeft?n[0].getParent().paddingLeft:this.margin,this.left=r-e,this.top=t-e,new u(this.left,this.top))},h.prototype.updateBounds=function(e){for(var t,r,n=v.MAX_VALUE,a=-v.MAX_VALUE,i=v.MAX_VALUE,o=-v.MAX_VALUE,s=this.nodes,l=s.length,u=0;u<l;u++){var c=s[u];e&&null!=c.child&&c.updateBounds(),(t=c.getLeft())<n&&(n=t),a<(t=c.getRight())&&(a=t),(t=c.getTop())<i&&(i=t),o<(t=c.getBottom())&&(o=t)}var h=new f(n,i,a-n,o-i);n==v.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),r=null!=s[0].getParent().paddingLeft?s[0].getParent().paddingLeft:this.margin,this.left=h.x-r,this.right=h.x+h.width+r,this.top=h.y-r,this.bottom=h.y+h.height+r},h.calculateBounds=function(e){for(var t=v.MAX_VALUE,r=-v.MAX_VALUE,n=v.MAX_VALUE,a=-v.MAX_VALUE,i=e.length,o=0;o<i;o++){var s,l=e[o];(s=l.getLeft())<t&&(t=s),r<(s=l.getRight())&&(r=s),(s=l.getTop())<n&&(n=s),a<(s=l.getBottom())&&(a=s)}return new f(t,n,r-t,a-n)},h.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},h.prototype.getEstimatedSize=function(){if(this.estimatedSize==v.MIN_VALUE)throw"assert failed";return this.estimatedSize},h.prototype.calcEstimatedSize=function(){for(var e=0,t=this.nodes,r=t.length,n=0;n<r;n++)e+=t[n].calcEstimatedSize();return this.estimatedSize=0==e?i.EMPTY_COMPOUND_NODE_SIZE:e/Math.sqrt(this.nodes.length),this.estimatedSize},h.prototype.updateConnected=function(){var t=this;if(0==this.nodes.length)this.isConnected=!0;else{var r,n=new c,a=new Set,e=this.nodes[0];for(e.withChildren().forEach(function(e){n.push(e),a.add(e)});0!==n.length;)for(var i,o,s=(i=(e=n.shift()).getEdges()).length,l=0;l<s;l++)null==(o=i[l].getOtherEndInGraph(e,this))||a.has(o)||o.withChildren().forEach(function(e){n.push(e),a.add(e)});this.isConnected=!1,a.size>=this.nodes.length&&(r=0,a.forEach(function(e){e.owner==t&&r++}),r==this.nodes.length&&(this.isConnected=!0))}},e.exports=h},function(e,t,r){var u,c=r(1);function n(e){u=r(5),this.layout=e,this.graphs=[],this.edges=[]}n.prototype.addRoot=function(){var e=this.layout.newGraph(),t=this.layout.newNode(null),e=this.add(e,t);return this.setRootGraph(e),this.rootGraph},n.prototype.add=function(e,t,r,n,a){if(null==r&&null==n&&null==a){if(null==e)throw"Graph is null!";if(null==t)throw"Parent node is null!";if(-1<this.graphs.indexOf(e))throw"Graph already in this graph mgr!";if(this.graphs.push(e),null!=e.parent)throw"Already has a parent!";if(null!=t.child)throw"Already has a child!";return(e.parent=t).child=e}a=r,r=e;e=(n=t).getOwner(),t=a.getOwner();if(null==e||e.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==t||t.getGraphManager()!=this)throw"Target not in this graph mgr!";if(e==t)return r.isInterGraph=!1,e.add(r,n,a);if(r.isInterGraph=!0,r.source=n,r.target=a,-1<this.edges.indexOf(r))throw"Edge already in inter-graph edge list!";if(this.edges.push(r),null==r.source||null==r.target)throw"Edge source and/or target is null!";if(-1!=r.source.edges.indexOf(r)||-1!=r.target.edges.indexOf(r))throw"Edge already in source and/or target incidency list!";return r.source.edges.push(r),r.target.edges.push(r),r},n.prototype.remove=function(e){if(e instanceof u){var t=e;if(t.getGraphManager()!=this)throw"Graph not in this graph mgr";if(t!=this.rootGraph&&(null==t.parent||t.parent.graphManager!=this))throw"Invalid parent node!";for(var r,n=[],a=(n=n.concat(t.getEdges())).length,i=0;i<a;i++)r=n[i],t.remove(r);for(var o,s=[],a=(s=s.concat(t.getNodes())).length,i=0;i<a;i++)o=s[i],t.remove(o);t==this.rootGraph&&this.setRootGraph(null);var l=this.graphs.indexOf(t);this.graphs.splice(l,1),t.parent=null}else if(e instanceof c){if(null==(r=e))throw"Edge is null!";if(!r.isInterGraph)throw"Not an inter-graph edge!";if(null==r.source||null==r.target)throw"Source and/or target is null!";if(-1==r.source.edges.indexOf(r)||-1==r.target.edges.indexOf(r))throw"Source and/or target doesn't know this edge!";l=r.source.edges.indexOf(r);if(r.source.edges.splice(l,1),l=r.target.edges.indexOf(r),r.target.edges.splice(l,1),null==r.source.owner||null==r.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==r.source.owner.getGraphManager().edges.indexOf(r))throw"Not in owner graph manager's edge list!";l=r.source.owner.getGraphManager().edges.indexOf(r);r.source.owner.getGraphManager().edges.splice(l,1)}},n.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},n.prototype.getGraphs=function(){return this.graphs},n.prototype.getAllNodes=function(){if(null==this.allNodes){for(var e=[],t=this.getGraphs(),r=t.length,n=0;n<r;n++)e=e.concat(t[n].getNodes());this.allNodes=e}return this.allNodes},n.prototype.resetAllNodes=function(){this.allNodes=null},n.prototype.resetAllEdges=function(){this.allEdges=null},n.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},n.prototype.getAllEdges=function(){if(null==this.allEdges){var e=[],t=this.getGraphs();t.length;for(var r=0;r<t.length;r++)e=e.concat(t[r].getEdges());e=e.concat(this.edges),this.allEdges=e}return this.allEdges},n.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},n.prototype.setAllNodesToApplyGravitation=function(e){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=e},n.prototype.getRoot=function(){return this.rootGraph},n.prototype.setRootGraph=function(e){if(e.getGraphManager()!=this)throw"Root not in this graph mgr!";null==(this.rootGraph=e).parent&&(e.parent=this.layout.newNode("Root node"))},n.prototype.getLayout=function(){return this.layout},n.prototype.isOneAncestorOfOther=function(e,t){if(null==e||null==t)throw"assert failed";if(e==t)return!0;for(var r,n=e.getOwner();null!=(r=n.getParent());){if(r==t)return!0;if(null==(n=r.getOwner()))break}for(n=t.getOwner();;){if(null==(r=n.getParent()))break;if(r==e)return!0;if(null==(n=r.getOwner()))break}return!1},n.prototype.calcLowestCommonAncestors=function(){for(var e,t,r,n,a,i=this.getAllEdges(),o=i.length,s=0;s<o;s++)if(t=(e=i[s]).source,r=e.target,e.lca=null,(e.sourceInLca=t)==(e.targetInLca=r))e.lca=t.getOwner();else{for(n=t.getOwner();null==e.lca;){for(a=(e.targetInLca=r).getOwner();null==e.lca;){if(a==n){e.lca=a;break}if(a==this.rootGraph)break;if(null!=e.lca)throw"assert failed";e.targetInLca=a.getParent(),a=e.targetInLca.getOwner()}if(n==this.rootGraph)break;null==e.lca&&(e.sourceInLca=n.getParent(),n=e.sourceInLca.getOwner())}if(null==e.lca)throw"assert failed"}},n.prototype.calcLowestCommonAncestor=function(e,t){if(e==t)return e.getOwner();for(var r=e.getOwner();null!=r;){for(var n=t.getOwner();null!=n;){if(n==r)return n;n=n.getParent().getOwner()}r=r.getParent().getOwner()}return r},n.prototype.calcInclusionTreeDepths=function(e,t){null==e&&null==t&&(e=this.rootGraph,t=1);for(var r,n=e.getNodes(),a=n.length,i=0;i<a;i++)(r=n[i]).inclusionTreeDepth=t,null!=r.child&&this.calcInclusionTreeDepths(r.child,t+1)},n.prototype.includesInvalidEdge=function(){for(var e,t=this.edges.length,r=0;r<t;r++)if(e=this.edges[r],this.isOneAncestorOfOther(e.source,e.target))return!0;return!1},e.exports=n},function(e,t,r){var n,a=r(0);function i(){}for(n in a)i[n]=a[n];i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,i.COOLING_ADAPTATION_FACTOR=.33,i.ADAPTATION_LOWER_NODE_LIMIT=1e3,i.ADAPTATION_UPPER_NODE_LIMIT=5e3,i.MAX_NODE_DISPLACEMENT=3*(i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100),i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,e.exports=i},function(e,t,r){var f=r(12);function n(){}n.calcSeparationAmount=function(e,t,r,n){if(!e.intersects(t))throw"assert failed";var a=new Array(2),i=(this.decideDirectionsForOverlappingNodes(e,t,a),r[0]=Math.min(e.getRight(),t.getRight())-Math.max(e.x,t.x),r[1]=Math.min(e.getBottom(),t.getBottom())-Math.max(e.y,t.y),e.getX()<=t.getX()&&e.getRight()>=t.getRight()?r[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight()):t.getX()<=e.getX()&&t.getRight()>=e.getRight()&&(r[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight())),e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()?r[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()):t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()&&(r[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom())),Math.abs((t.getCenterY()-e.getCenterY())/(t.getCenterX()-e.getCenterX()))),t=(i=t.getCenterY()===e.getCenterY()&&t.getCenterX()===e.getCenterX()?1:i)*r[0],e=r[1]/i;r[0]<e?e=r[0]:t=r[1],r[0]=-1*a[0]*(e/2+n),r[1]=-1*a[1]*(t/2+n)},n.decideDirectionsForOverlappingNodes=function(e,t,r){e.getCenterX()<t.getCenterX()?r[0]=-1:r[0]=1,e.getCenterY()<t.getCenterY()?r[1]=-1:r[1]=1},n.getIntersection2=function(e,t,r){var n=e.getCenterX(),a=e.getCenterY(),i=t.getCenterX(),o=t.getCenterY();if(e.intersects(t))return r[0]=n,r[1]=a,r[2]=i,r[3]=o,!0;var s=e.getX(),l=e.getY(),u=e.getRight(),c=e.getX(),h=e.getBottom(),v=e.getRight(),f=e.getWidthHalf(),d=e.getHeightHalf(),p=t.getX(),g=t.getY(),y=t.getRight(),m=t.getX(),b=t.getBottom(),x=t.getRight(),w=t.getWidthHalf(),E=t.getHeightHalf(),T=!1,_=!1;if(n===i){if(o<a)return r[0]=n,r[1]=l,r[2]=i,r[3]=b,!1;if(a<o)return r[0]=n,r[1]=h,r[2]=i,r[3]=g,!1}else if(a===o){if(i<n)return r[0]=s,r[1]=a,r[2]=y,r[3]=o,!1;if(n<i)return r[0]=u,r[1]=a,r[2]=p,r[3]=o,!1}else{var e=e.height/e.width,t=t.height/t.width,D=(o-a)/(i-n),C=void 0,N=void 0,A=void 0,L=void 0;if(-e==D?T=(i<n?(r[0]=c,r[1]=h):(r[0]=u,r[1]=l),!0):e==D&&(T=(i<n?(r[0]=s,r[1]=l):(r[0]=v,r[1]=h),!0)),-t==D?_=(n<i?(r[2]=m,r[3]=b):(r[2]=y,r[3]=g),!0):t==D&&(_=(n<i?(r[2]=p,r[3]=g):(r[2]=x,r[3]=b),!0)),T&&_)return!1;if(N=i<n?o<a?(C=this.getCardinalDirection(e,D,4),this.getCardinalDirection(t,D,2)):(C=this.getCardinalDirection(-e,D,3),this.getCardinalDirection(-t,D,1)):o<a?(C=this.getCardinalDirection(-e,D,1),this.getCardinalDirection(-t,D,3)):(C=this.getCardinalDirection(e,D,2),this.getCardinalDirection(t,D,4)),!T)switch(C){case 1:A=l,r[0]=n+-d/D,r[1]=A;break;case 2:A=a+f*D,r[0]=v,r[1]=A;break;case 3:A=h,r[0]=n+d/D,r[1]=A;break;case 4:A=a+-f*D,r[0]=c,r[1]=A}if(!_)switch(N){case 1:L=g,r[2]=i+-E/D,r[3]=L;break;case 2:L=o+w*D,r[2]=x,r[3]=L;break;case 3:L=b,r[2]=i+E/D,r[3]=L;break;case 4:L=o+-w*D,r[2]=m,r[3]=L}}return!1},n.getCardinalDirection=function(e,t,r){return t<e?r:1+r%4},n.getIntersection=function(e,t,r,n){if(null==n)return this.getIntersection2(e,t,r);var a,i,o,s,l,u=e.x,e=e.y,c=t.x,t=t.y,h=r.x,r=r.y,v=n.x,n=n.y;return 0==(l=(a=t-e)*(o=h-v)-(i=n-r)*(s=u-c))?null:new f((s*(s=v*r-h*n)-o*(v=c*e-u*t))/l,(i*v-a*s)/l)},n.angleOfVector=function(e,t,r,n){var a=void 0;return e!==r?(a=Math.atan((n-t)/(r-e)),r<e?a+=Math.PI:n<t&&(a+=this.TWO_PI)):a=n<t?this.ONE_AND_HALF_PI:this.HALF_PI,a},n.doIntersect=function(e,t,r,n){var a=e.x,e=e.y,i=t.x,t=t.y,o=r.x,r=r.y,s=n.x,n=n.y,l=(i-a)*(n-r)-(s-o)*(t-e);return 0!=l&&(t=((e-t)*(s-a)+(i-a)*(n-e))/l,0<(i=((n-r)*(s-a)+(o-s)*(n-e))/l)&&i<1&&0<t&&t<1)},n.HALF_PI=.5*Math.PI,n.ONE_AND_HALF_PI=1.5*Math.PI,n.TWO_PI=2*Math.PI,n.THREE_PI=3*Math.PI,e.exports=n},function(e,t,r){function n(){}n.sign=function(e){return 0<e?1:e<0?-1:0},n.floor=function(e){return e<0?Math.ceil(e):Math.floor(e)},n.ceil=function(e){return e<0?Math.floor(e):Math.ceil(e)},e.exports=n},function(e,t,r){function n(){}n.MAX_VALUE=2147483647,n.MIN_VALUE=-2147483648,e.exports=n},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return{value:e,next:null,prev:null}}function i(e,t,r,n){return null!==e?e.next=t:n.head=t,null!==r?r.prev=t:n.tail=t,t.prev=e,t.next=r,n.length++,t}function o(e,t){var r=e.prev,n=e.next;return null!==r?r.next=n:t.head=n,null!==n?n.prev=r:t.tail=r,e.prev=e.next=null,t.length--,e}function s(e){var t=this;if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.length=0,this.head=null,(this.tail=null)!=e&&e.forEach(function(e){return t.push(e)})}(function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)})(s,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(e,t){return i(t.prev,a(e),t,this)}},{key:"insertAfter",value:function(e,t){return i(t,a(e),t.next,this)}},{key:"insertNodeBefore",value:function(e,t){return i(t.prev,e,t,this)}},{key:"insertNodeAfter",value:function(e,t){return i(t,e,t.next,this)}},{key:"push",value:function(e){return i(this.tail,a(e),null,this)}},{key:"unshift",value:function(e){return i(null,a(e),this.head,this)}},{key:"remove",value:function(e){return o(e,this)}},{key:"pop",value:function(){return o(this.tail,this).value}},{key:"popNode",value:function(){return o(this.tail,this)}},{key:"shift",value:function(){return o(this.head,this).value}},{key:"shiftNode",value:function(){return o(this.head,this)}},{key:"get_object_at",value:function(e){if(e<=this.length()){for(var t=1,r=this.head;t<e;)r=r.next,t++;return r.value}}},{key:"set_object_at",value:function(e,t){if(e<=this.length()){for(var r=1,n=this.head;r<e;)n=n.next,r++;n.value=t}}}]),e.exports=s},function(e,t,r){function n(e,t,r){this.x=null,(this.y=null)==e&&null==t&&null==r?(this.x=0,this.y=0):"number"==typeof e&&"number"==typeof t&&null==r?(this.x=e,this.y=t):"Point"==e.constructor.name&&null==t&&null==r&&(this.x=(r=e).x,this.y=r.y)}n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.getLocation=function(){return new n(this.x,this.y)},n.prototype.setLocation=function(e,t,r){"Point"==e.constructor.name&&null==t&&null==r?this.setLocation((r=e).x,r.y):"number"==typeof e&&"number"==typeof t&&null==r&&(parseInt(e)==e&&parseInt(t)==t?this.move(e,t):(this.x=Math.floor(e+.5),this.y=Math.floor(t+.5)))},n.prototype.move=function(e,t){this.x=e,this.y=t},n.prototype.translate=function(e,t){this.x+=e,this.y+=t},n.prototype.equals=function(e){return"Point"==e.constructor.name?this.x==e.x&&this.y==e.y:this==e},n.prototype.toString=function(){return(new n).constructor.name+"[x="+this.x+",y="+this.y+"]"},e.exports=n},function(e,t,r){function n(e,t,r,n){this.x=0,this.y=0,this.width=0,this.height=0,null!=e&&null!=t&&null!=r&&null!=n&&(this.x=e,this.y=t,this.width=r,this.height=n)}n.prototype.getX=function(){return this.x},n.prototype.setX=function(e){this.x=e},n.prototype.getY=function(){return this.y},n.prototype.setY=function(e){this.y=e},n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(e){this.width=e},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(e){this.height=e},n.prototype.getRight=function(){return this.x+this.width},n.prototype.getBottom=function(){return this.y+this.height},n.prototype.intersects=function(e){return!(this.getRight()<e.x)&&(!(this.getBottom()<e.y)&&(!(e.getRight()<this.x)&&!(e.getBottom()<this.y)))},n.prototype.getCenterX=function(){return this.x+this.width/2},n.prototype.getMinX=function(){return this.getX()},n.prototype.getMaxX=function(){return this.getX()+this.width},n.prototype.getCenterY=function(){return this.y+this.height/2},n.prototype.getMinY=function(){return this.getY()},n.prototype.getMaxY=function(){return this.getY()+this.height},n.prototype.getWidthHalf=function(){return this.width/2},n.prototype.getHeightHalf=function(){return this.height/2},e.exports=n},function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(){}a.lastID=0,a.createID=function(e){return a.isPrimitive(e)?e:(null!=e.uniqueID||(e.uniqueID=a.getString(),a.lastID++),e.uniqueID)},a.getString=function(e){return"Object#"+(e=null==e?a.lastID:e)},a.isPrimitive=function(e){var t=void 0===e?"undefined":n(e);return null==e||"object"!=t&&"function"!=t},e.exports=a},function(e,t,r){function d(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var n=r(0),a=r(6),i=r(3),o=r(1),s=r(5),l=r(4),u=r(17),c=r(27);function h(e){c.call(this),this.layoutQuality=n.QUALITY,this.createBendsAsNeeded=n.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=n.DEFAULT_INCREMENTAL,this.animationOnLayout=n.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=n.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=n.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=n.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new a(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=e&&(this.isRemoteUse=e)}h.RANDOM_SEED=1,(h.prototype=Object.create(c.prototype)).getGraphManager=function(){return this.graphManager},h.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},h.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},h.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},h.prototype.newGraphManager=function(){var e=new a(this);return this.graphManager=e},h.prototype.newGraph=function(e){return new s(null,this.graphManager,e)},h.prototype.newNode=function(e){return new i(this.graphManager,e)},h.prototype.newEdge=function(e){return new o(null,null,e)},h.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},h.prototype.runLayout=function(){var e;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),e=!this.checkLayoutSuccess()&&this.layout(),"during"!==n.ANIMATE&&(e&&!this.isSubLayout&&this.doPostLayout(),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,e)},h.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},h.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var e=this.graphManager.getAllEdges(),t=0;t<e.length;t++)e[t];for(var r=this.graphManager.getRoot().getNodes(),t=0;t<r.length;t++)r[t];this.update(this.graphManager.getRoot())}},h.prototype.update=function(e){if(null==e)this.update2();else if(e instanceof i){var t=e;if(null!=t.getChild())for(var r=t.getChild().getNodes(),n=0;n<r.length;n++)update(r[n]);null!=t.vGraphObject&&t.vGraphObject.update(t)}else e instanceof o?null!=e.vGraphObject&&e.vGraphObject.update(e):e instanceof s&&null!=e.vGraphObject&&e.vGraphObject.update(e)},h.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=n.QUALITY,this.animationDuringLayout=n.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=n.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=n.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=n.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=n.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=n.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},h.prototype.transform=function(e){if(null==e)this.transform(new l(0,0));else{var t=new u,r=this.graphManager.getRoot().updateLeftTop();if(null!=r){t.setWorldOrgX(e.x),t.setWorldOrgY(e.y),t.setDeviceOrgX(r.x),t.setDeviceOrgY(r.y);for(var n=this.getAllNodes(),a=0;a<n.length;a++)n[a].transform(t)}}},h.prototype.positionNodesRandomly=function(e){if(null==e)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var t,r,n=e.getNodes(),a=0;a<n.length;a++)null==(r=(t=n[a]).getChild())||0==r.getNodes().length?t.scatter():(this.positionNodesRandomly(r),t.updateBounds())},h.prototype.getFlatForest=function(){for(var e=[],t=!0,r=this.graphManager.getRoot().getNodes(),n=!0,a=0;a<r.length;a++)null!=r[a].getChild()&&(n=!1);if(!n)return e;for(var i=new Set,o=[],s=new Map,l=(l=[]).concat(r);0<l.length&&t;){for(o.push(l[0]);0<o.length&&t;)for(var u=o[0],c=(o.splice(0,1),i.add(u),u.getEdges()),a=0;a<c.length;a++){var h=c[a].getOtherEnd(u);if(s.get(u)!=h){if(i.has(h)){t=!1;break}o.push(h),s.set(h,u)}}if(t){var v=[].concat(d(i));e.push(v);for(a=0;a<v.length;a++){var f=v[a],f=l.indexOf(f);-1<f&&l.splice(f,1)}i=new Set,s=new Map}else e=[]}return e},h.prototype.createDummyNodesForBendpoints=function(e){for(var t=[],r=e.source,n=this.graphManager.calcLowestCommonAncestor(e.source,e.target),a=0;a<e.bendpoints.length;a++){var i=this.newNode(null),o=(i.setRect(new Point(0,0),new Dimension(1,1)),n.add(i),this.newEdge(null));this.graphManager.add(o,r,i),t.add(i),r=i}o=this.newEdge(null);return this.graphManager.add(o,r,e.target),this.edgeToDummyNodes.set(e,t),(e.isInterGraph()?this.graphManager:n).remove(e),t},h.prototype.createBendpointsFromDummyNodes=function(){var e=(e=[]).concat(this.graphManager.getAllEdges());e=[].concat(d(this.edgeToDummyNodes.keys())).concat(e);for(var t=0;t<e.length;t++){var r=e[t];if(0<r.bendpoints.length){for(var n=this.edgeToDummyNodes.get(r),a=0;a<n.length;a++){var i=n[a],o=new l(i.getCenterX(),i.getCenterY()),s=r.bendpoints.get(a);s.x=o.x,s.y=o.y,i.getOwner().remove(i)}this.graphManager.add(r,r.source,r.target)}}},h.transform=function(e,t,r,n){var a,i;return null!=r&&null!=n?(a=t,e<=50?a-=(t-t/r)/50*(50-e):a+=(t*n-t)/50*(e-50),a):(r=e<=50?(i=9*t/500,t/10):(i=9*t/50,-8*t),i*e+r)},h.findCenterOfTree=function(e){var t=(t=[]).concat(e),r=[],n=new Map,a=!1,i=null;1!=t.length&&2!=t.length||(a=!0,i=t[0]);for(var o=0;o<t.length;o++){var s=(u=t[o]).getNeighborsList().size;n.set(u,u.getNeighborsList().size),1==s&&r.push(u)}for(l=(l=[]).concat(r);!a;){[].concat(l);for(var l=[],o=0;o<t.length;o++){var u=t[o],c=t.indexOf(u);0<=c&&t.splice(c,1),u.getNeighborsList().forEach(function(e){var t;r.indexOf(e)<0&&(1==(t=n.get(e)-1)&&l.push(e),n.set(e,t))})}r=r.concat(l),1!=t.length&&2!=t.length||(a=!0,i=t[0])}return i},h.prototype.setGraphManager=function(e){this.graphManager=e},e.exports=h},function(e,t,r){function n(){}n.seed=1,n.x=0,n.nextDouble=function(){return(n.x=1e4*Math.sin(n.seed++))-Math.floor(n.x)},e.exports=n},function(e,t,r){var n=r(4);function a(e,t){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}a.prototype.getWorldOrgX=function(){return this.lworldOrgX},a.prototype.setWorldOrgX=function(e){this.lworldOrgX=e},a.prototype.getWorldOrgY=function(){return this.lworldOrgY},a.prototype.setWorldOrgY=function(e){this.lworldOrgY=e},a.prototype.getWorldExtX=function(){return this.lworldExtX},a.prototype.setWorldExtX=function(e){this.lworldExtX=e},a.prototype.getWorldExtY=function(){return this.lworldExtY},a.prototype.setWorldExtY=function(e){this.lworldExtY=e},a.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},a.prototype.setDeviceOrgX=function(e){this.ldeviceOrgX=e},a.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},a.prototype.setDeviceOrgY=function(e){this.ldeviceOrgY=e},a.prototype.getDeviceExtX=function(){return this.ldeviceExtX},a.prototype.setDeviceExtX=function(e){this.ldeviceExtX=e},a.prototype.getDeviceExtY=function(){return this.ldeviceExtY},a.prototype.setDeviceExtY=function(e){this.ldeviceExtY=e},a.prototype.transformX=function(e){var t=0,r=this.lworldExtX;return t=0!=r?this.ldeviceOrgX+(e-this.lworldOrgX)*this.ldeviceExtX/r:t},a.prototype.transformY=function(e){var t=0,r=this.lworldExtY;return t=0!=r?this.ldeviceOrgY+(e-this.lworldOrgY)*this.ldeviceExtY/r:t},a.prototype.inverseTransformX=function(e){var t=0,r=this.ldeviceExtX;return t=0!=r?this.lworldOrgX+(e-this.ldeviceOrgX)*this.lworldExtX/r:t},a.prototype.inverseTransformY=function(e){var t=0,r=this.ldeviceExtY;return t=0!=r?this.lworldOrgY+(e-this.ldeviceOrgY)*this.lworldExtY/r:t},a.prototype.inverseTransformPoint=function(e){return new n(this.inverseTransformX(e.x),this.inverseTransformY(e.y))},e.exports=a},function(e,t,r){var n,a=r(15),v=r(7),s=r(0),u=r(8),c=r(9);function i(){a.call(this),this.useSmartIdealEdgeLengthCalculation=v.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=v.DEFAULT_EDGE_LENGTH,this.springConstant=v.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=v.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=v.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=v.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=v.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=v.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*v.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=v.MAX_ITERATIONS}for(n in i.prototype=Object.create(a.prototype),a)i[n]=a[n];i.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=v.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},i.prototype.calcIdealEdgeLengths=function(){for(var e,t,r,n,a,i=this.getGraphManager().getAllEdges(),o=0;o<i.length;o++)(e=i[o]).idealLength=this.idealEdgeLength,e.isInterGraph&&(t=e.getSource(),r=e.getTarget(),n=e.getSourceInLca().getEstimatedSize(),a=e.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(e.idealLength+=n+a-2*s.SIMPLE_NODE_SIZE),n=e.getLca().getInclusionTreeDepth(),e.idealLength+=v.DEFAULT_EDGE_LENGTH*v.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(t.getInclusionTreeDepth()+r.getInclusionTreeDepth()-2*n))},i.prototype.initSpringEmbedder=function(){var e=this.getAllNodes().length;this.incremental?(e>v.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*v.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(e-v.ADAPTATION_LOWER_NODE_LIMIT)/(v.ADAPTATION_UPPER_NODE_LIMIT-v.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-v.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=v.MAX_NODE_DISPLACEMENT_INCREMENTAL):(e>v.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(v.COOLING_ADAPTATION_FACTOR,1-(e-v.ADAPTATION_LOWER_NODE_LIMIT)/(v.ADAPTATION_UPPER_NODE_LIMIT-v.ADAPTATION_LOWER_NODE_LIMIT)*(1-v.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=v.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},i.prototype.calcSpringForces=function(){for(var e,t=this.getAllEdges(),r=0;r<t.length;r++)e=t[r],this.calcSpringForce(e,e.idealLength)},i.prototype.calcRepulsionForces=function(){var e,t,r,n,a,i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],o=1<arguments.length&&void 0!==arguments[1]&&arguments[1],s=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%v.GRID_CALCULATION_CHECK_PERIOD==1&&i&&this.updateGrid(),a=new Set,e=0;e<s.length;e++)r=s[e],this.calculateRepulsionForceOfANode(r,a,i,o),a.add(r);else for(e=0;e<s.length;e++)for(r=s[e],t=e+1;t<s.length;t++)n=s[t],r.getOwner()==n.getOwner()&&this.calcRepulsionForce(r,n)},i.prototype.calcGravitationalForces=function(){for(var e,t=this.getAllNodesToApplyGravitation(),r=0;r<t.length;r++)e=t[r],this.calcGravitationalForce(e)},i.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].move()},i.prototype.calcSpringForce=function(e,t){var r,n,a=e.getSource(),i=e.getTarget();if(this.uniformLeafNodeSizes&&null==a.getChild()&&null==i.getChild())e.updateLengthSimple();else if(e.updateLength(),e.isOverlapingSourceAndTarget)return;0!=(r=e.getLength())&&(n=(t=this.springConstant*(r-t))*(e.lengthX/r),t=t*(e.lengthY/r),a.springForceX+=n,a.springForceY+=t,i.springForceX-=n,i.springForceY-=t)},i.prototype.calcRepulsionForce=function(e,t){var r,n,a,i=e.getRect(),o=t.getRect(),s=new Array(2),l=new Array(4);i.intersects(o)?(u.calcSeparationAmount(i,o,s,v.DEFAULT_EDGE_LENGTH/2),n=2*s[0],a=2*s[1],s=e.noOfChildren*t.noOfChildren/(e.noOfChildren+t.noOfChildren),e.repulsionForceX-=s*n,e.repulsionForceY-=s*a,t.repulsionForceX+=s*n,t.repulsionForceY+=s*a):(s=this.uniformLeafNodeSizes&&null==e.getChild()&&null==t.getChild()?(r=o.getCenterX()-i.getCenterX(),o.getCenterY()-i.getCenterY()):(u.getIntersection(i,o,l),r=l[2]-l[0],l[3]-l[1]),i=(r=Math.abs(r)<v.MIN_REPULSION_DIST?c.sign(r)*v.MIN_REPULSION_DIST:r)*r+(s=Math.abs(s)<v.MIN_REPULSION_DIST?c.sign(s)*v.MIN_REPULSION_DIST:s)*s,o=Math.sqrt(i),a=(l=this.repulsionConstant*e.noOfChildren*t.noOfChildren/i)*s/o,e.repulsionForceX-=n=l*r/o,e.repulsionForceY-=a,t.repulsionForceX+=n,t.repulsionForceY+=a)},i.prototype.calcGravitationalForce=function(e){var t,r=e.getOwner(),n=(r.getRight()+r.getLeft())/2,a=(r.getTop()+r.getBottom())/2,n=e.getCenterX()-n,a=e.getCenterY()-a,i=Math.abs(n)+e.getWidth()/2,o=Math.abs(a)+e.getHeight()/2;e.getOwner()==this.graphManager.getRoot()?((t=r.getEstimatedSize()*this.gravityRangeFactor)<i||t<o)&&(e.gravitationForceX=-this.gravityConstant*n,e.gravitationForceY=-this.gravityConstant*a):((t=r.getEstimatedSize()*this.compoundGravityRangeFactor)<i||t<o)&&(e.gravitationForceX=-this.gravityConstant*n*this.compoundGravityConstant,e.gravitationForceY=-this.gravityConstant*a*this.compoundGravityConstant)},i.prototype.isConverged=function(){var e,t=!1;return this.totalIterations>this.maxIterations/3&&(t=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),e=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,e||t},i.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},i.prototype.calcNoOfChildrenForAllNodes=function(){for(var e,t=this.graphManager.getAllNodes(),r=0;r<t.length;r++)(e=t[r]).noOfChildren=e.getNoOfChildren()},i.prototype.calcGrid=function(e){for(var t=parseInt(Math.ceil((e.getRight()-e.getLeft())/this.repulsionRange)),r=parseInt(Math.ceil((e.getBottom()-e.getTop())/this.repulsionRange)),n=new Array(t),a=0;a<t;a++)n[a]=new Array(r);for(a=0;a<t;a++)for(var i=0;i<r;i++)n[a][i]=new Array;return n},i.prototype.addNodeToGrid=function(e,t,r){for(var n=parseInt(Math.floor((e.getRect().x-t)/this.repulsionRange)),a=parseInt(Math.floor((e.getRect().width+e.getRect().x-t)/this.repulsionRange)),i=parseInt(Math.floor((e.getRect().y-r)/this.repulsionRange)),o=parseInt(Math.floor((e.getRect().height+e.getRect().y-r)/this.repulsionRange)),s=n;s<=a;s++)for(var l=i;l<=o;l++)this.grid[s][l].push(e),e.setGridCoordinates(n,a,i,o)},i.prototype.updateGrid=function(){var e,t,r=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),e=0;e<r.length;e++)t=r[e],this.addNodeToGrid(t,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},i.prototype.calculateRepulsionForceOfANode=function(e,t,r,n){if(this.totalIterations%v.GRID_CALCULATION_CHECK_PERIOD==1&&r||n){for(var a=new Set,i=(e.surrounding=new Array,this.grid),o=e.startX-1;o<e.finishX+2;o++)for(var s=e.startY-1;s<e.finishY+2;s++)if(!(o<0||s<0||o>=i.length||s>=i[0].length))for(var l=0;l<i[o][s].length;l++){var u,c,h=i[o][s][l];e.getOwner()!=h.getOwner()||e==h||t.has(h)||a.has(h)||(u=Math.abs(e.getCenterX()-h.getCenterX())-(e.getWidth()/2+h.getWidth()/2),c=Math.abs(e.getCenterY()-h.getCenterY())-(e.getHeight()/2+h.getHeight()/2),u<=this.repulsionRange&&c<=this.repulsionRange&&a.add(h))}e.surrounding=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a))}for(o=0;o<e.surrounding.length;o++)this.calcRepulsionForce(e,e.surrounding[o])},i.prototype.calcRepulsionRange=function(){return 0},e.exports=i},function(e,t,r){var n,a=r(1),i=r(7);function o(e,t,r){a.call(this,e,t,r),this.idealLength=i.DEFAULT_EDGE_LENGTH}for(n in o.prototype=Object.create(a.prototype),a)o[n]=a[n];e.exports=o},function(e,t,r){var n,a=r(3);function i(e,t,r,n){a.call(this,e,t,r,n),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(n in i.prototype=Object.create(a.prototype),a)i[n]=a[n];i.prototype.setGridCoordinates=function(e,t,r,n){this.startX=e,this.finishX=t,this.startY=r,this.finishY=n},e.exports=i},function(e,t,r){function n(e,t){this.width=0,this.height=0,null!==e&&null!==t&&(this.height=t,this.width=e)}n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(e){this.width=e},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(e){this.height=e},e.exports=n},function(e,t,r){var n=r(14);function a(){this.map={},this.keys=[]}a.prototype.put=function(e,t){var r=n.createID(e);this.contains(r)||(this.map[r]=t,this.keys.push(e))},a.prototype.contains=function(e){return n.createID(e),null!=this.map[e]},a.prototype.get=function(e){e=n.createID(e);return this.map[e]},a.prototype.keySet=function(){return this.keys},e.exports=a},function(e,t,r){var n=r(14);function a(){this.set={}}a.prototype.add=function(e){var t=n.createID(e);this.contains(t)||(this.set[t]=e)},a.prototype.remove=function(e){delete this.set[n.createID(e)]},a.prototype.clear=function(){this.set={}},a.prototype.contains=function(e){return this.set[n.createID(e)]==e},a.prototype.isEmpty=function(){return 0===this.size()},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAllTo=function(e){for(var t=Object.keys(this.set),r=t.length,n=0;n<r;n++)e.push(this.set[t[n]])},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAll=function(e){for(var t=e.length,r=0;r<t;r++){var n=e[r];this.add(n)}},e.exports=a},function(e,t,r){var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(11),r=(n(o,[{key:"_quicksort",value:function(e,t,r){var n;t<r&&(n=this._partition(e,t,r),this._quicksort(e,t,n),this._quicksort(e,n+1,r))}},{key:"_partition",value:function(e,t,r){for(var n=this._get(e,t),a=t,i=r;;){for(;this.compareFunction(n,this._get(e,i));)i--;for(;this.compareFunction(this._get(e,a),n);)a++;if(!(a<i))return i;this._swap(e,a,i),a++,i--}}},{key:"_get",value:function(e,t){return e instanceof i?e.get_object_at(t):e[t]}},{key:"_set",value:function(e,t,r){e instanceof i?e.set_object_at(t,r):e[t]=r}},{key:"_swap",value:function(e,t,r){var n=this._get(e,t);this._set(e,t,this._get(e,r)),this._set(e,r,n)}},{key:"_defaultCompareFunction",value:function(e,t){return e<t}}]),o);function o(e,t){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");null===t&&void 0===t||(this.compareFunction=this._defaultCompareFunction);t=void 0,t=e instanceof i?e.size():e.length;this._quicksort(e,0,t-1)}e.exports=r},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)})(h,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var e=1;e<this.jMax;e++)this.grid[0][e]=this.grid[0][e-1]+this.gap_penalty,this.tracebackGrid[0][e]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var r=1;r<this.iMax;r++)for(var n=1;n<this.jMax;n++){var a=[this.sequence1[r-1]===this.sequence2[n-1]?this.grid[r-1][n-1]+this.match_score:this.grid[r-1][n-1]+this.mismatch_penalty,this.grid[r-1][n]+this.gap_penalty,this.grid[r][n-1]+this.gap_penalty],i=this.arrayAllMaxIndexes(a);this.grid[r][n]=a[i[0]],this.tracebackGrid[r][n]=[i.includes(0),i.includes(1),i.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var e=[];for(e.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});e[0];){var t=e[0],r=this.tracebackGrid[t.pos[0]][t.pos[1]];r[0]&&e.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),r[1]&&e.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),r[2]&&e.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),0===t.pos[0]&&0===t.pos[1]&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),e.shift()}return this.alignments}},{key:"getAllIndexes",value:function(e,t){for(var r=[],n=-1;-1!==(n=e.indexOf(t,n+1));)r.push(n);return r}},{key:"arrayAllMaxIndexes",value:function(e){return this.getAllIndexes(e,Math.max.apply(null,e))}}]);var a=h;function h(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:-1,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:-1,i=this,o=h;if(!(i instanceof o))throw new TypeError("Cannot call a class as a function");this.sequence1=e,this.sequence2=t,this.match_score=r,this.mismatch_penalty=n,this.gap_penalty=a,this.iMax=e.length+1,this.jMax=t.length+1,this.grid=new Array(this.iMax);for(var s=0;s<this.iMax;s++){this.grid[s]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.grid[s][l]=0}this.tracebackGrid=new Array(this.iMax);for(var u=0;u<this.iMax;u++){this.tracebackGrid[u]=new Array(this.jMax);for(var c=0;c<this.jMax;c++)this.tracebackGrid[u][c]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}e.exports=a},function(e,t,r){function n(){}n.FDLayout=r(18),n.FDLayoutConstants=r(7),n.FDLayoutEdge=r(19),n.FDLayoutNode=r(20),n.DimensionD=r(21),n.HashMap=r(22),n.HashSet=r(23),n.IGeometry=r(8),n.IMath=r(9),n.Integer=r(10),n.Point=r(12),n.PointD=r(4),n.RandomSeed=r(16),n.RectangleD=r(13),n.Transform=r(17),n.UniqueIDGeneretor=r(14),n.Quicksort=r(24),n.LinkedList=r(11),n.LGraphObject=r(2),n.LGraph=r(5),n.LEdge=r(1),n.LGraphManager=r(6),n.LNode=r(3),n.Layout=r(15),n.LayoutConstants=r(0),n.NeedlemanWunsch=r(25),e.exports=n},function(e,t,r){function n(){this.listeners=[]}var a=n.prototype;a.addListener=function(e,t){this.listeners.push({event:e,callback:t})},a.removeListener=function(e,t){for(var r=this.listeners.length;0<=r;r--){var n=this.listeners[r];n.event===e&&n.callback===t&&this.listeners.splice(r,1)}},a.emit=function(e,t){for(var r=0;r<this.listeners.length;r++){var n=this.listeners[r];e===n.event&&n.callback(t)}},e.exports=n}],a={},n.m=r,n.c=a,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26);function n(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r,a},layoutBase.exports=e()),layoutBase.exports;var e}function requireCoseBase(){return hasRequiredCoseBase||(hasRequiredCoseBase=1,e=function(r){return a=[function(e,t){e.exports=r},function(e,t,r){var n,a=r(0).FDLayoutConstants;function i(){}for(n in a)i[n]=a[n];i.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,i.DEFAULT_RADIAL_SEPARATION=a.DEFAULT_EDGE_LENGTH,i.DEFAULT_COMPONENT_SEPERATION=60,i.TILE=!0,i.TILING_PADDING_VERTICAL=10,i.TILING_PADDING_HORIZONTAL=10,i.TREE_REDUCTION_ON_INCREMENTAL=!1,e.exports=i},function(e,t,r){var n,a=r(0).FDLayoutEdge;function i(e,t,r){a.call(this,e,t,r)}for(n in i.prototype=Object.create(a.prototype),a)i[n]=a[n];e.exports=i},function(e,t,r){var n,a=r(0).LGraph;function i(e,t,r){a.call(this,e,t,r)}for(n in i.prototype=Object.create(a.prototype),a)i[n]=a[n];e.exports=i},function(e,t,r){var n,a=r(0).LGraphManager;function i(e){a.call(this,e)}for(n in i.prototype=Object.create(a.prototype),a)i[n]=a[n];e.exports=i},function(e,t,r){var n,a=r(0).FDLayoutNode,i=r(0).IMath;function o(e,t,r,n){a.call(this,e,t,r,n)}for(n in o.prototype=Object.create(a.prototype),a)o[n]=a[n];o.prototype.move=function(){var e=this.graphManager.getLayout();this.displacementX=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementY)),null==this.child||0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},o.prototype.propogateDisplacementToChildren=function(e,t){for(var r,n=this.getChild().getNodes(),a=0;a<n.length;a++)null==(r=n[a]).getChild()?(r.moveBy(e,t),r.displacementX+=e,r.displacementY+=t):r.propogateDisplacementToChildren(e,t)},o.prototype.setPred1=function(e){this.pred1=e},o.prototype.getPred1=function(){return pred1},o.prototype.getPred2=function(){return pred2},o.prototype.setNext=function(e){this.next=e},o.prototype.getNext=function(){return next},o.prototype.setProcessed=function(e){this.processed=e},o.prototype.isProcessed=function(){return processed},e.exports=o},function(e,t,r){var n,a=r(0).FDLayout,i=r(4),o=r(3),c=r(5),s=r(2),h=r(1),d=r(0).FDLayoutConstants,v=r(0).LayoutConstants,f=r(0).Point,p=r(0).PointD,g=r(0).Layout,y=r(0).Integer,m=r(0).IGeometry,l=r(0).LGraph,u=r(0).Transform;function b(){a.call(this),this.toBeTiled={}}for(n in b.prototype=Object.create(a.prototype),a)b[n]=a[n];b.prototype.newGraphManager=function(){var e=new i(this);return this.graphManager=e},b.prototype.newGraph=function(e){return new o(null,this.graphManager,e)},b.prototype.newNode=function(e){return new c(this.graphManager,e)},b.prototype.newEdge=function(e){return new s(null,null,e)},b.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.isSubLayout||(h.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=h.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=h.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=d.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=d.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=d.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=d.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=d.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=d.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/d.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=d.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},b.prototype.layout=function(){return v.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},b.prototype.classicLayout=function(){var e,t,r;return this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental?h.TREE_REDUCTION_ON_INCREMENTAL&&(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),t=new Set(this.getAllNodes()),r=this.nodesWithGravity.filter(function(e){return t.has(e)}),this.graphManager.setAllNodesToApplyGravitation(r)):0<(e=this.getFlatForest()).length?this.positionNodesRadially(e):(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),t=new Set(this.getAllNodes()),r=this.nodesWithGravity.filter(function(e){return t.has(e)}),this.graphManager.setAllNodesToApplyGravitation(r),this.positionNodesRandomly()),this.initSpringEmbedder(),this.runSpringEmbedder(),!0},b.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(0<this.prunedNodesAll.length))return!0;this.isTreeGrowing=!0}if(this.totalIterations%d.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(0<this.prunedNodesAll.length))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}var t;if(this.isTreeGrowing&&(this.growTreeIterations%10==0&&(0<this.prunedNodesAll.length?(this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation(),t=new Set(this.getAllNodes()),e=this.nodesWithGravity.filter(function(e){return t.has(e)}),this.graphManager.setAllNodesToApplyGravitation(e),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL):(this.isTreeGrowing=!1,this.isGrowthFinished=!0)),this.growTreeIterations++),this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var e=!this.isTreeGrowing&&!this.isGrowthFinished,r=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(e,r),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},b.prototype.getPositionsData=function(){for(var e=this.graphManager.getAllNodes(),t={},r=0;r<e.length;r++){var n=e[r].rect,a=e[r].id;t[a]={id:a,x:n.getCenterX(),y:n.getCenterY(),w:n.width,h:n.height}}return t},b.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var e=!1;if("during"===d.ANIMATE)this.emit("layoutstarted");else{for(;!e;)e=this.tick();this.graphManager.updateBounds()}},b.prototype.calculateNodesToApplyGravitationTo=function(){for(var e,t=[],r=this.graphManager.getGraphs(),n=r.length,a=0;a<n;a++)(e=r[a]).updateConnected(),e.isConnected||(t=t.concat(e.getNodes()));return t},b.prototype.createBendpoints=function(){for(var e=(e=[]).concat(this.graphManager.getAllEdges()),t=new Set,r=0;r<e.length;r++){var n=e[r];if(!t.has(n)){var a=n.getSource(),i=n.getTarget();if(a==i)n.getBendpoints().push(new p),n.getBendpoints().push(new p),this.createDummyNodesForBendpoints(n),t.add(n);else{var o=[];if(o=(o=o.concat(a.getEdgeListToNode(i))).concat(i.getEdgeListToNode(a)),!t.has(o[0])){if(1<o.length)for(var s=0;s<o.length;s++){var l=o[s];l.getBendpoints().push(new p),this.createDummyNodesForBendpoints(l)}o.forEach(function(e){t.add(e)})}}}if(t.size==e.length)break}},b.prototype.positionNodesRadially=function(e){for(var t=new f(0,0),r=Math.ceil(Math.sqrt(e.length)),n=0,a=0,i=0,o=new p(0,0),s=0;s<e.length;s++){s%r==0&&(a=n,(i=0)!=s&&(a+=h.DEFAULT_COMPONENT_SEPERATION),n=0);var l=e[s],u=g.findCenterOfTree(l);t.x=i,t.y=a,(o=b.radialLayout(l,u,t)).y>n&&(n=Math.floor(o.y)),i=Math.floor(o.x+h.DEFAULT_COMPONENT_SEPERATION)}this.transform(new p(v.WORLD_CENTER_X-o.x/2,v.WORLD_CENTER_Y-o.y/2))},b.radialLayout=function(e,t,r){var n=Math.max(this.maxDiagonalInTree(e),h.DEFAULT_RADIAL_SEPARATION),t=(b.branchRadialLayout(t,null,0,359,0,n),l.calculateBounds(e)),a=new u;a.setDeviceOrgX(t.getMinX()),a.setDeviceOrgY(t.getMinY()),a.setWorldOrgX(r.x),a.setWorldOrgY(r.y);for(var i=0;i<e.length;i++)e[i].transform(a);n=new p(t.getMaxX(),t.getMaxY());return a.inverseTransformPoint(n)},b.branchRadialLayout=function(e,t,r,n,a,i){var o=(n-r+1)/2;o<0&&(o+=180);for(var o=(o+r)%360*m.TWO_PI/360,s=a*Math.cos(o),o=a*Math.sin(o),l=(e.setCenter(s,o),[]),u=(l=l.concat(e.getEdges())).length,c=(null!=t&&u--,0),h=l.length,v=e.getEdgesBetween(t);1<v.length;){var f=v[0],f=(v.splice(0,1),l.indexOf(f));0<=f&&l.splice(f,1),h--,u--}for(var s=null!=t?(l.indexOf(v[0])+1)%h:0,d=Math.abs(n-r)/u,p=s;c!=u;p=++p%h){var g=l[p].getOtherEnd(e);g!=t&&(b.branchRadialLayout(g,e,g=(r+c*d)%360,(g+d)%360,a+i,i),c++)}},b.maxDiagonalInTree=function(e){for(var t=y.MIN_VALUE,r=0;r<e.length;r++){var n=e[r].getDiagonal();t<n&&(t=n)}return t},b.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},b.prototype.groupZeroDegreeMembers=function(){for(var l=this,u={},e=(this.memberGroups={},this.idToDummyNode={},[]),t=this.graphManager.getAllNodes(),r=0;r<t.length;r++){var n=(a=t[r]).getParent();0!==this.getNodeDegreeWithChildren(a)||null!=n.id&&this.getToBeTiled(n)||e.push(a)}for(r=0;r<e.length;r++){var a,i=(a=e[r]).getParent().id;void 0===u[i]&&(u[i]=[]),u[i]=u[i].concat(a)}Object.keys(u).forEach(function(e){if(1<u[e].length){var t="DummyCompound_"+e,r=(l.memberGroups[t]=u[e],u[e][0].getParent()),n=new c(l.graphManager),a=(n.id=t,n.paddingLeft=r.paddingLeft||0,n.paddingRight=r.paddingRight||0,n.paddingBottom=r.paddingBottom||0,n.paddingTop=r.paddingTop||0,l.idToDummyNode[t]=n,l.getGraphManager().add(l.newGraph(),n)),i=r.getChild();i.add(n);for(var o=0;o<u[e].length;o++){var s=u[e][o];i.remove(s),a.add(s)}}})},b.prototype.clearCompounds=function(){var e={},t={};this.performDFSOnCompounds();for(var r=0;r<this.compoundOrder.length;r++)t[this.compoundOrder[r].id]=this.compoundOrder[r],e[this.compoundOrder[r].id]=[].concat(this.compoundOrder[r].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[r].getChild()),this.compoundOrder[r].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(e,t)},b.prototype.clearZeroDegreeMembers=function(){var r=this,n=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(e){var t=r.idToDummyNode[e];n[e]=r.tileNodes(r.memberGroups[e],t.paddingLeft+t.paddingRight),t.rect.width=n[e].width,t.rect.height=n[e].height})},b.prototype.repopulateCompounds=function(){for(var e=this.compoundOrder.length-1;0<=e;e--){var t=this.compoundOrder[e],r=t.id,n=t.paddingLeft,a=t.paddingTop;this.adjustLocations(this.tiledMemberPack[r],t.rect.x,t.rect.y,n,a)}},b.prototype.repopulateZeroDegreeMembers=function(){var a=this,i=this.tiledZeroDegreePack;Object.keys(i).forEach(function(e){var t=a.idToDummyNode[e],r=t.paddingLeft,n=t.paddingTop;a.adjustLocations(i[e],t.rect.x,t.rect.y,r,n)})},b.prototype.getToBeTiled=function(e){var t=e.id;if(null!=this.toBeTiled[t])return this.toBeTiled[t];e=e.getChild();if(null==e)return this.toBeTiled[t]=!1;for(var r=e.getNodes(),n=0;n<r.length;n++){var a=r[n];if(0<this.getNodeDegree(a))return this.toBeTiled[t]=!1;if(null==a.getChild())this.toBeTiled[a.id]=!1;else if(!this.getToBeTiled(a))return this.toBeTiled[t]=!1}return this.toBeTiled[t]=!0},b.prototype.getNodeDegree=function(e){e.id;for(var t=e.getEdges(),r=0,n=0;n<t.length;n++){var a=t[n];a.getSource().id!==a.getTarget().id&&(r+=1)}return r},b.prototype.getNodeDegreeWithChildren=function(e){var t=this.getNodeDegree(e);if(null==e.getChild())return t;for(var r=e.getChild().getNodes(),n=0;n<r.length;n++){var a=r[n];t+=this.getNodeDegreeWithChildren(a)}return t},b.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},b.prototype.fillCompexOrderByDFS=function(e){for(var t=0;t<e.length;t++){var r=e[t];null!=r.getChild()&&this.fillCompexOrderByDFS(r.getChild().getNodes()),this.getToBeTiled(r)&&this.compoundOrder.push(r)}},b.prototype.adjustLocations=function(e,t,r,n,a){r+=a;for(var i=t+=n,o=0;o<e.rows.length;o++){for(var s=e.rows[o],l=(t=i,0),u=0;u<s.length;u++){var c=s[u];c.rect.x=t,c.rect.y=r,t+=c.rect.width+e.horizontalPadding,c.rect.height>l&&(l=c.rect.height)}r+=l+e.verticalPadding}},b.prototype.tileCompoundMembers=function(r,n){var a=this;this.tiledMemberPack=[],Object.keys(r).forEach(function(e){var t=n[e];a.tiledMemberPack[e]=a.tileNodes(r[e],t.paddingLeft+t.paddingRight),t.rect.width=a.tiledMemberPack[e].width,t.rect.height=a.tiledMemberPack[e].height})},b.prototype.tileNodes=function(e,t){var r={rows:[],rowWidth:[],rowHeight:[],width:0,height:t,verticalPadding:h.TILING_PADDING_VERTICAL,horizontalPadding:h.TILING_PADDING_HORIZONTAL};e.sort(function(e,t){return e.rect.width*e.rect.height>t.rect.width*t.rect.height?-1:e.rect.width*e.rect.height<t.rect.width*t.rect.height?1:0});for(var n=0;n<e.length;n++){var a=e[n];0==r.rows.length?this.insertNodeToRow(r,a,0,t):this.canAddHorizontal(r,a.rect.width,a.rect.height)?this.insertNodeToRow(r,a,this.getShortestRowIndex(r),t):this.insertNodeToRow(r,a,r.rows.length,t),this.shiftToLastRow(r)}return r},b.prototype.insertNodeToRow=function(e,t,r,n){r==e.rows.length&&(e.rows.push([]),e.rowWidth.push(n),e.rowHeight.push(0));var n=e.rowWidth[r]+t.rect.width,n=(0<e.rows[r].length&&(n+=e.horizontalPadding),e.rowWidth[r]=n,e.width<n&&(e.width=n),t.rect.height),a=(0<r&&(n+=e.verticalPadding),0);n>e.rowHeight[r]&&(a=e.rowHeight[r],e.rowHeight[r]=n,a=e.rowHeight[r]-a),e.height+=a,e.rows[r].push(t)},b.prototype.getShortestRowIndex=function(e){for(var t=-1,r=Number.MAX_VALUE,n=0;n<e.rows.length;n++)e.rowWidth[n]<r&&(t=n,r=e.rowWidth[n]);return t},b.prototype.getLongestRowIndex=function(e){for(var t=-1,r=Number.MIN_VALUE,n=0;n<e.rows.length;n++)e.rowWidth[n]>r&&(t=n,r=e.rowWidth[n]);return t},b.prototype.canAddHorizontal=function(e,t,r){var n=this.getShortestRowIndex(e);if(n<0)return!0;var a=e.rowWidth[n];if(a+e.horizontalPadding+t<=e.width)return!0;var i=0;return e.rowHeight[n]<r&&0<n&&(i=r+e.verticalPadding-e.rowHeight[n]),n=e.width-a>=t+e.horizontalPadding?(e.height+i)/(a+t+e.horizontalPadding):(e.height+i)/e.width,i=r+e.verticalPadding,(n=n<1?1/n:n)<(a=(a=e.width<t?(e.height+i)/t:(e.height+i)/e.width)<1?1/a:a)},b.prototype.shiftToLastRow=function(e){var t=this.getLongestRowIndex(e),r=e.rowWidth.length-1,n=e.rows[t],a=n[n.length-1],i=a.width+e.horizontalPadding;if(e.width-e.rowWidth[r]>i&&t!=r){n.splice(-1,1),e.rows[r].push(a),e.rowWidth[t]=e.rowWidth[t]-i,e.rowWidth[r]=e.rowWidth[r]+i,e.width=e.rowWidth[instance.getLongestRowIndex(e)];for(var o=Number.MIN_VALUE,s=0;s<n.length;s++)n[s].height>o&&(o=n[s].height);0<t&&(o+=e.verticalPadding);i=e.rowHeight[t]+e.rowHeight[r],a=(e.rowHeight[t]=o,e.rowHeight[r]<a.height+e.verticalPadding&&(e.rowHeight[r]=a.height+e.verticalPadding),e.rowHeight[t]+e.rowHeight[r]);e.height+=a-i,this.shiftToLastRow(e)}},b.prototype.tilingPreLayout=function(){h.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},b.prototype.tilingPostLayout=function(){h.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},b.prototype.reduceTrees=function(){for(var e,t=[],r=!0;r;){for(var n=this.graphManager.getAllNodes(),a=[],r=!1,i=0;i<n.length;i++)1!=(e=n[i]).getEdges().length||e.getEdges()[0].isInterGraph||null!=e.getChild()||(a.push([e,e.getEdges()[0],e.getOwner()]),r=!0);if(1==r){for(var o=[],s=0;s<a.length;s++)1==a[s][0].getEdges().length&&(o.push(a[s]),a[s][0].getOwner().remove(a[s][0]));t.push(o),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=t},b.prototype.growTree=function(e){for(var t,r=e[e.length-1],n=0;n<r.length;n++)t=r[n],this.findPlaceforPrunedNode(t),t[2].add(t[0]),t[2].add(t[1],t[1].source,t[1].target);e.splice(e.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},b.prototype.findPlaceforPrunedNode=function(e){var t=e[0],e=t==e[1].source?e[1].target:e[1].source,r=e.startX,n=e.finishX,a=e.startY,i=e.finishY,o=[0,0,0,0];if(0<a)for(var s=r;s<=n;s++)o[0]+=this.grid[s][a-1].length+this.grid[s][a].length-1;if(n<this.grid.length-1)for(s=a;s<=i;s++)o[1]+=this.grid[n+1][s].length+this.grid[n][s].length-1;if(i<this.grid[0].length-1)for(s=r;s<=n;s++)o[2]+=this.grid[s][i+1].length+this.grid[s][i].length-1;if(0<r)for(s=a;s<=i;s++)o[3]+=this.grid[r-1][s].length+this.grid[r][s].length-1;for(var l,u,c,h,v=y.MAX_VALUE,f=0;f<o.length;f++)o[f]<v?(v=o[f],l=1,u=f):o[f]==v&&l++;3==l&&0==v?0==o[0]&&0==o[1]&&0==o[2]?c=1:0==o[0]&&0==o[1]&&0==o[3]?c=0:0==o[0]&&0==o[2]&&0==o[3]?c=3:0==o[1]&&0==o[2]&&0==o[3]&&(c=2):c=2==l&&0==v?(h=Math.floor(2*Math.random()),0==o[0]&&0==o[1]?0==h?0:1:0==o[0]&&0==o[2]?0==h?0:2:0==o[0]&&0==o[3]?0==h?0:3:0==o[1]&&0==o[2]?0==h?1:2:0==o[1]&&0==o[3]?0==h?1:3:0==h?2:3):4==l&&0==v?h=Math.floor(4*Math.random()):u,0==c?t.setCenter(e.getCenterX(),e.getCenterY()-e.getHeight()/2-d.DEFAULT_EDGE_LENGTH-t.getHeight()/2):1==c?t.setCenter(e.getCenterX()+e.getWidth()/2+d.DEFAULT_EDGE_LENGTH+t.getWidth()/2,e.getCenterY()):2==c?t.setCenter(e.getCenterX(),e.getCenterY()+e.getHeight()/2+d.DEFAULT_EDGE_LENGTH+t.getHeight()/2):t.setCenter(e.getCenterX()-e.getWidth()/2-d.DEFAULT_EDGE_LENGTH-t.getWidth()/2,e.getCenterY())},e.exports=b},function(e,t,r){var n={};n.layoutBase=r(0),n.CoSEConstants=r(1),n.CoSEEdge=r(2),n.CoSEGraph=r(3),n.CoSEGraphManager=r(4),n.CoSELayout=r(6),n.CoSENode=r(5),e.exports=n}],i={},n.m=a,n.c=i,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7);function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var a,i},coseBase.exports=e(requireLayoutBase())),coseBase.exports;var e}!function(){var e;e=function(r){return a=[function(e,t){e.exports=r},function(e,t,r){var n=r(0).layoutBase.LayoutConstants,a=r(0).layoutBase.FDLayoutConstants,i=r(0).CoSEConstants,d=r(0).CoSELayout,h=r(0).CoSENode,v=r(0).layoutBase.PointD,f=r(0).layoutBase.DimensionD,o={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function s(e){this.options=function(e,t){var r,n={};for(r in e)n[r]=e[r];for(r in t)n[r]=t[r];return n}(o,e),l(this.options)}function l(e){null!=e.nodeRepulsion&&(i.DEFAULT_REPULSION_STRENGTH=a.DEFAULT_REPULSION_STRENGTH=e.nodeRepulsion),null!=e.idealEdgeLength&&(i.DEFAULT_EDGE_LENGTH=a.DEFAULT_EDGE_LENGTH=e.idealEdgeLength),null!=e.edgeElasticity&&(i.DEFAULT_SPRING_STRENGTH=a.DEFAULT_SPRING_STRENGTH=e.edgeElasticity),null!=e.nestingFactor&&(i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=e.nestingFactor),null!=e.gravity&&(i.DEFAULT_GRAVITY_STRENGTH=a.DEFAULT_GRAVITY_STRENGTH=e.gravity),null!=e.numIter&&(i.MAX_ITERATIONS=a.MAX_ITERATIONS=e.numIter),null!=e.gravityRange&&(i.DEFAULT_GRAVITY_RANGE_FACTOR=a.DEFAULT_GRAVITY_RANGE_FACTOR=e.gravityRange),null!=e.gravityCompound&&(i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=a.DEFAULT_COMPOUND_GRAVITY_STRENGTH=e.gravityCompound),null!=e.gravityRangeCompound&&(i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=e.gravityRangeCompound),null!=e.initialEnergyOnIncremental&&(i.DEFAULT_COOLING_FACTOR_INCREMENTAL=a.DEFAULT_COOLING_FACTOR_INCREMENTAL=e.initialEnergyOnIncremental),"draft"==e.quality?n.QUALITY=0:"proof"==e.quality?n.QUALITY=2:n.QUALITY=1,i.NODE_DIMENSIONS_INCLUDE_LABELS=a.NODE_DIMENSIONS_INCLUDE_LABELS=n.NODE_DIMENSIONS_INCLUDE_LABELS=e.nodeDimensionsIncludeLabels,i.DEFAULT_INCREMENTAL=a.DEFAULT_INCREMENTAL=n.DEFAULT_INCREMENTAL=!e.randomize,i.ANIMATE=a.ANIMATE=n.ANIMATE=e.animate,i.TILE=e.tile,i.TILING_PADDING_VERTICAL="function"==typeof e.tilingPaddingVertical?e.tilingPaddingVertical.call():e.tilingPaddingVertical,i.TILING_PADDING_HORIZONTAL="function"==typeof e.tilingPaddingHorizontal?e.tilingPaddingHorizontal.call():e.tilingPaddingHorizontal}function u(e){e("layout","cose-bilkent",s)}s.prototype.run=function(){var a,o,s=this.options,l=(this.idToLNode={},this.layout=new d),u=this,e=(u.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this}),l.newGraphManager()),t=(this.gm=e,this.options.eles.nodes()),r=this.options.eles.edges();this.root=e.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(t),l);for(var n=0;n<r.length;n++){var i=r[n],c=this.idToLNode[i.data("source")],h=this.idToLNode[i.data("target")];c!==h&&0==c.getEdgesBetween(h).length&&(e.add(l.newEdge(),c,h).id=i.id())}function v(){function e(){s.fit&&s.cy.fit(s.eles,s.padding),a||(a=!0,u.cy.one("layoutready",s.ready),u.cy.trigger({type:"layoutready",layout:u}))}for(var t,r=u.options.refresh,n=0;n<r&&!t;n++)t=u.stopped||u.layout.tick();if(t)return l.checkLayoutSuccess()&&!l.isSubLayout&&l.doPostLayout(),l.tilingPostLayout&&l.tilingPostLayout(),l.isLayoutFinished=!0,u.options.eles.nodes().positions(f),e(),u.cy.one("layoutstop",u.options.stop),u.cy.trigger({type:"layoutstop",layout:u}),o&&cancelAnimationFrame(o),void(a=!1);var i=u.layout.getPositionsData();s.eles.nodes().positions(function(e,t){if(!(e="number"==typeof e?t:e).isParent()){for(var r=e.id(),n=i[r],a=e;null==n&&(n=i[a.data("parent")]||i["DummyCompound_"+a.data("parent")],i[r]=n,null!=(a=a.parent()[0])););return null!=n?{x:n.x,y:n.y}:{x:e.position("x"),y:e.position("y")}}}),e(),o=requestAnimationFrame(v)}var f=function(e,t){t=(e="number"==typeof e?t:e).data("id"),e=u.idToLNode[t];return{x:e.getRect().getCenterX(),y:e.getRect().getCenterY()}};return l.addListener("layoutstarted",function(){"during"===u.options.animate&&(o=requestAnimationFrame(v))}),l.runLayout(),"during"!==this.options.animate&&(u.options.eles.nodes().not(":parent").layoutPositions(u,u.options,f),a=!1),this},s.prototype.getTopMostNodes=function(e){for(var n={},t=0;t<e.length;t++)n[e[t].id()]=!0;return e.filter(function(e,t){for(var r=(e="number"==typeof e?t:e).parent()[0];null!=r;){if(n[r.id()])return!1;r=r.parent()[0]}return!0})},s.prototype.processChildrenList=function(e,t,r){for(var n=t.length,a=0;a<n;a++){var i,o,s,l=t[a],u=l.children(),c=l.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels}),c=null!=l.outerWidth()&&null!=l.outerHeight()?e.add(new h(r.graphManager,new v(l.position("x")-c.w/2,l.position("y")-c.h/2),new f(parseFloat(c.w),parseFloat(c.h)))):e.add(new h(this.graphManager));c.id=l.data("id"),c.paddingLeft=parseInt(l.css("padding")),c.paddingTop=parseInt(l.css("padding")),c.paddingRight=parseInt(l.css("padding")),c.paddingBottom=parseInt(l.css("padding")),this.options.nodeDimensionsIncludeLabels&&l.isParent()&&(s=l.boundingBox({includeLabels:!0,includeNodes:!1}).w,i=l.boundingBox({includeLabels:!0,includeNodes:!1}).h,o=l.css("text-halign"),c.labelWidth=s,c.labelHeight=i,c.labelPos=o),this.idToLNode[l.data("id")]=c,isNaN(c.rect.x)&&(c.rect.x=0),isNaN(c.rect.y)&&(c.rect.y=0),null!=u&&0<u.length&&(s=r.getGraphManager().add(r.newGraph(),c),this.processChildrenList(s,u,r))}},s.prototype.stop=function(){return this.stopped=!0,this};"undefined"!=typeof cytoscape&&u(cytoscape),e.exports=u}],i={},n.m=a,n.c=i,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1);function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var a,i},cytoscapeCoseBilkent.exports=e(requireCoseBase())}();var cytoscapeCoseBilkentExports=cytoscapeCoseBilkent.exports;const coseBilkent=getDefaultExportFromCjs(cytoscapeCoseBilkentExports);function drawNodes(r,e,n,a){svgDraw.drawNode(r,e,n,a),e.children&&e.children.forEach((e,t)=>{drawNodes(r,e,n<0?t:n,a)})}function drawEdges(n,e){e.edges().map((e,t)=>{var r=e.data();e[0]._private.bodyBounds&&(e=e[0]._private.rscratch,log.trace("Edge: ",t,r),n.insert("path").attr("d",`M ${e.startX},${e.startY} L ${e.midX},${e.midY} L${e.endX},${e.endY} `).attr("class","edge section-edge-"+r.section+" edge-depth-"+r.depth))})}function addNodes(t,r,n,a){r.add({group:"nodes",data:{id:t.id,labelText:t.descr,height:t.height,width:t.width,level:a,nodeId:t.id,padding:t.padding,type:t.type},position:{x:t.x,y:t.y}}),t.children&&t.children.forEach(e=>{addNodes(e,r,n,a+1),r.add({group:"edges",data:{id:t.id+"_"+e.id,source:t.id,target:e.id,depth:a,section:e.section}})})}function layoutMindmap(n,a){return new Promise(t=>{const e=d3select("body").append("div").attr("id","cy").attr("style","display:none"),r=cytoscape$1({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});e.remove(),addNodes(n,r,a,0),r.nodes().forEach(function(t){t.layoutDimensions=()=>{var e=t.data();return{w:e.width,h:e.height}}}),r.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),r.ready(e=>{log.info("Ready",e),t(r)})})}function positionNodes(e){e.nodes().map((e,t)=>{const r=e.data(),n=(r.x=e.position().x,r.y=e.position().y,svgDraw.positionNode(r),getElementById(r.nodeId));log.info("Id:",t,"Position: (",e.position().x,", ",e.position().y,")",r),n.attr("transform",`translate(${e.position().x-r.width/2}, ${e.position().y-r.height/2})`),n.attr("attr",`apa-${t})`)})}cytoscape$1.use(coseBilkent);const draw=async(e,t,r,n)=>{const a=getConfig();a.htmlLabels=!1,log.debug("Rendering mindmap diagram\n"+e,n.parser);e=getConfig().securityLevel;let i;"sandbox"===e&&(i=d3select("#i"+t));const o=d3select("sandbox"===e?i.nodes()[0].contentDocument.body:"body"),s=o.select("#"+t);s.append("g");e=n.db.getMindmap();const l=s.append("g"),u=(l.attr("class","mindmap-edges"),s.append("g"));u.attr("class","mindmap-nodes"),drawNodes(u,e,-1,a);t=await layoutMindmap(e,a);drawEdges(l,t),positionNodes(t),setupGraphViewbox(void 0,s,a.mindmap.padding,a.mindmap.useMaxWidth)},mindmapRenderer={draw:draw},genSections=t=>{let r="";for(let e=0;e<t.THEME_COLOR_LIMIT;e++)t["lineColor"+e]=t["lineColor"+e]||t["cScaleInv"+e],isDark(t["lineColor"+e])?t["lineColor"+e]=lighten(t["lineColor"+e],20):t["lineColor"+e]=darken(t["lineColor"+e],20);for(let e=0;e<t.THEME_COLOR_LIMIT;e++){var n=""+(17-3*e);r+=`
    .section-${e-1} rect, .section-${e-1} path, .section-${e-1} circle, .section-${e-1} polygon, .section-${e-1} path  {
      fill: ${t["cScale"+e]};
    }
    .section-${e-1} text {
     fill: ${t["cScaleLabel"+e]};
    }
    .node-icon-${e-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+e]};
    }
    .section-edge-${e-1}{
      stroke: ${t["cScale"+e]};
    }
    .edge-depth-${e-1}{
      stroke-width: ${n};
    }
    .section-${e-1} line {
      stroke: ${t["cScaleInv"+e]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return r},getStyles=e=>`
  .edge {
    stroke-width: 3;
  }
  ${genSections(e)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .mindmap-node-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,mindmapStyles=getStyles,diagram={db:mindmapDb,renderer:mindmapRenderer,parser:mindmapParser,styles:mindmapStyles};export{diagram};