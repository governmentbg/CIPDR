import{b8 as dedent,l as log,aT as decodeEntities}from"./mermaid-f185fde2.js";function toString(e,n){var{includeImageAlt:n=!0}=n||{};return one(e,n)}function one(e,n){return e&&"object"==typeof e&&(e.value||(n?e.alt:"")||"children"in e&&all(e.children,n)||Array.isArray(e)&&all(e,n))||""}function all(e,n){for(var t=[],i=-1;++i<e.length;)t[i]=one(e[i],n);return t.join("")}function splice(e,n,t,i){var r=e.length;let o=0,c;if(n=n<0?r<-n?0:r+n:r<n?r:n,t=0<t?t:0,i.length<1e4)(c=Array.from(i)).unshift(n,t),[].splice.apply(e,c);else for(t&&[].splice.apply(e,[n,t]);o<i.length;)(c=i.slice(o,o+1e4)).unshift(n,0),[].splice.apply(e,c),o+=1e4,n+=1e4}function push(e,n){return 0<e.length?(splice(e,e.length,0,n),e):n}const hasOwnProperty={}.hasOwnProperty;function combineExtensions(e){var n={};let t=-1;for(;++t<e.length;)syntaxExtension(n,e[t]);return n}function syntaxExtension(n,t){let i;for(i in t){const c=(hasOwnProperty.call(n,i)?n[i]:void 0)||(n[i]={});var r=t[i];let e;for(e in r){hasOwnProperty.call(c,e)||(c[e]=[]);var o=r[e];constructs(c[e],Array.isArray(o)?o:o?[o]:[])}}}function constructs(e,n){let t=-1;const i=[];for(;++t<n.length;)("after"===n[t].add?e:i).push(n[t]);splice(e,0,0,i)}const unicodePunctuationRegex=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,asciiAlpha=regexCheck(/[A-Za-z]/),asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(e){return null!==e&&(e<32||127===e)}function markdownLineEndingOrSpace(e){return null!==e&&(e<0||32===e)}function markdownLineEnding(e){return null!==e&&e<-2}function markdownSpace(e){return-2===e||-1===e||32===e}const unicodeWhitespace=regexCheck(/\s/),unicodePunctuation=regexCheck(unicodePunctuationRegex);function regexCheck(n){return function(e){return null!==e&&n.test(String.fromCharCode(e))}}function factorySpace(n,t,i,e){const r=e?e-1:Number.POSITIVE_INFINITY;let o=0;return function(e){if(markdownSpace(e))return n.enter(i),c(e);return t(e)};function c(e){return markdownSpace(e)&&o++<r?(n.consume(e),c):(n.exit(i),t(e))}}const content$1={tokenize:initializeContent};function initializeContent(t){const n=t.attempt(this.parser.constructs.contentInitial,function(e){if(null!==e)return t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),factorySpace(t,n,"linePrefix");t.consume(e)},function(e){return t.enter("paragraph"),r(e)});let i;return n;function r(e){var n=t.enter("chunkText",{contentType:"text",previous:i});return i&&(i.next=n),i=n,o(e)}function o(e){return null===e?(t.exit("chunkText"),t.exit("paragraph"),void t.consume(e)):markdownLineEnding(e)?(t.consume(e),t.exit("chunkText"),r):(t.consume(e),o)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(i){const o=this,r=[];let c=0,a,t,u;return n;function n(e){var n;return c<r.length?(n=r[c],o.containerState=n[1],i.attempt(n[0].continuation,s,l)(e)):l(e)}function s(i){if(c++,o.containerState._closeFlow){o.containerState._closeFlow=void 0,a&&y();var r=o.events.length;let e=r,n;for(;e--;)if("exit"===o.events[e][0]&&"chunkFlow"===o.events[e][1].type){n=o.events[e][1].end;break}x(c);let t=r;for(;t<o.events.length;)o.events[t][1].end=Object.assign({},n),t++;return splice(o.events,e+1,0,o.events.slice(r)),o.events.length=t,l(i)}return n(i)}function l(e){if(c===r.length){if(!a)return p(e);if(a.currentConstruct&&a.currentConstruct.concrete)return m(e);o.interrupt=Boolean(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return o.containerState={},i.check(containerConstruct,d,f)(e)}function d(e){return a&&y(),x(c),p(e)}function f(e){return o.parser.lazy[o.now().line]=c!==r.length,u=o.now().offset,m(e)}function p(e){return o.containerState={},i.attempt(containerConstruct,h,m)(e)}function h(e){return c++,r.push([o.currentConstruct,o.containerState]),p(e)}function m(e){return null===e?(a&&y(),x(0),void i.consume(e)):(a=a||o.parser.flow(o.now()),i.enter("chunkFlow",{contentType:"flow",previous:t,_tokenizer:a}),k(e))}function k(e){return null===e?(g(i.exit("chunkFlow"),!0),x(0),void i.consume(e)):markdownLineEnding(e)?(i.consume(e),g(i.exit("chunkFlow")),c=0,o.interrupt=void 0,n):(i.consume(e),k)}function g(e,r){const n=o.sliceStream(e);if(r&&n.push(null),(e.previous=t)&&(t.next=e),t=e,a.defineSkip(e.start),a.write(n),o.parser.lazy[e.start.line]){let e=a.events.length;for(;e--;)if(a.events[e][1].start.offset<u&&(!a.events[e][1].end||a.events[e][1].end.offset>u))return;r=o.events.length;let n=r,t,i;for(;n--;)if("exit"===o.events[n][0]&&"chunkFlow"===o.events[n][1].type){if(t){i=o.events[n][1].end;break}t=!0}for(x(c),e=r;e<o.events.length;)o.events[e][1].end=Object.assign({},i),e++;splice(o.events,n+1,0,o.events.slice(r)),o.events.length=e}}function x(e){let n=r.length;for(;n-- >e;){const t=r[n];o.containerState=t[1],t[0].exit.call(o,i)}r.length=e}function y(){a.write([null]),t=void 0,a=void 0,o.containerState._closeFlow=void 0}}function tokenizeContainer(e,n,t){return factorySpace(e,e.attempt(this.parser.constructs.document,n,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function classifyCharacter(e){return null===e||markdownLineEndingOrSpace(e)||unicodeWhitespace(e)?1:unicodePunctuation(e)?2:void 0}function resolveAll(e,n,t){const i=[];let r=-1;for(;++r<e.length;){const o=e[r].resolveAll;o&&!i.includes(o)&&(n=o(n,t),i.push(o))}return n}const attention={name:"attention",tokenize:tokenizeAttention,resolveAll:resolveAllAttention};function resolveAllAttention(e,n){let t=-1,i;var r;let o,c;for(;++t<e.length;)if("enter"===e[t][0]&&"attentionSequence"===e[t][1].type&&e[t][1]._close)for(i=t;i--;)if("exit"===e[i][0]&&"attentionSequence"===e[i][1].type&&e[i][1]._open&&n.sliceSerialize(e[i][1]).charCodeAt(0)===n.sliceSerialize(e[t][1]).charCodeAt(0)&&(!((e[i][1]._close||e[t][1]._open)&&(e[t][1].end.offset-e[t][1].start.offset)%3)||(e[i][1].end.offset-e[i][1].start.offset+e[t][1].end.offset-e[t][1].start.offset)%3)){var a=1<e[i][1].end.offset-e[i][1].start.offset&&1<e[t][1].end.offset-e[t][1].start.offset?2:1,u=Object.assign({},e[i][1].end),s=Object.assign({},e[t][1].start);movePoint(u,-a),movePoint(s,a),u={type:1<a?"strongSequence":"emphasisSequence",start:u,end:Object.assign({},e[i][1].end)},s={type:1<a?"strongSequence":"emphasisSequence",start:Object.assign({},e[t][1].start),end:s},r={type:1<a?"strongText":"emphasisText",start:Object.assign({},e[i][1].end),end:Object.assign({},e[t][1].start)},a={type:1<a?"strong":"emphasis",start:Object.assign({},u.start),end:Object.assign({},s.end)},e[i][1].end=Object.assign({},u.start),e[t][1].start=Object.assign({},s.end),o=[],e[i][1].end.offset-e[i][1].start.offset&&(o=push(o,[["enter",e[i][1],n],["exit",e[i][1],n]])),o=push(o,[["enter",a,n],["enter",u,n],["exit",u,n],["enter",r,n]]),o=push(o,resolveAll(n.parser.constructs.insideSpan.null,e.slice(i+1,t),n)),o=push(o,[["exit",r,n],["enter",s,n],["exit",s,n],["exit",a,n]]),e[t][1].end.offset-e[t][1].start.offset?(c=2,o=push(o,[["enter",e[t][1],n],["exit",e[t][1],n]])):c=0,splice(e,i-1,t-i+3,o),t=i+o.length-c-2;break}for(t=-1;++t<e.length;)"attentionSequence"===e[t][1].type&&(e[t][1].type="data");return e}function tokenizeAttention(o,c){const a=this.parser.constructs.attentionMarkers.null,u=this.previous,s=classifyCharacter(u);let l;return function(e){return o.enter("attentionSequence"),d(l=e)};function d(e){if(e===l)return o.consume(e),d;const n=o.exit("attentionSequence");var t=classifyCharacter(e),i=!t||2===t&&s||a.includes(e),r=!s||2===s&&t||a.includes(u);return n._open=Boolean(42===l?i:i&&(s||!r)),n._close=Boolean(42===l?r:r&&(t||!i)),c(e)}}function movePoint(e,n){e.column+=n,e.offset+=n,e._bufferIndex+=n}const autolink={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(n,t,i){let r=1;return function(e){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(e),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),o};function o(e){return asciiAlpha(e)?(n.consume(e),c):(asciiAtext(e)?s:i)(e)}function c(e){return(43===e||45===e||46===e||asciiAlphanumeric(e)?a:s)(e)}function a(e){return 58===e?(n.consume(e),u):(43===e||45===e||46===e||asciiAlphanumeric(e))&&r++<32?(n.consume(e),a):s(e)}function u(e){return 62===e?(n.exit("autolinkProtocol"),p(e)):null===e||32===e||60===e||asciiControl(e)?i(e):(n.consume(e),u)}function s(e){return 64===e?(n.consume(e),r=0,l):asciiAtext(e)?(n.consume(e),s):i(e)}function l(e){return(asciiAlphanumeric(e)?d:i)(e)}function d(e){return 46===e?(n.consume(e),r=0,l):62===e?(n.exit("autolinkProtocol").type="autolinkEmail",p(e)):f(e)}function f(e){return(45===e||asciiAlphanumeric(e))&&r++<63?(n.consume(e),45===e?f:d):i(e)}function p(e){return n.enter("autolinkMarker"),n.consume(e),n.exit("autolinkMarker"),n.exit("autolink"),t}}const blankLine={tokenize:tokenizeBlankLine,partial:!0};function tokenizeBlankLine(e,n,t){return factorySpace(e,function(e){return(null===e||markdownLineEnding(e)?n:t)(e)},"linePrefix")}const blockQuote={name:"blockQuote",tokenize:tokenizeBlockQuoteStart,continuation:{tokenize:tokenizeBlockQuoteContinuation},exit:exit};function tokenizeBlockQuoteStart(t,n,i){const r=this;return function(e){if(62!==e)return i(e);{const n=r.containerState;return n.open||(t.enter("blockQuote",{_container:!0}),n.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(e),t.exit("blockQuoteMarker"),o}};function o(e){return markdownSpace(e)?(t.enter("blockQuotePrefixWhitespace"),t.consume(e),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),n):(t.exit("blockQuotePrefix"),n(e))}}function tokenizeBlockQuoteContinuation(e,n,t){return factorySpace(e,e.attempt(blockQuote,n,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function exit(e){e.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(n,t,i){return function(e){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(e),n.exit("escapeMarker"),r};function r(e){return asciiPunctuation(e)?(n.enter("characterEscapeValue"),n.consume(e),n.exit("characterEscapeValue"),n.exit("characterEscape"),t):i(e)}}const element=document.createElement("i");function decodeNamedCharacterReference(e){var n="&"+e+";";element.innerHTML=n;const t=element.textContent;return(59!==t.charCodeAt(t.length-1)||"semi"===e)&&(t!==n&&t)}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(t,i,r){const o=this;let c=0,a,u;return function(e){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(e),t.exit("characterReferenceMarker"),n};function n(e){return 35===e?(t.enter("characterReferenceMarkerNumeric"),t.consume(e),t.exit("characterReferenceMarkerNumeric"),s):(t.enter("characterReferenceValue"),a=31,u=asciiAlphanumeric,l(e))}function s(e){return 88===e||120===e?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(e),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,u=asciiHexDigit,l):(t.enter("characterReferenceValue"),a=7,u=asciiDigit,l(e))}function l(e){var n;return 59===e&&c?(n=t.exit("characterReferenceValue"),u!==asciiAlphanumeric||decodeNamedCharacterReference(o.sliceSerialize(n))?(t.enter("characterReferenceMarker"),t.consume(e),t.exit("characterReferenceMarker"),t.exit("characterReference"),i):r(e)):u(e)&&c++<a?(t.consume(e),l):r(e)}}const codeFenced={name:"codeFenced",tokenize:tokenizeCodeFenced,concrete:!0};function tokenizeCodeFenced(n,t,i){const r=this,o={tokenize:function(n,t,i){let r=0;return factorySpace(n,function(e){return n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),o(e)},"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function o(e){return e===s?(n.consume(e),r++,o):r<u?i(e):(n.exit("codeFencedFenceSequence"),factorySpace(n,c,"whitespace")(e))}function c(e){return null===e||markdownLineEnding(e)?(n.exit("codeFencedFence"),t(e)):i(e)}},partial:!0},c={tokenize:function(n,t,i){const r=this;return function(e){return n.enter("lineEnding"),n.consume(e),n.exit("lineEnding"),o};function o(e){return(r.parser.lazy[r.now().line]?i:t)(e)}},partial:!0},e=this.events[this.events.length-1],a=e&&"linePrefix"===e[1].type?e[2].sliceSerialize(e[1],!0).length:0;let u=0,s;return function(e){return n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),l(s=e)};function l(e){return e===s?(n.consume(e),u++,l):(n.exit("codeFencedFenceSequence"),(u<3?i:factorySpace(n,d,"whitespace"))(e))}function d(e){return null===e||markdownLineEnding(e)?m(e):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),f(e))}function f(e){return null===e||markdownLineEndingOrSpace(e)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),factorySpace(n,p,"whitespace")(e)):96===e&&e===s?i(e):(n.consume(e),f)}function p(e){return null===e||markdownLineEnding(e)?m(e):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),h(e))}function h(e){return null===e||markdownLineEnding(e)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),m(e)):96===e&&e===s?i(e):(n.consume(e),h)}function m(e){return n.exit("codeFencedFence"),(r.interrupt?t:k)(e)}function k(e){return null===e?x(e):markdownLineEnding(e)?n.attempt(c,n.attempt(o,x,a?factorySpace(n,k,"linePrefix",a+1):k),x)(e):(n.enter("codeFlowValue"),g(e))}function g(e){return null===e||markdownLineEnding(e)?(n.exit("codeFlowValue"),k(e)):(n.consume(e),g)}function x(e){return n.exit("codeFenced"),t(e)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},indentedContent={tokenize:tokenizeIndentedContent,partial:!0};function tokenizeCodeIndented(n,t,i){const r=this;return function(e){return n.enter("codeIndented"),factorySpace(n,o,"linePrefix",5)(e)};function o(e){const n=r.events[r.events.length-1];return(n&&"linePrefix"===n[1].type&&4<=n[2].sliceSerialize(n[1],!0).length?c:i)(e)}function c(e){return null===e?u(e):markdownLineEnding(e)?n.attempt(indentedContent,c,u)(e):(n.enter("codeFlowValue"),a(e))}function a(e){return null===e||markdownLineEnding(e)?(n.exit("codeFlowValue"),c(e)):(n.consume(e),a)}function u(e){return n.exit("codeIndented"),t(e)}}function tokenizeIndentedContent(n,t,i){const r=this;return o;function o(e){return r.parser.lazy[r.now().line]?i(e):markdownLineEnding(e)?(n.enter("lineEnding"),n.consume(e),n.exit("lineEnding"),o):factorySpace(n,c,"linePrefix",5)(e)}function c(e){const n=r.events[r.events.length-1];return(n&&"linePrefix"===n[1].type&&4<=n[2].sliceSerialize(n[1],!0).length?t:markdownLineEnding(e)?o:i)(e)}}const codeText={name:"codeText",tokenize:tokenizeCodeText,resolve:resolveCodeText,previous:previous};function resolveCodeText(e){let n=e.length-4,t=3,i,r;if(!("lineEnding"!==e[t][1].type&&"space"!==e[t][1].type||"lineEnding"!==e[n][1].type&&"space"!==e[n][1].type))for(i=t;++i<n;)if("codeTextData"===e[i][1].type){e[t][1].type="codeTextPadding",e[n][1].type="codeTextPadding",t+=2,n-=2;break}for(i=t-1,n++;++i<=n;)void 0===r?i!==n&&"lineEnding"!==e[i][1].type&&(r=i):i!==n&&"lineEnding"!==e[i][1].type||(e[r][1].type="codeTextData",i!==r+2&&(e[r][1].end=e[i-1][1].end,e.splice(r+2,i-r-2),n-=i-r-2,i=r+2),r=void 0);return e}function previous(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}function tokenizeCodeText(n,t,i){let r=0,o,c;return function(e){return n.enter("codeText"),n.enter("codeTextSequence"),a(e)};function a(e){return 96===e?(n.consume(e),r++,a):(n.exit("codeTextSequence"),u(e))}function u(e){return null===e?i(e):96===e?(c=n.enter("codeTextSequence"),o=0,l(e)):32===e?(n.enter("space"),n.consume(e),n.exit("space"),u):markdownLineEnding(e)?(n.enter("lineEnding"),n.consume(e),n.exit("lineEnding"),u):(n.enter("codeTextData"),s(e))}function s(e){return null===e||32===e||96===e||markdownLineEnding(e)?(n.exit("codeTextData"),u(e)):(n.consume(e),s)}function l(e){return 96===e?(n.consume(e),o++,l):o===r?(n.exit("codeTextSequence"),n.exit("codeText"),t(e)):(c.type="codeTextData",s(e))}}function subtokenize(e){var n={};let t=-1,i,r,o,c,a,u,s;for(;++t<e.length;){for(;t in n;)t=n[t];if(i=e[t],t&&"chunkFlow"===i[1].type&&"listItemPrefix"===e[t-1][1].type&&(u=i[1]._tokenizer.events,(o=0)<u.length&&"lineEndingBlank"===u[o][1].type&&(o+=2),o<u.length&&"content"===u[o][1].type))for(;++o<u.length&&"content"!==u[o][1].type;)"chunkText"===u[o][1].type&&(u[o][1]._isInFirstContentOfListItem=!0,o++);if("enter"===i[0])i[1].contentType&&(Object.assign(n,subcontent(e,t)),t=n[t],s=!0);else if(i[1]._container){for(o=t,r=void 0;o--&&("lineEnding"===(c=e[o])[1].type||"lineEndingBlank"===c[1].type);)"enter"===c[0]&&(r&&(e[r][1].type="lineEndingBlank"),c[1].type="lineEnding",r=o);r&&(i[1].end=Object.assign({},e[r][1].start),(a=e.slice(r,t)).unshift(i),splice(e,r,t-r+1,a))}}return!s}function subcontent(e,n){var t=e[n][1];const i=e[n][2];let r=n-1;const o=[],c=t._tokenizer||i.parser[t.contentType](t.start),a=c.events,u=[],s={};let l,d,f=-1,p=t,h=0;var m;const k=[0];for(;p;){for(;e[++r][1]!==p;);o.push(r),p._tokenizer||(l=i.sliceStream(p),p.next||l.push(null),d&&c.defineSkip(p.start),p._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=!0),c.write(l),p._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=void 0)),p=(d=p).next}for(p=t;++f<a.length;)"exit"===a[f][0]&&"enter"===a[f-1][0]&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,k.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(c.events=[],p?(p._tokenizer=void 0,p.previous=void 0):k.pop(),f=k.length;f--;){var g=a.slice(k[f],k[f+1]),x=o.pop();u.unshift([x,x+g.length-1]),splice(e,x,2,g)}for(f=-1;++f<u.length;)s[h+u[f][0]]=h+u[f][1],h+=u[f][1]-u[f][0]-1;return s}const content={tokenize:tokenizeContent,resolve:resolveContent},continuationConstruct={tokenize:tokenizeContinuation,partial:!0};function resolveContent(e){return subtokenize(e),e}function tokenizeContent(n,t){let i;return function(e){return n.enter("content"),i=n.enter("chunkContent",{contentType:"content"}),r(e)};function r(e){return null===e?o(e):markdownLineEnding(e)?n.check(continuationConstruct,c,o)(e):(n.consume(e),r)}function o(e){return n.exit("chunkContent"),n.exit("content"),t(e)}function c(e){return n.consume(e),n.exit("chunkContent"),i.next=n.enter("chunkContent",{contentType:"content",previous:i}),i=i.next,r}}function tokenizeContinuation(t,i,r){const o=this;return function(e){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),factorySpace(t,n,"linePrefix")};function n(e){if(null===e||markdownLineEnding(e))return r(e);const n=o.events[o.events.length-1];return(!o.parser.constructs.disable.null.includes("codeIndented")&&n&&"linePrefix"===n[1].type&&4<=n[2].sliceSerialize(n[1],!0).length?i:t.interrupt(o.parser.constructs.flow,r,i))(e)}}function factoryDestination(n,t,i,r,o,c,a,u,e){const s=e||Number.POSITIVE_INFINITY;let l=0;return function(e){if(60===e)return n.enter(r),n.enter(o),n.enter(c),n.consume(e),n.exit(c),d;if(null===e||41===e||asciiControl(e))return i(e);return n.enter(r),n.enter(a),n.enter(u),n.enter("chunkString",{contentType:"string"}),h(e)};function d(e){return 62===e?(n.enter(c),n.consume(e),n.exit(c),n.exit(o),n.exit(r),t):(n.enter(u),n.enter("chunkString",{contentType:"string"}),f(e))}function f(e){return 62===e?(n.exit("chunkString"),n.exit(u),d(e)):null===e||60===e||markdownLineEnding(e)?i(e):(n.consume(e),92===e?p:f)}function p(e){return 60===e||62===e||92===e?(n.consume(e),f):f(e)}function h(e){return 40===e?++l>s?i(e):(n.consume(e),h):41===e?l--?(n.consume(e),h):(n.exit("chunkString"),n.exit(u),n.exit(a),n.exit(r),t(e)):null===e||markdownLineEndingOrSpace(e)?l?i(e):(n.exit("chunkString"),n.exit(u),n.exit(a),n.exit(r),t(e)):asciiControl(e)?i(e):(n.consume(e),92===e?m:h)}function m(e){return 40===e||41===e||92===e?(n.consume(e),h):h(e)}}function factoryLabel(n,t,i,r,o,c){const a=this;let u=0,s;return function(e){return n.enter(r),n.enter(o),n.consume(e),n.exit(o),n.enter(c),l};function l(e){return null===e||91===e||93===e&&!s||94===e&&!u&&"_hiddenFootnoteSupport"in a.parser.constructs||999<u?i(e):93===e?(n.exit(c),n.enter(o),n.consume(e),n.exit(o),n.exit(r),t):markdownLineEnding(e)?(n.enter("lineEnding"),n.consume(e),n.exit("lineEnding"),l):(n.enter("chunkString",{contentType:"string"}),d(e))}function d(e){return null===e||91===e||93===e||markdownLineEnding(e)||999<u++?(n.exit("chunkString"),l(e)):(n.consume(e),s=s||!markdownSpace(e),92===e?f:d)}function f(e){return 91===e||92===e||93===e?(n.consume(e),u++,d):d(e)}}function factoryTitle(n,t,i,r,o,c){let a;return function(e){return n.enter(r),n.enter(o),n.consume(e),n.exit(o),a=40===e?41:e,u};function u(e){return e===a?(n.enter(o),n.consume(e),n.exit(o),n.exit(r),t):(n.enter(c),s(e))}function s(e){return e===a?(n.exit(c),u(a)):null===e?i(e):markdownLineEnding(e)?(n.enter("lineEnding"),n.consume(e),n.exit("lineEnding"),factorySpace(n,s,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),l(e))}function l(e){return e===a||null===e||markdownLineEnding(e)?(n.exit("chunkString"),s(e)):(n.consume(e),92===e?d:l)}function d(e){return e===a||92===e?(n.consume(e),l):l(e)}}function factoryWhitespace(t,i){let r;return function e(n){if(markdownLineEnding(n))return t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),r=!0,e;if(markdownSpace(n))return factorySpace(t,e,r?"linePrefix":"lineSuffix")(n);return i(n)}}function normalizeIdentifier(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const definition={name:"definition",tokenize:tokenizeDefinition},titleConstruct={tokenize:tokenizeTitle,partial:!0};function tokenizeDefinition(n,t,i){const r=this;let o;return function(e){return n.enter("definition"),factoryLabel.call(r,n,c,i,"definitionLabel","definitionLabelMarker","definitionLabelString")(e)};function c(e){return o=normalizeIdentifier(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===e?(n.enter("definitionMarker"),n.consume(e),n.exit("definitionMarker"),factoryWhitespace(n,factoryDestination(n,n.attempt(titleConstruct,factorySpace(n,a,"whitespace"),factorySpace(n,a,"whitespace")),i,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):i(e)}function a(e){return null===e||markdownLineEnding(e)?(n.exit("definition"),r.parser.defined.includes(o)||r.parser.defined.push(o),t(e)):i(e)}}function tokenizeTitle(n,t,i){return function(e){return(markdownLineEndingOrSpace(e)?factoryWhitespace(n,r):i)(e)};function r(e){return(34===e||39===e||40===e?factoryTitle(n,factorySpace(n,o,"whitespace"),i,"definitionTitle","definitionTitleMarker","definitionTitleString"):i)(e)}function o(e){return(null===e||markdownLineEnding(e)?t:i)(e)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(n,t,i){return function(e){return n.enter("hardBreakEscape"),n.enter("escapeMarker"),n.consume(e),r};function r(e){return markdownLineEnding(e)?(n.exit("escapeMarker"),n.exit("hardBreakEscape"),t(e)):i(e)}}const headingAtx={name:"headingAtx",tokenize:tokenizeHeadingAtx,resolve:resolveHeadingAtx};function resolveHeadingAtx(e,n){let t=e.length-2,i=3;var r,o;return"whitespace"===e[i][1].type&&(i+=2),t-2>i&&"whitespace"===e[t][1].type&&(t-=2),"atxHeadingSequence"===e[t][1].type&&(i===t-1||t-4>i&&"whitespace"===e[t-2][1].type)&&(t-=i+1===t?2:4),t>i&&(r={type:"atxHeadingText",start:e[i][1].start,end:e[t][1].end},o={type:"chunkText",start:e[i][1].start,end:e[t][1].end,contentType:"text"},splice(e,i,t-i+1,[["enter",r,n],["enter",o,n],["exit",o,n],["exit",r,n]])),e}function tokenizeHeadingAtx(n,t,i){const r=this;let o=0;return function(e){return n.enter("atxHeading"),n.enter("atxHeadingSequence"),c(e)};function c(e){return 35===e&&o++<6?(n.consume(e),c):null===e||markdownLineEndingOrSpace(e)?(n.exit("atxHeadingSequence"),(r.interrupt?t:a)(e)):i(e)}function a(e){return 35===e?(n.enter("atxHeadingSequence"),u(e)):null===e||markdownLineEnding(e)?(n.exit("atxHeading"),t(e)):markdownSpace(e)?factorySpace(n,a,"whitespace")(e):(n.enter("atxHeadingText"),s(e))}function u(e){return 35===e?(n.consume(e),u):(n.exit("atxHeadingSequence"),a(e))}function s(e){return null===e||35===e||markdownLineEndingOrSpace(e)?(n.exit("atxHeadingText"),a(e)):(n.consume(e),s)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={name:"htmlFlow",tokenize:tokenizeHtmlFlow,resolveTo:resolveToHtmlFlow,concrete:!0},nextBlankConstruct={tokenize:tokenizeNextBlank,partial:!0};function resolveToHtmlFlow(e){let n=e.length;for(;n--&&("enter"!==e[n][0]||"htmlFlow"!==e[n][1].type););return 1<n&&"linePrefix"===e[n-2][1].type&&(e[n][1].start=e[n-2][1].start,e[n+1][1].start=e[n-2][1].start,e.splice(n-2,2)),e}function tokenizeHtmlFlow(n,t,i){const o=this;let r,c,a,u,s;return function(e){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(e),l};function l(e){return 33===e?(n.consume(e),d):47===e?(n.consume(e),h):63===e?(n.consume(e),r=3,o.interrupt?t:O):asciiAlpha(e)?(n.consume(e),a=String.fromCharCode(e),c=!0,m):i(e)}function d(e){return 45===e?(n.consume(e),r=2,f):91===e?(n.consume(e),r=5,a="CDATA[",u=0,p):asciiAlpha(e)?(n.consume(e),r=4,o.interrupt?t:O):i(e)}function f(e){return 45===e?(n.consume(e),o.interrupt?t:O):i(e)}function p(e){return e===a.charCodeAt(u++)?(n.consume(e),u===a.length?o.interrupt?t:z:p):i(e)}function h(e){return asciiAlpha(e)?(n.consume(e),a=String.fromCharCode(e),m):i(e)}function m(e){return null===e||47===e||62===e||markdownLineEndingOrSpace(e)?47!==e&&c&&htmlRawNames.includes(a.toLowerCase())?(r=1,(o.interrupt?t:z)(e)):htmlBlockNames.includes(a.toLowerCase())?(r=6,47===e?(n.consume(e),k):(o.interrupt?t:z)(e)):(r=7,(o.interrupt&&!o.parser.lazy[o.now().line]?i:c?x:g)(e)):45===e||asciiAlphanumeric(e)?(n.consume(e),a+=String.fromCharCode(e),m):i(e)}function k(e){return 62===e?(n.consume(e),o.interrupt?t:z):i(e)}function g(e){return markdownSpace(e)?(n.consume(e),g):w(e)}function x(e){return 47===e?(n.consume(e),w):58===e||95===e||asciiAlpha(e)?(n.consume(e),y):markdownSpace(e)?(n.consume(e),x):w(e)}function y(e){return 45===e||46===e||58===e||95===e||asciiAlphanumeric(e)?(n.consume(e),y):S(e)}function S(e){return 61===e?(n.consume(e),v):markdownSpace(e)?(n.consume(e),S):x(e)}function v(e){return null===e||60===e||61===e||62===e||96===e?i(e):34===e||39===e?(n.consume(e),s=e,E):markdownSpace(e)?(n.consume(e),v):(s=null,F(e))}function E(e){return null===e||markdownLineEnding(e)?i(e):e===s?(n.consume(e),b):(n.consume(e),E)}function F(e){return null===e||34===e||39===e||60===e||61===e||62===e||96===e||markdownLineEndingOrSpace(e)?S(e):(n.consume(e),F)}function b(e){return(47===e||62===e||markdownSpace(e)?x:i)(e)}function w(e){return 62===e?(n.consume(e),C):i(e)}function C(e){return markdownSpace(e)?(n.consume(e),C):(null===e||markdownLineEnding(e)?z:i)(e)}function z(e){return 45===e&&2===r?(n.consume(e),I):60===e&&1===r?(n.consume(e),B):62===e&&4===r?(n.consume(e),P):63===e&&3===r?(n.consume(e),O):93===e&&5===r?(n.consume(e),_):!markdownLineEnding(e)||6!==r&&7!==r?null===e||markdownLineEnding(e)?A(e):(n.consume(e),z):n.check(nextBlankConstruct,P,A)(e)}function A(e){return n.exit("htmlFlowData"),L(e)}function L(e){return null===e?R(e):markdownLineEnding(e)?n.attempt({tokenize:T,partial:!0},L,R)(e):(n.enter("htmlFlowData"),z(e))}function T(n,t,i){return function(e){return n.enter("lineEnding"),n.consume(e),n.exit("lineEnding"),r};function r(e){return(o.parser.lazy[o.now().line]?i:t)(e)}}function I(e){return 45===e?(n.consume(e),O):z(e)}function B(e){return 47===e?(n.consume(e),a="",D):z(e)}function D(e){return 62===e&&htmlRawNames.includes(a.toLowerCase())?(n.consume(e),P):asciiAlpha(e)&&a.length<8?(n.consume(e),a+=String.fromCharCode(e),D):z(e)}function _(e){return 93===e?(n.consume(e),O):z(e)}function O(e){return 62===e?(n.consume(e),P):45===e&&2===r?(n.consume(e),O):z(e)}function P(e){return null===e||markdownLineEnding(e)?(n.exit("htmlFlowData"),R(e)):(n.consume(e),P)}function R(e){return n.exit("htmlFlow"),t(e)}}function tokenizeNextBlank(n,t,i){return function(e){return n.exit("htmlFlowData"),n.enter("lineEndingBlank"),n.consume(e),n.exit("lineEndingBlank"),n.attempt(blankLine,t,i)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(n,t,i){const r=this;let o,c,a,u;return function(e){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(e),s};function s(e){return 33===e?(n.consume(e),l):47===e?(n.consume(e),F):63===e?(n.consume(e),v):asciiAlpha(e)?(n.consume(e),C):i(e)}function l(e){return 45===e?(n.consume(e),d):91===e?(n.consume(e),c="CDATA[",a=0,k):asciiAlpha(e)?(n.consume(e),S):i(e)}function d(e){return 45===e?(n.consume(e),f):i(e)}function f(e){return null===e||62===e?i(e):45===e?(n.consume(e),p):h(e)}function p(e){return(null===e||62===e?i:h)(e)}function h(e){return null===e?i(e):45===e?(n.consume(e),m):markdownLineEnding(e)?(u=h,O(e)):(n.consume(e),h)}function m(e){return 45===e?(n.consume(e),R):h(e)}function k(e){return e===c.charCodeAt(a++)?(n.consume(e),a===c.length?g:k):i(e)}function g(e){return null===e?i(e):93===e?(n.consume(e),x):markdownLineEnding(e)?(u=g,O(e)):(n.consume(e),g)}function x(e){return 93===e?(n.consume(e),y):g(e)}function y(e){return 62===e?R(e):93===e?(n.consume(e),y):g(e)}function S(e){return null===e||62===e?R(e):markdownLineEnding(e)?(u=S,O(e)):(n.consume(e),S)}function v(e){return null===e?i(e):63===e?(n.consume(e),E):markdownLineEnding(e)?(u=v,O(e)):(n.consume(e),v)}function E(e){return(62===e?R:v)(e)}function F(e){return asciiAlpha(e)?(n.consume(e),b):i(e)}function b(e){return 45===e||asciiAlphanumeric(e)?(n.consume(e),b):w(e)}function w(e){return markdownLineEnding(e)?(u=w,O(e)):markdownSpace(e)?(n.consume(e),w):R(e)}function C(e){return 45===e||asciiAlphanumeric(e)?(n.consume(e),C):(47===e||62===e||markdownLineEndingOrSpace(e)?z:i)(e)}function z(e){return 47===e?(n.consume(e),R):58===e||95===e||asciiAlpha(e)?(n.consume(e),A):markdownLineEnding(e)?(u=z,O(e)):markdownSpace(e)?(n.consume(e),z):R(e)}function A(e){return 45===e||46===e||58===e||95===e||asciiAlphanumeric(e)?(n.consume(e),A):L(e)}function L(e){return 61===e?(n.consume(e),T):markdownLineEnding(e)?(u=L,O(e)):markdownSpace(e)?(n.consume(e),L):z(e)}function T(e){return null===e||60===e||61===e||62===e||96===e?i(e):34===e||39===e?(n.consume(e),o=e,I):markdownLineEnding(e)?(u=T,O(e)):markdownSpace(e)?(n.consume(e),T):(n.consume(e),o=void 0,D)}function I(e){return e===o?(n.consume(e),B):null===e?i(e):markdownLineEnding(e)?(u=I,O(e)):(n.consume(e),I)}function B(e){return(62===e||47===e||markdownLineEndingOrSpace(e)?z:i)(e)}function D(e){return null===e||34===e||39===e||60===e||61===e||96===e?i(e):62===e||markdownLineEndingOrSpace(e)?z(e):(n.consume(e),D)}function O(e){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(e),n.exit("lineEnding"),factorySpace(n,P,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function P(e){return n.enter("htmlTextData"),u(e)}function R(e){return 62===e?(n.consume(e),n.exit("htmlTextData"),n.exit("htmlText"),t):i(e)}}const labelEnd={name:"labelEnd",tokenize:tokenizeLabelEnd,resolveTo:resolveToLabelEnd,resolveAll:resolveAllLabelEnd},resourceConstruct={tokenize:tokenizeResource},fullReferenceConstruct={tokenize:tokenizeFullReference},collapsedReferenceConstruct={tokenize:tokenizeCollapsedReference};function resolveAllLabelEnd(e){let n=-1,t;for(;++n<e.length;)"labelImage"!==(t=e[n][1]).type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e}function resolveToLabelEnd(e,n){let t=e.length,i=0,r,o,c;for(;t--;)if(r=e[t][1],o){if("link"===r.type||"labelLink"===r.type&&r._inactive)break;"enter"===e[t][0]&&"labelLink"===r.type&&(r._inactive=!0)}else if(c){if("enter"===e[t][0]&&("labelImage"===r.type||"labelLink"===r.type)&&!r._balanced&&(o=t,"labelLink"!==r.type)){i=2;break}}else"labelEnd"===r.type&&(c=t);var a,u={type:"labelLink"===e[o][1].type?"link":"image",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"label",start:Object.assign({},e[o][1].start),end:Object.assign({},e[c][1].end)},l={type:"labelText",start:Object.assign({},e[o+i+2][1].end),end:Object.assign({},e[c-2][1].start)};return a=push([["enter",u,n],["enter",s,n]],e.slice(o+1,o+i+3)),a=push(a,[["enter",l,n]]),a=push(a,resolveAll(n.parser.constructs.insideSpan.null,e.slice(o+i+4,c-3),n)),a=push(a,[["exit",l,n],e[c-2],e[c-1],["exit",s,n]]),a=push(a,e.slice(c+1)),a=push(a,[["exit",u,n]]),splice(e,o,e.length,a),e}function tokenizeLabelEnd(n,t,i){const r=this;let e=r.events.length,o,c;for(;e--;)if(("labelImage"===r.events[e][1].type||"labelLink"===r.events[e][1].type)&&!r.events[e][1]._balanced){o=r.events[e][1];break}return function(e){return o?o._inactive?u(e):(c=r.parser.defined.includes(normalizeIdentifier(r.sliceSerialize({start:o.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(e),n.exit("labelMarker"),n.exit("labelEnd"),a):i(e)};function a(e){return(40===e?n.attempt(resourceConstruct,t,c?t:u):91===e?n.attempt(fullReferenceConstruct,t,c?n.attempt(collapsedReferenceConstruct,t,u):u):c?t:u)(e)}function u(e){return o._balanced=!0,i(e)}}function tokenizeResource(n,t,i){return function(e){return n.enter("resource"),n.enter("resourceMarker"),n.consume(e),n.exit("resourceMarker"),factoryWhitespace(n,r)};function r(e){return(41===e?a:factoryDestination(n,o,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32))(e)}function o(e){return(markdownLineEndingOrSpace(e)?factoryWhitespace(n,c):a)(e)}function c(e){return(34===e||39===e||40===e?factoryTitle(n,factoryWhitespace(n,a),i,"resourceTitle","resourceTitleMarker","resourceTitleString"):a)(e)}function a(e){return 41===e?(n.enter("resourceMarker"),n.consume(e),n.exit("resourceMarker"),n.exit("resource"),t):i(e)}}function tokenizeFullReference(n,t,i){const r=this;return function(e){return factoryLabel.call(r,n,o,i,"reference","referenceMarker","referenceString")(e)};function o(e){return(r.parser.defined.includes(normalizeIdentifier(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t:i)(e)}}function tokenizeCollapsedReference(n,t,i){return function(e){return n.enter("reference"),n.enter("referenceMarker"),n.consume(e),n.exit("referenceMarker"),r};function r(e){return 93===e?(n.enter("referenceMarker"),n.consume(e),n.exit("referenceMarker"),n.exit("reference"),t):i(e)}}const labelStartImage={name:"labelStartImage",tokenize:tokenizeLabelStartImage,resolveAll:labelEnd.resolveAll};function tokenizeLabelStartImage(n,t,i){const r=this;return function(e){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(e),n.exit("labelImageMarker"),o};function o(e){return 91===e?(n.enter("labelMarker"),n.consume(e),n.exit("labelMarker"),n.exit("labelImage"),c):i(e)}function c(e){return(94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?i:t)(e)}}const labelStartLink={name:"labelStartLink",tokenize:tokenizeLabelStartLink,resolveAll:labelEnd.resolveAll};function tokenizeLabelStartLink(n,t,i){const r=this;return function(e){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(e),n.exit("labelMarker"),n.exit("labelLink"),o};function o(e){return(94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?i:t)(e)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(n,t){return function(e){return n.enter("lineEnding"),n.consume(e),n.exit("lineEnding"),factorySpace(n,t,"linePrefix")}}const thematicBreak={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(n,t,i){let r=0,o;return function(e){return n.enter("thematicBreak"),c(o=e)};function c(e){return e===o?(n.enter("thematicBreakSequence"),a(e)):markdownSpace(e)?factorySpace(n,c,"whitespace")(e):r<3||null!==e&&!markdownLineEnding(e)?i(e):(n.exit("thematicBreak"),t(e))}function a(e){return e===o?(n.consume(e),r++,a):(n.exit("thematicBreakSequence"),c(e))}}const list={name:"list",tokenize:tokenizeListStart,continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd},listItemPrefixWhitespaceConstruct={tokenize:tokenizeListItemPrefixWhitespace,partial:!0},indentConstruct={tokenize:tokenizeIndent,partial:!0};function tokenizeListStart(t,n,i){const r=this,e=r.events[r.events.length-1];let o=e&&"linePrefix"===e[1].type?e[2].sliceSerialize(e[1],!0).length:0,c=0;return function(e){var n=r.containerState.type||(42===e||43===e||45===e?"listUnordered":"listOrdered");if("listUnordered"===n?!r.containerState.marker||e===r.containerState.marker:asciiDigit(e)){if(r.containerState.type||(r.containerState.type=n,t.enter(n,{_container:!0})),"listUnordered"===n)return t.enter("listItemPrefix"),(42===e||45===e?t.check(thematicBreak,i,u):u)(e);if(!r.interrupt||49===e)return t.enter("listItemPrefix"),t.enter("listItemValue"),a(e)}return i(e)};function a(e){return asciiDigit(e)&&++c<10?(t.consume(e),a):(!r.interrupt||c<2)&&(r.containerState.marker?e===r.containerState.marker:41===e||46===e)?(t.exit("listItemValue"),u(e)):i(e)}function u(e){return t.enter("listItemMarker"),t.consume(e),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||e,t.check(blankLine,r.interrupt?i:s,t.attempt(listItemPrefixWhitespaceConstruct,d,l))}function s(e){return r.containerState.initialBlankLine=!0,o++,d(e)}function l(e){return markdownSpace(e)?(t.enter("listItemPrefixWhitespace"),t.consume(e),t.exit("listItemPrefixWhitespace"),d):i(e)}function d(e){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,n(e)}}function tokenizeListContinuation(n,t,i){const r=this;return r.containerState._closeFlow=void 0,n.check(blankLine,function(e){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,factorySpace(n,t,"listItemIndent",r.containerState.size+1)(e)},function(e){return!r.containerState.furtherBlankLines&&markdownSpace(e)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(indentConstruct,t,o)(e)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(e))});function o(e){return r.containerState._closeFlow=!0,r.interrupt=void 0,factorySpace(n,n.attempt(list,t,i),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(e)}}function tokenizeIndent(e,t,i){const r=this;return factorySpace(e,function(e){const n=r.events[r.events.length-1];return(n&&"listItemIndent"===n[1].type&&n[2].sliceSerialize(n[1],!0).length===r.containerState.size?t:i)(e)},"listItemIndent",r.containerState.size+1)}function tokenizeListEnd(e){e.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(e,t,i){const r=this;return factorySpace(e,function(e){var n=r.events[r.events.length-1];return(!markdownSpace(e)&&n&&"listItemPrefixWhitespace"===n[1].type?t:i)(e)},"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}const setextUnderline={name:"setextUnderline",tokenize:tokenizeSetextUnderline,resolveTo:resolveToSetextUnderline};function resolveToSetextUnderline(e,n){let t=e.length,i,r,o;for(;t--;)if("enter"===e[t][0]){if("content"===e[t][1].type){i=t;break}"paragraph"===e[t][1].type&&(r=t)}else"content"===e[t][1].type&&e.splice(t,1),o||"definition"!==e[t][1].type||(o=t);var c={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[r][1].type="setextHeadingText",o?(e.splice(r,0,["enter",c,n]),e.splice(o+1,0,["exit",e[i][1],n]),e[i][1].end=Object.assign({},e[o][1].end)):e[i][1]=c,e.push(["exit",c,n]),e}function tokenizeSetextUnderline(n,t,i){const r=this;let e=r.events.length,o,c;for(;e--;)if("lineEnding"!==r.events[e][1].type&&"linePrefix"!==r.events[e][1].type&&"content"!==r.events[e][1].type){c="paragraph"===r.events[e][1].type;break}return function(e){return r.parser.lazy[r.now().line]||!r.interrupt&&!c?i(e):(n.enter("setextHeadingLine"),n.enter("setextHeadingLineSequence"),a(o=e))};function a(e){return e===o?(n.consume(e),a):(n.exit("setextHeadingLineSequence"),factorySpace(n,u,"lineSuffix")(e))}function u(e){return null===e||markdownLineEnding(e)?(n.exit("setextHeadingLine"),t(e)):i(e)}}const flow$1={tokenize:initializeFlow};function initializeFlow(n){const t=this,i=n.attempt(blankLine,function(e){if(null!==e)return n.enter("lineEndingBlank"),n.consume(e),n.exit("lineEndingBlank"),t.currentConstruct=void 0,i;n.consume(e)},n.attempt(this.parser.constructs.flowInitial,e,factorySpace(n,n.attempt(this.parser.constructs.flow,e,n.attempt(content,e)),"linePrefix")));return i;function e(e){if(null!==e)return n.enter("lineEnding"),n.consume(e),n.exit("lineEnding"),t.currentConstruct=void 0,i;n.consume(e)}}const resolver={resolveAll:createResolver()},string$1=initializeFactory("string"),text$1=initializeFactory("text");function initializeFactory(u){return{tokenize:function(n){const r=this,o=this.parser.constructs[u],t=n.attempt(o,e,i);return e;function e(e){return(a(e)?t:i)(e)}function i(e){if(null!==e)return n.enter("data"),n.consume(e),c;n.consume(e)}function c(e){return a(e)?(n.exit("data"),t(e)):(n.consume(e),c)}function a(e){if(null===e)return 1;var n=o[e];let t=-1;if(n)for(;++t<n.length;){const i=n[t];if(!i.previous||i.previous.call(r,r.previous))return 1}}},resolveAll:createResolver("text"===u?resolveAllLineSuffixes:void 0)}}function createResolver(r){return function(e,n){let t=-1,i;for(;++t<=e.length;)void 0===i?e[t]&&"data"===e[t][1].type&&(i=t,t++):e[t]&&"data"===e[t][1].type||(t!==i+2&&(e[i][1].end=e[t-1][1].end,e.splice(i+2,t-i-2),t=i+2),i=void 0);return r?r(e,n):e}}function resolveAllLineSuffixes(r,o){let c=0;for(;++c<=r.length;)if((c===r.length||"lineEnding"===r[c][1].type)&&"data"===r[c-1][1].type){const s=r[c-1][1];var a,u=o.sliceStream(s);let e=u.length,n=-1,t=0,i;for(;e--;){const l=u[e];if("string"==typeof l){for(n=l.length;32===l.charCodeAt(n-1);)t++,n--;if(n)break;n=-1}else if(-2===l)i=!0,t++;else if(-1!==l){e++;break}}t&&(a={type:c===r.length||i||t<2?"lineSuffix":"hardBreakTrailing",start:{line:s.end.line,column:s.end.column-t,offset:s.end.offset-t,_index:s.start._index+e,_bufferIndex:e?n:s.start._bufferIndex+n},end:Object.assign({},s.end)},s.end=Object.assign({},a.start),s.start.offset===s.end.offset?Object.assign(s,a):(r.splice(c,0,["enter",a,o],["exit",a,o]),c+=2)),c++}return r}function createTokenizer(e,i,n){let p=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const t={},r=[];let o=[],h=[];const m={consume:function(e){markdownLineEnding(e)?(p.line++,p.column=1,p.offset+=-3===e?2:1,x()):-1!==e&&(p.column++,p.offset++);p._bufferIndex<0?p._index++:(p._bufferIndex++,p._bufferIndex===o[p._index].length&&(p._bufferIndex=-1,p._index++));k.previous=e},enter:function(e,n){const t=n||{};return t.type=e,t.start=g(),k.events.push(["enter",t,k]),h.push(t),t},exit:function(e){const n=h.pop();return n.end=g(),k.events.push(["exit",n,k]),n},attempt:l(function(e,n){d(e,n.from)}),check:l(s),interrupt:l(s,{interrupt:!0})},k={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:a,sliceSerialize:function(e,n){return serializeChunks(a(e),n)},now:g,defineSkip:function(e){t[e.line]=e.column,x()},write:function(e){var n;for(o=push(o,e);p._index<o.length;){const t=o[p._index];if("string"==typeof t)for(n=p._index,p._bufferIndex<0&&(p._bufferIndex=0);p._index===n&&p._bufferIndex<t.length;)u(t.charCodeAt(p._bufferIndex));else u(t)}return null===o[o.length-1]?(d(i,0),k.events=resolveAll(r,k.events,k),k.events):[]}};let c=i.tokenize.call(k,m);return i.resolveAll&&r.push(i),k;function a(e){return sliceChunks(o,e)}function g(){return Object.assign({},p)}function u(e){c=c(e)}function s(e,n){n.restore()}function l(d,f){return function(e,n,t){let i,r,o,c;return Array.isArray(e)?a(e):"tokenize"in e?a([e]):function(i){return function(e){var n=null!==e&&i[e],t=null!==e&&i.null,n=[...Array.isArray(n)?n:n?[n]:[],...Array.isArray(t)?t:t?[t]:[]];return a(n)(e)}}(e);function a(e){return i=e,(r=0)===e.length?t:u(e[r])}function u(n){return function(e){c=function(){const e=g(),n=k.previous,t=k.currentConstruct,i=k.events.length,r=Array.from(h);return{restore:function(){p=e,k.previous=n,k.currentConstruct=t,k.events.length=i,h=r,x()},from:i}}(),(o=n).partial||(k.currentConstruct=n);if(n.name&&k.parser.constructs.disable.null.includes(n.name))return l();return n.tokenize.call(f?Object.assign(Object.create(k),f):k,m,s,l)(e)}}function s(e){return d(o,c),n}function l(e){return c.restore(),++r<i.length?u(i[r]):t}}}function d(e,n){e.resolveAll&&!r.includes(e)&&r.push(e),e.resolve&&splice(k.events,n,k.events.length-n,e.resolve(k.events.slice(n),k)),e.resolveTo&&(k.events=e.resolveTo(k.events,k))}function x(){p.line in t&&p.column<2&&(p.column=t[p.line],p.offset+=t[p.line]-1)}}function sliceChunks(e,n){var t=n.start._index,i=n.start._bufferIndex,r=n.end._index,n=n.end._bufferIndex;let o;return t===r?o=[e[t].slice(i,n)]:(o=e.slice(t,r),-1<i&&(o[0]=o[0].slice(i)),0<n&&o.push(e[r].slice(0,n))),o}function serializeChunks(n,t){let i=-1;const r=[];let o;for(;++i<n.length;){var c=n[i];let e;if("string"==typeof c)e=c;else switch(c){case-5:e="\r";break;case-4:e="\n";break;case-3:e="\r\n";break;case-2:e=t?" ":"\t";break;case-1:if(!t&&o)continue;e=" ";break;default:e=String.fromCharCode(c)}o=-2===c,r.push(e)}return r.join("")}const document$1={[42]:list,43:list,45:list,48:list,49:list,50:list,51:list,52:list,53:list,54:list,55:list,56:list,57:list,62:blockQuote},contentInitial={[91]:definition},flowInitial={"-2":codeIndented,"-1":codeIndented,[32]:codeIndented},flow={[35]:headingAtx,42:thematicBreak,45:[setextUnderline,thematicBreak],60:htmlFlow,61:setextUnderline,95:thematicBreak,96:codeFenced,126:codeFenced},string={[38]:characterReference,92:characterEscape},text={"-5":lineEnding,"-4":lineEnding,"-3":lineEnding,[33]:labelStartImage,38:characterReference,42:attention,60:[autolink,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:attentionMarkers,contentInitial:contentInitial,disable:disable,document:document$1,flow:flow,flowInitial:flowInitial,insideSpan:insideSpan,string:string,text:text},Symbol.toStringTag,{value:"Module"}));function parse(e={}){const t={defined:[],lazy:{},constructs:combineExtensions([defaultConstructs].concat(e.extensions||[])),content:n(content$1),document:n(document$2),flow:n(flow$1),string:n(string$1),text:n(text$1)};return t;function n(n){return function(e){return createTokenizer(t,n,e)}}}const search=/[\0\t\n\r]/g;function preprocess(){let s=1,l="",d=!0,f;return function(e,n,t){const i=[];let r,o,c,a,u;e=l+e.toString(n),c=0,l="",d&&(65279===e.charCodeAt(0)&&c++,d=void 0);for(;c<e.length;){if(search.lastIndex=c,r=search.exec(e),a=r&&void 0!==r.index?r.index:e.length,u=e.charCodeAt(a),!r){l=e.slice(c);break}if(10===u&&c===a&&f)i.push(-3),f=void 0;else switch(f&&(i.push(-5),f=void 0),c<a&&(i.push(e.slice(c,a)),s+=a-c),u){case 0:i.push(65533),s++;break;case 9:for(o=4*Math.ceil(s/4),i.push(-2);s++<o;)i.push(-1);break;case 10:i.push(-4),s=1;break;default:f=!0,s=1}c=a+1}t&&(f&&i.push(-5),l&&i.push(l),i.push(null));return i}}function postprocess(e){for(;!subtokenize(e););return e}function decodeNumericCharacterReference(e,n){e=Number.parseInt(e,n);return e<9||11===e||13<e&&e<32||126<e&&e<160||55295<e&&e<57344||64975<e&&e<65008||65535==(65535&e)||65534==(65535&e)||1114111<e?"ï¿½":String.fromCharCode(e)}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(e){return e.replace(characterEscapeOrReference,decode)}function decode(e,n,t){return n||(35===t.charCodeAt(0)?(n=t.charCodeAt(1),decodeNumericCharacterReference(t.slice((n=120===n||88===n)?2:1),n?16:10)):decodeNamedCharacterReference(t)||e)}function stringifyPosition(e){return e&&"object"==typeof e?"position"in e||"type"in e?position(e.position):"start"in e||"end"in e?position(e):"line"in e||"column"in e?point$1(e):"":""}function point$1(e){return index(e&&e.line)+":"+index(e&&e.column)}function position(e){return point$1(e&&e.start)+"-"+point$1(e&&e.end)}function index(e){return e&&"number"==typeof e?e:1}const own={}.hasOwnProperty,fromMarkdown=function(e,n,t){return"string"!=typeof n&&(t=n,n=void 0),compiler(t)(postprocess(parse(t).document().write(preprocess()(e,n,!0))))};function compiler(e){const s={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:n(y),autolinkProtocol:i,autolinkEmail:i,atxHeading:n(k),blockQuote:n(function(){return{type:"blockquote",children:[]}}),characterEscape:i,characterReference:i,codeFenced:n(u),codeFencedFenceInfo:f,codeFencedFenceMeta:f,codeIndented:n(u,f),codeText:n(function(){return{type:"inlineCode",value:""}},f),codeTextData:i,data:i,codeFlowValue:i,definition:n(function(){return{type:"definition",identifier:"",label:null,title:null,url:""}}),definitionDestinationString:f,definitionLabelString:f,definitionTitleString:f,emphasis:n(function(){return{type:"emphasis",children:[]}}),hardBreakEscape:n(g),hardBreakTrailing:n(g),htmlFlow:n(x,f),htmlFlowData:i,htmlText:n(x,f),htmlTextData:i,image:n(function(){return{type:"image",title:null,url:"",alt:null}}),label:f,link:n(y),listItem:n(function(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}),listItemValue:function(e){if(o.expectingFirstListItemValue){const n=this.stack[this.stack.length-2];n.start=Number.parseInt(this.sliceSerialize(e),10),l("expectingFirstListItemValue")}},listOrdered:n(S,function(){l("expectingFirstListItemValue",!0)}),listUnordered:n(S),paragraph:n(function(){return{type:"paragraph",children:[]}}),reference:function(){l("referenceType","collapsed")},referenceString:f,resourceDestinationString:f,resourceTitleString:f,setextHeading:n(k),strong:n(function(){return{type:"strong",children:[]}}),thematicBreak:n(function(){return{type:"thematicBreak"}})},exit:{atxHeading:t(),atxHeadingSequence:function(e){const n=this.stack[this.stack.length-1];n.depth||(e=this.sliceSerialize(e).length,n.depth=e)},autolink:t(),autolinkEmail:function(e){r.call(this,e);const n=this.stack[this.stack.length-1];n.url="mailto:"+this.sliceSerialize(e)},autolinkProtocol:function(e){r.call(this,e);const n=this.stack[this.stack.length-1];n.url=this.sliceSerialize(e)},blockQuote:t(),characterEscapeValue:r,characterReferenceMarkerHexadecimal:a,characterReferenceMarkerNumeric:a,characterReferenceValue:function(e){var n=this.sliceSerialize(e),t=o.characterReferenceType;let i;t?(i=decodeNumericCharacterReference(n,"characterReferenceMarkerNumeric"===t?10:16),l("characterReferenceType")):(t=decodeNamedCharacterReference(n),i=t);const r=this.stack.pop();r.value+=i,r.position.end=point(e.end)},codeFenced:t(function(){const e=this.resume(),n=this.stack[this.stack.length-1];n.value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),l("flowCodeInside")}),codeFencedFence:function(){o.flowCodeInside||(this.buffer(),l("flowCodeInside",!0))},codeFencedFenceInfo:function(){const e=this.resume(),n=this.stack[this.stack.length-1];n.lang=e},codeFencedFenceMeta:function(){const e=this.resume(),n=this.stack[this.stack.length-1];n.meta=e},codeFlowValue:r,codeIndented:t(function(){const e=this.resume(),n=this.stack[this.stack.length-1];n.value=e.replace(/(\r?\n|\r)$/g,"")}),codeText:t(function(){const e=this.resume(),n=this.stack[this.stack.length-1];n.value=e}),codeTextData:r,data:r,definition:t(),definitionDestinationString:function(){const e=this.resume(),n=this.stack[this.stack.length-1];n.url=e},definitionLabelString:function(e){const n=this.resume(),t=this.stack[this.stack.length-1];t.label=n,t.identifier=normalizeIdentifier(this.sliceSerialize(e)).toLowerCase()},definitionTitleString:function(){const e=this.resume(),n=this.stack[this.stack.length-1];n.title=e},emphasis:t(),hardBreakEscape:t(c),hardBreakTrailing:t(c),htmlFlow:t(function(){const e=this.resume(),n=this.stack[this.stack.length-1];n.value=e}),htmlFlowData:r,htmlText:t(function(){const e=this.resume(),n=this.stack[this.stack.length-1];n.value=e}),htmlTextData:r,image:t(function(){const e=this.stack[this.stack.length-1];{var n;o.inReference?(n=o.referenceType||"shortcut",e.type+="Reference",e.referenceType=n,delete e.url,delete e.title):(delete e.identifier,delete e.label)}l("referenceType")}),label:function(){const e=this.stack[this.stack.length-1],n=this.resume(),t=this.stack[this.stack.length-1];{var i;l("inReference",!0),"link"===t.type?(i=e.children,t.children=i):t.alt=n}},labelText:function(e){const n=this.sliceSerialize(e),t=this.stack[this.stack.length-2];t.label=decodeString(n),t.identifier=normalizeIdentifier(n).toLowerCase()},lineEnding:function(e){var n=this.stack[this.stack.length-1];if(o.atHardBreak){const t=n.children[n.children.length-1];t.position.end=point(e.end),l("atHardBreak")}else!o.setextHeadingSlurpLineEnding&&s.canContainEols.includes(n.type)&&(i.call(this,e),r.call(this,e))},link:t(function(){const e=this.stack[this.stack.length-1];{var n;o.inReference?(n=o.referenceType||"shortcut",e.type+="Reference",e.referenceType=n,delete e.url,delete e.title):(delete e.identifier,delete e.label)}l("referenceType")}),listItem:t(),listOrdered:t(),listUnordered:t(),paragraph:t(),referenceString:function(e){const n=this.resume(),t=this.stack[this.stack.length-1];t.label=n,t.identifier=normalizeIdentifier(this.sliceSerialize(e)).toLowerCase(),l("referenceType","full")},resourceDestinationString:function(){const e=this.resume(),n=this.stack[this.stack.length-1];n.url=e},resourceTitleString:function(){const e=this.resume(),n=this.stack[this.stack.length-1];n.title=e},resource:function(){l("inReference")},setextHeading:t(function(){l("setextHeadingSlurpLineEnding")}),setextHeadingLineSequence:function(e){const n=this.stack[this.stack.length-1];n.depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2},setextHeadingText:function(){l("setextHeadingSlurpLineEnding",!0)},strong:t(),thematicBreak:t()}},o=(configure(s,(e||{}).mdastExtensions||[]),{});return function(e){let n={type:"root",children:[]};const t={stack:[n],tokenStack:[],config:s,enter:p,exit:h,buffer:f,resume:m,setData:l,getData:d},i=[];let r=-1;for(;++r<e.length;){var o;"listOrdered"!==e[r][1].type&&"listUnordered"!==e[r][1].type||("enter"===e[r][0]?i.push(r):(o=i.pop(),r=function(n,e,t){let i=e-1,r=-1,o=!1,c,a,u,s;for(;++i<=t;){var l=n[i];if("listUnordered"===l[1].type||"listOrdered"===l[1].type||"blockQuote"===l[1].type?("enter"===l[0]?r++:r--,s=void 0):"lineEndingBlank"===l[1].type?"enter"===l[0]&&(!c||s||r||u||(u=i),s=void 0):"linePrefix"!==l[1].type&&"listItemValue"!==l[1].type&&"listItemMarker"!==l[1].type&&"listItemPrefix"!==l[1].type&&"listItemPrefixWhitespace"!==l[1].type&&(s=void 0),!r&&"enter"===l[0]&&"listItemPrefix"===l[1].type||-1===r&&"exit"===l[0]&&("listUnordered"===l[1].type||"listOrdered"===l[1].type)){if(c){let e=i;for(a=void 0;e--;){const d=n[e];if("lineEnding"===d[1].type||"lineEndingBlank"===d[1].type)"exit"!==d[0]&&(a&&(n[a][1].type="lineEndingBlank",o=!0),d[1].type="lineEnding",a=e);else if("linePrefix"!==d[1].type&&"blockQuotePrefix"!==d[1].type&&"blockQuotePrefixWhitespace"!==d[1].type&&"blockQuoteMarker"!==d[1].type&&"listItemIndent"!==d[1].type)break}u&&(!a||u<a)&&(c._spread=!0),c.end=Object.assign({},a?n[a][1].start:l[1].end),n.splice(a||i,0,["exit",c,l[2]]),i++,t++}"listItemPrefix"===l[1].type&&(c={type:"listItem",_spread:!1,start:Object.assign({},l[1].start)},n.splice(i,0,["enter",c,l[2]]),i++,t++,u=void 0,s=!0)}}return n[e][1]._spread=o,t}(e,o,r)))}r=-1;for(;++r<e.length;){const a=s[e[r][0]];own.call(a,e[r][1].type)&&a[e[r][1].type].call(Object.assign({sliceSerialize:e[r][2].sliceSerialize},t),e[r][1])}if(0<t.tokenStack.length){var c=t.tokenStack[t.tokenStack.length-1];const u=c[1]||defaultOnError;u.call(t,void 0,c[0])}n.position={start:point(0<e.length?e[0][1].start:{line:1,column:1,offset:0}),end:point(0<e.length?e[e.length-2][1].end:{line:1,column:1,offset:0})},r=-1;for(;++r<s.transforms.length;)n=s.transforms[r](n)||n;return n};function l(e,n){o[e]=n}function d(e){return o[e]}function n(n,t){return function(e){p.call(this,n(e),e),t&&t.call(this,e)}}function f(){this.stack.push({type:"fragment",children:[]})}function p(e,n,t){const i=this.stack[this.stack.length-1];return i.children.push(e),this.stack.push(e),this.tokenStack.push([n,t]),e.position={start:point(n.start)},e}function t(n){return function(e){n&&n.call(this,e);h.call(this,e)}}function h(e,n){const t=this.stack.pop();var i=this.tokenStack.pop();if(!i)throw new Error("Cannot close `"+e.type+"` ("+stringifyPosition({start:e.start,end:e.end})+"): itâs not open");if(i[0].type!==e.type)if(n)n.call(this,e,i[0]);else{const r=i[1]||defaultOnError;r.call(this,e,i[0])}return t.position.end=point(e.end),t}function m(){return toString(this.stack.pop())}function i(e){const n=this.stack[this.stack.length-1];let t=n.children[n.children.length-1];t&&"text"===t.type||((t={type:"text",value:""}).position={start:point(e.start)},n.children.push(t)),this.stack.push(t)}function r(e){const n=this.stack.pop();n.value+=this.sliceSerialize(e),n.position.end=point(e.end)}function c(){l("atHardBreak",!0)}function a(e){l("characterReferenceType",e.type)}function u(){return{type:"code",lang:null,meta:null,value:""}}function k(){return{type:"heading",depth:void 0,children:[]}}function g(){return{type:"break"}}function x(){return{type:"html",value:""}}function y(){return{type:"link",title:null,url:"",children:[]}}function S(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}}function point(e){return{line:e.line,column:e.column,offset:e.offset}}function configure(e,n){let t=-1;for(;++t<n.length;){var i=n[t];(Array.isArray(i)?configure:extension)(e,i)}}function extension(e,n){let t;for(t in n){var i,r;own.call(n,t)&&("canContainEols"===t?(i=n[t])&&e[t].push(...i):"transforms"===t?(i=n[t])&&e[t].push(...i):"enter"!==t&&"exit"!==t||(r=n[t])&&Object.assign(e[t],r))}}function defaultOnError(e,n){throw e?new Error("Cannot close `"+e.type+"` ("+stringifyPosition({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+stringifyPosition({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+stringifyPosition({start:n.start,end:n.end})+") is still open")}function preprocessMarkdown(e){e=e.replace(/\n{2,}/g,"\n");return dedent(e)}function markdownToLines(e){e=preprocessMarkdown(e);const n=fromMarkdown(e)["children"],r=[[]];let o=0;return n.forEach(e=>{"paragraph"===e.type&&e.children.forEach(e=>{!function n(t,i="normal"){if("text"===t.type){const e=t.value.split("\n");e.forEach((e,n)=>{0!==n&&(o++,r.push([])),e.split(" ").forEach(e=>{e&&r[o].push({content:e,type:i})})})}else"strong"!==t.type&&"emphasis"!==t.type||t.children.forEach(e=>{n(e,t.type)})}(e)})}),r}function markdownToHTML(e){const n=fromMarkdown(e)["children"];return n.map(function e(n){return"text"===n.type?n.value.replace(/\n/g,"<br/>"):"strong"===n.type?`<strong>${n.children.map(e).join("")}</strong>`:"emphasis"===n.type?`<em>${n.children.map(e).join("")}</em>`:"paragraph"===n.type?`<p>${n.children.map(e).join("")}</p>`:"Unsupported markdown: "+n.type}).join("")}function splitTextToChars(e){return Intl.Segmenter?[...(new Intl.Segmenter).segment(e)].map(e=>e.segment):[...e]}function splitWordToFitWidth(e,n){return splitWordToFitWidthRecursion(e,[],splitTextToChars(n.content),n.type)}function splitWordToFitWidthRecursion(e,n,t,i){if(0===t.length)return[{content:n.join(""),type:i},{content:"",type:i}];var[r,...o]=t;const c=[...n,r];return e([{content:c.join(""),type:i}])?splitWordToFitWidthRecursion(e,c,o,i):(0===n.length&&r&&(n.push(r),t.shift()),[{content:n.join(""),type:i},{content:t.join(""),type:i}])}function splitLineToFitWidth(e,n){if(e.some(({content:e})=>e.includes("\n")))throw new Error("splitLineToFitWidth does not support newlines in the line");return splitLineToFitWidthRecursion(e,n)}function splitLineToFitWidthRecursion(e,n,t=[],i=[]){if(0===e.length)return 0<i.length&&t.push(i),0<t.length?t:[];let r="";" "===e[0].content&&(r=" ",e.shift());var o=e.shift()??{content:" ",type:"normal"};const c=[...i];return""!==r&&c.push({content:r,type:"normal"}),c.push(o),n(c)?splitLineToFitWidthRecursion(e,n,t,c):(0<i.length?(t.push(i),e.unshift(o)):o.content&&([i,o]=splitWordToFitWidth(n,o),t.push([i]),o.content&&e.unshift(o)),splitLineToFitWidthRecursion(e,n,t))}function applyStyle(e,n){n&&e.attr("style",n)}function addHtmlSpan(e,n,t,i,r=!1){const o=e.append("foreignObject"),c=o.append("xhtml:div");var e=n.label,a=n.isNode?"nodeLabel":"edgeLabel";c.html(`
    <span class="${a} ${i}" `+(n.labelStyle?'style="'+n.labelStyle+'"':"")+">"+e+"</span>"),applyStyle(c,n.labelStyle),c.style("display","table-cell"),c.style("white-space","nowrap"),c.style("max-width",t+"px"),c.attr("xmlns","http://www.w3.org/1999/xhtml"),r&&c.attr("class","labelBkg");let u=c.node().getBoundingClientRect();return u.width===t&&(c.style("display","table"),c.style("white-space","break-spaces"),c.style("width",t+"px"),u=c.node().getBoundingClientRect()),o.style("width",u.width),o.style("height",u.height),o.node()}function createTspan(e,n,t){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",n*t-.1+"em").attr("dy",t+"em")}function computeWidthOfText(e,n,t){const i=e.append("text"),r=createTspan(i,1,n);updateTextContentAndStyles(r,t);e=r.node().getComputedTextLength();return i.remove(),e}function createFormattedText(n,e,t,i=!1){const r=e.append("g"),o=r.insert("rect").attr("class","background"),c=r.append("text").attr("y","-10.1");let a=0;for(const s of t){var u=e=>computeWidthOfText(r,1.1,e)<=n;for(const l of u(s)?[s]:splitLineToFitWidth(s,u))updateTextContentAndStyles(createTspan(c,a,1.1),l),a++}return i?(e=c.node().getBBox(),o.attr("x",-2).attr("y",-2).attr("width",e.width+4).attr("height",e.height+4),r.node()):c.node()}function updateTextContentAndStyles(i,e){i.text(""),e.forEach((e,n)=>{const t=i.append("tspan").attr("font-style","emphasis"===e.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===e.type?"bold":"normal");0===n?t.text(e.content):t.text(" "+e.content)})}const createText=(e,n="",{style:t="",isTitle:i=!1,classes:r="",useHtmlLabels:o=!0,isNode:c=!0,width:a=200,addSvgBackground:u=!1}={})=>{return log.info("createText",n,t,i,r,o,c,u),o?(i=markdownToHTML(n),addHtmlSpan(e,{isNode:c,label:decodeEntities(i).replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`),labelStyle:t.replace("fill:","color:")},a,r,u)):createFormattedText(a,e,markdownToLines(n),u)};export{createText as c};